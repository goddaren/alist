var __defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,r)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__spreadValues=(e,t)=>{for(var r in t||(t={}))__hasOwnProp.call(t,r)&&__defNormalProp(e,r,t[r]);if(__getOwnPropSymbols)for(var r of __getOwnPropSymbols(t))__propIsEnum.call(t,r)&&__defNormalProp(e,r,t[r]);return e};import{Z as commonjsGlobal,r as react,Y as reactDom,a4 as getAugmentedNamespace,a5 as propTypes,R as React$1,a6 as PropTypes,k as useColorModeValue,h as useTranslation,t as Box,C as Center,H as Heading,n as Icon,I as Image$1,S as Spinner,u as useLocation,a7 as commonjsRequire,a8 as _objectWithoutPropertiesLoose$3,a9 as _setPrototypeOf$2,aa as _defineProperty$6,ab as _extends$3,j as useToast,V as VStack,l as HStack,F as Flex,v as Text,P as Input,ac as chakra,a0 as useBreakpointValue,_ as getDefaultExportFromCjs,x as Button}from"./vendor.300ed9b7.js";import{I as IContext,u as useDownLink,d as useEncrypt,i as instance,w as IoIosArrowUp,x as IoIosArrowBack,y as IoIosArrowDown,z as IoIosArrowForward,_ as __glob_8_2}from"./index.09572d96.js";import{g as getIcon}from"./icon.248b8277.js";import{_ as __vitePreload}from"./index.650959c9.js";import{u as useTitle}from"./useTitle.0be7584e.js";import"./index.esm.d1ca93b9.js";var classnames={exports:{}},module2;
/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/module2=classnames,function(){var e={}.hasOwnProperty;function t(){for(var r=[],n=0;n<arguments.length;n++){var o=arguments[n];if(o){var i=typeof o;if("string"===i||"number"===i)r.push(o);else if(Array.isArray(o)){if(o.length){var a=t.apply(null,o);a&&r.push(a)}}else if("object"===i)if(o.toString===Object.prototype.toString)for(var s in o)e.call(o,s)&&o[s]&&r.push(s);else r.push(o.toString())}}return r.join(" ")}module2.exports?(t.default=t,module2.exports=t):window.classNames=t}();var cls=classnames.exports,download$1={exports:{}};download$1.exports=function e(t,r,n){var o,i,a=window,s="application/octet-stream",l=n||s,c=t,u=!r&&!n&&c,d=document.createElement("a"),p=function(e){return String(e)},f=a.Blob||a.MozBlob||a.WebKitBlob||p,h=r||"download";if(f=f.call?f.bind(a):Blob,"true"===String(this)&&(l=(c=[c,l])[0],c=c[1]),u&&u.length<2048&&(h=u.split("/").pop().split("?")[0],d.href=u,-1!==d.href.indexOf(u))){var m=new XMLHttpRequest;return m.open("GET",u,!0),m.responseType="blob",m.onload=function(t){e(t.target.response,h,s)},setTimeout((function(){m.send()}),0),m}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(c)){if(!(c.length>2096103.424&&f!==p))return navigator.msSaveBlob?navigator.msSaveBlob(b(c),h):_(c);l=(c=b(c)).type||s}else if(/([\x80-\xff])/.test(c)){for(var g=0,y=new Uint8Array(c.length),v=y.length;g<v;++g)y[g]=c.charCodeAt(g);c=new f([y],{type:l})}function b(e){for(var t=e.split(/[:;,]/),r=t[1],n=("base64"==t[2]?atob:decodeURIComponent)(t.pop()),o=n.length,i=0,a=new Uint8Array(o);i<o;++i)a[i]=n.charCodeAt(i);return new f([a],{type:r})}function _(e,t){if("download"in d)return d.href=e,d.setAttribute("download",h),d.className="download-js-link",d.innerHTML="downloading...",d.style.display="none",document.body.appendChild(d),setTimeout((function(){d.click(),document.body.removeChild(d),!0===t&&setTimeout((function(){a.URL.revokeObjectURL(d.href)}),250)}),66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,s)),window.open(e)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0;var r=document.createElement("iframe");document.body.appendChild(r),!t&&/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,s)),r.src=e,setTimeout((function(){document.body.removeChild(r)}),333)}if(o=c instanceof f?c:new f([c],{type:l}),navigator.msSaveBlob)return navigator.msSaveBlob(o,h);if(a.URL)_(a.URL.createObjectURL(o),!0);else{if("string"==typeof o||o.constructor===p)try{return _("data:"+l+";base64,"+a.btoa(o))}catch(S){return _("data:"+l+","+encodeURIComponent(o))}(i=new FileReader).onload=function(e){_(this.result)},i.readAsDataURL(o)}return!0};var download=download$1.exports,isMobile$1={exports:{}};isMobile$1.exports=isMobile,isMobile$1.exports.isMobile=isMobile,isMobile$1.exports.default=isMobile;var mobileRE=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,tabletRE=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function isMobile(e){e||(e={});var t=e.ua;if(t||"undefined"==typeof navigator||(t=navigator.userAgent),t&&t.headers&&"string"==typeof t.headers["user-agent"]&&(t=t.headers["user-agent"]),"string"!=typeof t)return!1;var r=e.tablet?tabletRE.test(t):mobileRE.test(t);return!r&&e.tablet&&e.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==t.indexOf("Macintosh")&&-1!==t.indexOf("Safari")&&(r=!0),r}var getIsMobile=isMobile$1.exports,Slider$1={},interopRequireWildcard={exports:{}},_typeof$5={exports:{}};!function(e){function t(r){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=t=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),t(r)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0}(_typeof$5),function(e){var t=_typeof$5.exports.default;function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}e.exports=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==t(e)&&"function"!=typeof e)return{default:e};var o=r(n);if(o&&o.has(e))return o.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var l=a?Object.getOwnPropertyDescriptor(e,s):null;l&&(l.get||l.set)?Object.defineProperty(i,s,l):i[s]=e[s]}return i.default=e,o&&o.set(e,i),i},e.exports.default=e.exports,e.exports.__esModule=!0}(interopRequireWildcard);var interopRequireDefault$1={exports:{}};!function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.default=e.exports,e.exports.__esModule=!0}(interopRequireDefault$1);var objectSpread2={exports:{}},defineProperty={exports:{}};!function(e){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.default=e.exports,e.exports.__esModule=!0}(defineProperty),function(e){var t=defineProperty.exports;function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}e.exports=function(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?r(Object(o),!0).forEach((function(r){t(e,r,o[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e},e.exports.default=e.exports,e.exports.__esModule=!0}(objectSpread2);var classCallCheck={exports:{}};!function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0}(classCallCheck);var createClass={exports:{}};!function(e){function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e},e.exports.default=e.exports,e.exports.__esModule=!0}(createClass);var inherits={exports:{}},setPrototypeOf={exports:{}};!function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,t(r,n)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0}(setPrototypeOf),function(e){var t=setPrototypeOf.exports;e.exports=function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&t(e,r)},e.exports.default=e.exports,e.exports.__esModule=!0}(inherits);var createSuper={exports:{}},getPrototypeOf={exports:{}};!function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.default=e.exports,e.exports.__esModule=!0,t(r)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0}(getPrototypeOf);var isNativeReflectConstruct={exports:{}};!function(e){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.default=e.exports,e.exports.__esModule=!0}(isNativeReflectConstruct);var possibleConstructorReturn={exports:{}},assertThisInitialized={exports:{}};!function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.default=e.exports,e.exports.__esModule=!0}(assertThisInitialized),function(e){var t=_typeof$5.exports.default,r=assertThisInitialized.exports;e.exports=function(e,n){if(n&&("object"===t(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return r(e)},e.exports.default=e.exports,e.exports.__esModule=!0}(possibleConstructorReturn),function(e){var t=getPrototypeOf.exports,r=isNativeReflectConstruct.exports,n=possibleConstructorReturn.exports;e.exports=function(e){var o=r();return function(){var r,i=t(e);if(o){var a=t(this).constructor;r=Reflect.construct(i,arguments,a)}else r=i.apply(this,arguments);return n(this,r)}},e.exports.default=e.exports,e.exports.__esModule=!0}(createSuper);var warning$1={};Object.defineProperty(warning$1,"__esModule",{value:!0}),warning$1.warning=warning,warning$1.note=note,warning$1.resetWarned=resetWarned,warning$1.call=call,warning$1.warningOnce=warningOnce,warning$1.noteOnce=noteOnce,warning$1.default=void 0;var warned={};function warning(e,t){}function note(e,t){}function resetWarned(){warned={}}function call(e,t,r){t||warned[r]||(e(!1,r),warned[r]=!0)}function warningOnce(e,t){call(warning,e,t)}function noteOnce(e,t){call(note,e,t)}var _default$6=warningOnce;warning$1.default=_default$6;var Track$1={},_interopRequireDefault$8=interopRequireDefault$1.exports;Object.defineProperty(Track$1,"__esModule",{value:!0}),Track$1.default=void 0;var _objectSpread2$5=_interopRequireDefault$8(objectSpread2.exports),_defineProperty2$4=_interopRequireDefault$8(defineProperty.exports),_react$5=_interopRequireDefault$8(react.exports),Track=function(e){var t,r,n=e.className,o=e.included,i=e.vertical,a=e.style,s=e.length,l=e.offset,c=e.reverse;s<0&&(c=!c,s=Math.abs(s),l=100-l);var u=i?(t={},(0,_defineProperty2$4.default)(t,c?"top":"bottom","".concat(l,"%")),(0,_defineProperty2$4.default)(t,c?"bottom":"top","auto"),(0,_defineProperty2$4.default)(t,"height","".concat(s,"%")),t):(r={},(0,_defineProperty2$4.default)(r,c?"right":"left","".concat(l,"%")),(0,_defineProperty2$4.default)(r,c?"left":"right","auto"),(0,_defineProperty2$4.default)(r,"width","".concat(s,"%")),r),d=(0,_objectSpread2$5.default)((0,_objectSpread2$5.default)({},a),u);return o?_react$5.default.createElement("div",{className:n,style:d}):null},_default$5=Track;Track$1.default=_default$5;var createSlider$1={},_extends$2={exports:{}};!function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},e.exports.default=e.exports,e.exports.__esModule=!0,t.apply(this,arguments)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0}(_extends$2);var objectWithoutProperties={exports:{}},objectWithoutPropertiesLoose={exports:{}};!function(e){e.exports=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o},e.exports.default=e.exports,e.exports.__esModule=!0}(objectWithoutPropertiesLoose),function(e){var t=objectWithoutPropertiesLoose.exports;e.exports=function(e,r){if(null==e)return{};var n,o,i=t(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i},e.exports.default=e.exports,e.exports.__esModule=!0}(objectWithoutProperties);var toConsumableArray={exports:{}},arrayWithoutHoles={exports:{}},arrayLikeToArray={exports:{}};!function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.default=e.exports,e.exports.__esModule=!0}(arrayLikeToArray),function(e){var t=arrayLikeToArray.exports;e.exports=function(e){if(Array.isArray(e))return t(e)},e.exports.default=e.exports,e.exports.__esModule=!0}(arrayWithoutHoles);var iterableToArray={exports:{}};!function(e){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.default=e.exports,e.exports.__esModule=!0}(iterableToArray);var unsupportedIterableToArray={exports:{}};!function(e){var t=arrayLikeToArray.exports;e.exports=function(e,r){if(e){if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0}(unsupportedIterableToArray);var nonIterableSpread={exports:{}};!function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0}(nonIterableSpread),function(e){var t=arrayWithoutHoles.exports,r=iterableToArray.exports,n=unsupportedIterableToArray.exports,o=nonIterableSpread.exports;e.exports=function(e){return t(e)||r(e)||n(e)||o()},e.exports.default=e.exports,e.exports.__esModule=!0}(toConsumableArray);var get={exports:{}},superPropBase={exports:{}};!function(e){var t=getPrototypeOf.exports;e.exports=function(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&null!==(e=t(e)););return e},e.exports.default=e.exports,e.exports.__esModule=!0}(superPropBase),function(e){var t=superPropBase.exports;function r(n,o,i){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=r=Reflect.get,e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=r=function(e,r,n){var o=t(e,r);if(o){var i=Object.getOwnPropertyDescriptor(o,r);return i.get?i.get.call(n):i.value}},e.exports.default=e.exports,e.exports.__esModule=!0),r(n,o,i||n)}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0}(get);var addEventListener={},interopRequireDefault={exports:{}};!function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.default=e.exports,e.exports.__esModule=!0}(interopRequireDefault);var _interopRequireDefault$7=interopRequireDefault.exports;Object.defineProperty(addEventListener,"__esModule",{value:!0}),addEventListener.default=addEventListenerWrap;var _reactDom$2=_interopRequireDefault$7(reactDom.exports);function addEventListenerWrap(e,t,r,n){var o=_reactDom$2.default.unstable_batchedUpdates?function(e){_reactDom$2.default.unstable_batchedUpdates(r,e)}:r;return e.addEventListener&&e.addEventListener(t,o,n),{remove:function(){e.removeEventListener&&e.removeEventListener(t,o)}}}var Steps$1={},_interopRequireDefault$6=interopRequireDefault$1.exports;Object.defineProperty(Steps$1,"__esModule",{value:!0}),Steps$1.default=void 0;var _defineProperty2$3=_interopRequireDefault$6(defineProperty.exports),_objectSpread4=_interopRequireDefault$6(objectSpread2.exports),_react$4=_interopRequireDefault$6(react.exports),_classnames$3=_interopRequireDefault$6(classnames.exports),_warning$2=_interopRequireDefault$6(warning$1),calcPoints=function(e,t,r,n,o,i){(0,_warning$2.default)(!r||n>0,"`Slider[step]` should be a positive number in order to make Slider[dots] work.");var a=Object.keys(t).map(parseFloat).sort((function(e,t){return e-t}));if(r&&n)for(var s=o;s<=i;s+=n)-1===a.indexOf(s)&&a.push(s);return a},Steps=function(e){var t=e.prefixCls,r=e.vertical,n=e.reverse,o=e.marks,i=e.dots,a=e.step,s=e.included,l=e.lowerBound,c=e.upperBound,u=e.max,d=e.min,p=e.dotStyle,f=e.activeDotStyle,h=u-d,m=calcPoints(r,o,i,a,d,u).map((function(e){var o,i="".concat(Math.abs(e-d)/h*100,"%"),a=!s&&e===c||s&&e<=c&&e>=l,u=r?(0,_objectSpread4.default)((0,_objectSpread4.default)({},p),{},(0,_defineProperty2$3.default)({},n?"top":"bottom",i)):(0,_objectSpread4.default)((0,_objectSpread4.default)({},p),{},(0,_defineProperty2$3.default)({},n?"right":"left",i));a&&(u=(0,_objectSpread4.default)((0,_objectSpread4.default)({},u),f));var m=(0,_classnames$3.default)((o={},(0,_defineProperty2$3.default)(o,"".concat(t,"-dot"),!0),(0,_defineProperty2$3.default)(o,"".concat(t,"-dot-active"),a),(0,_defineProperty2$3.default)(o,"".concat(t,"-dot-reverse"),n),o));return _react$4.default.createElement("span",{className:m,style:u,key:e})}));return _react$4.default.createElement("div",{className:"".concat(t,"-step")},m)},_default$4=Steps;Steps$1.default=_default$4;var Marks$1={},_interopRequireDefault$5=interopRequireDefault$1.exports;Object.defineProperty(Marks$1,"__esModule",{value:!0}),Marks$1.default=void 0;var _objectSpread2$4=_interopRequireDefault$5(objectSpread2.exports),_defineProperty2$2=_interopRequireDefault$5(defineProperty.exports),_typeof2=_interopRequireDefault$5(_typeof$5.exports),_react$3=_interopRequireDefault$5(react.exports),_classnames$2=_interopRequireDefault$5(classnames.exports),Marks=function(e){var t=e.className,r=e.vertical,n=e.reverse,o=e.marks,i=e.included,a=e.upperBound,s=e.lowerBound,l=e.max,c=e.min,u=e.onClickLabel,d=Object.keys(o),p=l-c,f=d.map(parseFloat).sort((function(e,t){return e-t})).map((function(e){var l,d=o[e],f="object"===(0,_typeof2.default)(d)&&!_react$3.default.isValidElement(d),h=f?d.label:d;if(!h&&0!==h)return null;var m=!i&&e===a||i&&e<=a&&e>=s,g=(0,_classnames$2.default)((l={},(0,_defineProperty2$2.default)(l,"".concat(t,"-text"),!0),(0,_defineProperty2$2.default)(l,"".concat(t,"-text-active"),m),l)),y=(0,_defineProperty2$2.default)({marginBottom:"-50%"},n?"top":"bottom","".concat((e-c)/p*100,"%")),v=(0,_defineProperty2$2.default)({transform:"translateX(".concat(n?"50%":"-50%",")"),msTransform:"translateX(".concat(n?"50%":"-50%",")")},n?"right":"left","".concat((e-c)/p*100,"%")),b=r?y:v,_=f?(0,_objectSpread2$4.default)((0,_objectSpread2$4.default)({},b),d.style):b;return _react$3.default.createElement("span",{className:g,style:_,key:e,onMouseDown:function(t){return u(t,e)},onTouchStart:function(t){return u(t,e)}},h)}));return _react$3.default.createElement("div",{className:t},f)},_default$3=Marks;Marks$1.default=_default$3;var Handle$1={},_interopRequireDefault$4=interopRequireDefault$1.exports;Object.defineProperty(Handle$1,"__esModule",{value:!0}),Handle$1.default=void 0;var _extends2$1=_interopRequireDefault$4(_extends$2.exports),_objectSpread2$3=_interopRequireDefault$4(objectSpread2.exports),_defineProperty2$1=_interopRequireDefault$4(defineProperty.exports),_objectWithoutProperties2$1=_interopRequireDefault$4(objectWithoutProperties.exports),_classCallCheck2$2=_interopRequireDefault$4(classCallCheck.exports),_createClass2$2=_interopRequireDefault$4(createClass.exports),_inherits2$2=_interopRequireDefault$4(inherits.exports),_createSuper2$2=_interopRequireDefault$4(createSuper.exports),_react$2=_interopRequireDefault$4(react.exports),_classnames$1=_interopRequireDefault$4(classnames.exports),_addEventListener$1=_interopRequireDefault$4(addEventListener),_excluded$3=["prefixCls","vertical","reverse","offset","style","disabled","min","max","value","tabIndex","ariaLabel","ariaLabelledBy","ariaValueTextFormatter"],Handle=function(e){(0,_inherits2$2.default)(r,e);var t=(0,_createSuper2$2.default)(r);function r(){var e;(0,_classCallCheck2$2.default)(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={clickFocused:!1},e.onMouseUpListener=void 0,e.handle=void 0,e.setHandleRef=function(t){e.handle=t},e.handleMouseUp=function(){document.activeElement===e.handle&&e.setClickFocus(!0)},e.handleMouseDown=function(t){t.preventDefault(),e.focus()},e.handleBlur=function(){e.setClickFocus(!1)},e.handleKeyDown=function(){e.setClickFocus(!1)},e}return(0,_createClass2$2.default)(r,[{key:"componentDidMount",value:function(){this.onMouseUpListener=(0,_addEventListener$1.default)(document,"mouseup",this.handleMouseUp)}},{key:"componentWillUnmount",value:function(){this.onMouseUpListener&&this.onMouseUpListener.remove()}},{key:"setClickFocus",value:function(e){this.setState({clickFocused:e})}},{key:"clickFocus",value:function(){this.setClickFocus(!0),this.focus()}},{key:"focus",value:function(){this.handle.focus()}},{key:"blur",value:function(){this.handle.blur()}},{key:"render",value:function(){var e,t,r,n=this.props,o=n.prefixCls,i=n.vertical,a=n.reverse,s=n.offset,l=n.style,c=n.disabled,u=n.min,d=n.max,p=n.value,f=n.tabIndex,h=n.ariaLabel,m=n.ariaLabelledBy,g=n.ariaValueTextFormatter,y=(0,_objectWithoutProperties2$1.default)(n,_excluded$3),v=(0,_classnames$1.default)(this.props.className,(0,_defineProperty2$1.default)({},"".concat(o,"-handle-click-focused"),this.state.clickFocused)),b=i?(e={},(0,_defineProperty2$1.default)(e,a?"top":"bottom","".concat(s,"%")),(0,_defineProperty2$1.default)(e,a?"bottom":"top","auto"),(0,_defineProperty2$1.default)(e,"transform",a?null:"translateY(+50%)"),e):(t={},(0,_defineProperty2$1.default)(t,a?"right":"left","".concat(s,"%")),(0,_defineProperty2$1.default)(t,a?"left":"right","auto"),(0,_defineProperty2$1.default)(t,"transform","translateX(".concat(a?"+":"-","50%)")),t),_=(0,_objectSpread2$3.default)((0,_objectSpread2$3.default)({},l),b),S=f||0;return(c||null===f)&&(S=null),g&&(r=g(p)),_react$2.default.createElement("div",(0,_extends2$1.default)({ref:this.setHandleRef,tabIndex:S},y,{className:v,style:_,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,role:"slider","aria-valuemin":u,"aria-valuemax":d,"aria-valuenow":p,"aria-disabled":!!c,"aria-label":h,"aria-labelledby":m,"aria-valuetext":r}))}}]),r}(_react$2.default.Component);Handle$1.default=Handle;var utils$2={},KeyCode$2={};Object.defineProperty(KeyCode$2,"__esModule",{value:!0}),KeyCode$2.default=void 0;var KeyCode$1={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=KeyCode$1.F1&&t<=KeyCode$1.F12)return!1;switch(t){case KeyCode$1.ALT:case KeyCode$1.CAPS_LOCK:case KeyCode$1.CONTEXT_MENU:case KeyCode$1.CTRL:case KeyCode$1.DOWN:case KeyCode$1.END:case KeyCode$1.ESC:case KeyCode$1.HOME:case KeyCode$1.INSERT:case KeyCode$1.LEFT:case KeyCode$1.MAC_FF_META:case KeyCode$1.META:case KeyCode$1.NUMLOCK:case KeyCode$1.NUM_CENTER:case KeyCode$1.PAGE_DOWN:case KeyCode$1.PAGE_UP:case KeyCode$1.PAUSE:case KeyCode$1.PRINT_SCREEN:case KeyCode$1.RIGHT:case KeyCode$1.SHIFT:case KeyCode$1.UP:case KeyCode$1.WIN_KEY:case KeyCode$1.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=KeyCode$1.ZERO&&e<=KeyCode$1.NINE)return!0;if(e>=KeyCode$1.NUM_ZERO&&e<=KeyCode$1.NUM_MULTIPLY)return!0;if(e>=KeyCode$1.A&&e<=KeyCode$1.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case KeyCode$1.SPACE:case KeyCode$1.QUESTION_MARK:case KeyCode$1.NUM_PLUS:case KeyCode$1.NUM_MINUS:case KeyCode$1.NUM_PERIOD:case KeyCode$1.NUM_DIVISION:case KeyCode$1.SEMICOLON:case KeyCode$1.DASH:case KeyCode$1.EQUALS:case KeyCode$1.COMMA:case KeyCode$1.PERIOD:case KeyCode$1.SLASH:case KeyCode$1.APOSTROPHE:case KeyCode$1.SINGLE_QUOTE:case KeyCode$1.OPEN_SQUARE_BRACKET:case KeyCode$1.BACKSLASH:case KeyCode$1.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},_default$2=KeyCode$1;KeyCode$2.default=_default$2;var _interopRequireDefault$3=interopRequireDefault$1.exports;Object.defineProperty(utils$2,"__esModule",{value:!0}),utils$2.calculateNextValue=calculateNextValue,utils$2.ensureValueInRange=ensureValueInRange,utils$2.ensureValuePrecision=ensureValuePrecision,utils$2.getClosestPoint=getClosestPoint,utils$2.getHandleCenterPosition=getHandleCenterPosition,utils$2.getKeyboardValueMutator=getKeyboardValueMutator,utils$2.getMousePosition=getMousePosition,utils$2.getPrecision=getPrecision,utils$2.getTouchPosition=getTouchPosition,utils$2.isEventFromHandle=isEventFromHandle,utils$2.isNotTouchEvent=isNotTouchEvent,utils$2.isValueOutOfRange=isValueOutOfRange,utils$2.pauseEvent=pauseEvent;var _toConsumableArray2$1=_interopRequireDefault$3(toConsumableArray.exports),_reactDom$1=reactDom.exports,_KeyCode=_interopRequireDefault$3(KeyCode$2);function isEventFromHandle(e,t){try{return Object.keys(t).some((function(r){return e.target===(0,_reactDom$1.findDOMNode)(t[r])}))}catch(r){return!1}}function isValueOutOfRange(e,t){var r=t.min,n=t.max;return e<r||e>n}function isNotTouchEvent(e){return e.touches.length>1||"touchend"===e.type.toLowerCase()&&e.touches.length>0}function getClosestPoint(e,t){var r=t.marks,n=t.step,o=t.min,i=t.max,a=Object.keys(r).map(parseFloat);if(null!==n){var s=Math.pow(10,getPrecision(n)),l=Math.floor((i*s-o*s)/(n*s)),c=Math.min((e-o)/n,l),u=Math.round(c)*n+o;a.push(u)}var d=a.map((function(t){return Math.abs(e-t)}));return a[d.indexOf(Math.min.apply(Math,(0,_toConsumableArray2$1.default)(d)))]}function getPrecision(e){var t=e.toString(),r=0;return t.indexOf(".")>=0&&(r=t.length-t.indexOf(".")-1),r}function getMousePosition(e,t){return e?t.clientY:t.pageX}function getTouchPosition(e,t){return e?t.touches[0].clientY:t.touches[0].pageX}function getHandleCenterPosition(e,t){var r=t.getBoundingClientRect();return e?r.top+.5*r.height:window.pageXOffset+r.left+.5*r.width}function ensureValueInRange(e,t){var r=t.max,n=t.min;return e<=n?n:e>=r?r:e}function ensureValuePrecision(e,t){var r=t.step,n=isFinite(getClosestPoint(e,t))?getClosestPoint(e,t):0;return null===r?n:parseFloat(n.toFixed(getPrecision(r)))}function pauseEvent(e){e.stopPropagation(),e.preventDefault()}function calculateNextValue(e,t,r){var n={increase:function(e,t){return e+t},decrease:function(e,t){return e-t}},o=n[e](Object.keys(r.marks).indexOf(JSON.stringify(t)),1),i=Object.keys(r.marks)[o];return r.step?n[e](t,r.step):Object.keys(r.marks).length&&r.marks[i]?r.marks[i]:t}function getKeyboardValueMutator(e,t,r){var n="increase",o="decrease",i=n;switch(e.keyCode){case _KeyCode.default.UP:i=t&&r?o:n;break;case _KeyCode.default.RIGHT:i=!t&&r?o:n;break;case _KeyCode.default.DOWN:i=t&&r?n:o;break;case _KeyCode.default.LEFT:i=!t&&r?n:o;break;case _KeyCode.default.END:return function(e,t){return t.max};case _KeyCode.default.HOME:return function(e,t){return t.min};case _KeyCode.default.PAGE_UP:return function(e,t){return e+2*t.step};case _KeyCode.default.PAGE_DOWN:return function(e,t){return e-2*t.step};default:return}return function(e,t){return calculateNextValue(i,e,t)}}var _interopRequireDefault$2=interopRequireDefault$1.exports,_interopRequireWildcard$3=interopRequireWildcard.exports;Object.defineProperty(createSlider$1,"__esModule",{value:!0}),createSlider$1.default=createSlider;var _extends2=_interopRequireDefault$2(_extends$2.exports),_objectWithoutProperties2=_interopRequireDefault$2(objectWithoutProperties.exports),_objectSpread2$2=_interopRequireDefault$2(objectSpread2.exports),_defineProperty2=_interopRequireDefault$2(defineProperty.exports),_toConsumableArray2=_interopRequireDefault$2(toConsumableArray.exports),_classCallCheck2$1=_interopRequireDefault$2(classCallCheck.exports),_createClass2$1=_interopRequireDefault$2(createClass.exports),_get2=_interopRequireDefault$2(get.exports),_getPrototypeOf2=_interopRequireDefault$2(getPrototypeOf.exports),_inherits2$1=_interopRequireDefault$2(inherits.exports),_createSuper2$1=_interopRequireDefault$2(createSuper.exports),_react$1=_interopRequireDefault$2(react.exports),_addEventListener=_interopRequireDefault$2(addEventListener),_classnames=_interopRequireDefault$2(classnames.exports),_warning$1=_interopRequireDefault$2(warning$1),_Steps=_interopRequireDefault$2(Steps$1),_Marks=_interopRequireDefault$2(Marks$1),_Handle=_interopRequireDefault$2(Handle$1),utils$1=_interopRequireWildcard$3(utils$2),_excluded$2=["index"];function noop(){}function createSlider(e){var t,r;return r=t=function(e){(0,_inherits2$1.default)(r,e);var t=(0,_createSuper2$1.default)(r);function r(e){var n;(0,_classCallCheck2$1.default)(this,r),(n=t.call(this,e)).handlesRefs=void 0,n.sliderRef=void 0,n.document=void 0,n.dragOffset=void 0,n.prevMovedHandleIndex=void 0,n.onTouchMoveListener=void 0,n.onTouchUpListener=void 0,n.onMouseMoveListener=void 0,n.onMouseUpListener=void 0,n.dragTrack=void 0,n.startBounds=void 0,n.onDown=function(e,t){var r=t,o=n.props,i=o.draggableTrack,a=o.vertical,s=n.state.bounds,l=i&&n.positionGetValue&&n.positionGetValue(r)||[],c=utils$1.isEventFromHandle(e,n.handlesRefs);if(n.dragTrack=i&&s.length>=2&&!c&&!l.map((function(e,t){var r=!!t||e>=s[t];return t===l.length-1?e<=s[t]:r})).some((function(e){return!e})),n.dragTrack)n.dragOffset=r,n.startBounds=(0,_toConsumableArray2.default)(s);else{if(c){var u=utils$1.getHandleCenterPosition(a,e.target);n.dragOffset=r-u,r=u}else n.dragOffset=0;n.onStart(r)}},n.onMouseDown=function(e){if(0===e.button){n.removeDocumentEvents();var t=n.props.vertical,r=utils$1.getMousePosition(t,e);n.onDown(e,r),n.addDocumentMouseEvents()}},n.onTouchStart=function(e){if(!utils$1.isNotTouchEvent(e)){var t=n.props.vertical,r=utils$1.getTouchPosition(t,e);n.onDown(e,r),n.addDocumentTouchEvents(),utils$1.pauseEvent(e)}},n.onFocus=function(e){var t=n.props,r=t.onFocus,o=t.vertical;if(utils$1.isEventFromHandle(e,n.handlesRefs)&&!n.dragTrack){var i=utils$1.getHandleCenterPosition(o,e.target);n.dragOffset=0,n.onStart(i),utils$1.pauseEvent(e),r&&r(e)}},n.onBlur=function(e){var t=n.props.onBlur;n.dragTrack||n.onEnd(),t&&t(e)},n.onMouseUp=function(){n.handlesRefs[n.prevMovedHandleIndex]&&n.handlesRefs[n.prevMovedHandleIndex].clickFocus()},n.onMouseMove=function(e){if(n.sliderRef){var t=utils$1.getMousePosition(n.props.vertical,e);n.onMove(e,t-n.dragOffset,n.dragTrack,n.startBounds)}else n.onEnd()},n.onTouchMove=function(e){if(!utils$1.isNotTouchEvent(e)&&n.sliderRef){var t=utils$1.getTouchPosition(n.props.vertical,e);n.onMove(e,t-n.dragOffset,n.dragTrack,n.startBounds)}else n.onEnd()},n.onKeyDown=function(e){n.sliderRef&&utils$1.isEventFromHandle(e,n.handlesRefs)&&n.onKeyboard(e)},n.onClickMarkLabel=function(e,t){e.stopPropagation(),n.onChange({value:t}),n.setState({value:t},(function(){return n.onEnd(!0)}))},n.saveSlider=function(e){n.sliderRef=e};var o=e.step,i=e.max,a=e.min,s=!isFinite(i-a)||(i-a)%o==0;return(0,_warning$1.default)(!o||Math.floor(o)!==o||s,"Slider[max] - Slider[min] (".concat(i-a,") should be a multiple of Slider[step] (").concat(o,")")),n.handlesRefs={},n}return(0,_createClass2$1.default)(r,[{key:"componentDidMount",value:function(){this.document=this.sliderRef&&this.sliderRef.ownerDocument;var e=this.props,t=e.autoFocus,r=e.disabled;t&&!r&&this.focus()}},{key:"componentWillUnmount",value:function(){(0,_get2.default)((0,_getPrototypeOf2.default)(r.prototype),"componentWillUnmount",this)&&(0,_get2.default)((0,_getPrototypeOf2.default)(r.prototype),"componentWillUnmount",this).call(this),this.removeDocumentEvents()}},{key:"getSliderStart",value:function(){var e=this.sliderRef,t=this.props,r=t.vertical,n=t.reverse,o=e.getBoundingClientRect();return r?n?o.bottom:o.top:window.pageXOffset+(n?o.right:o.left)}},{key:"getSliderLength",value:function(){var e=this.sliderRef;if(!e)return 0;var t=e.getBoundingClientRect();return this.props.vertical?t.height:t.width}},{key:"addDocumentTouchEvents",value:function(){this.onTouchMoveListener=(0,_addEventListener.default)(this.document,"touchmove",this.onTouchMove),this.onTouchUpListener=(0,_addEventListener.default)(this.document,"touchend",this.onEnd)}},{key:"addDocumentMouseEvents",value:function(){this.onMouseMoveListener=(0,_addEventListener.default)(this.document,"mousemove",this.onMouseMove),this.onMouseUpListener=(0,_addEventListener.default)(this.document,"mouseup",this.onEnd)}},{key:"removeDocumentEvents",value:function(){this.onTouchMoveListener&&this.onTouchMoveListener.remove(),this.onTouchUpListener&&this.onTouchUpListener.remove(),this.onMouseMoveListener&&this.onMouseMoveListener.remove(),this.onMouseUpListener&&this.onMouseUpListener.remove()}},{key:"focus",value:function(){var e;this.props.disabled||null===(e=this.handlesRefs[0])||void 0===e||e.focus()}},{key:"blur",value:function(){var e=this;this.props.disabled||Object.keys(this.handlesRefs).forEach((function(t){var r,n;null===(r=e.handlesRefs[t])||void 0===r||null===(n=r.blur)||void 0===n||n.call(r)}))}},{key:"calcValue",value:function(e){var t=this.props,r=t.vertical,n=t.min,o=t.max,i=Math.abs(Math.max(e,0)/this.getSliderLength());return r?(1-i)*(o-n)+n:i*(o-n)+n}},{key:"calcValueByPos",value:function(e){var t=(this.props.reverse?-1:1)*(e-this.getSliderStart());return this.trimAlignValue(this.calcValue(t))}},{key:"calcOffset",value:function(e){var t=this.props,r=t.min,n=(e-r)/(t.max-r);return Math.max(0,100*n)}},{key:"saveHandle",value:function(e,t){this.handlesRefs[e]=t}},{key:"render",value:function(){var e,t=this.props,n=t.prefixCls,o=t.className,i=t.marks,a=t.dots,s=t.step,l=t.included,c=t.disabled,u=t.vertical,d=t.reverse,p=t.min,f=t.max,h=t.children,m=t.maximumTrackStyle,g=t.style,y=t.railStyle,v=t.dotStyle,b=t.activeDotStyle,_=(0,_get2.default)((0,_getPrototypeOf2.default)(r.prototype),"render",this).call(this),S=_.tracks,w=_.handles,x=(0,_classnames.default)(n,(e={},(0,_defineProperty2.default)(e,"".concat(n,"-with-marks"),Object.keys(i).length),(0,_defineProperty2.default)(e,"".concat(n,"-disabled"),c),(0,_defineProperty2.default)(e,"".concat(n,"-vertical"),u),(0,_defineProperty2.default)(e,o,o),e));return _react$1.default.createElement("div",{ref:this.saveSlider,className:x,onTouchStart:c?noop:this.onTouchStart,onMouseDown:c?noop:this.onMouseDown,onMouseUp:c?noop:this.onMouseUp,onKeyDown:c?noop:this.onKeyDown,onFocus:c?noop:this.onFocus,onBlur:c?noop:this.onBlur,style:g},_react$1.default.createElement("div",{className:"".concat(n,"-rail"),style:(0,_objectSpread2$2.default)((0,_objectSpread2$2.default)({},m),y)}),S,_react$1.default.createElement(_Steps.default,{prefixCls:n,vertical:u,reverse:d,marks:i,dots:a,step:s,included:l,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:f,min:p,dotStyle:v,activeDotStyle:b}),w,_react$1.default.createElement(_Marks.default,{className:"".concat(n,"-mark"),onClickLabel:c?noop:this.onClickMarkLabel,vertical:u,marks:i,included:l,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:f,min:p,reverse:d}),h)}}]),r}(e),t.displayName="ComponentEnhancer(".concat(e.displayName,")"),t.defaultProps=(0,_objectSpread2$2.default)((0,_objectSpread2$2.default)({},e.defaultProps),{},{prefixCls:"rc-slider",className:"",min:0,max:100,step:1,marks:{},handle:function(e){var t=e.index,r=(0,_objectWithoutProperties2.default)(e,_excluded$2);return delete r.dragging,null===r.value?null:_react$1.default.createElement(_Handle.default,(0,_extends2.default)({},r,{key:t}))},onBeforeChange:noop,onChange:noop,onAfterChange:noop,included:!0,disabled:!1,dots:!1,vertical:!1,reverse:!1,trackStyle:[{}],handleStyle:[{}],railStyle:{},dotStyle:{},activeDotStyle:{}}),r}var _interopRequireWildcard$2=interopRequireWildcard.exports,_interopRequireDefault$1=interopRequireDefault$1.exports;Object.defineProperty(Slider$1,"__esModule",{value:!0});var default_1=Slider$1.default=void 0,_objectSpread2$1=_interopRequireDefault$1(objectSpread2.exports),_classCallCheck2=_interopRequireDefault$1(classCallCheck.exports),_createClass2=_interopRequireDefault$1(createClass.exports),_inherits2=_interopRequireDefault$1(inherits.exports),_createSuper2=_interopRequireDefault$1(createSuper.exports),_react=_interopRequireDefault$1(react.exports),_warning=_interopRequireDefault$1(warning$1),_Track=_interopRequireDefault$1(Track$1),_createSlider=_interopRequireDefault$1(createSlider$1),utils=_interopRequireWildcard$2(utils$2),Slider=function(e){(0,_inherits2.default)(r,e);var t=(0,_createSuper2.default)(r);function r(e){var n;(0,_classCallCheck2.default)(this,r),(n=t.call(this,e)).positionGetValue=function(e){return[]},n.startValue=void 0,n.startPosition=void 0,n.prevMovedHandleIndex=void 0,n.onEnd=function(e){var t=n.state.dragging;n.removeDocumentEvents(),(t||e)&&n.props.onAfterChange(n.getValue()),n.setState({dragging:!1})};var o=void 0!==e.defaultValue?e.defaultValue:e.min,i=void 0!==e.value?e.value:o;return n.state={value:n.trimAlignValue(i),dragging:!1},(0,_warning.default)(!("minimumTrackStyle"in e),"minimumTrackStyle will be deprecated, please use trackStyle instead."),(0,_warning.default)(!("maximumTrackStyle"in e),"maximumTrackStyle will be deprecated, please use railStyle instead."),n}return(0,_createClass2.default)(r,[{key:"calcValueByPos",value:function(e){return 0}},{key:"calcOffset",value:function(e){return 0}},{key:"saveHandle",value:function(e,t){}},{key:"removeDocumentEvents",value:function(){}},{key:"componentDidUpdate",value:function(e,t){var r=this.props,n=r.min,o=r.max,i=r.value,a=r.onChange;if("min"in this.props||"max"in this.props){var s=void 0!==i?i:t.value,l=this.trimAlignValue(s,this.props);l!==t.value&&(this.setState({value:l}),n===e.min&&o===e.max||!utils.isValueOutOfRange(s,this.props)||a(l))}}},{key:"onChange",value:function(e){var t=this.props,r=!("value"in t),n=e.value>this.props.max?(0,_objectSpread2$1.default)((0,_objectSpread2$1.default)({},e),{},{value:this.props.max}):e;r&&this.setState(n);var o=n.value;t.onChange(o)}},{key:"onStart",value:function(e){this.setState({dragging:!0});var t=this.props,r=this.getValue();t.onBeforeChange(r);var n=this.calcValueByPos(e);this.startValue=n,this.startPosition=e,n!==r&&(this.prevMovedHandleIndex=0,this.onChange({value:n}))}},{key:"onMove",value:function(e,t){utils.pauseEvent(e);var r=this.state.value,n=this.calcValueByPos(t);n!==r&&this.onChange({value:n})}},{key:"onKeyboard",value:function(e){var t=this.props,r=t.reverse,n=t.vertical,o=utils.getKeyboardValueMutator(e,n,r);if(o){utils.pauseEvent(e);var i=this.state.value,a=o(i,this.props),s=this.trimAlignValue(a);if(s===i)return;this.onChange({value:s}),this.props.onAfterChange(s),this.onEnd()}}},{key:"getValue",value:function(){return this.state.value}},{key:"getLowerBound",value:function(){var e=this.props.startPoint||this.props.min;return this.state.value>e?e:this.state.value}},{key:"getUpperBound",value:function(){return this.state.value<this.props.startPoint?this.props.startPoint:this.state.value}},{key:"trimAlignValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===e)return null;var r=(0,_objectSpread2$1.default)((0,_objectSpread2$1.default)({},this.props),t),n=utils.ensureValueInRange(e,r);return utils.ensureValuePrecision(n,r)}},{key:"render",value:function(){var e=this,t=this.props,r=t.prefixCls,n=t.vertical,o=t.included,i=t.disabled,a=t.minimumTrackStyle,s=t.trackStyle,l=t.handleStyle,c=t.tabIndex,u=t.ariaLabelForHandle,d=t.ariaLabelledByForHandle,p=t.ariaValueTextFormatterForHandle,f=t.min,h=t.max,m=t.startPoint,g=t.reverse,y=t.handle,v=this.state,b=v.value,_=v.dragging,S=this.calcOffset(b),w=y({className:"".concat(r,"-handle"),prefixCls:r,vertical:n,offset:S,value:b,dragging:_,disabled:i,min:f,max:h,reverse:g,index:0,tabIndex:c,ariaLabel:u,ariaLabelledBy:d,ariaValueTextFormatter:p,style:l[0]||l,ref:function(t){return e.saveHandle(0,t)}}),x=void 0!==m?this.calcOffset(m):0,E=s[0]||s;return{tracks:_react.default.createElement(_Track.default,{className:"".concat(r,"-track"),vertical:n,included:o,offset:x,reverse:g,length:S-x,style:(0,_objectSpread2$1.default)((0,_objectSpread2$1.default)({},a),E)}),handles:w}}}]),r}(_react.default.Component),_default$1=(0,_createSlider.default)(Slider);function _defineProperty$5(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _arrayWithHoles$3(e){if(Array.isArray(e))return e}function _iterableToArrayLimit$3(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){s=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}function _arrayLikeToArray$4(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _unsupportedIterableToArray$4(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$4(e,t):void 0}}function _nonIterableRest$3(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _slicedToArray$3(e,t){return _arrayWithHoles$3(e)||_iterableToArrayLimit$3(e,t)||_unsupportedIterableToArray$4(e,t)||_nonIterableRest$3()}function _objectWithoutPropertiesLoose$2(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function _objectWithoutProperties$3(e,t){if(null==e)return{};var r,n,o=_objectWithoutPropertiesLoose$2(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function _arrayWithHoles$2(e){if(Array.isArray(e))return e}function _iterableToArrayLimit$2(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){s=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}function _arrayLikeToArray$3(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _unsupportedIterableToArray$3(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$3(e,t):void 0}}function _nonIterableRest$2(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _slicedToArray$2(e,t){return _arrayWithHoles$2(e)||_iterableToArrayLimit$2(e,t)||_unsupportedIterableToArray$3(e,t)||_nonIterableRest$2()}function useControlledState(e,t){var r=t||{},n=r.defaultValue,o=r.value,i=r.onChange,a=r.postState,s=_slicedToArray$2(react.exports.useState((function(){return void 0!==o?o:void 0!==n?"function"==typeof n?n():n:"function"==typeof e?e():e})),2),l=s[0],c=s[1],u=void 0!==o?o:l;a&&(u=a(u));var d=react.exports.useRef(!0);return react.exports.useEffect((function(){d.current?d.current=!1:void 0===o&&c(o)}),[o]),[u,function(e){c(e),u!==e&&i&&i(e,u)}]}default_1=Slider$1.default=_default$1;var KeyCode={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=KeyCode.F1&&t<=KeyCode.F12)return!1;switch(t){case KeyCode.ALT:case KeyCode.CAPS_LOCK:case KeyCode.CONTEXT_MENU:case KeyCode.CTRL:case KeyCode.DOWN:case KeyCode.END:case KeyCode.ESC:case KeyCode.HOME:case KeyCode.INSERT:case KeyCode.LEFT:case KeyCode.MAC_FF_META:case KeyCode.META:case KeyCode.NUMLOCK:case KeyCode.NUM_CENTER:case KeyCode.PAGE_DOWN:case KeyCode.PAGE_UP:case KeyCode.PAUSE:case KeyCode.PRINT_SCREEN:case KeyCode.RIGHT:case KeyCode.SHIFT:case KeyCode.UP:case KeyCode.WIN_KEY:case KeyCode.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=KeyCode.ZERO&&e<=KeyCode.NINE)return!0;if(e>=KeyCode.NUM_ZERO&&e<=KeyCode.NUM_MULTIPLY)return!0;if(e>=KeyCode.A&&e<=KeyCode.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case KeyCode.SPACE:case KeyCode.QUESTION_MARK:case KeyCode.NUM_PLUS:case KeyCode.NUM_MINUS:case KeyCode.NUM_PERIOD:case KeyCode.NUM_DIVISION:case KeyCode.SEMICOLON:case KeyCode.DASH:case KeyCode.EQUALS:case KeyCode.COMMA:case KeyCode.PERIOD:case KeyCode.SLASH:case KeyCode.APOSTROPHE:case KeyCode.SINGLE_QUOTE:case KeyCode.OPEN_SQUARE_BRACKET:case KeyCode.BACKSLASH:case KeyCode.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},Switch=react.exports.forwardRef((function(e,t){var r,n=e.prefixCls,o=void 0===n?"rc-switch":n,i=e.className,a=e.checked,s=e.defaultChecked,l=e.disabled,c=e.loadingIcon,u=e.checkedChildren,d=e.unCheckedChildren,p=e.onClick,f=e.onChange,h=e.onKeyDown,m=_objectWithoutProperties$3(e,["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"]),g=_slicedToArray$3(useControlledState(!1,{value:a,defaultValue:s}),2),y=g[0],v=g[1];function b(e,t){var r=y;return l||(v(r=e),null==f||f(r,t)),r}var _=cls(o,i,(_defineProperty$5(r={},"".concat(o,"-checked"),y),_defineProperty$5(r,"".concat(o,"-disabled"),l),r));return react.exports.createElement("button",Object.assign({},m,{type:"button",role:"switch","aria-checked":y,disabled:l,className:_,ref:t,onKeyDown:function(e){e.which===KeyCode.LEFT?b(!1,e):e.which===KeyCode.RIGHT&&b(!0,e),null==h||h(e)},onClick:function(e){var t=b(!y,e);null==p||p(t,e)}}),c,react.exports.createElement("span",{className:"".concat(o,"-inner")},y?u:d))}));Switch.displayName="Switch";var cjs={exports:{}},Draggable$2={};function toVal(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=toVal(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function clsx_m(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=toVal(e))&&(n&&(n+=" "),n+=t);return n}var clsx_m$1=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:clsx_m}),require$$3=getAugmentedNamespace(clsx_m$1),domFns={},shims={};function findInArray(e,t){for(var r=0,n=e.length;r<n;r++)if(t.apply(t,[e[r],r,e]))return e[r]}function isFunction(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)}function isNum(e){return"number"==typeof e&&!isNaN(e)}function int(e){return parseInt(e,10)}function dontSetMe(e,t,r){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(r," - do not set this, set it on the child."))}Object.defineProperty(shims,"__esModule",{value:!0}),shims.findInArray=findInArray,shims.isFunction=isFunction,shims.isNum=isNum,shims.int=int,shims.dontSetMe=dontSetMe;var getPrefix$1={};Object.defineProperty(getPrefix$1,"__esModule",{value:!0}),getPrefix$1.getPrefix=getPrefix,getPrefix$1.browserPrefixToKey=browserPrefixToKey,getPrefix$1.browserPrefixToStyle=browserPrefixToStyle,getPrefix$1.default=void 0;var prefixes=["Moz","Webkit","O","ms"];function getPrefix(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window)return"";var n=null===(e=window.document)||void 0===e||null===(t=e.documentElement)||void 0===t?void 0:t.style;if(!n)return"";if(r in n)return"";for(var o=0;o<prefixes.length;o++)if(browserPrefixToKey(r,prefixes[o])in n)return prefixes[o];return""}function browserPrefixToKey(e,t){return t?"".concat(t).concat(kebabToTitleCase(e)):e}function browserPrefixToStyle(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e}function kebabToTitleCase(e){for(var t="",r=!0,n=0;n<e.length;n++)r?(t+=e[n].toUpperCase(),r=!1):"-"===e[n]?r=!0:t+=e[n];return t}var _default=getPrefix();function _typeof$4(e){return(_typeof$4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}getPrefix$1.default=_default,Object.defineProperty(domFns,"__esModule",{value:!0}),domFns.matchesSelector=matchesSelector,domFns.matchesSelectorAndParentsTo=matchesSelectorAndParentsTo,domFns.addEvent=addEvent,domFns.removeEvent=removeEvent,domFns.outerHeight=outerHeight,domFns.outerWidth=outerWidth,domFns.innerHeight=innerHeight,domFns.innerWidth=innerWidth,domFns.offsetXYFromParent=offsetXYFromParent,domFns.createCSSTransform=createCSSTransform,domFns.createSVGTransform=createSVGTransform,domFns.getTranslation=getTranslation,domFns.getTouch=getTouch,domFns.getTouchIdentifier=getTouchIdentifier,domFns.addUserSelectStyles=addUserSelectStyles,domFns.removeUserSelectStyles=removeUserSelectStyles,domFns.addClassName=addClassName,domFns.removeClassName=removeClassName;var _shims$2=shims,_getPrefix=_interopRequireWildcard$1(getPrefix$1);function _getRequireWildcardCache$1(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache$1=function(e){return e?r:t})(e)}function _interopRequireWildcard$1(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==_typeof$4(e)&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache$1(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function ownKeys$5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread$4(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$5(Object(r),!0).forEach((function(t){_defineProperty$4(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$5(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty$4(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var matchesSelectorFunc="";function matchesSelector(e,t){return matchesSelectorFunc||(matchesSelectorFunc=(0,_shims$2.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],(function(t){return(0,_shims$2.isFunction)(e[t])}))),!!(0,_shims$2.isFunction)(e[matchesSelectorFunc])&&e[matchesSelectorFunc](t)}function matchesSelectorAndParentsTo(e,t,r){var n=e;do{if(matchesSelector(n,t))return!0;if(n===r)return!1;n=n.parentNode}while(n);return!1}function addEvent(e,t,r,n){if(e){var o=_objectSpread$4({capture:!0},n);e.addEventListener?e.addEventListener(t,r,o):e.attachEvent?e.attachEvent("on"+t,r):e["on"+t]=r}}function removeEvent(e,t,r,n){if(e){var o=_objectSpread$4({capture:!0},n);e.removeEventListener?e.removeEventListener(t,r,o):e.detachEvent?e.detachEvent("on"+t,r):e["on"+t]=null}}function outerHeight(e){var t=e.clientHeight,r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,_shims$2.int)(r.borderTopWidth),t+=(0,_shims$2.int)(r.borderBottomWidth)}function outerWidth(e){var t=e.clientWidth,r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,_shims$2.int)(r.borderLeftWidth),t+=(0,_shims$2.int)(r.borderRightWidth)}function innerHeight(e){var t=e.clientHeight,r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,_shims$2.int)(r.paddingTop),t-=(0,_shims$2.int)(r.paddingBottom)}function innerWidth(e){var t=e.clientWidth,r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,_shims$2.int)(r.paddingLeft),t-=(0,_shims$2.int)(r.paddingRight)}function offsetXYFromParent(e,t,r){var n=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect();return{x:(e.clientX+t.scrollLeft-n.left)/r,y:(e.clientY+t.scrollTop-n.top)/r}}function createCSSTransform(e,t){var r=getTranslation(e,t,"px");return _defineProperty$4({},(0,_getPrefix.browserPrefixToKey)("transform",_getPrefix.default),r)}function createSVGTransform(e,t){return getTranslation(e,t,"")}function getTranslation(e,t,r){var n=e.x,o=e.y,i="translate(".concat(n).concat(r,",").concat(o).concat(r,")");if(t){var a="".concat("string"==typeof t.x?t.x:t.x+r),s="".concat("string"==typeof t.y?t.y:t.y+r);i="translate(".concat(a,", ").concat(s,")")+i}return i}function getTouch(e,t){return e.targetTouches&&(0,_shims$2.findInArray)(e.targetTouches,(function(e){return t===e.identifier}))||e.changedTouches&&(0,_shims$2.findInArray)(e.changedTouches,(function(e){return t===e.identifier}))}function getTouchIdentifier(e){return e.targetTouches&&e.targetTouches[0]?e.targetTouches[0].identifier:e.changedTouches&&e.changedTouches[0]?e.changedTouches[0].identifier:void 0}function addUserSelectStyles(e){if(e){var t=e.getElementById("react-draggable-style-el");t||((t=e.createElement("style")).type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t)),e.body&&addClassName(e.body,"react-draggable-transparent-selection")}}function removeUserSelectStyles(e){if(e)try{if(e.body&&removeClassName(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{var t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}}catch(r){}}function addClassName(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function removeClassName(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}var positionFns={};Object.defineProperty(positionFns,"__esModule",{value:!0}),positionFns.getBoundPosition=getBoundPosition,positionFns.snapToGrid=snapToGrid,positionFns.canDragX=canDragX,positionFns.canDragY=canDragY,positionFns.getControlPosition=getControlPosition,positionFns.createCoreData=createCoreData,positionFns.createDraggableData=createDraggableData;var _shims$1=shims,_domFns$1=domFns;function getBoundPosition(e,t,r){if(!e.props.bounds)return[t,r];var n=e.props.bounds;n="string"==typeof n?n:cloneBounds(n);var o=findDOMNode(e);if("string"==typeof n){var i,a=o.ownerDocument,s=a.defaultView;if(!((i="parent"===n?o.parentNode:a.querySelector(n))instanceof s.HTMLElement))throw new Error('Bounds selector "'+n+'" could not find an element.');var l=i,c=s.getComputedStyle(o),u=s.getComputedStyle(l);n={left:-o.offsetLeft+(0,_shims$1.int)(u.paddingLeft)+(0,_shims$1.int)(c.marginLeft),top:-o.offsetTop+(0,_shims$1.int)(u.paddingTop)+(0,_shims$1.int)(c.marginTop),right:(0,_domFns$1.innerWidth)(l)-(0,_domFns$1.outerWidth)(o)-o.offsetLeft+(0,_shims$1.int)(u.paddingRight)-(0,_shims$1.int)(c.marginRight),bottom:(0,_domFns$1.innerHeight)(l)-(0,_domFns$1.outerHeight)(o)-o.offsetTop+(0,_shims$1.int)(u.paddingBottom)-(0,_shims$1.int)(c.marginBottom)}}return(0,_shims$1.isNum)(n.right)&&(t=Math.min(t,n.right)),(0,_shims$1.isNum)(n.bottom)&&(r=Math.min(r,n.bottom)),(0,_shims$1.isNum)(n.left)&&(t=Math.max(t,n.left)),(0,_shims$1.isNum)(n.top)&&(r=Math.max(r,n.top)),[t,r]}function snapToGrid(e,t,r){return[Math.round(t/e[0])*e[0],Math.round(r/e[1])*e[1]]}function canDragX(e){return"both"===e.props.axis||"x"===e.props.axis}function canDragY(e){return"both"===e.props.axis||"y"===e.props.axis}function getControlPosition(e,t,r){var n="number"==typeof t?(0,_domFns$1.getTouch)(e,t):null;if("number"==typeof t&&!n)return null;var o=findDOMNode(r),i=r.props.offsetParent||o.offsetParent||o.ownerDocument.body;return(0,_domFns$1.offsetXYFromParent)(n||e,i,r.props.scale)}function createCoreData(e,t,r){var n=e.state,o=!(0,_shims$1.isNum)(n.lastX),i=findDOMNode(e);return o?{node:i,deltaX:0,deltaY:0,lastX:t,lastY:r,x:t,y:r}:{node:i,deltaX:t-n.lastX,deltaY:r-n.lastY,lastX:n.lastX,lastY:n.lastY,x:t,y:r}}function createDraggableData(e,t){var r=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/r,y:e.state.y+t.deltaY/r,deltaX:t.deltaX/r,deltaY:t.deltaY/r,lastX:e.state.x,lastY:e.state.y}}function cloneBounds(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}function findDOMNode(e){var t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var DraggableCore$2={},log$1={};function log(){}function _typeof$3(e){return(_typeof$3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(log$1,"__esModule",{value:!0}),log$1.default=log,Object.defineProperty(DraggableCore$2,"__esModule",{value:!0}),DraggableCore$2.default=void 0;var React=_interopRequireWildcard(react.exports),_propTypes=_interopRequireDefault(propTypes.exports),_reactDom=_interopRequireDefault(reactDom.exports),_domFns=domFns,_positionFns=positionFns,_shims=shims,_log=_interopRequireDefault(log$1);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache=function(e){return e?r:t})(e)}function _interopRequireWildcard(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==_typeof$3(e)&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function _slicedToArray$1(e,t){return _arrayWithHoles$1(e)||_iterableToArrayLimit$1(e,t)||_unsupportedIterableToArray$2(e,t)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray$2(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$2(e,t):void 0}}function _arrayLikeToArray$2(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _iterableToArrayLimit$1(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){s=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}function _arrayWithHoles$1(e){if(Array.isArray(e))return e}function _classCallCheck$3(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass$3(e,t,r){return t&&_defineProperties$3(e.prototype,t),r&&_defineProperties$3(e,r),e}function _inherits$2(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf$1(e,t)}function _setPrototypeOf$1(e,t){return(_setPrototypeOf$1=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper$8(e){var t=_isNativeReflectConstruct$8();return function(){var r,n=_getPrototypeOf$2(e);if(t){var o=_getPrototypeOf$2(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn$2(this,r)}}function _possibleConstructorReturn$2(e,t){if(t&&("object"===_typeof$3(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$2(e)}function _assertThisInitialized$2(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct$8(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf$2(e){return(_getPrototypeOf$2=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _defineProperty$3(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var eventsFor={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},dragEventFor=eventsFor.mouse,DraggableCore$1=function(e){_inherits$2(r,React.Component);var t=_createSuper$8(r);function r(){var e;_classCallCheck$3(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return _defineProperty$3(_assertThisInitialized$2(e=t.call.apply(t,[this].concat(o))),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),_defineProperty$3(_assertThisInitialized$2(e),"mounted",!1),_defineProperty$3(_assertThisInitialized$2(e),"handleDragStart",(function(t){if(e.props.onMouseDown(t),!e.props.allowAnyClick&&"number"==typeof t.button&&0!==t.button)return!1;var r=e.findDOMNode();if(!r||!r.ownerDocument||!r.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var n=r.ownerDocument;if(!(e.props.disabled||!(t.target instanceof n.defaultView.Node)||e.props.handle&&!(0,_domFns.matchesSelectorAndParentsTo)(t.target,e.props.handle,r)||e.props.cancel&&(0,_domFns.matchesSelectorAndParentsTo)(t.target,e.props.cancel,r))){"touchstart"===t.type&&t.preventDefault();var o=(0,_domFns.getTouchIdentifier)(t);e.setState({touchIdentifier:o});var i=(0,_positionFns.getControlPosition)(t,o,_assertThisInitialized$2(e));if(null!=i){var a=i.x,s=i.y,l=(0,_positionFns.createCoreData)(_assertThisInitialized$2(e),a,s);(0,_log.default)("DraggableCore: handleDragStart: %j",l),(0,_log.default)("calling",e.props.onStart),!1!==e.props.onStart(t,l)&&!1!==e.mounted&&(e.props.enableUserSelectHack&&(0,_domFns.addUserSelectStyles)(n),e.setState({dragging:!0,lastX:a,lastY:s}),(0,_domFns.addEvent)(n,dragEventFor.move,e.handleDrag),(0,_domFns.addEvent)(n,dragEventFor.stop,e.handleDragStop))}}})),_defineProperty$3(_assertThisInitialized$2(e),"handleDrag",(function(t){var r=(0,_positionFns.getControlPosition)(t,e.state.touchIdentifier,_assertThisInitialized$2(e));if(null!=r){var n=r.x,o=r.y;if(Array.isArray(e.props.grid)){var i=n-e.state.lastX,a=o-e.state.lastY,s=_slicedToArray$1((0,_positionFns.snapToGrid)(e.props.grid,i,a),2);if(i=s[0],a=s[1],!i&&!a)return;n=e.state.lastX+i,o=e.state.lastY+a}var l=(0,_positionFns.createCoreData)(_assertThisInitialized$2(e),n,o);if((0,_log.default)("DraggableCore: handleDrag: %j",l),!1!==e.props.onDrag(t,l)&&!1!==e.mounted)e.setState({lastX:n,lastY:o});else try{e.handleDragStop(new MouseEvent("mouseup"))}catch(u){var c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.handleDragStop(c)}}})),_defineProperty$3(_assertThisInitialized$2(e),"handleDragStop",(function(t){if(e.state.dragging){var r=(0,_positionFns.getControlPosition)(t,e.state.touchIdentifier,_assertThisInitialized$2(e));if(null!=r){var n=r.x,o=r.y,i=(0,_positionFns.createCoreData)(_assertThisInitialized$2(e),n,o);if(!1===e.props.onStop(t,i)||!1===e.mounted)return!1;var a=e.findDOMNode();a&&e.props.enableUserSelectHack&&(0,_domFns.removeUserSelectStyles)(a.ownerDocument),(0,_log.default)("DraggableCore: handleDragStop: %j",i),e.setState({dragging:!1,lastX:NaN,lastY:NaN}),a&&((0,_log.default)("DraggableCore: Removing handlers"),(0,_domFns.removeEvent)(a.ownerDocument,dragEventFor.move,e.handleDrag),(0,_domFns.removeEvent)(a.ownerDocument,dragEventFor.stop,e.handleDragStop))}}})),_defineProperty$3(_assertThisInitialized$2(e),"onMouseDown",(function(t){return dragEventFor=eventsFor.mouse,e.handleDragStart(t)})),_defineProperty$3(_assertThisInitialized$2(e),"onMouseUp",(function(t){return dragEventFor=eventsFor.mouse,e.handleDragStop(t)})),_defineProperty$3(_assertThisInitialized$2(e),"onTouchStart",(function(t){return dragEventFor=eventsFor.touch,e.handleDragStart(t)})),_defineProperty$3(_assertThisInitialized$2(e),"onTouchEnd",(function(t){return dragEventFor=eventsFor.touch,e.handleDragStop(t)})),e}return _createClass$3(r,[{key:"componentDidMount",value:function(){this.mounted=!0;var e=this.findDOMNode();e&&(0,_domFns.addEvent)(e,eventsFor.touch.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.findDOMNode();if(e){var t=e.ownerDocument;(0,_domFns.removeEvent)(t,eventsFor.mouse.move,this.handleDrag),(0,_domFns.removeEvent)(t,eventsFor.touch.move,this.handleDrag),(0,_domFns.removeEvent)(t,eventsFor.mouse.stop,this.handleDragStop),(0,_domFns.removeEvent)(t,eventsFor.touch.stop,this.handleDragStop),(0,_domFns.removeEvent)(e,eventsFor.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,_domFns.removeUserSelectStyles)(t)}}},{key:"findDOMNode",value:function(){var e,t,r;return null!==(e=null===(t=this.props)||void 0===t||null===(r=t.nodeRef)||void 0===r?void 0:r.current)&&void 0!==e?e:_reactDom.default.findDOMNode(this)}},{key:"render",value:function(){return React.cloneElement(React.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),r}();DraggableCore$2.default=DraggableCore$1,_defineProperty$3(DraggableCore$1,"displayName","DraggableCore"),_defineProperty$3(DraggableCore$1,"propTypes",{allowAnyClick:_propTypes.default.bool,disabled:_propTypes.default.bool,enableUserSelectHack:_propTypes.default.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:_propTypes.default.arrayOf(_propTypes.default.number),handle:_propTypes.default.string,cancel:_propTypes.default.string,nodeRef:_propTypes.default.object,onStart:_propTypes.default.func,onDrag:_propTypes.default.func,onStop:_propTypes.default.func,onMouseDown:_propTypes.default.func,scale:_propTypes.default.number,className:_shims.dontSetMe,style:_shims.dontSetMe,transform:_shims.dontSetMe}),_defineProperty$3(DraggableCore$1,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),e.default=void 0;var r=function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!==t(e)&&"function"!=typeof e)return{default:e};var n=f(r);if(n&&n.has(e))return n.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(o,a,s):o[a]=e[a]}o.default=e,n&&n.set(e,o);return o}(react.exports),n=p(propTypes.exports),o=p(reactDom.exports),i=p(require$$3),a=domFns,s=positionFns,l=shims,c=p(DraggableCore$2),u=p(log$1),d=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function p(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function m(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){s=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=A(e);if(t){var o=A(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return x(this,r)}}function x(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(f,e);var t,n,l,p=w(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),k(E(t=p.call(this,e)),"onDragStart",(function(e,r){if((0,u.default)("Draggable: onDragStart: %j",r),!1===t.props.onStart(e,(0,s.createDraggableData)(E(t),r)))return!1;t.setState({dragging:!0,dragged:!0})})),k(E(t),"onDrag",(function(e,r){if(!t.state.dragging)return!1;(0,u.default)("Draggable: onDrag: %j",r);var n=(0,s.createDraggableData)(E(t),r),o={x:n.x,y:n.y};if(t.props.bounds){var i=o.x,a=o.y;o.x+=t.state.slackX,o.y+=t.state.slackY;var l=v((0,s.getBoundPosition)(E(t),o.x,o.y),2),c=l[0],d=l[1];o.x=c,o.y=d,o.slackX=t.state.slackX+(i-o.x),o.slackY=t.state.slackY+(a-o.y),n.x=o.x,n.y=o.y,n.deltaX=o.x-t.state.x,n.deltaY=o.y-t.state.y}if(!1===t.props.onDrag(e,n))return!1;t.setState(o)})),k(E(t),"onDragStop",(function(e,r){if(!t.state.dragging)return!1;if(!1===t.props.onStop(e,(0,s.createDraggableData)(E(t),r)))return!1;(0,u.default)("Draggable: onDragStop: %j",r);var n={dragging:!1,slackX:0,slackY:0};if(Boolean(t.props.position)){var o=t.props.position,i=o.x,a=o.y;n.x=i,n.y=a}t.setState(n)})),t.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:y({},e.position),slackX:0,slackY:0,isElementSVG:!1},!e.position||e.onDrag||e.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),t}return t=f,l=[{key:"getDerivedStateFromProps",value:function(e,t){var r=e.position,n=t.prevPropsPosition;return!r||n&&r.x===n.x&&r.y===n.y?null:((0,u.default)("Draggable: getDerivedStateFromProps %j",{position:r,prevPropsPosition:n}),{x:r.x,y:r.y,prevPropsPosition:y({},r)})}}],(n=[{key:"componentDidMount",value:function(){void 0!==window.SVGElement&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var e,t,r;return null!==(e=null===(t=this.props)||void 0===t||null===(r=t.nodeRef)||void 0===r?void 0:r.current)&&void 0!==e?e:o.default.findDOMNode(this)}},{key:"render",value:function(){var e,t=this.props;t.axis,t.bounds;var n=t.children,o=t.defaultPosition,l=t.defaultClassName,u=t.defaultClassNameDragging,p=t.defaultClassNameDragged,f=t.position,g=t.positionOffset;t.scale;var v=m(t,d),b={},_=null,S=!Boolean(f)||this.state.dragging,w=f||o,x={x:(0,s.canDragX)(this)&&S?this.state.x:w.x,y:(0,s.canDragY)(this)&&S?this.state.y:w.y};this.state.isElementSVG?_=(0,a.createSVGTransform)(x,g):b=(0,a.createCSSTransform)(x,g);var E=(0,i.default)(n.props.className||"",l,(k(e={},u,this.state.dragging),k(e,p,this.state.dragged),e));return r.createElement(c.default,h({},v,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),r.cloneElement(r.Children.only(n),{className:E,style:y(y({},n.props.style),b),transform:_}))}}])&&_(t.prototype,n),l&&_(t,l),f}(r.Component);e.default=P,k(P,"displayName","Draggable"),k(P,"propTypes",y(y({},c.default.propTypes),{},{axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe})),k(P,"defaultProps",y(y({},c.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))}(Draggable$2);var _require=Draggable$2,Draggable=_require.default,DraggableCore=_require.DraggableCore;cjs.exports=Draggable,cjs.exports.default=Draggable,cjs.exports.DraggableCore=DraggableCore;var Draggable$1=cjs.exports;
/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function ownKeys$4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$4(Object(r),!0).forEach((function(t){_defineProperty$2(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$4(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _typeof$2(e){return(_typeof$2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperty$2(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _extends$1(){return(_extends$1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _objectWithoutPropertiesLoose$1(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function _objectWithoutProperties$2(e,t){if(null==e)return{};var r,n,o=_objectWithoutPropertiesLoose$1(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var version="1.14.0";function userAgent(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var IE11OrLess=userAgent(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Edge=userAgent(/Edge/i),FireFox=userAgent(/firefox/i),Safari=userAgent(/safari/i)&&!userAgent(/chrome/i)&&!userAgent(/android/i),IOS=userAgent(/iP(ad|od|hone)/i),ChromeForAndroid=userAgent(/chrome/i)&&userAgent(/android/i),captureMode={capture:!1,passive:!1};function on(e,t,r){e.addEventListener(t,r,!IE11OrLess&&captureMode)}function off(e,t,r){e.removeEventListener(t,r,!IE11OrLess&&captureMode)}function matches(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(r){return!1}return!1}}function getParentOrHost(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function closest(e,t,r,n){if(e){r=r||document;do{if(null!=t&&(">"===t[0]?e.parentNode===r&&matches(e,t):matches(e,t))||n&&e===r)return e;if(e===r)break}while(e=getParentOrHost(e))}return null}var R_SPACE=/\s+/g,_throttleTimeout;function toggleClass(e,t,r){if(e&&t)if(e.classList)e.classList[r?"add":"remove"](t);else{var n=(" "+e.className+" ").replace(R_SPACE," ").replace(" "+t+" "," ");e.className=(n+(r?" "+t:"")).replace(R_SPACE," ")}}function css(e,t,r){var n=e&&e.style;if(n){if(void 0===r)return document.defaultView&&document.defaultView.getComputedStyle?r=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(r=e.currentStyle),void 0===t?r:r[t];t in n||-1!==t.indexOf("webkit")||(t="-webkit-"+t),n[t]=r+("string"==typeof r?"":"px")}}function matrix(e,t){var r="";if("string"==typeof e)r=e;else do{var n=css(e,"transform");n&&"none"!==n&&(r=n+" "+r)}while(!t&&(e=e.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(r)}function find(e,t,r){if(e){var n=e.getElementsByTagName(t),o=0,i=n.length;if(r)for(;o<i;o++)r(n[o],o);return n}return[]}function getWindowScrollingElement(){var e=document.scrollingElement;return e||document.documentElement}function getRect(e,t,r,n,o){if(e.getBoundingClientRect||e===window){var i,a,s,l,c,u,d;if(e!==window&&e.parentNode&&e!==getWindowScrollingElement()?(a=(i=e.getBoundingClientRect()).top,s=i.left,l=i.bottom,c=i.right,u=i.height,d=i.width):(a=0,s=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(t||r)&&e!==window&&(o=o||e.parentNode,!IE11OrLess))do{if(o&&o.getBoundingClientRect&&("none"!==css(o,"transform")||r&&"static"!==css(o,"position"))){var p=o.getBoundingClientRect();a-=p.top+parseInt(css(o,"border-top-width")),s-=p.left+parseInt(css(o,"border-left-width")),l=a+i.height,c=s+i.width;break}}while(o=o.parentNode);if(n&&e!==window){var f=matrix(o||e),h=f&&f.a,m=f&&f.d;f&&(l=(a/=m)+(u/=m),c=(s/=h)+(d/=h))}return{top:a,left:s,bottom:l,right:c,width:d,height:u}}}function isScrolledPast(e,t,r){for(var n=getParentAutoScrollElement(e,!0),o=getRect(e)[t];n;){var i=getRect(n)[r];if(!("top"===r||"left"===r?o>=i:o<=i))return n;if(n===getWindowScrollingElement())break;n=getParentAutoScrollElement(n,!1)}return!1}function getChild(e,t,r,n){for(var o=0,i=0,a=e.children;i<a.length;){if("none"!==a[i].style.display&&a[i]!==Sortable.ghost&&(n||a[i]!==Sortable.dragged)&&closest(a[i],r.draggable,e,!1)){if(o===t)return a[i];o++}i++}return null}function lastChild(e,t){for(var r=e.lastElementChild;r&&(r===Sortable.ghost||"none"===css(r,"display")||t&&!matches(r,t));)r=r.previousElementSibling;return r||null}function index$1(e,t){var r=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===Sortable.clone||t&&!matches(e,t)||r++;return r}function getRelativeScrollOffset(e){var t=0,r=0,n=getWindowScrollingElement();if(e)do{var o=matrix(e),i=o.a,a=o.d;t+=e.scrollLeft*i,r+=e.scrollTop*a}while(e!==n&&(e=e.parentNode));return[t,r]}function indexOfObject(e,t){for(var r in e)if(e.hasOwnProperty(r))for(var n in t)if(t.hasOwnProperty(n)&&t[n]===e[r][n])return Number(r);return-1}function getParentAutoScrollElement(e,t){if(!e||!e.getBoundingClientRect)return getWindowScrollingElement();var r=e,n=!1;do{if(r.clientWidth<r.scrollWidth||r.clientHeight<r.scrollHeight){var o=css(r);if(r.clientWidth<r.scrollWidth&&("auto"==o.overflowX||"scroll"==o.overflowX)||r.clientHeight<r.scrollHeight&&("auto"==o.overflowY||"scroll"==o.overflowY)){if(!r.getBoundingClientRect||r===document.body)return getWindowScrollingElement();if(n||t)return r;n=!0}}}while(r=r.parentNode);return getWindowScrollingElement()}function extend(e,t){if(e&&t)for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}function isRectEqual(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function throttle(e,t){return function(){if(!_throttleTimeout){var r=arguments,n=this;1===r.length?e.call(n,r[0]):e.apply(n,r),_throttleTimeout=setTimeout((function(){_throttleTimeout=void 0}),t)}}}function cancelThrottle(){clearTimeout(_throttleTimeout),_throttleTimeout=void 0}function scrollBy(e,t,r){e.scrollLeft+=t,e.scrollTop+=r}function clone(e){var t=window.Polymer,r=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):r?r(e).clone(!0)[0]:e.cloneNode(!0)}var expando="Sortable"+(new Date).getTime();function AnimationStateManager(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if("none"!==css(e,"display")&&e!==Sortable.ghost){t.push({target:e,rect:getRect(e)});var r=_objectSpread2({},t[t.length-1].rect);if(e.thisAnimationDuration){var n=matrix(e,!0);n&&(r.top-=n.f,r.left-=n.e)}e.fromRect=r}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(indexOfObject(t,{target:e}),1)},animateAll:function(r){var n=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof r&&r());var o=!1,i=0;t.forEach((function(e){var t=0,r=e.target,a=r.fromRect,s=getRect(r),l=r.prevFromRect,c=r.prevToRect,u=e.rect,d=matrix(r,!0);d&&(s.top-=d.f,s.left-=d.e),r.toRect=s,r.thisAnimationDuration&&isRectEqual(l,s)&&!isRectEqual(a,s)&&(u.top-s.top)/(u.left-s.left)==(a.top-s.top)/(a.left-s.left)&&(t=calculateRealTime(u,l,c,n.options)),isRectEqual(s,a)||(r.prevFromRect=a,r.prevToRect=s,t||(t=n.options.animation),n.animate(r,u,s,t)),t&&(o=!0,i=Math.max(i,t),clearTimeout(r.animationResetTimer),r.animationResetTimer=setTimeout((function(){r.animationTime=0,r.prevFromRect=null,r.fromRect=null,r.prevToRect=null,r.thisAnimationDuration=null}),t),r.thisAnimationDuration=t)})),clearTimeout(e),o?e=setTimeout((function(){"function"==typeof r&&r()}),i):"function"==typeof r&&r(),t=[]},animate:function(e,t,r,n){if(n){css(e,"transition",""),css(e,"transform","");var o=matrix(this.el),i=o&&o.a,a=o&&o.d,s=(t.left-r.left)/(i||1),l=(t.top-r.top)/(a||1);e.animatingX=!!s,e.animatingY=!!l,css(e,"transform","translate3d("+s+"px,"+l+"px,0)"),this.forRepaintDummy=repaint(e),css(e,"transition","transform "+n+"ms"+(this.options.easing?" "+this.options.easing:"")),css(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){css(e,"transition",""),css(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),n)}}}}function repaint(e){return e.offsetWidth}function calculateRealTime(e,t,r,n){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-r.top,2)+Math.pow(t.left-r.left,2))*n.animation}var plugins=[],defaults={initializeByDefault:!0},PluginManager={mount:function(e){for(var t in defaults)defaults.hasOwnProperty(t)&&!(t in e)&&(e[t]=defaults[t]);plugins.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),plugins.push(e)},pluginEvent:function(e,t,r){var n=this;this.eventCanceled=!1,r.cancel=function(){n.eventCanceled=!0};var o=e+"Global";plugins.forEach((function(n){t[n.pluginName]&&(t[n.pluginName][o]&&t[n.pluginName][o](_objectSpread2({sortable:t},r)),t.options[n.pluginName]&&t[n.pluginName][e]&&t[n.pluginName][e](_objectSpread2({sortable:t},r)))}))},initializePlugins:function(e,t,r,n){for(var o in plugins.forEach((function(n){var o=n.pluginName;if(e.options[o]||n.initializeByDefault){var i=new n(e,t,e.options);i.sortable=e,i.options=e.options,e[o]=i,_extends$1(r,i.defaults)}})),e.options)if(e.options.hasOwnProperty(o)){var i=this.modifyOption(e,o,e.options[o]);void 0!==i&&(e.options[o]=i)}},getEventProperties:function(e,t){var r={};return plugins.forEach((function(n){"function"==typeof n.eventProperties&&_extends$1(r,n.eventProperties.call(t[n.pluginName],e))})),r},modifyOption:function(e,t,r){var n;return plugins.forEach((function(o){e[o.pluginName]&&o.optionListeners&&"function"==typeof o.optionListeners[t]&&(n=o.optionListeners[t].call(e[o.pluginName],r))})),n}};function dispatchEvent(e){var t=e.sortable,r=e.rootEl,n=e.name,o=e.targetEl,i=e.cloneEl,a=e.toEl,s=e.fromEl,l=e.oldIndex,c=e.newIndex,u=e.oldDraggableIndex,d=e.newDraggableIndex,p=e.originalEvent,f=e.putSortable,h=e.extraEventProperties;if(t=t||r&&r[expando]){var m,g=t.options,y="on"+n.charAt(0).toUpperCase()+n.substr(1);!window.CustomEvent||IE11OrLess||Edge?(m=document.createEvent("Event")).initEvent(n,!0,!0):m=new CustomEvent(n,{bubbles:!0,cancelable:!0}),m.to=a||r,m.from=s||r,m.item=o||r,m.clone=i,m.oldIndex=l,m.newIndex=c,m.oldDraggableIndex=u,m.newDraggableIndex=d,m.originalEvent=p,m.pullMode=f?f.lastPutMode:void 0;var v=_objectSpread2(_objectSpread2({},h),PluginManager.getEventProperties(n,t));for(var b in v)m[b]=v[b];r&&r.dispatchEvent(m),g[y]&&g[y].call(t,m)}}var _excluded$1=["evt"],pluginEvent=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.evt,o=_objectWithoutProperties$2(r,_excluded$1);PluginManager.pluginEvent.bind(Sortable)(e,t,_objectSpread2({dragEl:dragEl,parentEl:parentEl,ghostEl:ghostEl,rootEl:rootEl,nextEl:nextEl,lastDownEl:lastDownEl,cloneEl:cloneEl,cloneHidden:cloneHidden,dragStarted:moved,putSortable:putSortable,activeSortable:Sortable.active,originalEvent:n,oldIndex:oldIndex,oldDraggableIndex:oldDraggableIndex,newIndex:newIndex,newDraggableIndex:newDraggableIndex,hideGhostForTarget:_hideGhostForTarget,unhideGhostForTarget:_unhideGhostForTarget,cloneNowHidden:function(){cloneHidden=!0},cloneNowShown:function(){cloneHidden=!1},dispatchSortableEvent:function(e){_dispatchEvent({sortable:t,name:e,originalEvent:n})}},o))};function _dispatchEvent(e){dispatchEvent(_objectSpread2({putSortable:putSortable,cloneEl:cloneEl,targetEl:dragEl,rootEl:rootEl,oldIndex:oldIndex,oldDraggableIndex:oldDraggableIndex,newIndex:newIndex,newDraggableIndex:newDraggableIndex},e))}var dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,oldIndex,newIndex,oldDraggableIndex,newDraggableIndex,activeGroup,putSortable,awaitingDragStarted=!1,ignoreNextClick=!1,sortables=[],tapEvt,touchEvt,lastDx,lastDy,tapDistanceLeft,tapDistanceTop,moved,lastTarget,lastDirection,pastFirstInvertThresh=!1,isCircumstantialInvert=!1,targetMoveDistance,ghostRelativeParent,ghostRelativeParentInitialScroll=[],_silent=!1,savedInputChecked=[],documentExists="undefined"!=typeof document,PositionGhostAbsolutely=IOS,CSSFloatProperty=Edge||IE11OrLess?"cssFloat":"float",supportDraggable=documentExists&&!ChromeForAndroid&&!IOS&&"draggable"in document.createElement("div"),supportCssPointerEvents=function(){if(documentExists){if(IE11OrLess)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),_detectDirection=function(e,t){var r=css(e),n=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),o=getChild(e,0,t),i=getChild(e,1,t),a=o&&css(o),s=i&&css(i),l=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+getRect(o).width,c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+getRect(i).width;if("flex"===r.display)return"column"===r.flexDirection||"column-reverse"===r.flexDirection?"vertical":"horizontal";if("grid"===r.display)return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&a.float&&"none"!==a.float){var u="left"===a.float?"left":"right";return!i||"both"!==s.clear&&s.clear!==u?"horizontal":"vertical"}return o&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||l>=n&&"none"===r[CSSFloatProperty]||i&&"none"===r[CSSFloatProperty]&&l+c>n)?"vertical":"horizontal"},_dragElInRowColumn=function(e,t,r){var n=r?e.left:e.top,o=r?e.right:e.bottom,i=r?e.width:e.height,a=r?t.left:t.top,s=r?t.right:t.bottom,l=r?t.width:t.height;return n===a||o===s||n+i/2===a+l/2},_detectNearestEmptySortable=function(e,t){var r;return sortables.some((function(n){var o=n[expando].options.emptyInsertThreshold;if(o&&!lastChild(n)){var i=getRect(n),a=e>=i.left-o&&e<=i.right+o,s=t>=i.top-o&&t<=i.bottom+o;return a&&s?r=n:void 0}})),r},_prepareGroup=function(e){function t(e,r){return function(n,o,i,a){var s=n.options.group.name&&o.options.group.name&&n.options.group.name===o.options.group.name;if(null==e&&(r||s))return!0;if(null==e||!1===e)return!1;if(r&&"clone"===e)return e;if("function"==typeof e)return t(e(n,o,i,a),r)(n,o,i,a);var l=(r?n:o).options.group.name;return!0===e||"string"==typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var r={},n=e.group;n&&"object"==_typeof$2(n)||(n={name:n}),r.name=n.name,r.checkPull=t(n.pull,!0),r.checkPut=t(n.put),r.revertClone=n.revertClone,e.group=r},_hideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","none")},_unhideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","")};documentExists&&document.addEventListener("click",(function(e){if(ignoreNextClick)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),ignoreNextClick=!1,!1}),!0);var nearestEmptyInsertDetectEvent=function(e){if(dragEl){e=e.touches?e.touches[0]:e;var t=_detectNearestEmptySortable(e.clientX,e.clientY);if(t){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);r.target=r.rootEl=t,r.preventDefault=void 0,r.stopPropagation=void 0,t[expando]._onDragOver(r)}}},_checkOutsideTargetEl=function(e){dragEl&&dragEl.parentNode[expando]._isOutsideThisEl(e.target)};function Sortable(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=_extends$1({},t),e[expando]=this;var r={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return _detectDirection(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Sortable.supportPointer&&"PointerEvent"in window&&!Safari,emptyInsertThreshold:5};for(var n in PluginManager.initializePlugins(this,e,r),r)!(n in t)&&(t[n]=r[n]);for(var o in _prepareGroup(t),this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!t.forceFallback&&supportDraggable,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?on(e,"pointerdown",this._onTapStart):(on(e,"mousedown",this._onTapStart),on(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(on(e,"dragover",this),on(e,"dragenter",this)),sortables.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),_extends$1(this,AnimationStateManager())}function _globalDragOver(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function _onMove(e,t,r,n,o,i,a,s){var l,c,u=e[expando],d=u.options.onMove;return!window.CustomEvent||IE11OrLess||Edge?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=r,l.draggedRect=n,l.related=o||t,l.relatedRect=i||getRect(t),l.willInsertAfter=s,l.originalEvent=a,e.dispatchEvent(l),d&&(c=d.call(u,l,a)),c}function _disableDraggable(e){e.draggable=!1}function _unsilent(){_silent=!1}function _ghostIsFirst(e,t,r){var n=getRect(getChild(r.el,0,r.options,!0));return t?e.clientX<n.left-10||e.clientY<n.top&&e.clientX<n.right:e.clientY<n.top-10||e.clientY<n.bottom&&e.clientX<n.left}function _ghostIsLast(e,t,r){var n=getRect(lastChild(r.el,r.options.draggable));return t?e.clientX>n.right+10||e.clientX<=n.right&&e.clientY>n.bottom&&e.clientX>=n.left:e.clientX>n.right&&e.clientY>n.top||e.clientX<=n.right&&e.clientY>n.bottom+10}function _getSwapDirection(e,t,r,n,o,i,a,s){var l=n?e.clientY:e.clientX,c=n?r.height:r.width,u=n?r.top:r.left,d=n?r.bottom:r.right,p=!1;if(!a)if(s&&targetMoveDistance<c*o){if(!pastFirstInvertThresh&&(1===lastDirection?l>u+c*i/2:l<d-c*i/2)&&(pastFirstInvertThresh=!0),pastFirstInvertThresh)p=!0;else if(1===lastDirection?l<u+targetMoveDistance:l>d-targetMoveDistance)return-lastDirection}else if(l>u+c*(1-o)/2&&l<d-c*(1-o)/2)return _getInsertDirection(t);return(p=p||a)&&(l<u+c*i/2||l>d-c*i/2)?l>u+c/2?1:-1:0}function _getInsertDirection(e){return index$1(dragEl)<index$1(e)?1:-1}function _generateId(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,r=t.length,n=0;r--;)n+=t.charCodeAt(r);return n.toString(36)}function _saveInputCheckedState(e){savedInputChecked.length=0;for(var t=e.getElementsByTagName("input"),r=t.length;r--;){var n=t[r];n.checked&&savedInputChecked.push(n)}}function _nextTick(e){return setTimeout(e,0)}function _cancelNextTick(e){return clearTimeout(e)}Sortable.prototype={constructor:Sortable,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(lastTarget=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,dragEl):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,r=this.el,n=this.options,o=n.preventOnFilter,i=e.type,a=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,s=(a||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,c=n.filter;if(_saveInputCheckedState(r),!dragEl&&!(/mousedown|pointerdown/.test(i)&&0!==e.button||n.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!Safari||!s||"SELECT"!==s.tagName.toUpperCase())&&!((s=closest(s,n.draggable,r,!1))&&s.animated||lastDownEl===s)){if(oldIndex=index$1(s),oldDraggableIndex=index$1(s,n.draggable),"function"==typeof c){if(c.call(this,e,s,this))return _dispatchEvent({sortable:t,rootEl:l,name:"filter",targetEl:s,toEl:r,fromEl:r}),pluginEvent("filter",t,{evt:e}),void(o&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(n){if(n=closest(l,n.trim(),r,!1))return _dispatchEvent({sortable:t,rootEl:n,name:"filter",targetEl:s,fromEl:r,toEl:r}),pluginEvent("filter",t,{evt:e}),!0}))))return void(o&&e.cancelable&&e.preventDefault());n.handle&&!closest(l,n.handle,r,!1)||this._prepareDragStart(e,a,s)}}},_prepareDragStart:function(e,t,r){var n,o=this,i=o.el,a=o.options,s=i.ownerDocument;if(r&&!dragEl&&r.parentNode===i){var l=getRect(r);if(rootEl=i,parentEl=(dragEl=r).parentNode,nextEl=dragEl.nextSibling,lastDownEl=r,activeGroup=a.group,Sortable.dragged=dragEl,tapEvt={target:dragEl,clientX:(t||e).clientX,clientY:(t||e).clientY},tapDistanceLeft=tapEvt.clientX-l.left,tapDistanceTop=tapEvt.clientY-l.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,dragEl.style["will-change"]="all",n=function(){pluginEvent("delayEnded",o,{evt:e}),Sortable.eventCanceled?o._onDrop():(o._disableDelayedDragEvents(),!FireFox&&o.nativeDraggable&&(dragEl.draggable=!0),o._triggerDragStart(e,t),_dispatchEvent({sortable:o,name:"choose",originalEvent:e}),toggleClass(dragEl,a.chosenClass,!0))},a.ignore.split(",").forEach((function(e){find(dragEl,e.trim(),_disableDraggable)})),on(s,"dragover",nearestEmptyInsertDetectEvent),on(s,"mousemove",nearestEmptyInsertDetectEvent),on(s,"touchmove",nearestEmptyInsertDetectEvent),on(s,"mouseup",o._onDrop),on(s,"touchend",o._onDrop),on(s,"touchcancel",o._onDrop),FireFox&&this.nativeDraggable&&(this.options.touchStartThreshold=4,dragEl.draggable=!0),pluginEvent("delayStart",this,{evt:e}),!a.delay||a.delayOnTouchOnly&&!t||this.nativeDraggable&&(Edge||IE11OrLess))n();else{if(Sortable.eventCanceled)return void this._onDrop();on(s,"mouseup",o._disableDelayedDrag),on(s,"touchend",o._disableDelayedDrag),on(s,"touchcancel",o._disableDelayedDrag),on(s,"mousemove",o._delayedDragTouchMoveHandler),on(s,"touchmove",o._delayedDragTouchMoveHandler),a.supportPointer&&on(s,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(n,a.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){dragEl&&_disableDraggable(dragEl),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;off(e,"mouseup",this._disableDelayedDrag),off(e,"touchend",this._disableDelayedDrag),off(e,"touchcancel",this._disableDelayedDrag),off(e,"mousemove",this._delayedDragTouchMoveHandler),off(e,"touchmove",this._delayedDragTouchMoveHandler),off(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?on(document,"pointermove",this._onTouchMove):on(document,t?"touchmove":"mousemove",this._onTouchMove):(on(dragEl,"dragend",this),on(rootEl,"dragstart",this._onDragStart));try{document.selection?_nextTick((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(r){}},_dragStarted:function(e,t){if(awaitingDragStarted=!1,rootEl&&dragEl){pluginEvent("dragStarted",this,{evt:t}),this.nativeDraggable&&on(document,"dragover",_checkOutsideTargetEl);var r=this.options;!e&&toggleClass(dragEl,r.dragClass,!1),toggleClass(dragEl,r.ghostClass,!0),Sortable.active=this,e&&this._appendGhost(),_dispatchEvent({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(touchEvt){this._lastX=touchEvt.clientX,this._lastY=touchEvt.clientY,_hideGhostForTarget();for(var e=document.elementFromPoint(touchEvt.clientX,touchEvt.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(touchEvt.clientX,touchEvt.clientY))!==t;)t=e;if(dragEl.parentNode[expando]._isOutsideThisEl(e),t)do{if(t[expando]){if(t[expando]._onDragOver({clientX:touchEvt.clientX,clientY:touchEvt.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);_unhideGhostForTarget()}},_onTouchMove:function(e){if(tapEvt){var t=this.options,r=t.fallbackTolerance,n=t.fallbackOffset,o=e.touches?e.touches[0]:e,i=ghostEl&&matrix(ghostEl,!0),a=ghostEl&&i&&i.a,s=ghostEl&&i&&i.d,l=PositionGhostAbsolutely&&ghostRelativeParent&&getRelativeScrollOffset(ghostRelativeParent),c=(o.clientX-tapEvt.clientX+n.x)/(a||1)+(l?l[0]-ghostRelativeParentInitialScroll[0]:0)/(a||1),u=(o.clientY-tapEvt.clientY+n.y)/(s||1)+(l?l[1]-ghostRelativeParentInitialScroll[1]:0)/(s||1);if(!Sortable.active&&!awaitingDragStarted){if(r&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(ghostEl){i?(i.e+=c-(lastDx||0),i.f+=u-(lastDy||0)):i={a:1,b:0,c:0,d:1,e:c,f:u};var d="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");css(ghostEl,"webkitTransform",d),css(ghostEl,"mozTransform",d),css(ghostEl,"msTransform",d),css(ghostEl,"transform",d),lastDx=c,lastDy=u,touchEvt=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ghostEl){var e=this.options.fallbackOnBody?document.body:rootEl,t=getRect(dragEl,!0,PositionGhostAbsolutely,!0,e),r=this.options;if(PositionGhostAbsolutely){for(ghostRelativeParent=e;"static"===css(ghostRelativeParent,"position")&&"none"===css(ghostRelativeParent,"transform")&&ghostRelativeParent!==document;)ghostRelativeParent=ghostRelativeParent.parentNode;ghostRelativeParent!==document.body&&ghostRelativeParent!==document.documentElement?(ghostRelativeParent===document&&(ghostRelativeParent=getWindowScrollingElement()),t.top+=ghostRelativeParent.scrollTop,t.left+=ghostRelativeParent.scrollLeft):ghostRelativeParent=getWindowScrollingElement(),ghostRelativeParentInitialScroll=getRelativeScrollOffset(ghostRelativeParent)}toggleClass(ghostEl=dragEl.cloneNode(!0),r.ghostClass,!1),toggleClass(ghostEl,r.fallbackClass,!0),toggleClass(ghostEl,r.dragClass,!0),css(ghostEl,"transition",""),css(ghostEl,"transform",""),css(ghostEl,"box-sizing","border-box"),css(ghostEl,"margin",0),css(ghostEl,"top",t.top),css(ghostEl,"left",t.left),css(ghostEl,"width",t.width),css(ghostEl,"height",t.height),css(ghostEl,"opacity","0.8"),css(ghostEl,"position",PositionGhostAbsolutely?"absolute":"fixed"),css(ghostEl,"zIndex","100000"),css(ghostEl,"pointerEvents","none"),Sortable.ghost=ghostEl,e.appendChild(ghostEl),css(ghostEl,"transform-origin",tapDistanceLeft/parseInt(ghostEl.style.width)*100+"% "+tapDistanceTop/parseInt(ghostEl.style.height)*100+"%")}},_onDragStart:function(e,t){var r=this,n=e.dataTransfer,o=r.options;pluginEvent("dragStart",this,{evt:e}),Sortable.eventCanceled?this._onDrop():(pluginEvent("setupClone",this),Sortable.eventCanceled||((cloneEl=clone(dragEl)).draggable=!1,cloneEl.style["will-change"]="",this._hideClone(),toggleClass(cloneEl,this.options.chosenClass,!1),Sortable.clone=cloneEl),r.cloneId=_nextTick((function(){pluginEvent("clone",r),Sortable.eventCanceled||(r.options.removeCloneOnHide||rootEl.insertBefore(cloneEl,dragEl),r._hideClone(),_dispatchEvent({sortable:r,name:"clone"}))})),!t&&toggleClass(dragEl,o.dragClass,!0),t?(ignoreNextClick=!0,r._loopId=setInterval(r._emulateDragOver,50)):(off(document,"mouseup",r._onDrop),off(document,"touchend",r._onDrop),off(document,"touchcancel",r._onDrop),n&&(n.effectAllowed="move",o.setData&&o.setData.call(r,n,dragEl)),on(document,"drop",r),css(dragEl,"transform","translateZ(0)")),awaitingDragStarted=!0,r._dragStartId=_nextTick(r._dragStarted.bind(r,t,e)),on(document,"selectstart",r),moved=!0,Safari&&css(document.body,"user-select","none"))},_onDragOver:function(e){var t,r,n,o,i=this.el,a=e.target,s=this.options,l=s.group,c=Sortable.active,u=activeGroup===l,d=s.sort,p=putSortable||c,f=this,h=!1;if(!_silent){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),a=closest(a,s.draggable,i,!0),C("dragOver"),Sortable.eventCanceled)return h;if(dragEl.contains(e.target)||a.animated&&a.animatingX&&a.animatingY||f._ignoreWhileAnimating===a)return O(!1);if(ignoreNextClick=!1,c&&!s.disabled&&(u?d||(n=parentEl!==rootEl):putSortable===this||(this.lastPutMode=activeGroup.checkPull(this,c,dragEl,e))&&l.checkPut(this,c,dragEl,e))){if(o="vertical"===this._getDirection(e,a),t=getRect(dragEl),C("dragOverValid"),Sortable.eventCanceled)return h;if(n)return parentEl=rootEl,R(),this._hideClone(),C("revert"),Sortable.eventCanceled||(nextEl?rootEl.insertBefore(dragEl,nextEl):rootEl.appendChild(dragEl)),O(!0);var m=lastChild(i,s.draggable);if(!m||_ghostIsLast(e,o,this)&&!m.animated){if(m===dragEl)return O(!1);if(m&&i===e.target&&(a=m),a&&(r=getRect(a)),!1!==_onMove(rootEl,i,dragEl,t,a,r,e,!!a))return R(),i.appendChild(dragEl),parentEl=i,I(),O(!0)}else if(m&&_ghostIsFirst(e,o,this)){var g=getChild(i,0,s,!0);if(g===dragEl)return O(!1);if(r=getRect(a=g),!1!==_onMove(rootEl,i,dragEl,t,a,r,e,!1))return R(),i.insertBefore(dragEl,g),parentEl=i,I(),O(!0)}else if(a.parentNode===i){r=getRect(a);var y,v,b,_=dragEl.parentNode!==i,S=!_dragElInRowColumn(dragEl.animated&&dragEl.toRect||t,a.animated&&a.toRect||r,o),w=o?"top":"left",x=isScrolledPast(a,"top","top")||isScrolledPast(dragEl,"top","top"),E=x?x.scrollTop:void 0;if(lastTarget!==a&&(v=r[w],pastFirstInvertThresh=!1,isCircumstantialInvert=!S&&s.invertSwap||_),0!==(y=_getSwapDirection(e,a,r,o,S?1:s.swapThreshold,null==s.invertedSwapThreshold?s.swapThreshold:s.invertedSwapThreshold,isCircumstantialInvert,lastTarget===a))){var A=index$1(dragEl);do{A-=y,b=parentEl.children[A]}while(b&&("none"===css(b,"display")||b===ghostEl))}if(0===y||b===a)return O(!1);lastTarget=a,lastDirection=y;var k=a.nextElementSibling,P=!1,T=_onMove(rootEl,i,dragEl,t,a,r,e,P=1===y);if(!1!==T)return 1!==T&&-1!==T||(P=1===T),_silent=!0,setTimeout(_unsilent,30),R(),P&&!k?i.appendChild(dragEl):a.parentNode.insertBefore(dragEl,P?k:a),x&&scrollBy(x,0,E-x.scrollTop),parentEl=dragEl.parentNode,void 0===v||isCircumstantialInvert||(targetMoveDistance=Math.abs(v-getRect(a)[w])),I(),O(!0)}if(i.contains(dragEl))return O(!1)}return!1}function C(s,l){pluginEvent(s,f,_objectSpread2({evt:e,isOwner:u,axis:o?"vertical":"horizontal",revert:n,dragRect:t,targetRect:r,canSort:d,fromSortable:p,target:a,completed:O,onMove:function(r,n){return _onMove(rootEl,i,dragEl,t,r,getRect(r),e,n)},changed:I},l))}function R(){C("dragOverAnimationCapture"),f.captureAnimationState(),f!==p&&p.captureAnimationState()}function O(t){return C("dragOverCompleted",{insertion:t}),t&&(u?c._hideClone():c._showClone(f),f!==p&&(toggleClass(dragEl,putSortable?putSortable.options.ghostClass:c.options.ghostClass,!1),toggleClass(dragEl,s.ghostClass,!0)),putSortable!==f&&f!==Sortable.active?putSortable=f:f===Sortable.active&&putSortable&&(putSortable=null),p===f&&(f._ignoreWhileAnimating=a),f.animateAll((function(){C("dragOverAnimationComplete"),f._ignoreWhileAnimating=null})),f!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(a===dragEl&&!dragEl.animated||a===i&&!a.animated)&&(lastTarget=null),s.dragoverBubble||e.rootEl||a===document||(dragEl.parentNode[expando]._isOutsideThisEl(e.target),!t&&nearestEmptyInsertDetectEvent(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),h=!0}function I(){newIndex=index$1(dragEl),newDraggableIndex=index$1(dragEl,s.draggable),_dispatchEvent({sortable:f,name:"change",toEl:i,newIndex:newIndex,newDraggableIndex:newDraggableIndex,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){off(document,"mousemove",this._onTouchMove),off(document,"touchmove",this._onTouchMove),off(document,"pointermove",this._onTouchMove),off(document,"dragover",nearestEmptyInsertDetectEvent),off(document,"mousemove",nearestEmptyInsertDetectEvent),off(document,"touchmove",nearestEmptyInsertDetectEvent)},_offUpEvents:function(){var e=this.el.ownerDocument;off(e,"mouseup",this._onDrop),off(e,"touchend",this._onDrop),off(e,"pointerup",this._onDrop),off(e,"touchcancel",this._onDrop),off(document,"selectstart",this)},_onDrop:function(e){var t=this.el,r=this.options;newIndex=index$1(dragEl),newDraggableIndex=index$1(dragEl,r.draggable),pluginEvent("drop",this,{evt:e}),parentEl=dragEl&&dragEl.parentNode,newIndex=index$1(dragEl),newDraggableIndex=index$1(dragEl,r.draggable),Sortable.eventCanceled||(awaitingDragStarted=!1,isCircumstantialInvert=!1,pastFirstInvertThresh=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),_cancelNextTick(this.cloneId),_cancelNextTick(this._dragStartId),this.nativeDraggable&&(off(document,"drop",this),off(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Safari&&css(document.body,"user-select",""),css(dragEl,"transform",""),e&&(moved&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),ghostEl&&ghostEl.parentNode&&ghostEl.parentNode.removeChild(ghostEl),(rootEl===parentEl||putSortable&&"clone"!==putSortable.lastPutMode)&&cloneEl&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),dragEl&&(this.nativeDraggable&&off(dragEl,"dragend",this),_disableDraggable(dragEl),dragEl.style["will-change"]="",moved&&!awaitingDragStarted&&toggleClass(dragEl,putSortable?putSortable.options.ghostClass:this.options.ghostClass,!1),toggleClass(dragEl,this.options.chosenClass,!1),_dispatchEvent({sortable:this,name:"unchoose",toEl:parentEl,newIndex:null,newDraggableIndex:null,originalEvent:e}),rootEl!==parentEl?(newIndex>=0&&(_dispatchEvent({rootEl:parentEl,name:"add",toEl:parentEl,fromEl:rootEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"remove",toEl:parentEl,originalEvent:e}),_dispatchEvent({rootEl:parentEl,name:"sort",toEl:parentEl,fromEl:rootEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:e})),putSortable&&putSortable.save()):newIndex!==oldIndex&&newIndex>=0&&(_dispatchEvent({sortable:this,name:"update",toEl:parentEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:e})),Sortable.active&&(null!=newIndex&&-1!==newIndex||(newIndex=oldIndex,newDraggableIndex=oldDraggableIndex),_dispatchEvent({sortable:this,name:"end",toEl:parentEl,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){pluginEvent("nulling",this),rootEl=dragEl=parentEl=ghostEl=nextEl=cloneEl=lastDownEl=cloneHidden=tapEvt=touchEvt=moved=newIndex=newDraggableIndex=oldIndex=oldDraggableIndex=lastTarget=lastDirection=putSortable=activeGroup=Sortable.dragged=Sortable.ghost=Sortable.clone=Sortable.active=null,savedInputChecked.forEach((function(e){e.checked=!0})),savedInputChecked.length=lastDx=lastDy=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":dragEl&&(this._onDragOver(e),_globalDragOver(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],r=this.el.children,n=0,o=r.length,i=this.options;n<o;n++)closest(e=r[n],i.draggable,this.el,!1)&&t.push(e.getAttribute(i.dataIdAttr)||_generateId(e));return t},sort:function(e,t){var r={},n=this.el;this.toArray().forEach((function(e,t){var o=n.children[t];closest(o,this.options.draggable,n,!1)&&(r[e]=o)}),this),t&&this.captureAnimationState(),e.forEach((function(e){r[e]&&(n.removeChild(r[e]),n.appendChild(r[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return closest(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var r=this.options;if(void 0===t)return r[e];var n=PluginManager.modifyOption(this,e,t);r[e]=void 0!==n?n:t,"group"===e&&_prepareGroup(r)},destroy:function(){pluginEvent("destroy",this);var e=this.el;e[expando]=null,off(e,"mousedown",this._onTapStart),off(e,"touchstart",this._onTapStart),off(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(off(e,"dragover",this),off(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),sortables.splice(sortables.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!cloneHidden){if(pluginEvent("hideClone",this),Sortable.eventCanceled)return;css(cloneEl,"display","none"),this.options.removeCloneOnHide&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),cloneHidden=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(cloneHidden){if(pluginEvent("showClone",this),Sortable.eventCanceled)return;dragEl.parentNode!=rootEl||this.options.group.revertClone?nextEl?rootEl.insertBefore(cloneEl,nextEl):rootEl.appendChild(cloneEl):rootEl.insertBefore(cloneEl,dragEl),this.options.group.revertClone&&this.animate(dragEl,cloneEl),css(cloneEl,"display",""),cloneHidden=!1}}else this._hideClone()}},documentExists&&on(document,"touchmove",(function(e){(Sortable.active||awaitingDragStarted)&&e.cancelable&&e.preventDefault()})),Sortable.utils={on:on,off:off,css:css,find:find,is:function(e,t){return!!closest(e,t,e,!1)},extend:extend,throttle:throttle,closest:closest,toggleClass:toggleClass,clone:clone,index:index$1,nextTick:_nextTick,cancelNextTick:_cancelNextTick,detectDirection:_detectDirection,getChild:getChild},Sortable.get=function(e){return e[expando]},Sortable.mount=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(Sortable.utils=_objectSpread2(_objectSpread2({},Sortable.utils),e.utils)),PluginManager.mount(e)}))},Sortable.create=function(e,t){return new Sortable(e,t)},Sortable.version=version;var autoScrolls=[],scrollEl,scrollRootEl,scrolling=!1,lastAutoScrollX,lastAutoScrollY,touchEvt$1,pointerElemChangedInterval;function AutoScrollPlugin(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?on(document,"dragover",this._handleAutoScroll):this.options.supportPointer?on(document,"pointermove",this._handleFallbackAutoScroll):t.touches?on(document,"touchmove",this._handleFallbackAutoScroll):on(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?off(document,"dragover",this._handleAutoScroll):(off(document,"pointermove",this._handleFallbackAutoScroll),off(document,"touchmove",this._handleFallbackAutoScroll),off(document,"mousemove",this._handleFallbackAutoScroll)),clearPointerElemChangedInterval(),clearAutoScrolls(),cancelThrottle()},nulling:function(){touchEvt$1=scrollRootEl=scrollEl=scrolling=pointerElemChangedInterval=lastAutoScrollX=lastAutoScrollY=null,autoScrolls.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var r=this,n=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,i=document.elementFromPoint(n,o);if(touchEvt$1=e,t||this.options.forceAutoScrollFallback||Edge||IE11OrLess||Safari){autoScroll(e,this.options,i,t);var a=getParentAutoScrollElement(i,!0);!scrolling||pointerElemChangedInterval&&n===lastAutoScrollX&&o===lastAutoScrollY||(pointerElemChangedInterval&&clearPointerElemChangedInterval(),pointerElemChangedInterval=setInterval((function(){var i=getParentAutoScrollElement(document.elementFromPoint(n,o),!0);i!==a&&(a=i,clearAutoScrolls()),autoScroll(e,r.options,i,t)}),10),lastAutoScrollX=n,lastAutoScrollY=o)}else{if(!this.options.bubbleScroll||getParentAutoScrollElement(i,!0)===getWindowScrollingElement())return void clearAutoScrolls();autoScroll(e,this.options,getParentAutoScrollElement(i,!1),!1)}}},_extends$1(e,{pluginName:"scroll",initializeByDefault:!0})}function clearAutoScrolls(){autoScrolls.forEach((function(e){clearInterval(e.pid)})),autoScrolls=[]}function clearPointerElemChangedInterval(){clearInterval(pointerElemChangedInterval)}var autoScroll=throttle((function(e,t,r,n){if(t.scroll){var o,i=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,s=t.scrollSensitivity,l=t.scrollSpeed,c=getWindowScrollingElement(),u=!1;scrollRootEl!==r&&(scrollRootEl=r,clearAutoScrolls(),scrollEl=t.scroll,o=t.scrollFn,!0===scrollEl&&(scrollEl=getParentAutoScrollElement(r,!0)));var d=0,p=scrollEl;do{var f=p,h=getRect(f),m=h.top,g=h.bottom,y=h.left,v=h.right,b=h.width,_=h.height,S=void 0,w=void 0,x=f.scrollWidth,E=f.scrollHeight,A=css(f),k=f.scrollLeft,P=f.scrollTop;f===c?(S=b<x&&("auto"===A.overflowX||"scroll"===A.overflowX||"visible"===A.overflowX),w=_<E&&("auto"===A.overflowY||"scroll"===A.overflowY||"visible"===A.overflowY)):(S=b<x&&("auto"===A.overflowX||"scroll"===A.overflowX),w=_<E&&("auto"===A.overflowY||"scroll"===A.overflowY));var T=S&&(Math.abs(v-i)<=s&&k+b<x)-(Math.abs(y-i)<=s&&!!k),C=w&&(Math.abs(g-a)<=s&&P+_<E)-(Math.abs(m-a)<=s&&!!P);if(!autoScrolls[d])for(var R=0;R<=d;R++)autoScrolls[R]||(autoScrolls[R]={});autoScrolls[d].vx==T&&autoScrolls[d].vy==C&&autoScrolls[d].el===f||(autoScrolls[d].el=f,autoScrolls[d].vx=T,autoScrolls[d].vy=C,clearInterval(autoScrolls[d].pid),0==T&&0==C||(u=!0,autoScrolls[d].pid=setInterval(function(){n&&0===this.layer&&Sortable.active._onTouchMove(touchEvt$1);var t=autoScrolls[this.layer].vy?autoScrolls[this.layer].vy*l:0,r=autoScrolls[this.layer].vx?autoScrolls[this.layer].vx*l:0;"function"==typeof o&&"continue"!==o.call(Sortable.dragged.parentNode[expando],r,t,e,touchEvt$1,autoScrolls[this.layer].el)||scrollBy(autoScrolls[this.layer].el,r,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&p!==c&&(p=getParentAutoScrollElement(p,!1)));scrolling=u}}),30),drop=function(e){var t=e.originalEvent,r=e.putSortable,n=e.dragEl,o=e.activeSortable,i=e.dispatchSortableEvent,a=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(t){var l=r||o;a();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,u=document.elementFromPoint(c.clientX,c.clientY);s(),l&&!l.el.contains(u)&&(i("spill"),this.onSpill({dragEl:n,putSortable:r}))}},lastSwapEl;function Revert(){}function Remove(){}function SwapPlugin(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(e){var t=e.dragEl;lastSwapEl=t},dragOverValid:function(e){var t=e.completed,r=e.target,n=e.onMove,o=e.activeSortable,i=e.changed,a=e.cancel;if(o.options.swap){var s=this.sortable.el,l=this.options;if(r&&r!==s){var c=lastSwapEl;!1!==n(r)?(toggleClass(r,l.swapClass,!0),lastSwapEl=r):lastSwapEl=null,c&&c!==lastSwapEl&&toggleClass(c,l.swapClass,!1)}i(),t(!0),a()}},drop:function(e){var t=e.activeSortable,r=e.putSortable,n=e.dragEl,o=r||this.sortable,i=this.options;lastSwapEl&&toggleClass(lastSwapEl,i.swapClass,!1),lastSwapEl&&(i.swap||r&&r.options.swap)&&n!==lastSwapEl&&(o.captureAnimationState(),o!==t&&t.captureAnimationState(),swapNodes(n,lastSwapEl),o.animateAll(),o!==t&&t.animateAll())},nulling:function(){lastSwapEl=null}},_extends$1(e,{pluginName:"swap",eventProperties:function(){return{swapItem:lastSwapEl}}})}function swapNodes(e,t){var r,n,o=e.parentNode,i=t.parentNode;o&&i&&!o.isEqualNode(t)&&!i.isEqualNode(e)&&(r=index$1(e),n=index$1(t),o.isEqualNode(i)&&r<n&&n++,o.insertBefore(t,o.children[r]),i.insertBefore(e,i.children[n]))}Revert.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var n=getChild(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(t,n):this.sortable.el.appendChild(t),this.sortable.animateAll(),r&&r.animateAll()},drop:drop},_extends$1(Revert,{pluginName:"revertOnSpill"}),Remove.prototype={onSpill:function(e){var t=e.dragEl,r=e.putSortable||this.sortable;r.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),r.animateAll()},drop:drop},_extends$1(Remove,{pluginName:"removeOnSpill"}),Sortable.mount(new AutoScrollPlugin),Sortable.mount(Remove,Revert);var DEFAULT_PLAY_INDEX=0,DEFAULT_VOLUME=1,DEFAULT_REMOVE_ID=-1,PLAYER_KEY="__PLAYER_KEY__",SORTABLE_CONFIG={selector:"audio-lists-panel-content-wrap",swapClass:"audio-lists-panel-sortable-highlight-bg",swap:!0,animation:100,easing:"cubic-bezier(0.43, -0.1, 0.16, 1.1)"},AudioListsPanel=function(e){var t=e.audioLists,r=e.onCancel,n=e.onDelete,o=e.onPlay,i=e.playId,a=e.loading,s=e.panelToggleAnimate,l=e.glassBg,c=e.remove,u=e.removeId,d=e.isMobile,p=e.locale,f=e.icon,h=e.playing;return React$1.createElement("div",{className:cls("audio-lists-panel",s,{"audio-lists-panel-mobile":d,"glass-bg":l})},React$1.createElement("div",{className:"audio-lists-panel-header"},React$1.createElement("h2",{className:"audio-lists-panel-header-title"},React$1.createElement("span",null,p.playListsText," / "),React$1.createElement("span",{className:"audio-lists-panel-header-num"},t.length),React$1.createElement("span",{className:"audio-lists-panel-header-actions"},c&&React$1.createElement(React$1.Fragment,null,React$1.createElement("span",{className:"audio-lists-panel-header-delete-btn",title:p.removeAudioListsText,onClick:n()},f.delete),React$1.createElement("span",{className:"audio-lists-panel-header-line"})),React$1.createElement("span",{className:"audio-lists-panel-header-close-btn",title:p.closeText,onClick:r},d?f.packUpPanelMobile:f.close)))),React$1.createElement("div",{className:cls("audio-lists-panel-content",{"no-content":t.length<1})},t.length>=1?React$1.createElement("ul",{className:SORTABLE_CONFIG.selector},t.map((function(e){var t=e.name,r=e.singer,s=e[PLAYER_KEY],l=i===s;return React$1.createElement("li",{key:s,title:h&&l?p.clickToPauseText:p.clickToPlayText,className:cls("audio-item",{playing:l},{pause:!h},{remove:u===s}),onClick:function(){return o(s)}},React$1.createElement("span",{className:"group player-status"},React$1.createElement("span",{className:"player-icons"},l&&a?f.loading:l?h?f.pause:f.play:void 0)),React$1.createElement("span",{className:"group player-name",title:t},t),React$1.createElement("span",{className:"group player-singer",title:r},r),c&&React$1.createElement("span",{className:"group player-delete",title:p.clickToDeleteText(t),onClick:n(s)},f.close))}))):React$1.createElement(React$1.Fragment,null,React$1.createElement("span",null,f.empty),React$1.createElement("span",{className:"no-data"},p.emptyText||p.notContentText))))},AudioListsPanel$1=react.exports.memo(AudioListsPanel),CircleProcessBar=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.progress,r=void 0===t?0:t,n=e.r,o=void 0===n?40:n,i=r.toFixed(2),a=2*Math.PI*o,s="".concat(Math.floor(a*i)," ").concat(Math.floor(a*(1-i)));return React$1.createElement("svg",{className:"audio-circle-process-bar"},React$1.createElement("circle",{cx:o,cy:o,r:o-1,fill:"none",className:"stroke",strokeDasharray:s}),React$1.createElement("circle",{cx:o,cy:o,r:o-1,fill:"none",className:"bg",strokeDasharray:"0 1000"}))},CircleProcessBar$1=react.exports.memo(CircleProcessBar),IconsManifest=[{id:"fa",name:"Font Awesome",projectUrl:"https://fontawesome.com/",license:"CC BY 4.0 License",licenseUrl:"https://creativecommons.org/licenses/by/4.0/"},{id:"io",name:"Ionicons 4",projectUrl:"https://ionicons.com/",license:"MIT",licenseUrl:"https://github.com/ionic-team/ionicons/blob/master/LICENSE"},{id:"io5",name:"Ionicons 5",projectUrl:"https://ionicons.com/",license:"MIT",licenseUrl:"https://github.com/ionic-team/ionicons/blob/master/LICENSE"},{id:"md",name:"Material Design icons",projectUrl:"http://google.github.io/material-design-icons/",license:"Apache License Version 2.0",licenseUrl:"https://github.com/google/material-design-icons/blob/master/LICENSE"},{id:"ti",name:"Typicons",projectUrl:"http://s-ings.com/typicons/",license:"CC BY-SA 3.0",licenseUrl:"https://creativecommons.org/licenses/by-sa/3.0/"},{id:"go",name:"Github Octicons icons",projectUrl:"https://octicons.github.com/",license:"MIT",licenseUrl:"https://github.com/primer/octicons/blob/master/LICENSE"},{id:"fi",name:"Feather",projectUrl:"https://feathericons.com/",license:"MIT",licenseUrl:"https://github.com/feathericons/feather/blob/master/LICENSE"},{id:"gi",name:"Game Icons",projectUrl:"https://game-icons.net/",license:"CC BY 3.0",licenseUrl:"https://creativecommons.org/licenses/by/3.0/"},{id:"wi",name:"Weather Icons",projectUrl:"https://erikflowers.github.io/weather-icons/",license:"SIL OFL 1.1",licenseUrl:"http://scripts.sil.org/OFL"},{id:"di",name:"Devicons",projectUrl:"https://vorillaz.github.io/devicons/",license:"MIT",licenseUrl:"https://opensource.org/licenses/MIT"},{id:"ai",name:"Ant Design Icons",projectUrl:"https://github.com/ant-design/ant-design-icons",license:"MIT",licenseUrl:"https://opensource.org/licenses/MIT"},{id:"bs",name:"Bootstrap Icons",projectUrl:"https://github.com/twbs/icons",license:"MIT",licenseUrl:"https://opensource.org/licenses/MIT"},{id:"ri",name:"Remix Icon",projectUrl:"https://github.com/Remix-Design/RemixIcon",license:"Apache License Version 2.0",licenseUrl:"http://www.apache.org/licenses/"},{id:"fc",name:"Flat Color Icons",projectUrl:"https://github.com/icons8/flat-color-icons",license:"MIT",licenseUrl:"https://opensource.org/licenses/MIT"},{id:"gr",name:"Grommet-Icons",projectUrl:"https://github.com/grommet/grommet-icons",license:"Apache License Version 2.0",licenseUrl:"http://www.apache.org/licenses/"},{id:"hi",name:"Heroicons",projectUrl:"https://github.com/refactoringui/heroicons",license:"MIT",licenseUrl:"https://opensource.org/licenses/MIT"},{id:"si",name:"Simple Icons",projectUrl:"https://simpleicons.org/",license:"CC0 1.0 Universal",licenseUrl:"https://creativecommons.org/publicdomain/zero/1.0/"},{id:"im",name:"IcoMoon Free",projectUrl:"https://github.com/Keyamoon/IcoMoon-Free",license:"CC BY 4.0 License"},{id:"bi",name:"BoxIcons",projectUrl:"https://github.com/atisawd/boxicons",license:"CC BY 4.0 License"},{id:"cg",name:"css.gg",projectUrl:"https://github.com/astrit/css.gg",license:"MIT",licenseUrl:"https://opensource.org/licenses/MIT"},{id:"vsc",name:"VS Code Icons",projectUrl:"https://github.com/microsoft/vscode-codicons",license:"CC BY 4.0",licenseUrl:"https://creativecommons.org/licenses/by/4.0/"}],DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React$1.createContext&&React$1.createContext(DefaultContext),__assign=function(){return(__assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__rest=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};function Tree2Element(e){return e&&e.map((function(e,t){return React$1.createElement(e.tag,__assign({key:t},e.attr),Tree2Element(e.child))}))}function GenIcon$l(e){return function(t){return React$1.createElement(IconBase,__assign({attr:__assign({},e.attr)},t),Tree2Element(e.child))}}function IconBase(e){var t=function(t){var r,n=e.attr,o=e.size,i=e.title,a=__rest(e,["attr","size","title"]),s=o||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),React$1.createElement("svg",__assign({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,a,{className:r,style:__assign(__assign({color:e.color||t.color},t.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),i&&React$1.createElement("title",null,i),e.children)};return void 0!==IconContext?React$1.createElement(IconContext.Consumer,null,(function(e){return t(e)})):t(DefaultContext)}var esm=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",IconsManifest:IconsManifest,GenIcon:GenIcon$l,IconBase:IconBase,DefaultContext:DefaultContext,IconContext:IconContext}),require$$0=getAugmentedNamespace(esm),GenIcon$k=require$$0.GenIcon,FaPauseCircle_1=function(e){return GenIcon$k({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm-16 328c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h48c8.8 0 16 7.2 16 16v160zm112 0c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h48c8.8 0 16 7.2 16 16v160z"}}]})(e)},GenIcon$j=require$$0.GenIcon,FaPlayCircle_1=function(e){return GenIcon$j({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z"}}]})(e)},GenIcon$i=require$$0.GenIcon,FaBook_1=function(e){return GenIcon$i({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 360V24c0-13.3-10.7-24-24-24H96C43 0 0 43 0 96v320c0 53 43 96 96 96h328c13.3 0 24-10.7 24-24v-16c0-7.5-3.5-14.3-8.9-18.7-4.2-15.4-4.2-59.3 0-74.7 5.4-4.3 8.9-11.1 8.9-18.6zM128 134c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm0 64c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm253.4 250H96c-17.7 0-32-14.3-32-32 0-17.6 14.4-32 32-32h285.4c-1.9 17.1-1.9 46.9 0 64z"}}]})(e)},GenIcon$h=require$$0.GenIcon,FaHeadphones_1=function(e){return GenIcon$h({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 32C114.52 32 0 146.496 0 288v48a32 32 0 0 0 17.689 28.622l14.383 7.191C34.083 431.903 83.421 480 144 480h24c13.255 0 24-10.745 24-24V280c0-13.255-10.745-24-24-24h-24c-31.342 0-59.671 12.879-80 33.627V288c0-105.869 86.131-192 192-192s192 86.131 192 192v1.627C427.671 268.879 399.342 256 368 256h-24c-13.255 0-24 10.745-24 24v176c0 13.255 10.745 24 24 24h24c60.579 0 109.917-48.098 111.928-108.187l14.382-7.191A32 32 0 0 0 512 336v-48c0-141.479-114.496-256-256-256z"}}]})(e)},GenIcon$g=require$$0.GenIcon,FaRegMinusSquare_1=function(e){return GenIcon$g({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M108 284c-6.6 0-12-5.4-12-12v-32c0-6.6 5.4-12 12-12h232c6.6 0 12 5.4 12 12v32c0 6.6-5.4 12-12 12H108zM448 80v352c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V80c0-26.5 21.5-48 48-48h352c26.5 0 48 21.5 48 48zm-48 346V86c0-3.3-2.7-6-6-6H54c-3.3 0-6 2.7-6 6v340c0 3.3 2.7 6 6 6h340c3.3 0 6-2.7 6-6z"}}]})(e)},GenIcon$f=require$$0.GenIcon,FaSpinner_1=function(e){return GenIcon$f({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"}}]})(e)},GenIcon$e=require$$0.GenIcon,FaSyncAlt_1=function(e){return GenIcon$e({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M370.72 133.28C339.458 104.008 298.888 87.962 255.848 88c-77.458.068-144.328 53.178-162.791 126.85-1.344 5.363-6.122 9.15-11.651 9.15H24.103c-7.498 0-13.194-6.807-11.807-14.176C33.933 94.924 134.813 8 256 8c66.448 0 126.791 26.136 171.315 68.685L463.03 40.97C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.749zM32 296h134.059c21.382 0 32.09 25.851 16.971 40.971l-41.75 41.75c31.262 29.273 71.835 45.319 114.876 45.28 77.418-.07 144.315-53.144 162.787-126.849 1.344-5.363 6.122-9.15 11.651-9.15h57.304c7.498 0 13.194 6.807 11.807 14.176C478.067 417.076 377.187 504 256 504c-66.448 0-126.791-26.136-171.315-68.685L48.97 471.03C33.851 486.149 8 475.441 8 454.059V320c0-13.255 10.745-24 24-24z"}}]})(e)},GenIcon$d=require$$0.GenIcon,FiChevronsDown_1=function(e){return GenIcon$d({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"7 13 12 18 17 13"}},{tag:"polyline",attr:{points:"7 6 12 11 17 6"}}]})(e)},GenIcon$c=require$$0.GenIcon,GoMute_1=function(e){return GenIcon$c({tag:"svg",attr:{viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M8 2.81v10.38c0 .67-.81 1-1.28.53L3 10H1c-.55 0-1-.45-1-1V7c0-.55.45-1 1-1h2l3.72-3.72C7.19 1.81 8 2.14 8 2.81zm7.53 3.22l-1.06-1.06-1.97 1.97-1.97-1.97-1.06 1.06L11.44 8 9.47 9.97l1.06 1.06 1.97-1.97 1.97 1.97 1.06-1.06L13.56 8l1.97-1.97z"}}]})(e)},GenIcon$b=require$$0.GenIcon,GoUnmute_1=function(e){return GenIcon$b({tag:"svg",attr:{viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M12 8.02c0 1.09-.45 2.09-1.17 2.83l-.67-.67c.55-.56.89-1.31.89-2.16 0-.85-.34-1.61-.89-2.16l.67-.67A3.99 3.99 0 0 1 12 8.02zM7.72 2.28L4 6H2c-.55 0-1 .45-1 1v2c0 .55.45 1 1 1h2l3.72 3.72c.47.47 1.28.14 1.28-.53V2.81c0-.67-.81-1-1.28-.53zm5.94.08l-.67.67a6.996 6.996 0 0 1 2.06 4.98c0 1.94-.78 3.7-2.06 4.98l.67.67A7.973 7.973 0 0 0 16 8c0-2.22-.89-4.22-2.34-5.66v.02zm-1.41 1.41l-.69.67a5.05 5.05 0 0 1 1.48 3.58c0 1.39-.56 2.66-1.48 3.56l.69.67A5.971 5.971 0 0 0 14 8.02c0-1.65-.67-3.16-1.75-4.25z"}}]})(e)},GenIcon$a=require$$0.GenIcon,MdClose_1=function(e){return GenIcon$a({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}}]})(e)},GenIcon$9=require$$0.GenIcon,MdLibraryMusic_1=function(e){return GenIcon$9({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 5h-3v5.5c0 1.38-1.12 2.5-2.5 2.5S10 13.88 10 12.5s1.12-2.5 2.5-2.5c.57 0 1.08.19 1.5.51V5h4v2zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6z"}}]})(e)},GenIcon$8=require$$0.GenIcon,MdRepeat_1=function(e){return GenIcon$8({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z"}}]})(e)},GenIcon$7=require$$0.GenIcon,MdRepeatOne_1=function(e){return GenIcon$7({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4zm-4-2V9h-1l-2 1v1h1.5v4H13z"}}]})(e)},GenIcon$6=require$$0.GenIcon,MdSkipPrevious_1=function(e){return GenIcon$6({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M6 6h2v12H6zm3.5 6l8.5 6V6z"}}]})(e)},GenIcon$5=require$$0.GenIcon,MdViewHeadline_1=function(e){return GenIcon$5({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z"}}]})(e)},GenIcon$4=require$$0.GenIcon,MdSkipNext_1=function(e){return GenIcon$4({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"}}]})(e)},GenIcon$3=require$$0.GenIcon,RiDeleteBinLine_1=function(e){return GenIcon$3({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M17 6h5v2h-2v13a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V8H2V6h5V3a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v3zm1 2H6v12h12V8zm-9 3h2v6H9v-6zm4 0h2v6h-2v-6zM9 4v2h6V4H9z"}}]}]})(e)},GenIcon$2=require$$0.GenIcon,RiPlayList2Fill_1=function(e){return GenIcon$2({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0H24V24H0z"}},{tag:"path",attr:{d:"M22 18v2H2v-2h20zM2 3.5l8 5-8 5v-10zM22 11v2H12v-2h10zm0-7v2H12V4h10z"}}]}]})(e)},GenIcon$1=require$$0.GenIcon,TiArrowShuffle_1=function(e){return GenIcon$1({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M4 9h3.5c.736 0 1.393.391 1.851 1.001.325-.604.729-1.163 1.191-1.662-.803-.823-1.866-1.339-3.042-1.339h-3.5c-.553 0-1 .448-1 1s.447 1 1 1zM11.685 12.111c.551-1.657 2.256-3.111 3.649-3.111h1.838l-1.293 1.293c-.391.391-.391 1.023 0 1.414.195.195.451.293.707.293s.512-.098.707-.293l3.707-3.707-3.707-3.707c-.391-.391-1.023-.391-1.414 0s-.391 1.023 0 1.414l1.293 1.293h-1.838c-2.274 0-4.711 1.967-5.547 4.479l-.472 1.411c-.641 1.926-2.072 3.11-2.815 3.11h-2.5c-.553 0-1 .448-1 1s.447 1 1 1h2.5c1.837 0 3.863-1.925 4.713-4.479l.472-1.41zM15.879 13.293c-.391.391-.391 1.023 0 1.414l1.293 1.293h-2.338c-1.268 0-2.33-.891-2.691-2.108-.256.75-.627 1.499-1.09 2.185.886 1.162 2.243 1.923 3.781 1.923h2.338l-1.293 1.293c-.391.391-.391 1.023 0 1.414.195.195.451.293.707.293s.512-.098.707-.293l3.707-3.707-3.707-3.707c-.391-.391-1.023-.391-1.414 0z"}}]})(e)},GenIcon=require$$0.GenIcon,TiDownload_1=function(e){return GenIcon({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16.707 7.404c-.189-.188-.448-.283-.707-.283s-.518.095-.707.283l-2.293 2.293v-6.697c0-.552-.448-1-1-1s-1 .448-1 1v6.697l-2.293-2.293c-.189-.188-.44-.293-.707-.293s-.518.105-.707.293c-.39.39-.39 1.024 0 1.414l4.707 4.682 4.709-4.684c.388-.387.388-1.022-.002-1.412zM20.987 16c0-.105-.004-.211-.039-.316l-2-6c-.136-.409-.517-.684-.948-.684h-.219c-.094.188-.21.368-.367.525l-1.482 1.475h1.348l1.667 5h-13.893l1.667-5h1.348l-1.483-1.475c-.157-.157-.274-.337-.367-.525h-.219c-.431 0-.812.275-.948.684l-2 6c-.035.105-.039.211-.039.316-.013 0-.013 5-.013 5 0 .553.447 1 1 1h16c.553 0 1-.447 1-1 0 0 0-5-.013-5z"}}]})(e)},AnimatePlayIcon=function(){return React$1.createElement(FaPlayCircle_1,{className:"react-jinke-music-player-play-icon"})},AnimatePauseIcon=function(){return React$1.createElement(FaPauseCircle_1,{className:"react-jinke-music-player-pause-icon"})},PlayModeTip=function(e){var t=e.prefix,r=e.visible,n=e.title,o=e.text;return React$1.createElement("div",{className:cls("".concat(t,"-play-model-tip"),{show:r})},React$1.createElement("span",{className:"".concat(t,"-play-model-tip-title")},n),React$1.createElement("span",{className:"".concat(t,"-play-model-tip-text")},o))},PlayModeTip$1=react.exports.memo(PlayModeTip),prefix="react-jinke-music-player-mobile",PlayerMobile=function(e){var t=e.name,r=e.cover,n=e.singer,o=e.playing,i=e.duration,a=e.currentTime,s=e.loading,l=e.themeSwitch,c=e.progressBar,u=e.openAudioListsPanel,d=e.audioPrevPlay,p=e.audioNextPlay,f=e.playMode,h=e.onClose,m=e.playModeTipVisible,g=e.currentPlayModeName,y=e.extendsContent,v=e.onPlay,b=e.glassBg,_=e.onCoverClick,S=e.autoHiddenCover,w=e.icon,x=e.locale,E=e.toggleMode,A=e.renderAudioTitle,k=e.shouldShowPlayIcon,P=e.isResetCoverRotate;return React$1.createElement("div",{className:cls(prefix,{"default-bg":!b,"glass-bg":b})},React$1.createElement(PlayModeTip$1,{prefix:prefix,visible:m,title:f,text:g}),React$1.createElement("div",{className:"".concat(prefix,"-header group")},React$1.createElement("div",{className:"".concat(prefix,"-header-title"),title:t},A()),E&&React$1.createElement("div",{className:"".concat(prefix,"-header-right"),onClick:h},w.close)),React$1.createElement("div",{className:"".concat(prefix,"-singer text-center group")},React$1.createElement("span",{className:"".concat(prefix,"-singer-name"),title:n},n)),React$1.createElement("div",{className:"".concat(prefix,"-switch text-center group")},l),(!S||S&&r)&&React$1.createElement("div",{className:"".concat(prefix,"-cover text-center"),onClick:function(){return _()}},React$1.createElement("img",{src:r,alt:"cover",className:cls("cover",{"img-rotate-pause":!o||!r,"img-rotate-reset":P})})),React$1.createElement("div",{className:"".concat(prefix,"-progress group")},React$1.createElement("span",{className:"current-time"},s?"--":a),React$1.createElement("span",{className:"".concat(prefix,"-progress-bar")},c),React$1.createElement("span",{className:"duration text-right"},s?"--":i)),React$1.createElement("div",{className:"".concat(prefix,"-toggle text-center group")},React$1.createElement("span",{className:"group prev-audio",title:x.previousTrackText,onClick:d},w.prev),s?React$1.createElement("span",{className:"group loading-icon"},w.loading):React$1.createElement("span",{className:"group play-btn",title:k?x.clickToPlayText:x.clickToPauseText,onClick:v},k?w.play:w.pause),React$1.createElement("span",{className:"group next-audio",title:x.nextTrackText,onClick:p},w.next)),React$1.createElement("div",{className:"".concat(prefix,"-operation group")},React$1.createElement("ul",{className:"items"},[f,w.download,w.reload,w.lyric].filter(react.exports.isValidElement).map((function(e){return React$1.createElement("li",{className:"item",key:e.props.className},e)})),y,React$1.createElement("li",{className:"item",onClick:u},w.playLists))))};PlayerMobile.defaultProps={icon:{},renderAudioTitle:function(){}};var AudioPlayerMobile=react.exports.memo(PlayerMobile),PlayModel=function(e){var t=e.visible,r=e.value;return React$1.createElement("div",{className:cls("play-mode-title",{"play-mode-title-visible":t})},r)},PlayModel$1=react.exports.memo(PlayModel),AUDIO_LIST_REMOVE_ANIMATE_TIME=350,SPACE_BAR_KEYCODE=32,LOCALE={en_US:"en_US",zh_CN:"zh_CN"},MEDIA_QUERY={MOBILE:"(max-width: 768px) and (orientation : portrait)",DARK_THEME:"screen and (prefers-color-scheme: dark)",LIGHT_THEME:"screen and (prefers-color-scheme: light)"},MODE={FULL:"full",MINI:"mini"},AUDIO_NETWORK_STATE={NETWORK_EMPTY:0,NETWORK_IDLE:1,NETWORK_LOADING:2,NETWORK_NO_SOURCE:3,NETWORK_READY_SUCCESS_STATE:4},AUDIO_READY_STATE={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},PLAY_MODE={order:"order",orderLoop:"orderLoop",singleLoop:"singleLoop",shufflePlay:"shufflePlay"},THEME={LIGHT:"light",DARK:"dark",AUTO:"auto"},playModePropTypes=PropTypes.oneOf(["order","orderLoop","singleLoop","shufflePlay"]),PROP_TYPES={audioLists:PropTypes.array.isRequired,locale:PropTypes.oneOfType([PropTypes.object,PropTypes.oneOf(Object.values(LOCALE))]),theme:PropTypes.oneOf(Object.values(THEME)),mode:PropTypes.oneOf(Object.values(MODE)),defaultPlayMode:playModePropTypes,playMode:playModePropTypes,drag:PropTypes.bool,seeked:PropTypes.bool,autoPlay:PropTypes.bool,clearPriorAudioLists:PropTypes.bool,autoPlayInitLoadPlayList:PropTypes.bool,playModeText:PropTypes.object,panelTitle:PropTypes.string,closeText:PropTypes.oneOfType([PropTypes.string,PropTypes.object]),openText:PropTypes.oneOfType([PropTypes.string,PropTypes.object]),clickToPlayText:PropTypes.oneOfType([PropTypes.string,PropTypes.object]),clickToPauseText:PropTypes.oneOfType([PropTypes.string,PropTypes.object]),nextTrackText:PropTypes.oneOfType([PropTypes.string,PropTypes.object]),previousTrackText:PropTypes.oneOfType([PropTypes.string,PropTypes.object]),reloadText:PropTypes.oneOfType([PropTypes.string,PropTypes.object]),volumeText:PropTypes.oneOfType([PropTypes.string,PropTypes.object]),playListsText:PropTypes.oneOfType([PropTypes.string,PropTypes.object]),toggleLyricText:PropTypes.oneOfType([PropTypes.string,PropTypes.object]),toggleMiniModeText:PropTypes.oneOfType([PropTypes.string,PropTypes.object]),destroyText:PropTypes.oneOfType([PropTypes.string,PropTypes.object]),downloadText:PropTypes.oneOfType([PropTypes.string,PropTypes.object]),emptyText:PropTypes.oneOfType([PropTypes.string,PropTypes.object]),controllerTitle:PropTypes.oneOfType([PropTypes.string,PropTypes.object]),defaultPosition:PropTypes.shape({top:PropTypes.oneOfType([PropTypes.number,PropTypes.string]),left:PropTypes.oneOfType([PropTypes.number,PropTypes.string]),right:PropTypes.oneOfType([PropTypes.number,PropTypes.string]),bottom:PropTypes.oneOfType([PropTypes.number,PropTypes.string])}),onAudioPlay:PropTypes.func,onAudioPause:PropTypes.func,onAudioEnded:PropTypes.func,onAudioAbort:PropTypes.func,onAudioVolumeChange:PropTypes.func,onAudioError:PropTypes.func,onAudioProgress:PropTypes.func,onAudioSeeked:PropTypes.func,onAudioDownload:PropTypes.func,onAudioReload:PropTypes.func,onThemeChange:PropTypes.func,onAudioListsChange:PropTypes.func,onPlayModeChange:PropTypes.func,onModeChange:PropTypes.func,onAudioListsPanelChange:PropTypes.func,onAudioPlayTrackChange:PropTypes.func,onAudioListsSortEnd:PropTypes.func,onAudioLyricChange:PropTypes.func,showDownload:PropTypes.bool,showPlay:PropTypes.bool,showReload:PropTypes.bool,showPlayMode:PropTypes.bool,showThemeSwitch:PropTypes.bool,showMiniModeCover:PropTypes.bool,toggleMode:PropTypes.bool,once:PropTypes.bool,extendsContent:PropTypes.oneOfType([PropTypes.array,PropTypes.bool,PropTypes.object,PropTypes.node,PropTypes.element,PropTypes.string]),checkedText:PropTypes.oneOfType([PropTypes.string,PropTypes.object]),unCheckedText:PropTypes.oneOfType([PropTypes.string,PropTypes.object]),defaultVolume:PropTypes.number,playModeShowTime:PropTypes.number,bounds:PropTypes.oneOfType([PropTypes.string,PropTypes.object]),showMiniProcessBar:PropTypes.bool,loadAudioErrorPlayNext:PropTypes.bool,preload:PropTypes.oneOfType([PropTypes.bool,PropTypes.oneOf(["auto","metadata","none"])]),glassBg:PropTypes.bool,remember:PropTypes.bool,remove:PropTypes.bool,defaultPlayIndex:PropTypes.number,playIndex:PropTypes.number,lyricClassName:PropTypes.string,emptyLyricText:PropTypes.oneOfType([PropTypes.string,PropTypes.object]),showLyric:PropTypes.bool,getContainer:PropTypes.func,getAudioInstance:PropTypes.func,onBeforeAudioDownload:PropTypes.func,autoHiddenCover:PropTypes.bool,spaceBar:PropTypes.bool,showDestroy:PropTypes.bool,onBeforeDestroy:PropTypes.func,onDestroyed:PropTypes.func,customDownloader:PropTypes.func,audioTitle:PropTypes.oneOfType([PropTypes.string,PropTypes.func]),responsive:PropTypes.bool,quietUpdate:PropTypes.bool,renderAudioTitle:PropTypes.func,mobileMediaQuery:PropTypes.string,volumeFade:PropTypes.shape({fadeIn:PropTypes.number,fadeOut:PropTypes.number}),sortableOptions:PropTypes.object},PROGRESS_BAR_SLIDER_OPTIONS={min:0,step:1},VOLUME_BAR_SLIDER_OPTIONS={min:0,max:1,step:.01},VOLUME_FADE={IN:"in",OUT:"out",NONE:"none"},en_US={playModeText:{order:"Play in order",orderLoop:"List loop",singleLoop:"Single loop",shufflePlay:"Shuffle playback"},openText:"Open",closeText:"Close",emptyText:"No music",clickToPlayText:"Click to play",clickToPauseText:"Click to pause",nextTrackText:"Next track",previousTrackText:"Previous track",reloadText:"Reload",volumeText:"Volume",playListsText:"Playlists",toggleLyricText:"Toggle lyric",toggleMiniModeText:"Minimize",destroyText:"Destroy",downloadText:"Download",lightThemeText:"L",darkThemeText:"D",switchThemeText:"Dark/Light mode",removeAudioListsText:"Delete audio lists",clickToDeleteText:function(e){return"Click to delete ".concat(e)},controllerTitle:React$1.createElement(FaHeadphones_1,null),emptyLyricText:"No lyric",loadingText:"Loading"},zh_CN={playModeText:{order:"顺序播放",orderLoop:"列表循环",singleLoop:"单曲循环",shufflePlay:"随机播放"},openText:"打开",closeText:"关闭",emptyText:"音乐播放列表为空",clickToPlayText:"点击播放",clickToPauseText:"点击暂停",nextTrackText:"下一首",previousTrackText:"上一首",reloadText:"重新播放",volumeText:"音量",playListsText:"播放列表",toggleLyricText:"显示/隐藏 歌词",toggleMiniModeText:"切换至迷你模式",destroyText:"移除播放器",downloadText:"下载",lightThemeText:"亮",darkThemeText:"暗",switchThemeText:"暗黑/明亮 主题",removeAudioListsText:"清空播放列表",clickToDeleteText:function(e){return"点击删除 ".concat(e)},controllerTitle:React$1.createElement(FaHeadphones_1,null),emptyLyricText:"暂无歌词",loadingText:"加载中"},_locale;function _defineProperty$1(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var locale=(_locale={},_defineProperty$1(_locale,LOCALE.en_US,en_US),_defineProperty$1(_locale,LOCALE.zh_CN,zh_CN),_locale),LOCALE_CONFIG=locale;function _classCallCheck$2(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$2(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass$2(e,t,r){return t&&_defineProperties$2(e.prototype,t),r&&_defineProperties$2(e,r),e}var timeExp=/\[(\d{2,}):(\d{2})(?:\.(\d{2,3}))?]/g,STATE_PAUSE=0,STATE_PLAYING=1,tagRegMap={title:"ti",artist:"ar",album:"al",offset:"offset",by:"by"},Lyric=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};_classCallCheck$2(this,e),this.lrc=t,this.tags={},this.lines=[],this.handler=r,this.state=STATE_PAUSE,this.curLine=0,this._init()}return _createClass$2(e,[{key:"_init",value:function(){this._initTag(),this._initLines()}},{key:"_initTag",value:function(){for(var e in tagRegMap){var t=this.lrc.match(new RegExp("\\[".concat(tagRegMap[e],":([^\\]]*)]"),"i"));this.tags[e]=t&&t[1]||""}}},{key:"_initLines",value:function(){for(var e=this.lrc.split("\n"),t=parseInt(this.tags.offset,10)||0,r=0;r<e.length;r++){var n=e[r],o=timeExp.exec(n);if(o){var i=n.replace(timeExp,"").trim();i&&this.lines.push({time:60*o[1]*1e3+1e3*o[2]+10*(o[3]||0)+t,txt:i})}}this.lines.sort((function(e,t){return e.time-t.time}))}},{key:"_findCurNum",value:function(e){for(var t=0;t<this.lines.length;t++)if(e<=this.lines[t].time)return t;return this.lines.length-1}},{key:"_callHandler",value:function(e){e<0||this.handler({txt:this.lines[e].txt,lineNum:e})}},{key:"_playRest",value:function(){var e=this,t=this.lines[this.curNum].time-(+new Date-this.startStamp);this.timer=setTimeout((function(){e._callHandler(e.curNum++),e.curNum<e.lines.length&&e.state===STATE_PLAYING&&e._playRest()}),t)}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;this.lines.length&&(this.state=STATE_PLAYING,this.curNum=this._findCurNum(e),this.startStamp=+new Date-e,t||this._callHandler(this.curNum-1),this.curNum<this.lines.length&&(clearTimeout(this.timer),this._playRest()))}},{key:"togglePlay",value:function(){var e=+new Date;this.state===STATE_PLAYING?(this.stop(),this.pauseStamp=e):(this.state=STATE_PLAYING,this.play((this.pauseStamp||e)-(this.startStamp||e),!0),this.pauseStamp=0)}},{key:"stop",value:function(){this.state=STATE_PAUSE,clearTimeout(this.timer)}},{key:"seek",value:function(e){this.play(e)}}]),e}();function formatTime(e){var t=0,r=0,n=parseInt(e);n>=60&&(t=parseInt(n/60),n=parseInt(n%60),t>=60&&(r=parseInt(t/60),t=parseInt(t%60)));var o=function(e){return e>>0<10?"0".concat(e):e};return r>0?[o(r),o(t),o(n)].join(":"):[o(t),o(n)].join(":")}function createRandomNum(e,t){return parseInt(Math.random()*(t-e+1)+e,10)}var arrayEqual=function(e){return function(t){return JSON.stringify(e)===JSON.stringify(t)}},s4=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},uuId=function(){return"".concat(s4()+s4(),"-").concat(s4(),"-").concat(s4(),"-").concat(s4(),"-").concat(s4()).concat(s4()).concat(s4())},isSafari=function(){return/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)};function isIOS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function swing(e){return.5-Math.cos(e*Math.PI)/2}function adjustVolume(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=n.duration,i=void 0===o?1e3:o,a=n.easing,s=void 0===a?swing:a,l=n.interval,c=void 0===l?13:l,u=arguments.length>4?arguments[4]:void 0,d=r-t;if(!d||!i||!s||!c||isIOS())return e.volume=r,u(),{fadeInterval:void 0,updateIntervalEndVolume:void 0};var p=Math.floor(i/c),f=1,h=function(e){r=e},m=setInterval((function(){var n=r-t;n!==d&&(d=n),e.volume=t+s(f/p)*d,++f>=p&&(e.volume=r,clearInterval(m),u())}),c);return{fadeInterval:m,updateIntervalEndVolume:h}}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _objectWithoutProperties$1(e,t){if(null==e)return{};var r,n,o=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function ownKeys$3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread$3(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$3(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$3(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _toConsumableArray$1(e){return _arrayWithoutHoles$1(e)||_iterableToArray$1(e)||_unsupportedIterableToArray$1(e)||_nonIterableSpread$1()}function _nonIterableSpread$1(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray$1(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$1(e,t):void 0}}function _iterableToArray$1(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles$1(e){if(Array.isArray(e))return _arrayLikeToArray$1(e)}function _arrayLikeToArray$1(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _typeof$1(e){return(_typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck$1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass$1(e,t,r){return t&&_defineProperties$1(e.prototype,t),r&&_defineProperties$1(e,r),e}function _inherits$1(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper$7(e){var t=_isNativeReflectConstruct$7();return function(){var r,n=_getPrototypeOf$1(e);if(t){var o=_getPrototypeOf$1(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn$1(this,r)}}function _possibleConstructorReturn$1(e,t){return!t||"object"!==_typeof$1(t)&&"function"!=typeof t?_assertThisInitialized$1(e):t}function _assertThisInitialized$1(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct$7(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf$1(e){return(_getPrototypeOf$1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Sortable.mount(new SwapPlugin);var IS_MOBILE=getIsMobile(),DEFAULT_ICON={pause:React$1.createElement(AnimatePauseIcon,null),play:React$1.createElement(AnimatePlayIcon,null),destroy:React$1.createElement(MdClose_1,null),close:React$1.createElement(MdClose_1,null),delete:React$1.createElement(RiDeleteBinLine_1,{size:24}),download:React$1.createElement(TiDownload_1,{size:26}),toggle:React$1.createElement(FaRegMinusSquare_1,null),lyric:React$1.createElement(FaBook_1,null),volume:React$1.createElement(GoUnmute_1,{size:26}),mute:React$1.createElement(GoMute_1,{size:26}),next:React$1.createElement(MdSkipNext_1,null),prev:React$1.createElement(MdSkipPrevious_1,null),playLists:React$1.createElement(RiPlayList2Fill_1,null),reload:React$1.createElement(FaSyncAlt_1,{size:22}),loop:React$1.createElement(MdRepeatOne_1,{size:26}),order:React$1.createElement(MdViewHeadline_1,{size:26}),orderLoop:React$1.createElement(MdRepeat_1,{size:26}),shuffle:React$1.createElement(TiArrowShuffle_1,{size:26}),loading:React$1.createElement(FaSpinner_1,null),packUpPanelMobile:React$1.createElement(FiChevronsDown_1,{size:26}),empty:React$1.createElement(MdLibraryMusic_1,null)},ReactJkMusicPlayer=function(e){_inherits$1(r,react.exports.PureComponent);var t=_createSuper$7(r);function r(e){var n;return _classCallCheck$1(this,r),_defineProperty(_assertThisInitialized$1(n=t.call(this,e)),"isDrag",!1),_defineProperty(_assertThisInitialized$1(n),"initPlayId",""),_defineProperty(_assertThisInitialized$1(n),"state",{audioLists:[],playId:n.initPlayId,name:"",cover:"",singer:"",musicSrc:"",lyric:"",currentLyric:"",isMobile:IS_MOBILE,toggle:n.props.mode===MODE.FULL,playing:!1,currentTime:0,soundValue:DEFAULT_VOLUME,moveX:0,moveY:0,loading:!1,audioListsPanelVisible:!1,playModelNameVisible:!1,theme:n.props.theme||n.darkThemeName,playMode:n.props.playMode||n.props.defaultPlayMode||"",currentAudioVolume:0,initAnimate:!1,isInitAutoPlay:n.props.autoPlay,isInitRemember:!1,loadedProgress:0,removeId:DEFAULT_REMOVE_ID,isNeedMobileHack:IS_MOBILE,audioLyricVisible:!1,isAutoPlayWhenUserClicked:!1,playIndex:n.props.playIndex||n.props.defaultPlayIndex||DEFAULT_PLAY_INDEX,canPlay:!1,currentVolumeFade:VOLUME_FADE.NONE,currentVolumeFadeInterval:void 0,updateIntervalEndVolume:void 0,isAudioSeeking:!1,isResetCoverRotate:!1}),_defineProperty(_assertThisInitialized$1(n),"getPlayIndex",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.state.playIndex,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.state.audioLists;return Math.max(DEFAULT_PLAY_INDEX,Math.min(t.length-1,e))})),_defineProperty(_assertThisInitialized$1(n),"onCoverClick",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:MODE.FULL,t=n.props.showMiniModeCover,r=n.state.cover;(t||e!==MODE.MINI)&&n.props.onCoverClick&&r&&n.props.onCoverClick(e,n.state.audioLists,n.getBaseAudioInfo())})),_defineProperty(_assertThisInitialized$1(n),"getAudioTitle",(function(){var e=(n.locale||{}).audioTitle,t=n.state,r=t.name,o=t.singer;return"function"==typeof e&&n.audio?e(n.getBaseAudioInfo()):e||"".concat(r).concat(o?" - ".concat(o):"")})),_defineProperty(_assertThisInitialized$1(n),"renderAudioTitle",(function(){var e=n.state,t=e.isMobile,r=e.name;return n.props.renderAudioTitle?n.props.renderAudioTitle(n.getBaseAudioInfo(),t):t?r:n.getAudioTitle()})),_defineProperty(_assertThisInitialized$1(n),"toggleAudioLyric",(function(){n.setState({audioLyricVisible:!n.state.audioLyricVisible})})),_defineProperty(_assertThisInitialized$1(n),"togglePlayMode",(function(){var e=n._PLAY_MODE_.findIndex((function(e){return e===n.state.playMode})),t=e===n._PLAY_MODE_LENGTH_-1?n._PLAY_MODE_[0]:n._PLAY_MODE_[++e];n.setState({playMode:t,playModelNameVisible:!0,playModeTipVisible:!0}),n.props.onPlayModeChange&&n.props.onPlayModeChange(t),clearTimeout(n.playModelTimer),n.playModelTimer=setTimeout((function(){n.setState({playModelNameVisible:!1,playModeTipVisible:!1})}),n.props.playModeShowTime)})),_defineProperty(_assertThisInitialized$1(n),"renderPlayModeIcon",(function(e){var t={className:"react-jinke-music-player-mode-icon"},r=null;switch(e){case PLAY_MODE.order:r=react.exports.cloneElement(n.iconMap.order,t);break;case PLAY_MODE.orderLoop:r=react.exports.cloneElement(n.iconMap.orderLoop,t);break;case PLAY_MODE.singleLoop:r=react.exports.cloneElement(n.iconMap.loop,t);break;case PLAY_MODE.shufflePlay:r=react.exports.cloneElement(n.iconMap.shuffle,t);break;default:r=react.exports.cloneElement(n.iconMap.order,t)}return r})),_defineProperty(_assertThisInitialized$1(n),"audioListsPlay",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.state,o=r.playId,i=r.playing,a=r.audioLists,s=r.loading,l=r.canPlay;if(Array.isArray(a)&&0===a.length)return console.warn("Warning: Your playlist has no songs. and cannot play !");if(!s||e!==o){var c=a.findIndex((function(t){return t[PLAYER_KEY]===e})),u=a[c]||{},d=u.name,p=u.cover,f=u.musicSrc,h=u.singer,m=u.lyric,g=void 0===m?"":m,y=function(t){n.setState({name:d,cover:p,musicSrc:t,singer:h,playId:e,lyric:g,currentTime:0,playing:!1,loading:!0,canPlay:!1,loadedProgress:0,playIndex:c,isAutoPlayWhenUserClicked:!0},(function(){n.lyric&&n.lyric.stop(),n.audio.load(),n.updateMediaSessionMetadata(),setTimeout((function(){n.initLyricParser()}),0)}))};if(e===o&&!t)return n.setState({playing:!i}),i?n.audio.pause():l?void n.play():y(f);switch(n.props.onAudioPlayTrackChange&&n.props.onAudioPlayTrackChange(e,a,n.getBaseAudioInfo()),n.props.onPlayIndexChange&&n.props.onPlayIndexChange(c),_typeof$1(f)){case"function":f().then(y,n.onAudioError);break;default:y(f)}}})),_defineProperty(_assertThisInitialized$1(n),"resetAudioStatus",(function(){n.audio.pause(),n.lyric&&n.lyric.stop(),n.initPlayInfo([]),n.resetAudioPlayStatus(),n.resetAudioPlayId()})),_defineProperty(_assertThisInitialized$1(n),"resetAudioPlayId",(function(){n.setState({playId:n.initPlayId})})),_defineProperty(_assertThisInitialized$1(n),"clearAudioLists",(function(){n.props.onAudioListsChange&&n.props.onAudioListsChange("",[],{}),n.resetAudioStatus()})),_defineProperty(_assertThisInitialized$1(n),"onDeleteAudioLists",(function(e){return function(t){t.stopPropagation();var r=n.state,o=r.audioLists,i=r.playId;if(!(o.length<1))if(n.lyric&&n.lyric.stop(),e){var a=_toConsumableArray$1(o).filter((function(t){return t[PLAYER_KEY]!==e}));n.setState({removeId:e}),setTimeout((function(){n.setState({audioLists:a,removeId:-1},(function(){if(!a.length)return n.resetAudioStatus();e===i&&n.handlePlay(PLAY_MODE.orderLoop)}))}),AUDIO_LIST_REMOVE_ANIMATE_TIME),n.props.onAudioListsChange&&n.props.onAudioListsChange(i,a,n.getBaseAudioInfo())}else n.clearAudioLists()}})),_defineProperty(_assertThisInitialized$1(n),"openAudioListsPanel",(function(){n.setState((function(e){return{initAnimate:!0,audioListsPanelVisible:!e.audioListsPanelVisible}})),n.props.onAudioListsPanelChange&&n.props.onAudioListsPanelChange(!n.state.audioListsPanelVisible)})),_defineProperty(_assertThisInitialized$1(n),"closeAudioListsPanel",(function(e){e.stopPropagation(),n._closeAudioListsPanel()})),_defineProperty(_assertThisInitialized$1(n),"_closeAudioListsPanel",(function(){var e=n.state.audioListsPanelVisible;n.setState({audioListsPanelVisible:!1}),e&&n.props.onAudioListsPanelChange&&n.props.onAudioListsPanelChange(!1)})),_defineProperty(_assertThisInitialized$1(n),"themeChange",(function(e){var t=e?THEME.LIGHT:THEME.DARK;n.setState({theme:t}),n.props.onThemeChange&&n.props.onThemeChange(t)})),_defineProperty(_assertThisInitialized$1(n),"onAudioDownload",(function(){var e=n.state.musicSrc;if(n.state.musicSrc){var t=n.props.customDownloader,r=n.getBaseAudioInfo(),o=n.props.onBeforeAudioDownload(r),i={};o&&o.then?o.then((function(e){var r=e.src,n=e.filename,o=e.mimeType;i=e,t?t(e):download(r,n,o)})):t?t({src:e}):download(e),n.props.onAudioDownload&&n.props.onAudioDownload(r,i)}})),_defineProperty(_assertThisInitialized$1(n),"onControllerDrag",(function(e,t){var r=t.x,o=t.y,i=n.state,a=i.moveX,s=i.moveY;n.isDrag=!0,a===r&&s===o&&(n.isDrag=!1)})),_defineProperty(_assertThisInitialized$1(n),"onControllerDragStart",(function(e,t){var r=t.x,o=t.y;n.isDrag=!1,n.setState({moveX:r,moveY:o})})),_defineProperty(_assertThisInitialized$1(n),"onControllerDragStop",(function(e,t){var r=t.x,o=t.y;n.props.showDestroy&&n.destroyBtn&&n.destroyBtn.current&&n.destroyBtn.current.contains(e.target)?n.onDestroyPlayer():(n.isDrag||(n.state.isNeedMobileHack&&(n.loadAndPlayAudio(),n.setState({isNeedMobileHack:!1})),n.onOpenPanel()),n.setState({moveX:r,moveY:o}))})),_defineProperty(_assertThisInitialized$1(n),"onResetVolume",(function(){var e=n.state.currentAudioVolume;n.setAudioVolume(n.getVolumeBarValue(e||.1))})),_defineProperty(_assertThisInitialized$1(n),"setAudioVolume",(function(e){n.audio.volume=n.getListeningVolume(e),n.setState({currentAudioVolume:e,soundValue:e}),n.state.currentVolumeFade===VOLUME_FADE.IN&&n.state.updateIntervalEndVolume&&n.state.updateIntervalEndVolume(e)})),_defineProperty(_assertThisInitialized$1(n),"stopAll",(function(e){e.stopPropagation(),e.preventDefault()})),_defineProperty(_assertThisInitialized$1(n),"getBoundingClientRect",(function(e){var t=e.getBoundingClientRect();return{left:t.left,top:t.top}})),_defineProperty(_assertThisInitialized$1(n),"getListeningVolume",(function(e){return Math.pow(e,2)})),_defineProperty(_assertThisInitialized$1(n),"getVolumeBarValue",(function(e){return Math.sqrt(e)})),_defineProperty(_assertThisInitialized$1(n),"onAudioReload",(function(){n.props.audioLists.length&&(n.handlePlay(PLAY_MODE.singleLoop),n.props.onAudioReload&&n.props.onAudioReload(n.getBaseAudioInfo()))})),_defineProperty(_assertThisInitialized$1(n),"onOpenPanel",(function(){var e=n.props,t=e.toggleMode,r=e.spaceBar;t&&(n.setState({toggle:!0}),n.props.onModeChange&&n.props.onModeChange(MODE.FULL),r&&n.player.current&&n.player.current.focus({preventScroll:!0})),n.onCoverClick(MODE.MINI)})),_defineProperty(_assertThisInitialized$1(n),"onHidePanel",(function(){n.setState({toggle:!1,audioListsPanelVisible:!1}),n.props.onModeChange&&n.props.onModeChange(MODE.MINI)})),_defineProperty(_assertThisInitialized$1(n),"onDestroyPlayer",(function(){if(n.props.onBeforeDestroy){var e=Promise.resolve(n.props.onBeforeDestroy(n.state.playId,n.state.audioLists,n.getBaseAudioInfo()));e&&e.then&&e.then((function(){n._onDestroyPlayer()})).catch((function(){}))}else n._onDestroyPlayer()})),_defineProperty(_assertThisInitialized$1(n),"_onDestroyPlayer",(function(){n.unInstallPlayer()})),_defineProperty(_assertThisInitialized$1(n),"_onDestroyed",(function(){n.setState({isPlayDestroyed:!0}),n.props.onDestroyed&&n.props.onDestroyed(n.state.playId,n.state.audioLists,n.getBaseAudioInfo())})),_defineProperty(_assertThisInitialized$1(n),"getCurrentPlayIndex",(function(){return n.state.audioLists.findIndex((function(e){return e[PLAYER_KEY]===n.state.playId}))})),_defineProperty(_assertThisInitialized$1(n),"resetAudioPlayStatus",(function(){return new Promise((function(e){n.setState({currentTime:0,loading:!1,playing:!1,canPlay:!1,lyric:"",currentLyric:"",loadedProgress:0,playIndex:DEFAULT_PLAY_INDEX},e)}))})),_defineProperty(_assertThisInitialized$1(n),"onTogglePlay",(function(){if(n.setState({isAudioSeeking:!1}),n.state.audioLists.length>=1){var e=n.props.volumeFade||{},t=e.fadeIn,r=e.fadeOut,o=n.state,i=o.currentVolumeFade,a=o.currentVolumeFadeInterval,s=i===VOLUME_FADE.IN||i===VOLUME_FADE.OUT;if(s&&(clearInterval(a),n.setState({currentVolumeFadeInterval:void 0,updateIntervalEndVolume:void 0})),!s&&n.state.playing||i===VOLUME_FADE.IN){n.setState({currentVolumeFade:VOLUME_FADE.OUT});var l=adjustVolume(n.audio,n.audio.volume,0,{duration:r},(function(){n.audio.pause(),n.setState({currentVolumeFade:VOLUME_FADE.NONE,currentVolumeFadeInterval:void 0,playing:!1,updateIntervalEndVolume:void 0}),n.audio.volume=n.getListeningVolume(n.state.soundValue)})),c=l.fadeInterval,u=l.updateIntervalEndVolume;n.setState({currentVolumeFadeInterval:c,updateIntervalEndVolume:u})}else{n.setState({currentVolumeFade:VOLUME_FADE.IN});var d=s?n.audio.volume:0,p=n.getListeningVolume(n.state.soundValue),f=adjustVolume(n.audio,d,p,{duration:t},(function(){n.setState({currentVolumeFade:VOLUME_FADE.NONE,currentVolumeFadeInterval:void 0,updateIntervalEndVolume:void 0}),n.audio.volume=n.getListeningVolume(n.state.soundValue)})),h=f.fadeInterval,m=f.updateIntervalEndVolume;n.setState({currentVolumeFadeInterval:h,updateIntervalEndVolume:m,isAutoPlayWhenUserClicked:!0},(function(){h&&(n.audio.volume=d),n.loadAndPlayAudio()}))}}})),_defineProperty(_assertThisInitialized$1(n),"playAudio",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(n.isAudioCanPlay||e)&&(e&&n.setAudioLoaded(),n.loadAndPlayAudio(e))})),_defineProperty(_assertThisInitialized$1(n),"setAudioLoaded",(function(){n.setState({loading:!1,playing:!1})})),_defineProperty(_assertThisInitialized$1(n),"onAudioPause",(function(){n.setState({playing:!1}),n.props.onAudioPause&&n.props.onAudioPause(n.getBaseAudioInfo()),n.state.lyric&&n.lyric&&n.lyric.togglePlay()})),_defineProperty(_assertThisInitialized$1(n),"onAudioPlay",(function(){n.state.isAudioSeeking||(n.setState({playing:!0,loading:!1}),n.props.onAudioPlay&&n.props.onAudioPlay(n.getBaseAudioInfo()),n.state.lyric&&n.lyric&&n.lyric.togglePlay())})),_defineProperty(_assertThisInitialized$1(n),"onSetAudioLoadedProgress",(function(){var e=n.audio,t=e.buffered,r=e.duration;if(t.length&&t.end){var o=t.end(t.length-1)/r*100;n.setState({loadedProgress:o})}})),_defineProperty(_assertThisInitialized$1(n),"loadAndPlayAudio",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=n.props.remember,r=n.state,o=r.isInitRemember,i=r.musicSrc,a=n.audio,s=a.networkState,l=a.readyState;if(i){if(s===AUDIO_NETWORK_STATE.NETWORK_NO_SOURCE||s===AUDIO_NETWORK_STATE.NETWORK_EMPTY)return n.onAudioError({reason:"\n          [loadAndPlayAudio]: Failed to load because no supported source was found.\n          current network status is ".concat(s,".\n        ")});if(n.setState({playing:!1,loading:!0,isAudioSeeking:!1,isResetCoverRotate:!1}),e||l>=AUDIO_READY_STATE.HAVE_FUTURE_DATA){var c=n.getLastPlayStatus(),u=c.playing,d=t&&!o&&!u,p=t?!d:n.isAudioCanPlay;n.setState({playing:p,loading:!1},(function(){p&&n.play(),n.setState({isInitAutoPlay:!0,isInitRemember:!0,isAutoPlayWhenUserClicked:!1})}))}else n.audio.load()}})),_defineProperty(_assertThisInitialized$1(n),"onAudioError",(function(e){var t=n.state,r=t.playMode,o=t.audioLists,i=t.playId,a=t.musicSrc,s=n.props.loadAudioErrorPlayNext,l=r===PLAY_MODE.singleLoop?PLAY_MODE.order:r;if(n.lyric&&n.lyric.stop(),a){if(s&&o.length)(r===PLAY_MODE.order||r===PLAY_MODE.orderLoop)&&i===o[o.length-1][PLAYER_KEY]||n.handlePlay(l,!0);n.props.onAudioError&&n.props.onAudioError(n.audio.error||e&&e.reason||null,i,o,n.getBaseAudioInfo())}})),_defineProperty(_assertThisInitialized$1(n),"handlePlay",(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=n.state,o=r.playId,i=r.audioLists,a=i.length;if(a){var s=n.getCurrentPlayIndex();switch(e){case PLAY_MODE.order:if(s===a-1)return void n.audio.pause();n.audioListsPlay(t?i[s+1][PLAYER_KEY]:i[s-1][PLAYER_KEY]);break;case PLAY_MODE.orderLoop:if(t){if(s===a-1)return n.audioListsPlay(i[0][PLAYER_KEY]);n.audioListsPlay(i[s+1][PLAYER_KEY])}else{if(0===s)return n.audioListsPlay(i[a-1][PLAYER_KEY]);n.audioListsPlay(i[s-1][PLAYER_KEY])}break;case PLAY_MODE.singleLoop:n.audio.currentTime=0,n.audioListsPlay(o,!0);break;case PLAY_MODE.shufflePlay:var l=createRandomNum(0,a-1);l===n.getCurrentPlayIndex()&&(l=n.getPlayIndex(l+1));var c=(i[l]||{})[PLAYER_KEY];n.audioListsPlay(c,!0)}}})),_defineProperty(_assertThisInitialized$1(n),"onAudioEnd",(function(){n.props.onAudioEnded&&n.props.onAudioEnded(n.state.playId,n.state.audioLists,n.getBaseAudioInfo()),n.handlePlay(n.state.playMode)})),_defineProperty(_assertThisInitialized$1(n),"audioPrevAndNextBasePlayHandle",(function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=n.state.playMode,r="";switch(t){case PLAY_MODE.shufflePlay:r=t;break;default:r=PLAY_MODE.orderLoop}n.handlePlay(r,e)})),_defineProperty(_assertThisInitialized$1(n),"onPlayPrevAudio",(function(){n.props.restartCurrentOnPrev&&n.audio.currentTime>1?n.audio.currentTime=0:n.audioPrevAndNextBasePlayHandle(!1)})),_defineProperty(_assertThisInitialized$1(n),"onPlayNextAudio",(function(){n.audioPrevAndNextBasePlayHandle(!0)})),_defineProperty(_assertThisInitialized$1(n),"audioTimeUpdate",(function(){var e=n.audio.currentTime;n.setState({currentTime:e}),n.props.remember&&n.saveLastPlayStatus(),n.props.onAudioProgress&&n.props.onAudioProgress(n.getBaseAudioInfo())})),_defineProperty(_assertThisInitialized$1(n),"onAudioSoundChange",(function(e){n.setAudioVolume(e)})),_defineProperty(_assertThisInitialized$1(n),"onAudioVolumeChange",(function(){var e=n.audio.volume,t=n.state,r=t.currentVolumeFade,o=t.currentAudioVolume;if(r===VOLUME_FADE.NONE&&o!==e){var i=n.getVolumeBarValue(e);if(n.setState({soundValue:i}),n.props.onAudioVolumeChange){var a=parseFloat(e.toFixed(4));n.props.onAudioVolumeChange(a)}}})),_defineProperty(_assertThisInitialized$1(n),"onProgressChange",(function(e){n.audio&&(n.audio.currentTime=e),n.setState({currentTime:e,isAudioSeeking:!0})})),_defineProperty(_assertThisInitialized$1(n),"onAudioSeeked",(function(e){n.setState({isAudioSeeking:!0}),n.state.audioLists.length&&(n.lyric&&n.lyric.seek(1e3*e),n.state.playing||n.lyric&&n.lyric.stop(),n.audio&&(n.audio.currentTime=e),n.props.onAudioSeeked&&n.props.onAudioSeeked(n.getBaseAudioInfo()),setTimeout((function(){n.setState({isAudioSeeking:!1})}),500))})),_defineProperty(_assertThisInitialized$1(n),"onAudioMute",(function(){n.setState({soundValue:0,currentAudioVolume:n.audio.volume},(function(){n.audio.volume=0}))})),_defineProperty(_assertThisInitialized$1(n),"onAudioAbort",(function(e){var t=n.state,r=t.audioLists,o=t.playId,i=n.getBaseAudioInfo(),a=_objectSpread$3(_objectSpread$3({},e),i);n.props.onAudioAbort&&n.props.onAudioAbort(o,r,a)})),_defineProperty(_assertThisInitialized$1(n),"toggleMode",(function(e){e===MODE.FULL&&n.setState({toggle:!0})})),_defineProperty(_assertThisInitialized$1(n),"toggleTheme",(function(e){n.setState({theme:e})})),_defineProperty(_assertThisInitialized$1(n),"onAudioListsSortEnd",(function(e){var t=e.oldIndex,r=e.newIndex;if(t!==r){var o=n.state,i=o.playId,a=_toConsumableArray$1(o.audioLists),s=a.splice(t,1)[0];a.splice(r,0,s);var l=t===i?r:i;n.setState({audioLists:a,playId:l}),n.props.onAudioListsSortEnd&&n.props.onAudioListsSortEnd(t,r),n.props.onAudioListsChange&&n.props.onAudioListsChange(l,a,n.getBaseAudioInfo()),n.props.onAudioListsDragEnd&&(console.warn("[Deprecated] onAudioListsDragEnd is deprecated. please use onAudioListsSortEnd(oldIndex, newIndex){}"),n.props.onAudioListsDragEnd(t,r))}})),_defineProperty(_assertThisInitialized$1(n),"saveLastPlayStatus",(function(){var e=n.state,t=e.currentTime,r=e.playId,o=e.theme,i=e.soundValue,a=e.playMode,s=e.name,l=e.cover,c=e.singer,u=e.musicSrc,d=JSON.stringify({currentTime:t,playId:r,theme:o,playMode:a,soundValue:i,name:s,cover:l,singer:c,musicSrc:u});localStorage.setItem("lastPlayStatus",d)})),_defineProperty(_assertThisInitialized$1(n),"getLastPlayStatus",(function(){var e=n.props,t=e.theme,r=e.defaultPlayMode,o=e.playMode,i=e.defaultPlayIndex,a=e.playIndex,s={currentTime:0,playMode:o||r||PLAY_MODE.order,name:"",cover:"",singer:"",musicSrc:"",lyric:"",playId:n.getDefaultPlayId(),theme:t,playing:!0,playIndex:a||i||0};try{return JSON.parse(localStorage.getItem("lastPlayStatus"))||s}catch(l){return s}})),_defineProperty(_assertThisInitialized$1(n),"checkCurrentPlayingAudioIsInUpdatedAudioLists",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.props,t=n.state,r=t.playId,o=t.musicSrc;return!(!e.quietUpdate||!Array.isArray(e.audioLists))&&(r&&e.audioLists.some((function(e){return e[PLAYER_KEY]===r||e.musicSrc===o})))})),_defineProperty(_assertThisInitialized$1(n),"play",(function(){var e=n.audio.play();e&&e.then&&e.then((function(){n.setState({loading:!1,playing:!0})})).catch((function(){n.setState({loading:!1,playing:!1})}))})),_defineProperty(_assertThisInitialized$1(n),"mockAutoPlayForMobile",(function(){n.props.autoPlay&&!n.state.playing&&(n.audio.load(),n.play())})),_defineProperty(_assertThisInitialized$1(n),"bindMobileAutoPlayEvents",(function(){document.addEventListener("touchstart",(function(){n.mockAutoPlayForMobile()}),{once:!0}),document.addEventListener("WeixinJSBridgeReady",(function(){n.mockAutoPlayForMobile()}))})),_defineProperty(_assertThisInitialized$1(n),"bindSafariAutoPlayEvents",(function(){document.addEventListener("click",(function(){n.mockAutoPlayForMobile()}),{once:!0})})),_defineProperty(_assertThisInitialized$1(n),"unBindEvents",(function(){var e;(e=n).bindEvents.apply(e,arguments)})),_defineProperty(_assertThisInitialized$1(n),"bindEvents",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.audio,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{waiting:n.loadAndPlayAudio,canplay:n.onAudioCanPlay,error:n.onAudioError,ended:n.onAudioEnd,pause:n.onAudioPause,play:n.onAudioPlay,timeupdate:n.audioTimeUpdate,volumechange:n.onAudioVolumeChange,abort:n.onAudioAbort,progress:n.onSetAudioLoadedProgress},r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=n.props.once;for(var i in t){var a=t[i];e&&(r?e.addEventListener(i,a,{once:!(!o||"play"!==i)}):e.removeEventListener(i,a))}})),_defineProperty(_assertThisInitialized$1(n),"getPlayId",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.state.audioLists,t=n.getPlayIndex(void 0,e),r=n.state.playId||e[t]&&e[t][PLAYER_KEY];return r})),_defineProperty(_assertThisInitialized$1(n),"_getPlayInfo",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=n.getPlayId(e),r=e.find((function(e){return e[PLAYER_KEY]===t}))||{},o=r.name,i=void 0===o?"":o,a=r.cover,s=void 0===a?"":a,l=r.singer,c=void 0===l?"":l,u=r.musicSrc,d=void 0===u?"":u,p=r.lyric,f=void 0===p?"":p;return{name:i,cover:s,singer:c,musicSrc:d,lyric:f,audioLists:e,playId:t}})),_defineProperty(_assertThisInitialized$1(n),"getPlayInfo",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.filter((function(e){return!e[PLAYER_KEY]})),r=e.filter((function(e){return e[PLAYER_KEY]})),o=[].concat(_toConsumableArray$1(r),_toConsumableArray$1(t.map((function(e){return _objectSpread$3(_objectSpread$3({},e),{},_defineProperty({},PLAYER_KEY,uuId()))}))));return n._getPlayInfo(o)})),_defineProperty(_assertThisInitialized$1(n),"getPlayInfoOfNewList",(function(e){var t=e.audioLists,r=(void 0===t?[]:t).map((function(t){var r=e.quietUpdate&&n.state.audioLists.find((function(e){return e.musicSrc===t.musicSrc}))||{};return _objectSpread$3(_objectSpread$3({},t),{},_defineProperty({},PLAYER_KEY,r[PLAYER_KEY]||uuId()))}));return n._getPlayInfo(r)})),_defineProperty(_assertThisInitialized$1(n),"initPlayInfo",(function(e,t){var r=n.getPlayInfo(e);switch(_typeof$1(r.musicSrc)){case"function":r.musicSrc().then((function(e){n.setState(_objectSpread$3(_objectSpread$3({},r),{},{musicSrc:e}),t)}),n.onAudioError);break;default:n.setState(r,t)}})),_defineProperty(_assertThisInitialized$1(n),"addMatchMediaListener",(function(e,t){var r=window.matchMedia(e);return t(r),"addEventListener"in r?r.addEventListener("change",t):r.addListener(t),r})),_defineProperty(_assertThisInitialized$1(n),"removeMatchMediaListener",(function(e,t){e&&("removeEventListener"in e?e.removeEventListener("change",t):e.removeListener&&e.removeListener(t))})),_defineProperty(_assertThisInitialized$1(n),"addMobileListener",(function(){n.mobileMedia=n.addMatchMediaListener(n.props.mobileMediaQuery,n.mobileMediaHandler)})),_defineProperty(_assertThisInitialized$1(n),"removeMobileListener",(function(){n.removeMatchMediaListener(n.mobileMedia,n.mobileMediaHandler)})),_defineProperty(_assertThisInitialized$1(n),"addSystemThemeListener",(function(){n.systemThemeMedia=n.addMatchMediaListener(MEDIA_QUERY.DARK_THEME,n.systemThemeMediaHandler)})),_defineProperty(_assertThisInitialized$1(n),"removeSystemThemeListener",(function(){n.removeMatchMediaListener(n.systemThemeMedia,n.systemThemeMediaHandler)})),_defineProperty(_assertThisInitialized$1(n),"mobileMediaHandler",(function(e){var t=e.matches;n.setState({isMobile:!!t})})),_defineProperty(_assertThisInitialized$1(n),"systemThemeMediaHandler",(function(e){var t=e.matches;if(n.props.theme===THEME.AUTO){var r=t?THEME.DARK:THEME.LIGHT;n.updateTheme(r)}})),_defineProperty(_assertThisInitialized$1(n),"setDefaultAudioVolume",(function(){var e=n.props,t=e.defaultVolume,r=e.remember;n.defaultVolume=Math.max(0,Math.min(t,1));var o=n.getLastPlayStatus().soundValue,i=void 0===o?n.defaultVolume:o;n.setAudioVolume(r?i:n.defaultVolume)})),_defineProperty(_assertThisInitialized$1(n),"getDefaultPlayId",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.props.audioLists,t=n.getPlayIndex();return e[t]&&e[t][PLAYER_KEY]})),_defineProperty(_assertThisInitialized$1(n),"initLyricParser",(function(){n.lyric=new Lyric(n.state.lyric,n.onLyricChange),n.setState({currentLyric:n.lyric.lines[0]&&n.lyric.lines[0].text})})),_defineProperty(_assertThisInitialized$1(n),"onLyricChange",(function(e){var t=e.lineNum,r=e.txt;n.setState({currentLyric:r}),n.props.onAudioLyricChange&&n.props.onAudioLyricChange(t,r)})),_defineProperty(_assertThisInitialized$1(n),"updateTheme",(function(e){e&&e!==n.props.theme&&Object.values(THEME).includes(e)&&n.setState({theme:e})})),_defineProperty(_assertThisInitialized$1(n),"updateMode",(function(e){e&&e!==n.props.mode&&Object.values(MODE).includes(e)&&(n.setState({toggle:e===MODE.FULL}),e===MODE.MINI&&n._closeAudioListsPanel())})),_defineProperty(_assertThisInitialized$1(n),"updatePlayMode",(function(e){Object.values(PLAY_MODE).includes(e)&&e!==n.props.playMode&&n.setState({playMode:e})})),_defineProperty(_assertThisInitialized$1(n),"updateAudioLists",(function(e){var t=[].concat(_toConsumableArray$1(n.state.audioLists),_toConsumableArray$1(e.filter((function(e){return-1===n.state.audioLists.findIndex((function(t){return t.musicSrc===e.musicSrc}))}))));n.initPlayInfo(t),n.bindEvents(n.audio),n.props.onAudioListsChange&&n.props.onAudioListsChange(n.state.playId,e,n.getBaseAudioInfo())})),_defineProperty(_assertThisInitialized$1(n),"loadNewAudioLists",(function(e){var t=e.audioLists,r=e.remember,o=e.playMode,i=e.theme,a=e.autoPlayInitLoadPlayList,s=e.playIndex;if(Array.isArray(t)&&t.length){var l=n.getPlayInfoOfNewList(e),c=r?n.getLastPlayStatus():{playMode:o||PLAY_MODE.order,playIndex:s||DEFAULT_PLAY_INDEX};i!==THEME.AUTO&&(c.theme=i);var u=_objectSpread$3(_objectSpread$3(_objectSpread$3({},l),c),{},{isInitAutoPlay:a,playing:n.isAudioCanPlay});if(n.checkCurrentPlayingAudioIsInUpdatedAudioLists(e))n.setState({audioLists:l.audioLists});else switch(_typeof$1(l.musicSrc)){case"function":l.musicSrc().then((function(e){n.setState(_objectSpread$3(_objectSpread$3({},u),{},{musicSrc:e}))}),n.onAudioError);break;default:n.setState(u)}}})),_defineProperty(_assertThisInitialized$1(n),"resetPlayId",(function(){return new Promise((function(e){n.setState({playId:n.initPlayId},e)}))})),_defineProperty(_assertThisInitialized$1(n),"changeAudioLists",(function(e){n.checkCurrentPlayingAudioIsInUpdatedAudioLists(e)||n.resetAudioStatus(),n.resetPlayId().then((function(){n.loadNewAudioLists(e),n.props.onAudioListsChange&&n.props.onAudioListsChange(n.state.playId,e.audioLists,n.getBaseAudioInfo())}))})),_defineProperty(_assertThisInitialized$1(n),"updatePlayIndex",(function(e){var t=n.getCurrentPlayIndex();void 0!==e&&t!==e&&n.resetAudioPlayStatus().then((function(){var t=n.state.audioLists[n.getPlayIndex(e)];t&&t[PLAYER_KEY]&&n.audioListsPlay(t[PLAYER_KEY],!0)}))})),_defineProperty(_assertThisInitialized$1(n),"playByIndex",(function(e){n.updatePlayIndex(e)})),_defineProperty(_assertThisInitialized$1(n),"getEnhanceAudio",(function(){var e=_assertThisInitialized$1(n).audio;return[{name:"destroy",value:n.onDestroyPlayer},{name:"updatePlayIndex",value:n.updatePlayIndex},{name:"playByIndex",value:n.playByIndex},{name:"playNext",value:n.onPlayNextAudio},{name:"playPrev",value:n.onPlayPrevAudio},{name:"togglePlay",value:n.onTogglePlay},{name:"clear",value:n.clearAudioLists},{name:"sortable",value:n.sortable}].forEach((function(t){var r=t.name,n=t.value;Object.defineProperty(e,r,{value:n,writable:!1})})),e})),_defineProperty(_assertThisInitialized$1(n),"onGetAudioInstance",(function(){n.props.getAudioInstance&&n.props.getAudioInstance(n.getEnhanceAudio())})),_defineProperty(_assertThisInitialized$1(n),"updateMediaSessionMetadata",(function(){if("mediaSession"in navigator&&n.props.showMediaSession){var e=n.state,t=e.name,r=e.cover,o={title:t,artist:e.singer,album:t};r&&(o.artwork=["96x96","128x128","192x192","256x256","384x384","512x512"].map((function(e){return{src:r,sizes:e,type:"image/png"}}))),navigator.mediaSession.metadata=new MediaMetadata(o),n.updateMediaSessionPositionState()}})),_defineProperty(_assertThisInitialized$1(n),"updateMediaSessionPositionState",(function(){if("setPositionState"in navigator.mediaSession)try{var e=_assertThisInitialized$1(n).audio;navigator.mediaSession.setPositionState({duration:n.audioDuration,playbackRate:e.playbackRate||1,position:e.currentTime||0})}catch(t){console.error("Update media session position state failed: ",t)}})),_defineProperty(_assertThisInitialized$1(n),"onAddMediaSession",(function(){if("mediaSession"in navigator&&n.props.showMediaSession){navigator.mediaSession.setActionHandler("play",n.onTogglePlay),navigator.mediaSession.setActionHandler("pause",n.onTogglePlay),navigator.mediaSession.setActionHandler("seekbackward",(function(e){var t=e.seekOffset||10;n.audio.currentTime=Math.max(n.audio.currentTime-t,0),n.props.onAudioSeeked&&n.props.onAudioSeeked(n.getBaseAudioInfo())})),navigator.mediaSession.setActionHandler("seekforward",(function(e){var t=e.seekOffset||10;n.audio.currentTime=Math.min(n.audio.currentTime+t,n.audioDuration),n.props.onAudioSeeked&&n.props.onAudioSeeked(n.getBaseAudioInfo())})),navigator.mediaSession.setActionHandler("previoustrack",n.onPlayPrevAudio),navigator.mediaSession.setActionHandler("nexttrack",n.onPlayNextAudio),setTimeout((function(){n.updateMediaSessionMetadata()}),0);try{navigator.mediaSession.setActionHandler("seekto",(function(e){e.fastSeek&&"fastSeek"in n.audio?n.audio.fastSeek(e.seekTime):(n.audio.currentTime=e.seekTime,n.updateMediaSessionPositionState())}))}catch(e){console.warn('Warning! The "seekto" media session action is not supported.')}}})),_defineProperty(_assertThisInitialized$1(n),"bindUnhandledRejection",(function(){window.addEventListener("unhandledrejection",n.onAudioError)})),_defineProperty(_assertThisInitialized$1(n),"unBindUnhandledRejection",(function(){window.removeEventListener("unhandledrejection",n.onAudioError)})),_defineProperty(_assertThisInitialized$1(n),"bindKeyDownEvents",(function(){n.props.spaceBar&&n.player.current&&(n.player.current.addEventListener("keydown",n.onKeyDown,!1),n.player.current.focus({preventScroll:!0}))})),_defineProperty(_assertThisInitialized$1(n),"unBindKeyDownEvents",(function(){n.player.current&&n.player.current.removeEventListener("keydown",n.onKeyDown,!1)})),_defineProperty(_assertThisInitialized$1(n),"onKeyDown",(function(e){n.props.spaceBar&&e.keyCode===SPACE_BAR_KEYCODE&&n.onTogglePlay()})),_defineProperty(_assertThisInitialized$1(n),"initPlayer",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.props.audioLists,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];r&&n.setDefaultAudioVolume(),Array.isArray(e)&&e.length&&(n.bindUnhandledRejection(),n.bindEvents(n.audio),n.initLyricParser(),n.onAddMediaSession(),IS_MOBILE?n.bindMobileAutoPlayEvents():(t&&n.bindKeyDownEvents(),isSafari()&&n.bindSafariAutoPlayEvents()))})),_defineProperty(_assertThisInitialized$1(n),"removeLyric",(function(){n.lyric&&(n.lyric.stop(),n.lyric=void 0)})),_defineProperty(_assertThisInitialized$1(n),"unInstallPlayer",(function(){n.unBindEvents(n.audio,void 0,!1),n.unBindUnhandledRejection(),n.unBindKeyDownEvents(),n.removeMobileListener(),n.removeLyric(),n._onDestroyed(),n.sortable&&n.sortable.destroy()})),_defineProperty(_assertThisInitialized$1(n),"onAudioCanPlay",(function(){n.state.isAudioSeeking||n.setState({canPlay:!0},(function(){n.playAudio(!0)}))})),_defineProperty(_assertThisInitialized$1(n),"initSortableAudioLists",(function(){var e=n.props,t=e.audioLists,r=e.sortableOptions,o=SORTABLE_CONFIG.selector,i=_objectWithoutProperties$1(SORTABLE_CONFIG,["selector"]),a=document.querySelector(".".concat(o));Array.isArray(t)&&!t.length||!a||(n.sortable&&n.sortable.destroy(),n.sortable=new Sortable(a,_objectSpread$3(_objectSpread$3({onEnd:n.onAudioListsSortEnd},i),r)))})),n.audio=null,n.targetId="music-player-controller",n._PLAY_MODE_=Object.values(PLAY_MODE),n._PLAY_MODE_LENGTH_=n._PLAY_MODE_.length,n.player=react.exports.createRef(),n.destroyBtn=react.exports.createRef(),n}return _createClass$1(r,[{key:"locale",get:function(){var e=this.props.locale;return"string"==typeof e?LOCALE_CONFIG[this.props.locale]:e?_objectSpread$3(_objectSpread$3({},LOCALE_CONFIG[LOCALE.en_US]),e):{}}},{key:"audioDuration",get:function(){var e=this.state,t=e.audioLists,r=e.playId;if(!t.length||!this.audio)return 0;var n=(t.find((function(e){return e[PLAYER_KEY]===r}))||{}).duration;return Math.max(Number(n)||this.audio.duration||0,0)}},{key:"isAudioCanPlay",get:function(){var e=this.props.autoPlay,t=this.state,r=t.isInitAutoPlay,n=t.isAutoPlayWhenUserClicked;return t.canPlay&&(r||e||n)}},{key:"iconMap",get:function(){var e=this,t=function(){return React$1.createElement("span",{className:"loading group"},e.props.icon.loading)};return _objectSpread$3(_objectSpread$3(_objectSpread$3({},DEFAULT_ICON),this.props.icon),{},{loading:React$1.createElement(t,null)})}},{key:"render",value:function(){var e=this,t=this.props,r=t.className,n=t.drag,o=t.style,i=t.showDownload,a=t.showPlay,s=t.showReload,l=t.showPlayMode,c=t.showThemeSwitch,u=t.toggleMode,d=t.showMiniModeCover,p=t.extendsContent,f=t.defaultPlayMode,h=t.seeked,m=t.showProgressLoadBar,g=t.bounds,y=t.defaultPosition,v=t.showMiniProcessBar,b=t.preload,_=t.glassBg,S=t.remove,w=t.lyricClassName,x=t.showLyric,E=t.getContainer,A=t.autoHiddenCover,k=t.showDestroy,P=t.responsive,T=this.locale,C=this.state,R=C.toggle,O=C.playing,I=C.currentTime,L=C.soundValue,D=C.moveX,j=C.moveY,M=C.loading,N=C.audioListsPanelVisible,F=C.theme,$=C.name,B=C.cover,U=C.singer,z=C.musicSrc,q=C.playId,W=C.isMobile,V=C.playMode,G=C.playModeTipVisible,H=C.playModelNameVisible,K=C.initAnimate,Y=C.loadedProgress,X=C.audioLists,Q=C.removeId,J=C.currentLyric,Z=C.audioLyricVisible,ee=C.isPlayDestroyed,te=C.isResetCoverRotate,re=!1===b||"none"===b?{}:!0===b?{preload:"auto"}:{preload:b},ne=K?{show:N,hide:!N}:{show:N},oe=PLAY_MODE[V||f]||PLAY_MODE.order,ie=T.playModeText[oe],ae=d&&!A||A&&B?{style:{backgroundImage:"url(".concat(B,")")}}:{},se=formatTime(I),le=formatTime(this.audioDuration),ce=h?{onChange:this.onProgressChange,onAfterChange:this.onAudioSeeked}:{},ue=React$1.createElement(React$1.Fragment,null,m&&React$1.createElement("div",{className:"progress-load-bar",style:{width:"".concat(Math.min(Y,100),"%")}}),React$1.createElement(default_1,_extends({max:Math.ceil(this.audioDuration),defaultValue:0,value:Math.ceil(I)},ce,PROGRESS_BAR_SLIDER_OPTIONS))),de=i&&React$1.createElement("span",{className:"group audio-download",onClick:this.onAudioDownload,title:T.downloadText},this.iconMap.download),pe=c&&React$1.createElement("span",{className:"group theme-switch"},React$1.createElement(Switch,{className:"theme-switch-container",onChange:this.themeChange,checkedChildren:T.lightThemeText,unCheckedChildren:T.darkThemeText,checked:F===THEME.LIGHT,title:T.switchThemeText})),fe=s&&React$1.createElement("span",{className:"group reload-btn",onClick:this.onAudioReload,title:T.reloadText},this.iconMap.reload),he=x&&React$1.createElement("span",{className:cls("group lyric-btn",{"lyric-btn-active":Z}),onClick:this.toggleAudioLyric,title:T.toggleLyricText},this.iconMap.lyric),me=l&&React$1.createElement("span",{className:cls("group loop-btn"),onClick:this.togglePlayMode,title:T.playModeText[oe]},this.renderPlayModeIcon(oe)),ge=W?30:40,ye=k&&React$1.createElement("span",{title:T.destroyText,className:"group destroy-btn",ref:this.destroyBtn,onClick:!n||R?this.onDestroyPlayer:void 0},this.iconMap.destroy),ve=React$1.createElement("div",{className:cls("react-jinke-music-player"),style:y,tabIndex:"-1"},React$1.createElement("div",{className:cls("music-player")},v&&React$1.createElement(CircleProcessBar$1,{progress:I/this.audioDuration,r:ge}),React$1.createElement("div",_extends({id:this.targetId,className:cls("scale","music-player-controller",{"music-player-playing":O})},ae,{onClick:n?void 0:this.onOpenPanel}),M?this.iconMap.loading:React$1.createElement(React$1.Fragment,null,React$1.createElement("span",{className:"controller-title"},T.controllerTitle),React$1.createElement("div",{className:"music-player-controller-setting"},R?T.closeText:T.openText))),ye)),be=E()||document.body,_e=this.getAudioTitle();if(ee)return null;var Se=!O||this.state.currentVolumeFade===VOLUME_FADE.OUT;return reactDom.exports.createPortal(React$1.createElement("div",{className:cls("react-jinke-music-player-main",{"light-theme":F===THEME.LIGHT,"dark-theme":F===THEME.DARK},r),style:o,ref:this.player,tabIndex:"-1"},R&&W&&P&&React$1.createElement(AudioPlayerMobile,{playing:O,loading:M,name:$,singer:U,cover:B,themeSwitch:pe,duration:le,currentTime:se,progressBar:ue,onPlay:this.onTogglePlay,currentPlayModeName:ie,playMode:me,audioNextPlay:this.onPlayNextAudio,audioPrevPlay:this.onPlayPrevAudio,icon:_objectSpread$3(_objectSpread$3({},this.iconMap),{},{reload:fe,download:de,lyric:he}),playModeTipVisible:G,openAudioListsPanel:this.openAudioListsPanel,onClose:this.onHidePanel,extendsContent:p,glassBg:_,autoHiddenCover:A,onCoverClick:this.onCoverClick,locale:T,toggleMode:u,renderAudioTitle:this.renderAudioTitle,shouldShowPlayIcon:Se,isResetCoverRotate:te}),R?void 0:n?React$1.createElement(Draggable$1,{bounds:g,position:{x:D,y:j},onDrag:this.onControllerDrag,onStop:this.onControllerDragStop,onStart:this.onControllerDragStart},ve):ve,R&&(!W||!P)&&React$1.createElement("div",{className:cls("music-player-panel","translate",{"glass-bg":_})},React$1.createElement("section",{className:"panel-content"},(!A||A&&B)&&React$1.createElement("div",{className:cls("img-content","img-rotate",{"img-rotate-pause":!O||!B,"img-rotate-reset":te}),style:{backgroundImage:"url(".concat(B,")")},onClick:function(){return e.onCoverClick()}}),React$1.createElement("div",{className:"progress-bar-content"},React$1.createElement("span",{className:"audio-title",title:_e},this.renderAudioTitle()),React$1.createElement("section",{className:"audio-main"},React$1.createElement("span",{className:"current-time",title:se},M?"--":se),React$1.createElement("div",{className:"progress-bar"},ue),React$1.createElement("span",{className:"duration",title:le},M?"--":le))),React$1.createElement("div",{className:"player-content"},a?React$1.createElement("span",{className:"group"},React$1.createElement("span",{className:"group prev-audio",title:T.previousTrackText,onClick:this.onPlayPrevAudio},this.iconMap.prev),M?React$1.createElement("span",{className:"group loading-icon",title:T.loadingText},this.iconMap.loading):React$1.createElement("span",{className:"group play-btn",onClick:this.onTogglePlay,title:Se?T.clickToPlayText:T.clickToPauseText},Se?this.iconMap.play:this.iconMap.pause),React$1.createElement("span",{className:"group next-audio",title:T.nextTrackText,onClick:this.onPlayNextAudio},this.iconMap.next)):M&&this.iconMap.loading,fe,de,pe,p||null,React$1.createElement("span",{className:"group play-sounds",title:T.volumeText},0===L?React$1.createElement("span",{className:"sounds-icon",onClick:this.onResetVolume},this.iconMap.mute):React$1.createElement("span",{className:"sounds-icon",onClick:this.onAudioMute},this.iconMap.volume),React$1.createElement(default_1,_extends({value:L,onChange:this.onAudioSoundChange,className:"sound-operation"},VOLUME_BAR_SLIDER_OPTIONS))),me,he,React$1.createElement("span",{className:"group audio-lists-btn",title:T.playListsText,onClick:this.openAudioListsPanel},React$1.createElement("span",{className:"audio-lists-icon"},this.iconMap.playLists),React$1.createElement("span",{className:"audio-lists-num"},X.length)),u&&React$1.createElement("span",{className:"group hide-panel",title:T.toggleMiniModeText,onClick:this.onHidePanel},this.iconMap.toggle),ye))),React$1.createElement(AudioListsPanel$1,{playing:O,playId:q,loading:M,visible:N,audioLists:X,onPlay:this.audioListsPlay,onCancel:this.closeAudioListsPanel,icon:this.iconMap,isMobile:W,panelToggleAnimate:ne,glassBg:_,cover:B,remove:S,onDelete:this.onDeleteAudioLists,removeId:Q,locale:T}),!W&&React$1.createElement(PlayModel$1,{visible:H,value:ie}),Z&&React$1.createElement(Draggable$1,null,React$1.createElement("div",{className:cls("music-player-lyric",w)},J||T.emptyLyricText)),React$1.createElement("audio",_extends({className:"music-player-audio",title:_e},re,{src:z,ref:function(t){e.audio=t}}))),be)}},{key:"getBaseAudioInfo",value:function(){var e=this.state,t=e.cover,r=e.name,n=e.musicSrc,o=e.soundValue,i=e.lyric,a=e.audioLists,s=e.currentLyric,l=this.audio||{},c=l.currentTime,u=l.muted,d=l.networkState,p=l.readyState,f=l.played,h=l.paused,m=l.ended,g=l.startDate,y=this.getCurrentPlayIndex();return _objectSpread$3(_objectSpread$3({},a[y]||{}),{},{cover:t,name:r,musicSrc:n,volume:o,currentTime:c,duration:this.audioDuration,muted:u,networkState:d,readyState:p,played:f,paused:h,ended:m,startDate:g,lyric:i,currentLyric:s,playIndex:y})}},{key:"componentDidUpdate",value:function(e,t){t.musicSrc!==this.state.musicSrc&&this.setState({isResetCoverRotate:!0})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this,r=e.audioLists,n=e.playIndex,o=e.theme,i=e.mode,a=e.playMode,s=e.clearPriorAudioLists,l=arrayEqual(r)(this.props.audioLists);l||(s?this.changeAudioLists(e):this.updateAudioLists(r),this.checkCurrentPlayingAudioIsInUpdatedAudioLists(e)||this.initPlayer(r,!1,!1),setTimeout((function(){return t.initSortableAudioLists()}),200)),this.updatePlayIndex(!l&&s?DEFAULT_PLAY_INDEX:n),this.updateTheme(o),this.updateMode(i),this.updatePlayMode(a)}},{key:"UNSAFE_componentWillMount",value:function(){var e=this,t=this.props,r=t.audioLists,n=t.remember;if(Array.isArray(r)&&r.length>=1){var o=this.getPlayInfo(r),i=n?this.getLastPlayStatus():{};switch(_typeof$1(o.musicSrc)){case"function":o.musicSrc().then((function(t){e.setState(_objectSpread$3(_objectSpread$3({},o),{},{musicSrc:t},i))}),this.onAudioError);break;default:this.setState(_objectSpread$3(_objectSpread$3({},o),i))}}}},{key:"componentWillUnmount",value:function(){this.unInstallPlayer()}},{key:"componentDidMount",value:function(){this.addMobileListener(),this.addSystemThemeListener(),this.initPlayer(),this.initSortableAudioLists(),this.onGetAudioInstance()}}]),r}();_defineProperty(ReactJkMusicPlayer,"defaultProps",{audioLists:[],theme:THEME.DARK,mode:MODE.MINI,defaultPlayMode:PLAY_MODE.order,defaultPosition:{left:0,top:0},once:!1,drag:!0,toggleMode:!0,showMiniModeCover:!0,showDownload:!0,showPlay:!0,showReload:!0,showPlayMode:!0,showThemeSwitch:!0,showLyric:!1,playModeTipVisible:!1,autoPlay:!0,defaultVolume:1,showProgressLoadBar:!0,seeked:!0,playModeShowTime:600,bounds:"body",showMiniProcessBar:!1,loadAudioErrorPlayNext:!0,preload:!1,glassBg:!1,remember:!1,remove:!0,defaultPlayIndex:0,getContainer:function(){return document.body},autoHiddenCover:!1,onBeforeAudioDownload:function(){},spaceBar:!1,showDestroy:!1,showMediaSession:!1,locale:LOCALE.en_US,responsive:!0,icon:DEFAULT_ICON,quietUpdate:!1,mobileMediaQuery:MEDIA_QUERY.MOBILE,volumeFade:{fadeIn:0,fadeOut:0},restartCurrentOnPrev:!1,sortableOptions:{}}),_defineProperty(ReactJkMusicPlayer,"propTypes",PROP_TYPES);var index='.rc-slider{border-radius:6px;height:14px;padding:5px 0;position:relative;touch-action:none;width:100%}.rc-slider,.rc-slider *{-webkit-tap-highlight-color:rgba(0,0,0,0);box-sizing:border-box}.rc-slider-rail{background-color:#e9e9e9;width:100%}.rc-slider-rail,.rc-slider-track{border-radius:6px;height:4px;position:absolute}.rc-slider-track{background-color:#abe2fb;left:0}.rc-slider-handle{background-color:#fff;border:2px solid #96dbfa;border-radius:50%;cursor:pointer;cursor:-webkit-grab;cursor:grab;height:14px;margin-top:-5px;position:absolute;touch-action:pan-x;width:14px}.rc-slider-handle-dragging.rc-slider-handle-dragging.rc-slider-handle-dragging{border-color:#57c5f7;box-shadow:0 0 0 5px #96dbfa}.rc-slider-handle:focus{outline:none}.rc-slider-handle-click-focused:focus{border-color:#96dbfa;box-shadow:unset}.rc-slider-handle:hover{border-color:#57c5f7}.rc-slider-handle:active{border-color:#57c5f7;box-shadow:0 0 5px #57c5f7;cursor:-webkit-grabbing;cursor:grabbing}.rc-slider-mark{font-size:12px;left:0;position:absolute;top:18px;width:100%}.rc-slider-mark-text{color:#999;cursor:pointer;display:inline-block;position:absolute;text-align:center;vertical-align:middle}.rc-slider-mark-text-active{color:#666}.rc-slider-step{background:transparent;height:4px;position:absolute;width:100%}.rc-slider-dot{background-color:#fff;border:2px solid #e9e9e9;border-radius:50%;bottom:-2px;cursor:pointer;height:8px;margin-left:-4px;position:absolute;vertical-align:middle;width:8px}.rc-slider-dot-active{border-color:#96dbfa}.rc-slider-dot-reverse{margin-right:-4px}.rc-slider-disabled{background-color:#e9e9e9}.rc-slider-disabled .rc-slider-track{background-color:#ccc}.rc-slider-disabled .rc-slider-dot,.rc-slider-disabled .rc-slider-handle{background-color:#fff;border-color:#ccc;box-shadow:none;cursor:not-allowed}.rc-slider-disabled .rc-slider-dot,.rc-slider-disabled .rc-slider-mark-text{cursor:not-allowed!important}.rc-slider-vertical{height:100%;padding:0 5px;width:14px}.rc-slider-vertical .rc-slider-rail{height:100%;width:4px}.rc-slider-vertical .rc-slider-track{bottom:0;left:5px;width:4px}.rc-slider-vertical .rc-slider-handle{margin-left:-5px;touch-action:pan-y}.rc-slider-vertical .rc-slider-mark{height:100%;left:18px;top:0}.rc-slider-vertical .rc-slider-step{height:100%;width:4px}.rc-slider-vertical .rc-slider-dot{left:2px;margin-bottom:-4px}.rc-slider-vertical .rc-slider-dot:first-child{margin-bottom:-4px}.rc-slider-vertical .rc-slider-dot:last-child{margin-bottom:-4px}.rc-slider-tooltip-zoom-down-appear,.rc-slider-tooltip-zoom-down-enter,.rc-slider-tooltip-zoom-down-leave{animation-duration:.3s;animation-fill-mode:both;animation-play-state:paused;display:block!important}.rc-slider-tooltip-zoom-down-appear.rc-slider-tooltip-zoom-down-appear-active,.rc-slider-tooltip-zoom-down-enter.rc-slider-tooltip-zoom-down-enter-active{animation-name:rcSliderTooltipZoomDownIn;animation-play-state:running}.rc-slider-tooltip-zoom-down-leave.rc-slider-tooltip-zoom-down-leave-active{animation-name:rcSliderTooltipZoomDownOut;animation-play-state:running}.rc-slider-tooltip-zoom-down-appear,.rc-slider-tooltip-zoom-down-enter{animation-timing-function:cubic-bezier(.23,1,.32,1);transform:scale(0)}.rc-slider-tooltip-zoom-down-leave{animation-timing-function:cubic-bezier(.755,.05,.855,.06)}@keyframes rcSliderTooltipZoomDownIn{0%{opacity:0;transform:scale(0);transform-origin:50% 100%}to{transform:scale(1);transform-origin:50% 100%}}@keyframes rcSliderTooltipZoomDownOut{0%{transform:scale(1);transform-origin:50% 100%}to{opacity:0;transform:scale(0);transform-origin:50% 100%}}.rc-slider-tooltip{left:-9999px;position:absolute;top:-9999px;visibility:visible}.rc-slider-tooltip,.rc-slider-tooltip *{-webkit-tap-highlight-color:rgba(0,0,0,0);box-sizing:border-box}.rc-slider-tooltip-hidden{display:none}.rc-slider-tooltip-placement-top{padding:4px 0 8px}.rc-slider-tooltip-inner{background-color:#6c6c6c;border-radius:6px;box-shadow:0 0 4px #d9d9d9;color:#fff;font-size:12px;height:24px;line-height:1;min-width:24px;padding:6px 2px;text-align:center;text-decoration:none}.rc-slider-tooltip-arrow{border-color:transparent;border-style:solid;height:0;position:absolute;width:0}.rc-slider-tooltip-placement-top .rc-slider-tooltip-arrow{border-top-color:#6c6c6c;border-width:4px 4px 0;bottom:4px;left:50%;margin-left:-4px}.rc-switch{background-color:#ccc;border:1px solid #ccc;border-radius:20px 20px;box-sizing:border-box;cursor:pointer;display:inline-block;height:22px;line-height:20px;padding:0;position:relative;transition:all .3s cubic-bezier(.35,0,.25,1);vertical-align:middle;width:44px}.rc-switch-inner{color:#fff;font-size:12px;left:24px;position:absolute;top:0}.rc-switch:after{animation-duration:.3s;animation-name:rcSwitchOff;animation-timing-function:cubic-bezier(.35,0,.25,1);background-color:#fff;border-radius:50% 50%;box-shadow:0 2px 5px rgba(0,0,0,.26);content:" ";cursor:pointer;height:18px;left:2px;position:absolute;top:1px;transform:scale(1);transition:left .3s cubic-bezier(.35,0,.25,1);width:18px}.rc-switch:hover:after{animation-name:rcSwitchOn;transform:scale(1.1)}.rc-switch:focus{box-shadow:0 0 0 2px #d5f1fd;outline:none}.rc-switch-checked{background-color:#87d068;border:1px solid #87d068}.rc-switch-checked .rc-switch-inner{left:6px}.rc-switch-checked:after{left:22px}.rc-switch-disabled{background:#ccc;border-color:#ccc;cursor:no-drop}.rc-switch-disabled:after{animation-name:none;background:#9e9e9e;cursor:no-drop}.rc-switch-disabled:hover:after{animation-name:none;transform:scale(1)}.rc-switch-label{display:inline-block;font-size:14px;line-height:20px;padding-left:10px;pointer-events:none;user-select:text;vertical-align:middle;white-space:normal}@keyframes rcSwitchOn{0%{transform:scale(1)}50%{transform:scale(1.25)}to{transform:scale(1.1)}}@keyframes rcSwitchOff{0%{transform:scale(1.1)}to{transform:scale(1)}}.react-jinke-music-player-main:focus{outline:none}.react-jinke-music-player-main li,.react-jinke-music-player-main ul{list-style-type:none;margin:0;padding:0}.react-jinke-music-player-main *{box-sizing:border-box}.react-jinke-music-player-main .text-center{text-align:center}.react-jinke-music-player-main .hidden{display:none!important}.react-jinke-music-player-main .loading{animation:audioLoading 1s linear infinite;display:inline-flex}.react-jinke-music-player-main .loading svg{color:#31c27c;font-size:24px}.react-jinke-music-player-main .translate{animation:translate .35s cubic-bezier(.43,-.1,.16,1.1) forwards}.react-jinke-music-player-main .scale{animation:scaleTo .35s cubic-bezier(.43,-.1,.16,1.1) forwards}@keyframes playing{to{transform:rotateX(1turn)}}@keyframes coverReset{to{transform:rotate(0deg)}}@keyframes audioLoading{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes scale{0%{transform:scale(0)}50%{opacity:.6;transform:scale(1.5)}to{opacity:0;transform:scale(2)}}@keyframes scaleTo{0%{opacity:0;transform:scale(0)}to{opacity:1;transform:scale(1)}}@keyframes scaleFrom{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(0)}}@keyframes imgRotate{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes fromTo{0%{transform:scale(1) translate3d(0,110%,0)}to{transform:scale(1) translateZ(0)}}@keyframes fromOut{0%{transform:scale(1) translateZ(0)}to{transform:scale(1) translate3d(0,110%,0)}}@keyframes fromDown{0%{transform:scale(1) translate3d(0,-110%,0)}to{transform:scale(1) translateZ(0)}}@keyframes translate{0%{opacity:0;transform:translate3d(100%,0,0)}to{opacity:1;transform:translateZ(0)}}@keyframes remove{0%{opacity:1;transform:translateZ(0)}to{opacity:0;transform:translate3d(-100%,0,0)}}.react-jinke-music-player-main .img-rotate-pause{animation-play-state:paused!important}.react-jinke-music-player-main .img-rotate-reset{animation:coverReset .35s cubic-bezier(.43,-.1,.16,1.1) forwards!important}.react-jinke-music-player-mobile{background-color:rgba(0,0,0,.75);bottom:0;color:#fff;display:flex;flex-direction:column;justify-content:space-between;left:0;overflow:hidden;padding:20px;position:fixed;right:0;top:0;width:100%;z-index:999}.react-jinke-music-player-mobile>.group{flex:1 1 auto}.react-jinke-music-player-mobile .show{animation:mobile-bg-show .35s cubic-bezier(.43,-.1,.16,1.1) forwards}.react-jinke-music-player-mobile .hide{animation:mobile-bg-hide .35s cubic-bezier(.43,-.1,.16,1.1) forwards}.react-jinke-music-player-mobile-play-model-tip{align-items:center;background-color:#31c27c;box-shadow:0 2px 20px rgba(0,0,0,.1);color:#fff;display:flex;height:35px;left:0;line-height:35px;padding:0 20px;position:fixed;top:0;transform:translate3d(0,-105%,0);transition:transform .35s cubic-bezier(.43,-.1,.16,1.1);width:100%;z-index:1000}.react-jinke-music-player-mobile-play-model-tip-title{margin-right:12px}.react-jinke-music-player-mobile-play-model-tip-title svg{animation:none!important;vertical-align:text-bottom!important}@media screen and (max-width:767px){.react-jinke-music-player-mobile-play-model-tip-title svg{color:#fff!important;font-size:19px}}.react-jinke-music-player-mobile-play-model-tip-title .loop-btn{display:flex}.react-jinke-music-player-mobile-play-model-tip-text{font-size:14px}.react-jinke-music-player-mobile-play-model-tip.show{transform:translateZ(0)}.react-jinke-music-player-mobile-header{align-items:center;animation:fromDown .35s cubic-bezier(.43,-.1,.16,1.1) forwards;display:flex;justify-content:center;left:0;position:relative;top:0;width:100%}.react-jinke-music-player-mobile-header-title{font-size:20px;overflow:hidden;padding:0 30px;text-align:center;text-overflow:ellipsis;transition:color .35s cubic-bezier(.43,-.1,.16,1.1);white-space:nowrap}.react-jinke-music-player-mobile-header .item{display:inline-flex;width:50px}.react-jinke-music-player-mobile-header-right{color:hsla(0,0%,100%,.6);cursor:pointer;position:absolute;right:0}.react-jinke-music-player-mobile-header-right svg{font-size:25px}.react-jinke-music-player-mobile-singer{animation:fromDown .35s cubic-bezier(.43,-.1,.16,1.1) forwards;padding:12px 0}@media screen and (max-width:320px){.react-jinke-music-player-mobile-singer{padding:0}}.react-jinke-music-player-mobile-singer-name{font-size:14px;position:relative;transition:color .35s cubic-bezier(.43,-.1,.16,1.1)}.react-jinke-music-player-mobile-singer-name:after,.react-jinke-music-player-mobile-singer-name:before{background-color:hsla(0,0%,100%,.6);border-radius:2px;content:"";height:1px;position:absolute;top:9px;transition:background-color .35s cubic-bezier(.43,-.1,.16,1.1);width:16px}.react-jinke-music-player-mobile-singer-name:after{left:-25px}.react-jinke-music-player-mobile-singer-name:before{right:-25px}.react-jinke-music-player-mobile-cover{animation:fromTo .35s cubic-bezier(.43,-.1,.16,1.1) forwards;border:5px solid rgba(0,0,0,.2);border-radius:50%;box-shadow:0 0 1px 3px rgba(0,0,0,.1);height:300px;margin:15px auto;overflow:hidden;transition:box-shadow,border .35s cubic-bezier(.43,-.1,.16,1.1);width:300px}@media screen and (max-width:320px){.react-jinke-music-player-mobile-cover{height:230px;margin:10px auto;width:230px}}.react-jinke-music-player-mobile-cover .cover{animation:imgRotate 30s linear infinite;object-fit:cover;width:100%}.react-jinke-music-player-mobile-progress{align-items:center;display:flex;justify-content:space-around}.react-jinke-music-player-mobile-progress .current-time,.react-jinke-music-player-mobile-progress .duration{color:hsla(0,0%,100%,.6);display:inline-flex;font-size:12px;transition:color .35s cubic-bezier(.43,-.1,.16,1.1);width:55px}.react-jinke-music-player-mobile-progress .current-time{margin-right:5px}.react-jinke-music-player-mobile-progress .duration{justify-content:flex-end;margin-left:5px}.react-jinke-music-player-mobile-progress .progress-bar{flex:1 1 auto}.react-jinke-music-player-mobile-progress .rc-slider-rail{background-color:hsla(0,0%,100%,.6)}.react-jinke-music-player-mobile-progress .rc-slider-handle,.react-jinke-music-player-mobile-progress .rc-slider-track{background-color:#31c27c}.react-jinke-music-player-mobile-progress .rc-slider-handle{border:2px solid #fff}.react-jinke-music-player-mobile-progress .rc-slider-handle:active{box-shadow:0 0 2px #31c27c}.react-jinke-music-player-mobile-progress-bar{display:flex;position:relative;width:100%}.react-jinke-music-player-mobile-progress-bar .progress-load-bar{background-color:rgba(0,0,0,.06);height:4px;left:0;position:absolute;top:5px;transition:width,background-color .35s cubic-bezier(.43,-.1,.16,1.1);width:0;z-index:77}.react-jinke-music-player-mobile-switch{animation:fromDown .35s cubic-bezier(.43,-.1,.16,1.1) forwards}.react-jinke-music-player-mobile-toggle{padding:17px 0}.react-jinke-music-player-mobile-toggle .group{cursor:pointer}.react-jinke-music-player-mobile-toggle .group svg{font-size:40px}.react-jinke-music-player-mobile-toggle .play-btn{padding:0 40px}.react-jinke-music-player-mobile-toggle .play-btn svg{font-size:45px}.react-jinke-music-player-mobile-toggle .loading-icon{padding:0 40px}@media screen and (max-width:320px){.react-jinke-music-player-mobile-toggle{padding:10px 0}.react-jinke-music-player-mobile-toggle>.group svg{font-size:32px}.react-jinke-music-player-mobile-toggle .play-btn svg{font-size:40px}}.react-jinke-music-player-mobile-operation,.react-jinke-music-player-mobile-progress,.react-jinke-music-player-mobile-toggle{animation:fromTo .35s cubic-bezier(.43,-.1,.16,1.1) forwards}.react-jinke-music-player-mobile-operation .items{align-items:center;display:flex;justify-content:space-around}.react-jinke-music-player-mobile-operation .items .item{cursor:pointer;flex:1;text-align:center}.react-jinke-music-player-mobile-operation .items .item svg{color:hsla(0,0%,100%,.6)}@keyframes mobile-bg-show{0%{opacity:0}to{opacity:1}}@keyframes mobile-bg-hide{0%{opacity:1}to{opacity:0}}.audio-lists-panel-sortable-highlight-bg{background-color:rgba(49,194,124,.15)!important}.audio-lists-panel{background-color:rgba(0,0,0,.75);border-radius:4px 4px 0 0;bottom:80px;color:hsla(0,0%,100%,.8);display:none\\9;height:410px;overflow:hidden;position:fixed;right:33px;transform:scale(0);transform-origin:right bottom;transition:background-color .35s cubic-bezier(.43,-.1,.16,1.1);width:480px;z-index:999}.audio-lists-panel svg{font-size:24px}.audio-lists-panel.show{animation:scaleTo .35s cubic-bezier(.43,-.1,.16,1.1) forwards;display:block\\9}.audio-lists-panel.hide{animation:scaleFrom .35s cubic-bezier(.43,-.1,.16,1.1) forwards;display:none\\9}.audio-lists-panel-mobile{background-color:rgba(0,0,0,.75);border-radius:0;bottom:0;height:auto!important;left:0;right:0;top:0;transform-origin:bottom center;width:100%!important}.audio-lists-panel-mobile.show{animation:fromTo .35s cubic-bezier(.43,-.1,.16,1.1) forwards;display:block\\9}.audio-lists-panel-mobile.hide{animation:fromOut .35s cubic-bezier(.43,-.1,.16,1.1) forwards;display:none\\9}.audio-lists-panel-mobile .audio-item:not(.audio-lists-panel-sortable-highlight-bg){background-color:rgba(0,0,0,.15)!important}.audio-lists-panel-mobile .audio-item:not(.audio-lists-panel-sortable-highlight-bg).playing{background-color:rgba(0,0,0,.75)!important}.audio-lists-panel-mobile .audio-lists-panel-content{-webkit-overflow-scrolling:touch;height:calc(100vh - 50px)!important;transform-origin:bottom center;width:100%!important}.audio-lists-panel-header{border-bottom:1px solid rgba(3,3,3,.75);box-shadow:0 1px 2px rgba(0,0,0,.2);text-shadow:0 1px 1px rgba(0,0,0,.1);transition:background-color,border-bottom .35s cubic-bezier(.43,-.1,.16,1.1)}.audio-lists-panel-header-close-btn,.audio-lists-panel-header-delete-btn{cursor:pointer;display:flex}.audio-lists-panel-header-delete-btn svg{font-size:21px}@media screen and (max-width:767px){.audio-lists-panel-header-delete-btn svg{font-size:19px}}@media screen and (min-width:768px){.audio-lists-panel-header-close-btn:hover svg{animation:imgRotate .35s cubic-bezier(.43,-.1,.16,1.1)}}.audio-lists-panel-header-line{background:#fff;height:20px;margin:0 10px;width:1px}.audio-lists-panel-header-title{align-items:center;display:flex;font-size:16px;font-weight:500;height:50px;margin:0;padding:0 20px;text-align:left;transition:color .35s cubic-bezier(.43,-.1,.16,1.1)}.audio-lists-panel-header-num{margin-left:10px}.audio-lists-panel-header-actions{align-items:center;display:flex;flex-grow:1;justify-content:flex-end}.audio-lists-panel-content{height:359px;overflow-x:hidden;overflow-y:auto}.audio-lists-panel-content.no-content{align-items:center;display:flex;justify-content:center}.audio-lists-panel-content.no-content>span{display:flex}.audio-lists-panel-content .no-data{margin-left:10px}.audio-lists-panel-content .audio-item{align-items:center;border-bottom:1px solid transparent;cursor:pointer;display:flex;font-size:14px;justify-content:space-between;line-height:40px;padding:3px 20px;transition:background-color .35s cubic-bezier(.43,-.1,.16,1.1)}.audio-lists-panel-content .audio-item:nth-child(odd){background-color:rgba(0,0,0,.1)}.audio-lists-panel-content .audio-item.playing{background-color:rgba(0,0,0,.35)}.audio-lists-panel-content .audio-item.playing,.audio-lists-panel-content .audio-item.playing svg{color:#31c27c}.audio-lists-panel-content .audio-item.remove{animation:remove .35s cubic-bezier(.43,-.1,.16,1.1) forwards}.audio-lists-panel-content .audio-item .player-icons{display:inline-flex;width:30px}.audio-lists-panel-content .audio-item .player-icons .loading{animation:audioLoading 1s linear infinite}.audio-lists-panel-content .audio-item:active,.audio-lists-panel-content .audio-item:hover{background-color:rgba(0,0,0,.35)}.audio-lists-panel-content .audio-item:active .group:not([class=".player-delete"]) svg,.audio-lists-panel-content .audio-item:hover .group:not([class=".player-delete"]) svg{color:#31c27c}.audio-lists-panel-content .audio-item .group{display:inline-flex}.audio-lists-panel-content .audio-item .player-name{flex:1;padding:0 20px 0 10px}.audio-lists-panel-content .audio-item .player-name,.audio-lists-panel-content .audio-item .player-singer{display:inline-block;overflow:hidden;text-overflow:ellipsis;transition:color .35s cubic-bezier(.43,-.1,.16,1.1);white-space:nowrap}.audio-lists-panel-content .audio-item .player-singer{font-size:12px;width:85px}.audio-lists-panel-content .audio-item .player-delete{justify-content:flex-end;text-align:right;width:30px}.audio-lists-panel-content .audio-item .player-delete:hover svg{animation:imgRotate .35s cubic-bezier(.43,-.1,.16,1.1)}.react-jinke-music-player-main{font-family:inherit;touch-action:none}.react-jinke-music-player-main ::-webkit-scrollbar-thumb{background-color:#31c27c;height:20px;opacity:.5}.react-jinke-music-player-main ::-webkit-scrollbar{background-color:#f7f8fa;width:8px}.react-jinke-music-player-main .rc-switch:focus{box-shadow:none}.react-jinke-music-player-main .lyric-btn svg{font-size:20px}.react-jinke-music-player-main .lyric-btn-active,.react-jinke-music-player-main .lyric-btn-active svg{color:#31c27c!important}.react-jinke-music-player-main .music-player-lyric{background:transparent;bottom:100px;color:#31c27c;cursor:move;font-size:36px;left:0;position:fixed;text-align:center;text-shadow:0 1px 1px hsla(0,0%,100%,.05);transition:box-shadow .35s cubic-bezier(.43,-.1,.16,1.1);width:100%;z-index:998}@media screen and (max-width:767px){.react-jinke-music-player-main .music-player-lyric{font-size:16px;z-index:999}}.react-jinke-music-player-main .play-mode-title{background-color:rgba(0,0,0,.5);bottom:80px;color:#fff;line-height:1.5;opacity:0;padding:5px 20px;pointer-events:none;position:fixed;right:72px;text-align:center;transform:translate3d(100%,0,0);transform-origin:bottom center;transition:all .35s cubic-bezier(.43,-.1,.16,1.1);user-select:none;visibility:hidden;z-index:1000}.react-jinke-music-player-main .play-mode-title.play-mode-title-visible{opacity:1;pointer-events:all;transform:translateZ(0);visibility:visible}.react-jinke-music-player-main .glass-bg-container{background-position:50%;background-repeat:no-repeat;background-size:cover;filter:blur(80px);height:300%;left:0;position:absolute;top:0;width:300%;z-index:-1}.react-jinke-music-player-main .glass-bg{backdrop-filter:blur(10px)}.react-jinke-music-player-main svg{font-size:24px;transition:color .35s cubic-bezier(.43,-.1,.16,1.1)}.react-jinke-music-player-main svg:active,.react-jinke-music-player-main svg:hover{color:#31c27c}@media screen and (max-width:767px){.react-jinke-music-player-main svg{font-size:22px}}.react-jinke-music-player-main .react-jinke-music-player-mode-icon{animation:scaleTo .35s cubic-bezier(.43,-.1,.16,1.1)}.react-jinke-music-player-main .music-player-panel{background-color:rgba(0,0,0,.75);bottom:0;box-shadow:0 0 3px #403f3f;color:#fff;height:80px;left:0;position:fixed;transition:background-color .35s cubic-bezier(.43,-.1,.16,1.1);width:100%;z-index:99}.react-jinke-music-player-main .music-player-panel .panel-content{align-items:center;display:flex;height:100%;justify-content:center;overflow:hidden;padding:0 30px;position:relative}.react-jinke-music-player-main .music-player-panel .panel-content .rc-slider-rail{background-color:hsla(0,0%,100%,.6)}.react-jinke-music-player-main .music-player-panel .panel-content .rc-slider-handle,.react-jinke-music-player-main .music-player-panel .panel-content .rc-slider-track{background-color:#31c27c}.react-jinke-music-player-main .music-player-panel .panel-content .rc-slider-handle{border:2px solid #fff}.react-jinke-music-player-main .music-player-panel .panel-content .rc-slider-handle:active{box-shadow:0 0 2px #31c27c}.react-jinke-music-player-main .music-player-panel .panel-content .img-content{background-repeat:no-repeat;background-size:100%;border-radius:50%;box-shadow:0 0 10px rgba(0,34,77,.05);cursor:pointer;height:50px;overflow:hidden;width:50px}@media screen and (max-width:767px){.react-jinke-music-player-main .music-player-panel .panel-content .img-content{height:40px;width:40px}}.react-jinke-music-player-main .music-player-panel .panel-content .img-content img{width:100%}.react-jinke-music-player-main .music-player-panel .panel-content .img-rotate{animation:imgRotate 15s linear infinite}.react-jinke-music-player-main .music-player-panel .panel-content .hide-panel,.react-jinke-music-player-main .music-player-panel .panel-content .upload-music{cursor:pointer;flex-basis:10%;margin-left:15px}@media screen and (max-width:767px){.react-jinke-music-player-main .music-player-panel .panel-content .progress-bar-content{display:none!important}}.react-jinke-music-player-main .music-player-panel .panel-content .progress-bar-content{flex:1;overflow:hidden;padding:0 20px}.react-jinke-music-player-main .music-player-panel .panel-content .progress-bar-content .audio-title{display:inline-block;overflow:hidden;text-overflow:ellipsis;transition:color .35s cubic-bezier(.43,-.1,.16,1.1);white-space:nowrap;width:100%}.react-jinke-music-player-main .music-player-panel .panel-content .progress-bar-content .audio-main{display:inline-flex;justify-content:center;margin-top:6px;width:100%}.react-jinke-music-player-main .music-player-panel .panel-content .progress-bar-content .audio-main .current-time,.react-jinke-music-player-main .music-player-panel .panel-content .progress-bar-content .audio-main .duration{flex-basis:5%;font-size:12px;transition:color .35s cubic-bezier(.43,-.1,.16,1.1)}.react-jinke-music-player-main .music-player-panel .panel-content .progress-bar-content .progress-bar{flex:1 1 auto;margin:2px 20px 0;position:relative;width:100%}.react-jinke-music-player-main .music-player-panel .panel-content .progress-bar-content .progress-bar .progress{background:linear-gradient(135deg,transparent,transparent 31%,rgba(0,0,0,.05) 33%,rgba(0,0,0,.05) 67%,transparent 69%);background-color:#31c27c;display:inline-block;height:5px;left:0;position:absolute;top:0;transition:width .35s cubic-bezier(.43,-.1,.16,1.1)}.react-jinke-music-player-main .music-player-panel .panel-content .progress-bar-content .progress-bar .progress .progress-change{background-color:#fff;border-radius:50%;bottom:-2px;box-shadow:0 0 2px rgba(0,0,0,.4);cursor:pointer;height:10px;position:absolute;right:0;width:10px}.react-jinke-music-player-main .music-player-panel .panel-content .progress-bar-content .progress-bar .progress-load-bar{background-color:rgba(0,0,0,.11);border-radius:6px;height:4px;left:0;position:absolute;top:5px;transition:width,background-color .35s cubic-bezier(.43,-.1,.16,1.1);width:0;z-index:77}.react-jinke-music-player-main .music-player-panel .panel-content .progress-bar-content .progress-bar .rc-slider-track{z-index:78}.react-jinke-music-player-main .music-player-panel .panel-content .progress-bar-content .progress-bar .rc-slider-handle{z-index:79}.react-jinke-music-player-main .music-player-panel .panel-content .player-content{align-content:center;align-items:center;display:inline-flex;flex-basis:15%;padding-left:5%}.react-jinke-music-player-main .music-player-panel .panel-content .player-content>.group{align-items:center;display:inline-flex;flex:1;justify-content:center;margin:0 10px;text-align:center}.react-jinke-music-player-main .music-player-panel .panel-content .player-content>.group,.react-jinke-music-player-main .music-player-panel .panel-content .player-content>.group>svg{cursor:pointer}.react-jinke-music-player-main .music-player-panel .panel-content .player-content>.group .group{display:flex}@media screen and (max-width:767px){.react-jinke-music-player-main .music-player-panel .panel-content .player-content>.group{margin:0 6px}}@media screen and (max-width:320px){.react-jinke-music-player-main .music-player-panel .panel-content .player-content>.group{margin:0 4px}}.react-jinke-music-player-main .music-player-panel .panel-content .player-content>.group>i{color:#31c27c;cursor:pointer;font-size:25px;vertical-align:middle}.react-jinke-music-player-main .music-player-panel .panel-content .player-content .theme-switch .rc-switch{background-color:transparent}@media screen and (max-width:767px){.react-jinke-music-player-main .music-player-panel .panel-content .player-content .play-sounds{display:none!important}}.react-jinke-music-player-main .music-player-panel .panel-content .player-content .next-audio svg,.react-jinke-music-player-main .music-player-panel .panel-content .player-content .prev-audio svg{font-size:35px}.react-jinke-music-player-main .music-player-panel .panel-content .player-content .loading-icon,.react-jinke-music-player-main .music-player-panel .panel-content .player-content .play-btn{padding:0 18px}.react-jinke-music-player-main .music-player-panel .panel-content .player-content .play-btn svg{font-size:26px}.react-jinke-music-player-main .music-player-panel .panel-content .player-content .loop-btn.active{color:#31c27c}.react-jinke-music-player-main .music-player-panel .panel-content .player-content .play-sounds{align-items:center}.react-jinke-music-player-main .music-player-panel .panel-content .player-content .play-sounds svg{font-size:28px}.react-jinke-music-player-main .music-player-panel .panel-content .player-content .play-sounds .sounds-icon{display:flex;flex:1 1 auto;margin-right:15px}.react-jinke-music-player-main .music-player-panel .panel-content .player-content .play-sounds .sound-operation{width:100px}.react-jinke-music-player-main .music-player-panel .panel-content .player-content .destroy-btn svg{font-size:28px}.react-jinke-music-player-main .music-player-panel .panel-content .player-content .audio-lists-btn{background-color:rgba(0,0,0,.3);border-radius:40px;box-shadow:0 0 1px 1px hsla(0,0%,100%,.02);height:28px;min-width:60px;padding:0 10px;position:relative;transition:color,background-color .35s cubic-bezier(.43,-.1,.16,1.1);user-select:none}.react-jinke-music-player-main .music-player-panel .panel-content .player-content .audio-lists-btn .audio-lists-icon{display:flex}.react-jinke-music-player-main .music-player-panel .panel-content .player-content .audio-lists-btn>.group:hover,.react-jinke-music-player-main .music-player-panel .panel-content .player-content .audio-lists-btn>.group:hover>svg{color:#31c27c}.react-jinke-music-player-main .music-player-panel .panel-content .player-content .audio-lists-btn .audio-lists-num{margin-left:8px}.react-jinke-music-player-main .music-player-panel .rc-switch-inner svg{font-size:13px}.react-jinke-music-player-main .rc-slider-rail{background-color:#fff!important;transition:background-color .35s cubic-bezier(.43,-.1,.16,1.1)}.react-jinke-music-player-main.light-theme svg{color:#31c27c}.react-jinke-music-player-main.light-theme svg:active,.react-jinke-music-player-main.light-theme svg:hover{color:#3ece89}.react-jinke-music-player-main.light-theme .rc-slider-rail{background-color:rgba(0,0,0,.09)!important}.react-jinke-music-player-main.light-theme .music-player-controller{background-color:#fff;border-color:#fff}.react-jinke-music-player-main.light-theme .music-player-panel{background-color:#fff;box-shadow:0 1px 2px 0 rgba(0,34,77,.05);color:#7d7d7d}.react-jinke-music-player-main.light-theme .music-player-panel .img-content{box-shadow:0 0 10px #dcdcdc}.react-jinke-music-player-main.light-theme .music-player-panel .progress-load-bar{background-color:rgba(0,0,0,.06)!important}.react-jinke-music-player-main.light-theme .rc-switch{color:#fff}.react-jinke-music-player-main.light-theme .rc-switch:after{background-color:#fff}.react-jinke-music-player-main.light-theme .rc-switch-checked{background-color:#31c27c!important;border:1px solid #31c27c}.react-jinke-music-player-main.light-theme .rc-switch-inner{color:#fff}.react-jinke-music-player-main.light-theme .audio-lists-btn{background-color:#f7f8fa!important}.react-jinke-music-player-main.light-theme .audio-lists-btn:active,.react-jinke-music-player-main.light-theme .audio-lists-btn:hover{background-color:#fdfdfe;color:#444}.react-jinke-music-player-main.light-theme .audio-lists-btn>.group:hover,.react-jinke-music-player-main.light-theme .audio-lists-btn>.group:hover>svg{color:#444}.react-jinke-music-player-main.light-theme .audio-lists-panel{background-color:#fff;box-shadow:0 0 2px #dcdcdc;color:#444}.react-jinke-music-player-main.light-theme .audio-lists-panel .audio-item{background-color:#fff}.react-jinke-music-player-main.light-theme .audio-lists-panel .audio-item:nth-child(odd){background-color:#fafafa!important}.react-jinke-music-player-main.light-theme .audio-lists-panel .audio-item.playing{background-color:#f2f2f2!important}.react-jinke-music-player-main.light-theme .audio-lists-panel .audio-item.playing,.react-jinke-music-player-main.light-theme .audio-lists-panel .audio-item.playing svg{color:#31c27c!important}@media screen and (max-width:767px){.react-jinke-music-player-main.light-theme .audio-lists-panel .audio-item{background-color:#fff!important}.react-jinke-music-player-main.light-theme .audio-lists-panel .audio-item.playing{background-color:#f2f2f2!important}.react-jinke-music-player-main.light-theme .audio-lists-panel .audio-item.playing,.react-jinke-music-player-main.light-theme .audio-lists-panel .audio-item.playing svg{color:#31c27c!important}}.react-jinke-music-player-main.light-theme .audio-lists-panel-header{background-color:#fff;border-bottom:1px solid #f4f4f7;color:#444}.react-jinke-music-player-main.light-theme .audio-lists-panel-header-line{background-color:#f4f4f7}.react-jinke-music-player-main.light-theme .audio-item{background-color:rgba(64,68,75,.65);border-bottom:1px solid hsla(0,0%,86.3%,.26);box-shadow:0 0 2px transparent!important}.react-jinke-music-player-main.light-theme .audio-item:active,.react-jinke-music-player-main.light-theme .audio-item:hover{background-color:#fafafa!important}.react-jinke-music-player-main.light-theme .audio-item:active svg,.react-jinke-music-player-main.light-theme .audio-item:hover svg{color:#31c27c}.react-jinke-music-player-main.light-theme .audio-item.playing{background-color:#fafafa!important}.react-jinke-music-player-main.light-theme .audio-item.playing svg{color:#31c27c}.react-jinke-music-player-main.light-theme .audio-item.playing .player-singer{color:#31c27c!important}.react-jinke-music-player-main.light-theme .audio-item .player-singer{color:hsla(0,0%,63.5%,.45)!important}.react-jinke-music-player-main.light-theme .react-jinke-music-player-mobile{background-color:#fff;color:#444}.react-jinke-music-player-main.light-theme .react-jinke-music-player-mobile-cover{border:5px solid transparent;box-shadow:0 0 30px 2px rgba(0,0,0,.2)}.react-jinke-music-player-main.light-theme .react-jinke-music-player-mobile .current-time,.react-jinke-music-player-main.light-theme .react-jinke-music-player-mobile .duration{color:#444}.react-jinke-music-player-main.light-theme .react-jinke-music-player-mobile .rc-slider-rail{background-color:#e9e9e9}.react-jinke-music-player-main.light-theme .react-jinke-music-player-mobile-operation svg{color:#444}.react-jinke-music-player-main.light-theme .react-jinke-music-player-mobile-tip svg{color:#fff!important}.react-jinke-music-player-main.light-theme .react-jinke-music-player-mobile-singer-name{color:#444;transition:color .35s cubic-bezier(.43,-.1,.16,1.1)}.react-jinke-music-player-main.light-theme .react-jinke-music-player-mobile-singer-name:after,.react-jinke-music-player-main.light-theme .react-jinke-music-player-mobile-singer-name:before{background-color:#444}.react-jinke-music-player-main.light-theme .play-mode-title{background-color:#fff;color:#31c27c}.react-jinke-music-player{height:80px;position:fixed;width:80px;z-index:999}@media screen and (max-width:767px){.react-jinke-music-player{height:60px;width:60px}}.react-jinke-music-player:focus{outline:none}.react-jinke-music-player .music-player{cursor:pointer;height:80px;position:relative;width:80px}@media screen and (max-width:767px){.react-jinke-music-player .music-player{height:60px;width:60px}}.react-jinke-music-player .music-player:focus{outline:none}.react-jinke-music-player .music-player-audio{display:none!important}.react-jinke-music-player .music-player .destroy-btn{position:absolute;right:0;top:0;z-index:100}@media screen and (max-width:767px){.react-jinke-music-player .music-player .destroy-btn{right:-3px}}.react-jinke-music-player .music-player-controller{align-items:center;background-color:#e6e6e6;background-repeat:no-repeat;background-size:100%;border:1px solid #e6e6e6;border-radius:50%;box-shadow:0 0 10px rgba(0,0,0,.15);color:#31c27c;cursor:pointer;display:flex;font-size:20px;height:80px;justify-content:center;padding:10px;position:fixed;text-align:center;transition:all .3s cubic-bezier(.43,-.1,.16,1.1);width:80px;z-index:99}.react-jinke-music-player .music-player-controller:focus{outline:none}.react-jinke-music-player .music-player-controller.music-player-playing:before{animation:scale 5s linear infinite;border:1px solid hsla(0,0%,100%,.2);border-radius:50%;content:"";cursor:pointer;height:80px;position:fixed;width:80px;z-index:-1}@media screen and (max-width:767px){.react-jinke-music-player .music-player-controller{height:60px;width:60px}.react-jinke-music-player .music-player-controller.music-player-playing:before{height:60px;width:60px}}.react-jinke-music-player .music-player-controller i{font-size:28px}.react-jinke-music-player .music-player-controller:active{box-shadow:0 0 30px rgba(0,0,0,.2)}.react-jinke-music-player .music-player-controller:hover{font-size:16px}.react-jinke-music-player .music-player-controller:hover .music-player-controller-setting{transform:scale(1)}.react-jinke-music-player .music-player-controller .controller-title{font-size:14px}@media screen and (max-width:767px){.react-jinke-music-player .music-player-controller i{font-size:20px}.react-jinke-music-player .music-player-controller:active,.react-jinke-music-player .music-player-controller:hover{font-size:12px}.react-jinke-music-player .music-player-controller:active .music-player-controller-setting,.react-jinke-music-player .music-player-controller:hover .music-player-controller-setting{transform:scale(1)}}.react-jinke-music-player .music-player-controller .music-player-controller-setting{align-items:center;background:rgba(49,194,124,.3);border-radius:50%;color:#fff;display:flex;height:100%;justify-content:center;left:0;position:absolute;top:0;transform:scale(0);transition:all .4s cubic-bezier(.43,-.1,.16,1.1);width:100%}.react-jinke-music-player .audio-circle-process-bar{stroke-width:3px;stroke-linejoin:round;animation:scaleTo .35s cubic-bezier(.43,-.1,.16,1.1);height:80px;left:0;pointer-events:none;position:absolute;top:-80px;width:80px;z-index:100}.react-jinke-music-player .audio-circle-process-bar circle[class=bg]{stroke:#fff}.react-jinke-music-player .audio-circle-process-bar circle[class=stroke]{stroke:#31c27c}.react-jinke-music-player .audio-circle-process-bar,.react-jinke-music-player .audio-circle-process-bar circle{transform:matrix(0,-1,1,0,0,80);transition:stroke-dasharray .35s cubic-bezier(.43,-.1,.16,1.1)}@media screen and (max-width:767px){.react-jinke-music-player .audio-circle-process-bar,.react-jinke-music-player .audio-circle-process-bar circle{transform:matrix(0,-1,1,0,0,60)}}';const type$4=4,exts$4=[],Audio=({file:e})=>{const{lastFiles:t,getSetting:r,password:n}=react.exports.useContext(IContext),o=useColorModeValue("light","dark"),{t:i,i18n:a}=useTranslation(),[s,l]=React$1.useState([]),c=useDownLink(),u=useEncrypt(),d=r("music cover")||"https://store.heytapimage.com/cdo-portal/feedback/202110/30/d43c41c5d257c9bc36366e310374fb19.png",p=i("unknown");return react.exports.useEffect((()=>{const r={name:e.name,musicSrc:u(c),cover:d,singer:p},n=c.slice(0,c.lastIndexOf("/")),o=t.filter((t=>t.name!==e.name&&t.type===type$4)).map((e=>{let t=u(`${n}/${e.name}`);return{name:e.name,musicSrc:t,cover:d,singer:p}}));l([r,...o])}),[]),React$1.createElement(Box,{className:"audio-box",w:"full"},React$1.createElement(Center,{p:"8",w:"full"},React$1.createElement(Heading,{display:"inline-flex",alignItems:"center"},React$1.createElement(Icon,{color:r("icon color")||"teal.300",as:getIcon(e.type,"")}),i("Enjoy the music"),"...")),React$1.createElement(ReactJkMusicPlayer,{audioLists:s,theme:o,locale:"zh"===a.language?"zh_CN":"en_US",mode:"full",autoPlay:"true"===r("autoplay audio"),defaultPosition:{left:20,bottom:20}}))};var __glob_8_0=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",type:type$4,exts:exts$4,default:Audio});const type$3=6,exts$3=[],ImagePreview=({file:e})=>{const t=useDownLink(),r=useEncrypt(),[n,o]=react.exports.useState(""),{getSetting:i,password:a}=react.exports.useContext(IContext);return react.exports.useEffect((()=>{o(r(t))}),[]),React$1.createElement(Center,{className:"image-box",w:"full"},n&&React$1.createElement(Image$1,{maxH:"75vh",fallback:React$1.createElement(Spinner,{color:i("icon color")||"teal.300",size:"xl"}),rounded:"lg",src:n}))};var __glob_8_1=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",type:type$3,exts:exts$3,default:ImagePreview});const useUnfold=(e=!0)=>{const{setShowUnfold:t,unfold:r}=react.exports.useContext(IContext);return react.exports.useEffect((()=>(e&&t(!0),()=>{t(!1)})),[]),{unfold:r,setShowUnfold:t}},type$2=2,exts$2=[],Pdf$1=react.exports.lazy((()=>__vitePreload((()=>Promise.resolve().then((function(){return __glob_8_4}))),void 0))),Office=({file:e})=>{const{pathname:t}=useLocation();react.exports.useContext(IContext);let r=useDownLink();const n=useEncrypt();r=n(r);const{unfold:o,setShowUnfold:i}=useUnfold(!1),[a,s]=React$1.useState(""),[l,c]=React$1.useState("");return react.exports.useEffect((()=>{"AliDrive"===e.driver?instance.post("preview",{path:t}).then((e=>{const t=e.data;200===t.code&&aliyun.config({mount:document.querySelector("#office-preview"),url:t.data.preview_url}).setToken({token:t.data.access_token})})):(e.name.endsWith(".pdf")?(c(r),s("pdf")):s("office"),i(!0))}),[]),React$1.createElement(Box,{w:"full",h:o?"full":"75vh",pos:o?"fixed":"unset",left:o?"0":"unset",top:o?"0":"unset",id:"office-preview",transition:"all 0.3s",backdropFilter:"blur(10px)",className:"office-preview-box"},"office"===a&&React$1.createElement("iframe",{width:"100%",height:"100%",src:`https://view.officeapps.live.com/op/view.aspx?src=${encodeURIComponent(r)}`,frameBorder:"0"}),"pdf"===a&&React$1.createElement(Pdf$1,{url:l,unfold:o||!1}))};var __glob_8_3=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",type:type$2,exts:exts$2,default:Office}),pdf={exports:{}},__viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:__viteBrowserExternal}),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);function _objectWithoutProperties(e,t){if(null==e)return{};var r,n,o=_objectWithoutPropertiesLoose$3(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf$2(e,t)}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(function(module,exports){var factory;factory=function(){return(()=>{var __webpack_modules__=[,(e,t,r)=>{function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.addLinkAttributes=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.url,n=t.target,o=t.rel,i=t.enabled,s=void 0===i||i;(0,a.assert)(r&&"string"==typeof r,'addLinkAttributes: A valid "url" parameter must provided.');var l=(0,a.removeNullCharacters)(r);s?e.href=e.title=l:(e.href="",e.title="Disabled: ".concat(l),e.onclick=function(){return!1});var c="";switch(n){case T.NONE:break;case T.SELF:c="_self";break;case T.BLANK:c="_blank";break;case T.PARENT:c="_parent";break;case T.TOP:c="_top"}e.target=c,e.rel="string"==typeof o?o:b},t.deprecated=function(e){console.log("Deprecated API usage: "+e)},t.getFilenameFromUrl=function(e){var t=e.indexOf("#"),r=e.indexOf("?"),n=Math.min(t>0?t:e.length,r>0?r:e.length);return e.substring(e.lastIndexOf("/",n)+1,n)},t.getPdfFilenameFromUrl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!=typeof e)return t;if(C(e))return(0,a.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;var r=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,o=r.exec(e),i=n.exec(o[1])||n.exec(o[2])||n.exec(o[3]);if(i&&(i=i[0]).includes("%"))try{i=n.exec(decodeURIComponent(i))[0]}catch(s){}return i||t},t.isDataScheme=C,t.isFetchSupported=I,t.isPdfFile=function(e){return"string"==typeof e&&/\.pdf$/i.test(e)},t.isValidFetchUrl=L,t.loadScript=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(r,n){var o=document.createElement("script");o.src=e,o.onload=function(e){t&&o.remove(),r(e)},o.onerror=function(){n(new Error("Cannot load script at: ".concat(o.src)))},(document.head||document.documentElement).appendChild(o)}))},t.StatTimer=t.RenderingCancelledException=t.PDFDateString=t.PageViewport=t.LinkTarget=t.DOMSVGFactory=t.DOMCMapReaderFactory=t.DOMCanvasFactory=t.DEFAULT_LINK_REL=t.BaseCMapReaderFactory=t.BaseCanvasFactory=void 0;var o,i=(o=r(2))&&o.__esModule?o:{default:o},a=r(4);function s(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,o)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){c(i,n,o,a,s,"next",e)}function s(e){c(i,n,o,a,s,"throw",e)}a(void 0)}))}}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m(e);if(t){var o=m(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t,r){return t&&y(e.prototype,t),r&&y(e,r),e}var b="noopener noreferrer nofollow";t.DEFAULT_LINK_REL=b;var _="http://www.w3.org/2000/svg",S=function(){function e(){g(this,e),this.constructor===e&&(0,a.unreachable)("Cannot initialize BaseCanvasFactory.")}return v(e,[{key:"create",value:function(e,t){(0,a.unreachable)("Abstract method `create` called.")}},{key:"reset",value:function(e,t,r){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=r}},{key:"destroy",value:function(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}}]),e}();t.BaseCanvasFactory=S;var w=function(e){d(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=n.ownerDocument,i=void 0===o?globalThis.document:o;return g(this,r),(e=t.call(this))._document=i,e}return v(r,[{key:"create",value:function(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");var r=this._document.createElement("canvas"),n=r.getContext("2d");return r.width=e,r.height=t,{canvas:r,context:n}}}]),r}(S);t.DOMCanvasFactory=w;var x=function(){function e(t){var r=t.baseUrl,n=void 0===r?null:r,o=t.isCompressed,i=void 0!==o&&o;g(this,e),this.constructor===e&&(0,a.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=n,this.isCompressed=i}var t;return v(e,[{key:"fetch",value:(t=u(i.default.mark((function e(t){var r,n,o,s=this;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.name,this.baseUrl){e.next=3;break}throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');case 3:if(r){e.next=5;break}throw new Error("CMap name must be specified.");case 5:return n=this.baseUrl+r+(this.isCompressed?".bcmap":""),o=this.isCompressed?a.CMapCompressionType.BINARY:a.CMapCompressionType.NONE,e.abrupt("return",this._fetchData(n,o).catch((function(e){throw new Error("Unable to load ".concat(s.isCompressed?"binary ":"","CMap at: ").concat(n))})));case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"_fetchData",value:function(e,t){(0,a.unreachable)("Abstract method `_fetchData` called.")}}]),e}();t.BaseCMapReaderFactory=x;var E=function(e){d(r,e);var t=f(r);function r(){return g(this,r),t.apply(this,arguments)}return v(r,[{key:"_fetchData",value:function(e,t){var r=this;return I()&&L(e,document.baseURI)?fetch(e).then(function(){var e=u(i.default.mark((function e(n){var o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.ok){e.next=2;break}throw new Error(n.statusText);case 2:if(!r.isCompressed){e.next=10;break}return e.t0=Uint8Array,e.next=6,n.arrayBuffer();case 6:e.t1=e.sent,o=new e.t0(e.t1),e.next=15;break;case 10:return e.t2=a.stringToBytes,e.next=13,n.text();case 13:e.t3=e.sent,o=(0,e.t2)(e.t3);case 15:return e.abrupt("return",{cMapData:o,compressionType:t});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):new Promise((function(n,o){var i=new XMLHttpRequest;i.open("GET",e,!0),r.isCompressed&&(i.responseType="arraybuffer"),i.onreadystatechange=function(){if(i.readyState===XMLHttpRequest.DONE){var e;if((200===i.status||0===i.status)&&(r.isCompressed&&i.response?e=new Uint8Array(i.response):!r.isCompressed&&i.responseText&&(e=(0,a.stringToBytes)(i.responseText)),e))return void n({cMapData:e,compressionType:t});o(new Error(i.statusText))}},i.send(null)}))}}]),r}(x);t.DOMCMapReaderFactory=E;var A=function(){function e(){g(this,e)}return v(e,[{key:"create",value:function(e,t){(0,a.assert)(e>0&&t>0,"Invalid SVG dimensions");var r=document.createElementNS(_,"svg:svg");return r.setAttribute("version","1.1"),r.setAttribute("width",e+"px"),r.setAttribute("height",t+"px"),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox","0 0 "+e+" "+t),r}},{key:"createElement",value:function(e){return(0,a.assert)("string"==typeof e,"Invalid SVG element type"),document.createElementNS(_,e)}}]),e}();t.DOMSVGFactory=A;var k=function(){function e(t){var r=t.viewBox,n=t.scale,o=t.rotation,i=t.offsetX,a=void 0===i?0:i,s=t.offsetY,l=void 0===s?0:s,c=t.dontFlip,u=void 0!==c&&c;g(this,e),this.viewBox=r,this.scale=n,this.rotation=o,this.offsetX=a,this.offsetY=l;var d,p,f,h,m,y,v,b,_=(r[2]+r[0])/2,S=(r[3]+r[1])/2;switch((o%=360)<0&&(o+=360),o){case 180:d=-1,p=0,f=0,h=1;break;case 90:d=0,p=1,f=1,h=0;break;case 270:d=0,p=-1,f=-1,h=0;break;case 0:d=1,p=0,f=0,h=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(f=-f,h=-h),0===d?(m=Math.abs(S-r[1])*n+a,y=Math.abs(_-r[0])*n+l,v=Math.abs(r[3]-r[1])*n,b=Math.abs(r[2]-r[0])*n):(m=Math.abs(_-r[0])*n+a,y=Math.abs(S-r[1])*n+l,v=Math.abs(r[2]-r[0])*n,b=Math.abs(r[3]-r[1])*n),this.transform=[d*n,p*n,f*n,h*n,m-d*n*_-f*n*S,y-p*n*_-h*n*S],this.width=v,this.height=b}return v(e,[{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.scale,n=void 0===r?this.scale:r,o=t.rotation,i=void 0===o?this.rotation:o,a=t.offsetX,s=void 0===a?this.offsetX:a,l=t.offsetY,c=void 0===l?this.offsetY:l,u=t.dontFlip,d=void 0!==u&&u;return new e({viewBox:this.viewBox.slice(),scale:n,rotation:i,offsetX:s,offsetY:c,dontFlip:d})}},{key:"convertToViewportPoint",value:function(e,t){return a.Util.applyTransform([e,t],this.transform)}},{key:"convertToViewportRectangle",value:function(e){var t=a.Util.applyTransform([e[0],e[1]],this.transform),r=a.Util.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],r[0],r[1]]}},{key:"convertToPdfPoint",value:function(e,t){return a.Util.applyInverseTransform([e,t],this.transform)}}]),e}();t.PageViewport=k;var P=function(e){d(r,e);var t=f(r);function r(e,n){var o;return g(this,r),(o=t.call(this,e)).type=n,o}return r}(a.BaseException);t.RenderingCancelledException=P;var T={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};function C(e){for(var t=e.length,r=0;r<t&&""===e[r].trim();)r++;return"data:"===e.substring(r,r+5).toLowerCase()}t.LinkTarget=T;var R,O=function(){function e(){g(this,e),this.started=Object.create(null),this.times=[]}return v(e,[{key:"time",value:function(e){e in this.started&&(0,a.warn)("Timer is already running for ".concat(e)),this.started[e]=Date.now()}},{key:"timeEnd",value:function(e){e in this.started||(0,a.warn)("Timer has not been started for ".concat(e)),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}},{key:"toString",value:function(){var e,t=[],r=0,n=s(this.times);try{for(n.s();!(e=n.n()).done;){var o=e.value.name;o.length>r&&(r=o.length)}}catch(u){n.e(u)}finally{n.f()}var i,a=s(this.times);try{for(a.s();!(i=a.n()).done;){var l=i.value,c=l.end-l.start;t.push("".concat(l.name.padEnd(r)," ").concat(c,"ms\n"))}}catch(u){a.e(u)}finally{a.f()}return t.join("")}}]),e}();function I(){return"undefined"!=typeof fetch&&"undefined"!=typeof Response&&"body"in Response.prototype&&"undefined"!=typeof ReadableStream}function L(e,t){try{var r=(t?new URL(e,t):new URL(e)).protocol;return"http:"===r||"https:"===r}catch(n){return!1}}t.StatTimer=O;var D=function(){function e(){g(this,e)}return v(e,null,[{key:"toDateObject",value:function(e){if(!e||!(0,a.isString)(e))return null;R||(R=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));var t=R.exec(e);if(!t)return null;var r=parseInt(t[1],10),n=parseInt(t[2],10);n=n>=1&&n<=12?n-1:0;var o=parseInt(t[3],10);o=o>=1&&o<=31?o:1;var i=parseInt(t[4],10);i=i>=0&&i<=23?i:0;var s=parseInt(t[5],10);s=s>=0&&s<=59?s:0;var l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;var c=t[7]||"Z",u=parseInt(t[8],10);u=u>=0&&u<=23?u:0;var d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,"-"===c?(i+=u,s+=d):"+"===c&&(i-=u,s-=d),new Date(Date.UTC(r,n,o,i,s,l))}}]),e}();t.PDFDateString=D},(e,t,r)=>{e.exports=r(3)},(e,t,r)=>{function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=function(e){var t,r=Object.prototype,o=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(I){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),a=new C(n||[]);return i._invoke=function(e,t,r){var n=p;return function(o,i){if(n===h)throw new Error("Generator is already running");if(n===m){if("throw"===o)throw i;return O()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=k(a,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===p)throw n=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var l=d(e,t,r);if("normal"===l.type){if(n=r.done?m:f,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n=m,r.method="throw",r.arg=l.arg)}}}(e,r,a),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(I){return{type:"throw",arg:I}}}e.wrap=u;var p="suspendedStart",f="suspendedYield",h="executing",m="completed",g={};function y(){}function v(){}function b(){}var _={};_[a]=function(){return this};var S=Object.getPrototypeOf,w=S&&S(S(R([])));w&&w!==r&&o.call(w,a)&&(_=w);var x=b.prototype=y.prototype=Object.create(_);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function r(i,a,s,l){var c=d(e[i],e,a);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"===n(p)&&o.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,s,l)}),(function(e){r("throw",e,s,l)})):t.resolve(p).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,l)}))}l(c.arg)}var i;this._invoke=function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}}function k(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method))return g;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var o=d(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function R(e){if(e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function r(){for(;++n<e.length;)if(o.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}return{next:O}}function O(){return{value:t,done:!0}}return v.prototype=x.constructor=b,b.constructor=v,v.displayName=c(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,l,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},E(A.prototype),A.prototype[s]=function(){return this},e.AsyncIterator=A,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new A(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(x),c(x,l,"Generator"),x[a]=function(){return this},x.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=R,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var l=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}("object"===n(e=r.nmd(e))?e.exports:{});try{regeneratorRuntime=o}catch(i){Function("r","regeneratorRuntime = r")(o)}},(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var o=p(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return d(this,r)}}function d(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.arrayByteLength=C,t.arraysToBytes=function(e){var t=e.length;if(1===t&&e[0]instanceof Uint8Array)return e[0];for(var r=0,n=0;n<t;n++)r+=C(e[n]);for(var o=0,i=new Uint8Array(r),a=0;a<t;a++){var s=e[a];s instanceof Uint8Array||(s="string"==typeof s?T(s):new Uint8Array(s));var l=s.byteLength;i.set(s,o),o+=l}return i},t.assert=y,t.bytesToString=function(e){y(null!==e&&"object"===a(e)&&void 0!==e.length,"Invalid argument for bytesToString");var t=e.length,r=8192;if(t<r)return String.fromCharCode.apply(null,e);for(var n=[],o=0;o<t;o+=r){var i=Math.min(o+r,t),s=e.subarray(o,i);n.push(String.fromCharCode.apply(null,s))}return n.join("")},t.createObjectURL=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(URL.createObjectURL&&!r)return URL.createObjectURL(new Blob([e],{type:t}));for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o="data:".concat(t,";base64,"),i=0,a=e.length;i<a;i+=3){var s=255&e[i],l=255&e[i+1],c=255&e[i+2],u=s>>2,d=(3&s)<<4|l>>4,p=i+1<a?(15&l)<<2|c>>6:64,f=i+2<a?63&c:64;o+=n[u]+n[d]+n[p]+n[f]}return o},t.createPromiseCapability=function(){var e=Object.create(null),t=!1;return Object.defineProperty(e,"settled",{get:function(){return t}}),e.promise=new Promise((function(r,n){e.resolve=function(e){t=!0,r(e)},e.reject=function(e){t=!0,n(e)}})),e},t.createValidAbsoluteUrl=function(e,t){if(!e)return null;try{var r=t?new URL(e,t):new URL(e);if(function(e){if(!e)return!1;switch(e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(r))return r}catch(n){}return null},t.escapeString=function(e){return e.replace(/([()\\\n\r])/g,(function(e){return"\n"===e?"\\n":"\r"===e?"\\r":"\\".concat(e)}))},t.getModificationDate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=[e.getUTCFullYear().toString(),(e.getUTCMonth()+1).toString().padStart(2,"0"),e.getUTCDate().toString().padStart(2,"0"),e.getUTCHours().toString().padStart(2,"0"),e.getUTCMinutes().toString().padStart(2,"0"),e.getUTCSeconds().toString().padStart(2,"0")];return t.join("")},t.getVerbosityLevel=function(){return h},t.info=function(e){h>=f.INFOS&&console.log("Info: ".concat(e))},t.isArrayBuffer=function(e){return"object"===a(e)&&null!==e&&void 0!==e.byteLength},t.isArrayEqual=function(e,t){if(e.length!==t.length)return!1;for(var r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0},t.isAscii=function(e){return/^[\x00-\x7F]*$/.test(e)},t.isBool=function(e){return"boolean"==typeof e},t.isNum=function(e){return"number"==typeof e},t.isSameOrigin=function(e,t){var r;try{if(!(r=new URL(e)).origin||"null"===r.origin)return!1}catch(o){return!1}var n=new URL(t,r);return r.origin===n.origin},t.isString=function(e){return"string"==typeof e},t.objectFromMap=function(e){var t,r,n,i=Object.create(null),a=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=o(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw a}}}}(e);try{for(a.s();!(t=a.n()).done;){var s=(r=t.value,n=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){s=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}(r,n)||o(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=s[0],c=s[1];i[l]=c}}catch(u){a.e(u)}finally{a.f()}return i},t.objectSize=function(e){return Object.keys(e).length},t.removeNullCharacters=function(e){return"string"!=typeof e?(m("The argument for removeNullCharacters must be a string."),e):e.replace(P,"")},t.setVerbosityLevel=function(e){Number.isInteger(e)&&(h=e)},t.shadow=v,t.string32=function(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)},t.stringToBytes=T,t.stringToPDFString=function(e){var t=e.length,r=[];if("þ"===e[0]&&"ÿ"===e[1])for(var n=2;n<t;n+=2)r.push(String.fromCharCode(e.charCodeAt(n)<<8|e.charCodeAt(n+1)));else if("ÿ"===e[0]&&"þ"===e[1])for(var o=2;o<t;o+=2)r.push(String.fromCharCode(e.charCodeAt(o+1)<<8|e.charCodeAt(o)));else for(var i=0;i<t;++i){var a=j[e.charCodeAt(i)];r.push(a?String.fromCharCode(a):e.charAt(i))}return r.join("")},t.stringToUTF16BEString=function(e){for(var t=["þÿ"],r=0,n=e.length;r<n;r++){var o=e.charCodeAt(r);t.push(String.fromCharCode(o>>8&255),String.fromCharCode(255&o))}return t.join("")},t.stringToUTF8String=function(e){return decodeURIComponent(escape(e))},t.unreachable=g,t.utf8StringToString=function(e){return unescape(encodeURIComponent(e))},t.warn=m,t.VerbosityLevel=t.Util=t.UNSUPPORTED_FEATURES=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.StreamType=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.IsLittleEndianCached=t.IsEvalSupportedCached=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FontType=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.AnnotationType=t.AnnotationStateModelType=t.AnnotationReviewState=t.AnnotationReplyType=t.AnnotationMarkedState=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,r(5),t.IDENTITY_MATRIX=[1,0,0,1,0,0],t.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],t.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},t.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},t.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},t.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},t.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},t.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},t.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},t.AnnotationReplyType={GROUP:"Group",REPLY:"R"},t.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},t.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},t.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},t.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},t.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},t.PageActionEventType={O:"PageOpen",C:"PageClose"},t.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"},t.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};var f={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=f,t.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},t.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},t.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent"},t.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};var h=f.WARNINGS;function m(e){h>=f.WARNINGS&&console.log("Warning: ".concat(e))}function g(e){throw new Error(e)}function y(e,t){e||g(t)}function v(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!1}),r}var b=function(){function e(t){this.constructor===e&&g("Cannot initialize BaseException."),this.message=t,this.name=this.constructor.name}return e.prototype=new Error,e.constructor=e,e}();t.BaseException=b;var _=function(e){l(r,e);var t=u(r);function r(e,n){var o;return s(this,r),(o=t.call(this,e)).code=n,o}return r}(b);t.PasswordException=_;var S=function(e){l(r,e);var t=u(r);function r(e,n){var o;return s(this,r),(o=t.call(this,e)).details=n,o}return r}(b);t.UnknownErrorException=S;var w=function(e){l(r,e);var t=u(r);function r(){return s(this,r),t.apply(this,arguments)}return r}(b);t.InvalidPDFException=w;var x=function(e){l(r,e);var t=u(r);function r(){return s(this,r),t.apply(this,arguments)}return r}(b);t.MissingPDFException=x;var E=function(e){l(r,e);var t=u(r);function r(e,n){var o;return s(this,r),(o=t.call(this,e)).status=n,o}return r}(b);t.UnexpectedResponseException=E;var A=function(e){l(r,e);var t=u(r);function r(){return s(this,r),t.apply(this,arguments)}return r}(b);t.FormatError=A;var k=function(e){l(r,e);var t=u(r);function r(){return s(this,r),t.apply(this,arguments)}return r}(b);t.AbortException=k;var P=/\x00/g;function T(e){y("string"==typeof e,"Invalid argument for stringToBytes");for(var t=e.length,r=new Uint8Array(t),n=0;n<t;++n)r[n]=255&e.charCodeAt(n);return r}function C(e){return void 0!==e.length?e.length:(y(void 0!==e.byteLength,"arrayByteLength - invalid argument."),e.byteLength)}var R={get value(){return v(this,"value",((e=new Uint8Array(4))[0]=1,1===new Uint32Array(e.buffer,0,1)[0]));var e}};t.IsLittleEndianCached=R;var O={get value(){return v(this,"value",function(){try{return new Function(""),!0}catch(e){return!1}}())}};t.IsEvalSupportedCached=O;var I,L=(I=Array(256).keys(),function(e){if(Array.isArray(e))return i(e)}(I)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(I)||o(I)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(e){return e.toString(16).padStart(2,"0")})),D=function(){function e(){s(this,e)}var t,r,o;return t=e,o=[{key:"makeHexColor",value:function(e,t,r){return"#".concat(L[e]).concat(L[t]).concat(L[r])}},{key:"transform",value:function(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}},{key:"applyTransform",value:function(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]}},{key:"applyInverseTransform",value:function(e,t){var r=t[0]*t[3]-t[1]*t[2];return[(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/r,(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/r]}},{key:"getAxialAlignedBoundingBox",value:function(t,r){var n=e.applyTransform(t,r),o=e.applyTransform(t.slice(2,4),r),i=e.applyTransform([t[0],t[3]],r),a=e.applyTransform([t[2],t[1]],r);return[Math.min(n[0],o[0],i[0],a[0]),Math.min(n[1],o[1],i[1],a[1]),Math.max(n[0],o[0],i[0],a[0]),Math.max(n[1],o[1],i[1],a[1])]}},{key:"inverseTransform",value:function(e){var t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}},{key:"apply3dTransform",value:function(e,t){return[e[0]*t[0]+e[1]*t[1]+e[2]*t[2],e[3]*t[0]+e[4]*t[1]+e[5]*t[2],e[6]*t[0]+e[7]*t[1]+e[8]*t[2]]}},{key:"singularValueDecompose2dScale",value:function(e){var t=[e[0],e[2],e[1],e[3]],r=e[0]*t[0]+e[1]*t[2],n=e[0]*t[1]+e[1]*t[3],o=e[2]*t[0]+e[3]*t[2],i=e[2]*t[1]+e[3]*t[3],a=(r+i)/2,s=Math.sqrt(Math.pow(r+i,2)-4*(r*i-o*n))/2,l=a+s||1,c=a-s||1;return[Math.sqrt(l),Math.sqrt(c)]}},{key:"normalizeRect",value:function(e){var t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}},{key:"intersect",value:function(t,r){function n(e,t){return e-t}var o=[t[0],t[2],r[0],r[2]].sort(n),i=[t[1],t[3],r[1],r[3]].sort(n),a=[];return t=e.normalizeRect(t),r=e.normalizeRect(r),o[0]===t[0]&&o[1]===r[0]||o[0]===r[0]&&o[1]===t[0]?(a[0]=o[1],a[2]=o[2],i[0]===t[1]&&i[1]===r[1]||i[0]===r[1]&&i[1]===t[1]?(a[1]=i[1],a[3]=i[2],a):null):null}}],(r=null)&&n(t.prototype,r),o&&n(t,o),e}();t.Util=D;var j=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364]},(e,t,r)=>{var n=r(6);"undefined"!=typeof globalThis&&globalThis._pdfjsCompatibilityChecked||("undefined"!=typeof globalThis&&globalThis.Math===Math||(globalThis=r(7)),globalThis._pdfjsCompatibilityChecked=!0,!globalThis.btoa&&n.isNodeJS&&(globalThis.btoa=function(e){return Buffer.from(e,"binary").toString("base64")}),!globalThis.atob&&n.isNodeJS&&(globalThis.atob=function(e){return Buffer.from(e,"base64").toString("binary")}),Object.fromEntries||r(53),globalThis.Promise.allSettled||(globalThis.Promise=r(84)),function(){var e=!1;if("undefined"!=typeof ReadableStream)try{new ReadableStream({start:function(e){e.close()}}),e=!0}catch(t){}e||(globalThis.ReadableStream=r(112).ReadableStream)}())},(e,t)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isNodeJS=void 0;var n=!("object"!==("undefined"==typeof process?"undefined":r(process))||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);t.isNodeJS=n},(e,t,r)=>{r(8),e.exports=r(10)},(e,t,r)=>{r(9)({global:!0},{globalThis:r(10)})},(e,t,r)=>{var n=r(10),o=r(11).f,i=r(26),a=r(29),s=r(30),l=r(40),c=r(52);e.exports=function(e,t){var r,u,d,p,f,h=e.target,m=e.global,g=e.stat;if(r=m?n:g?n[h]||s(h,{}):(n[h]||{}).prototype)for(u in t){if(p=t[u],d=e.noTargetGet?(f=o(r,u))&&f.value:r[u],!c(m?u:h+(g?".":"#")+u,e.forced)&&void 0!==d){if(typeof p==typeof d)continue;l(p,d)}(e.sham||d&&d.sham)&&i(p,"sham",!0),a(r,u,p,e)}}},e=>{var t=function(e){return e&&e.Math==Math&&e};e.exports=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof commonjsGlobal&&commonjsGlobal)||function(){return this}()||Function("return this")()},(e,t,r)=>{var n=r(12),o=r(14),i=r(15),a=r(16),s=r(20),l=r(22),c=r(24),u=Object.getOwnPropertyDescriptor;t.f=n?u:function(e,t){if(e=a(e),t=s(t,!0),c)try{return u(e,t)}catch(r){}if(l(e,t))return i(!o.f.call(e,t),e[t])}},(e,t,r)=>{var n=r(13);e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},e=>{e.exports=function(e){try{return!!e()}catch(t){return!0}}},(e,t)=>{var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,o=n&&!r.call({1:2},1);t.f=o?function(e){var t=n(this,e);return!!t&&t.enumerable}:r},e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},(e,t,r)=>{var n=r(17),o=r(19);e.exports=function(e){return n(o(e))}},(e,t,r)=>{var n=r(13),o=r(18),i="".split;e.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?i.call(e,""):Object(e)}:Object},e=>{var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},e=>{e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},(e,t,r)=>{var n=r(21);e.exports=function(e,t){if(!n(e))return e;var r,o;if(t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;if("function"==typeof(r=e.valueOf)&&!n(o=r.call(e)))return o;if(!t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},e=>{e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},(e,t,r)=>{var n=r(23),o={}.hasOwnProperty;e.exports=Object.hasOwn||function(e,t){return o.call(n(e),t)}},(e,t,r)=>{var n=r(19);e.exports=function(e){return Object(n(e))}},(e,t,r)=>{var n=r(12),o=r(13),i=r(25);e.exports=!n&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},(e,t,r)=>{var n=r(10),o=r(21),i=n.document,a=o(i)&&o(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},(e,t,r)=>{var n=r(12),o=r(27),i=r(15);e.exports=n?function(e,t,r){return o.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},(e,t,r)=>{var n=r(12),o=r(24),i=r(28),a=r(20),s=Object.defineProperty;t.f=n?s:function(e,t,r){if(i(e),t=a(t,!0),i(r),o)try{return s(e,t,r)}catch(n){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},(e,t,r)=>{var n=r(21);e.exports=function(e){if(!n(e))throw TypeError(String(e)+" is not an object");return e}},(e,t,r)=>{var n=r(10),o=r(26),i=r(22),a=r(30),s=r(31),l=r(33),c=l.get,u=l.enforce,d=String(String).split("String");(e.exports=function(e,t,r,s){var l,c=!!s&&!!s.unsafe,p=!!s&&!!s.enumerable,f=!!s&&!!s.noTargetGet;"function"==typeof r&&("string"!=typeof t||i(r,"name")||o(r,"name",t),(l=u(r)).source||(l.source=d.join("string"==typeof t?t:""))),e!==n?(c?!f&&e[t]&&(p=!0):delete e[t],p?e[t]=r:o(e,t,r)):p?e[t]=r:a(t,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||s(this)}))},(e,t,r)=>{var n=r(10),o=r(26);e.exports=function(e,t){try{o(n,e,t)}catch(r){n[e]=t}return t}},(e,t,r)=>{var n=r(32),o=Function.toString;"function"!=typeof n.inspectSource&&(n.inspectSource=function(e){return o.call(e)}),e.exports=n.inspectSource},(e,t,r)=>{var n=r(10),o=r(30),i="__core-js_shared__",a=n[i]||o(i,{});e.exports=a},(e,t,r)=>{var n,o,i,a=r(34),s=r(10),l=r(21),c=r(26),u=r(22),d=r(32),p=r(35),f=r(39),h="Object already initialized",m=s.WeakMap;if(a||d.state){var g=d.state||(d.state=new m),y=g.get,v=g.has,b=g.set;n=function(e,t){if(v.call(g,e))throw new TypeError(h);return t.facade=e,b.call(g,e,t),t},o=function(e){return y.call(g,e)||{}},i=function(e){return v.call(g,e)}}else{var _=p("state");f[_]=!0,n=function(e,t){if(u(e,_))throw new TypeError(h);return t.facade=e,c(e,_,t),t},o=function(e){return u(e,_)?e[_]:{}},i=function(e){return u(e,_)}}e.exports={set:n,get:o,has:i,enforce:function(e){return i(e)?o(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!l(t)||(r=o(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}}}},(e,t,r)=>{var n=r(10),o=r(31),i=n.WeakMap;e.exports="function"==typeof i&&/native code/.test(o(i))},(e,t,r)=>{var n=r(36),o=r(38),i=n("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},(e,t,r)=>{var n=r(37),o=r(32);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.13.1",mode:n?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},e=>{e.exports=!1},e=>{var t=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++t+r).toString(36)}},e=>{e.exports={}},(e,t,r)=>{var n=r(22),o=r(41),i=r(11),a=r(27);e.exports=function(e,t){for(var r=o(t),s=a.f,l=i.f,c=0;c<r.length;c++){var u=r[c];n(e,u)||s(e,u,l(t,u))}}},(e,t,r)=>{var n=r(42),o=r(44),i=r(51),a=r(28);e.exports=n("Reflect","ownKeys")||function(e){var t=o.f(a(e)),r=i.f;return r?t.concat(r(e)):t}},(e,t,r)=>{var n=r(43),o=r(10),i=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?i(n[e])||i(o[e]):n[e]&&n[e][t]||o[e]&&o[e][t]}},(e,t,r)=>{var n=r(10);e.exports=n},(e,t,r)=>{var n=r(45),o=r(50).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},(e,t,r)=>{var n=r(22),o=r(16),i=r(46).indexOf,a=r(39);e.exports=function(e,t){var r,s=o(e),l=0,c=[];for(r in s)!n(a,r)&&n(s,r)&&c.push(r);for(;t.length>l;)n(s,r=t[l++])&&(~i(c,r)||c.push(r));return c}},(e,t,r)=>{var n=r(16),o=r(47),i=r(49),a=function(e){return function(t,r,a){var s,l=n(t),c=o(l.length),u=i(a,c);if(e&&r!=r){for(;c>u;)if((s=l[u++])!=s)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===r)return e||u||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},(e,t,r)=>{var n=r(48),o=Math.min;e.exports=function(e){return e>0?o(n(e),9007199254740991):0}},e=>{var t=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:t)(e)}},(e,t,r)=>{var n=r(48),o=Math.max,i=Math.min;e.exports=function(e,t){var r=n(e);return r<0?o(r+t,0):i(r,t)}},e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},(e,t)=>{t.f=Object.getOwnPropertySymbols},(e,t,r)=>{var n=r(13),o=/#|\.prototype\./,i=function(e,t){var r=s[a(e)];return r==c||r!=l&&("function"==typeof t?n(t):!!t)},a=i.normalize=function(e){return String(e).replace(o,".").toLowerCase()},s=i.data={},l=i.NATIVE="N",c=i.POLYFILL="P";e.exports=i},(e,t,r)=>{r(54),r(74);var n=r(43);e.exports=n.Object.fromEntries},(e,t,r)=>{var n=r(16),o=r(55),i=r(65),a=r(33),s=r(66),l="Array Iterator",c=a.set,u=a.getterFor(l);e.exports=s(Array,"Array",(function(e,t){c(this,{type:l,target:n(e),index:0,kind:t})}),(function(){var e=u(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}}),"values"),i.Arguments=i.Array,o("keys"),o("values"),o("entries")},(e,t,r)=>{var n=r(56),o=r(61),i=r(27),a=n("unscopables"),s=Array.prototype;null==s[a]&&i.f(s,a,{configurable:!0,value:o(null)}),e.exports=function(e){s[a][e]=!0}},(e,t,r)=>{var n=r(10),o=r(36),i=r(22),a=r(38),s=r(57),l=r(60),c=o("wks"),u=n.Symbol,d=l?u:u&&u.withoutSetter||a;e.exports=function(e){return i(c,e)&&(s||"string"==typeof c[e])||(s&&i(u,e)?c[e]=u[e]:c[e]=d("Symbol."+e)),c[e]}},(e,t,r)=>{var n=r(58),o=r(13);e.exports=!!Object.getOwnPropertySymbols&&!o((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},(e,t,r)=>{var n,o,i=r(10),a=r(59),s=i.process,l=s&&s.versions,c=l&&l.v8;c?o=(n=c.split("."))[0]<4?1:n[0]+n[1]:a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(o=n[1]),e.exports=o&&+o},(e,t,r)=>{var n=r(42);e.exports=n("navigator","userAgent")||""},(e,t,r)=>{var n=r(57);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},(e,t,r)=>{var n,o=r(28),i=r(62),a=r(50),s=r(39),l=r(64),c=r(25),u=r(35),d=u("IE_PROTO"),p=function(){},f=function(e){return"<script>"+e+"<\/script>"},h=function(){try{n=document.domain&&new ActiveXObject("htmlfile")}catch(o){}var e,t;h=n?function(e){e.write(f("")),e.close();var t=e.parentWindow.Object;return e=null,t}(n):((t=c("iframe")).style.display="none",l.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(f("document.F=Object")),e.close(),e.F);for(var r=a.length;r--;)delete h.prototype[a[r]];return h()};s[d]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(p.prototype=o(e),r=new p,p.prototype=null,r[d]=e):r=h(),void 0===t?r:i(r,t)}},(e,t,r)=>{var n=r(12),o=r(27),i=r(28),a=r(63);e.exports=n?Object.defineProperties:function(e,t){i(e);for(var r,n=a(t),s=n.length,l=0;s>l;)o.f(e,r=n[l++],t[r]);return e}},(e,t,r)=>{var n=r(45),o=r(50);e.exports=Object.keys||function(e){return n(e,o)}},(e,t,r)=>{var n=r(42);e.exports=n("document","documentElement")},e=>{e.exports={}},(e,t,r)=>{var n=r(9),o=r(67),i=r(69),a=r(72),s=r(71),l=r(26),c=r(29),u=r(56),d=r(37),p=r(65),f=r(68),h=f.IteratorPrototype,m=f.BUGGY_SAFARI_ITERATORS,g=u("iterator"),y="keys",v="values",b="entries",_=function(){return this};e.exports=function(e,t,r,u,f,S,w){o(r,t,u);var x,E,A,k=function(e){if(e===f&&O)return O;if(!m&&e in C)return C[e];switch(e){case y:case v:case b:return function(){return new r(this,e)}}return function(){return new r(this)}},P=t+" Iterator",T=!1,C=e.prototype,R=C[g]||C["@@iterator"]||f&&C[f],O=!m&&R||k(f),I="Array"==t&&C.entries||R;if(I&&(x=i(I.call(new e)),h!==Object.prototype&&x.next&&(d||i(x)===h||(a?a(x,h):"function"!=typeof x[g]&&l(x,g,_)),s(x,P,!0,!0),d&&(p[P]=_))),f==v&&R&&R.name!==v&&(T=!0,O=function(){return R.call(this)}),d&&!w||C[g]===O||l(C,g,O),p[t]=O,f)if(E={values:k(v),keys:S?O:k(y),entries:k(b)},w)for(A in E)(m||T||!(A in C))&&c(C,A,E[A]);else n({target:t,proto:!0,forced:m||T},E);return E}},(e,t,r)=>{var n=r(68).IteratorPrototype,o=r(61),i=r(15),a=r(71),s=r(65),l=function(){return this};e.exports=function(e,t,r){var c=t+" Iterator";return e.prototype=o(n,{next:i(1,r)}),a(e,c,!1,!0),s[c]=l,e}},(e,t,r)=>{var n,o,i,a=r(13),s=r(69),l=r(26),c=r(22),u=r(56),d=r(37),p=u("iterator"),f=!1;[].keys&&("next"in(i=[].keys())?(o=s(s(i)))!==Object.prototype&&(n=o):f=!0);var h=null==n||a((function(){var e={};return n[p].call(e)!==e}));h&&(n={}),d&&!h||c(n,p)||l(n,p,(function(){return this})),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:f}},(e,t,r)=>{var n=r(22),o=r(23),i=r(35),a=r(70),s=i("IE_PROTO"),l=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=o(e),n(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?l:null}},(e,t,r)=>{var n=r(13);e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},(e,t,r)=>{var n=r(27).f,o=r(22),i=r(56)("toStringTag");e.exports=function(e,t,r){e&&!o(e=r?e:e.prototype,i)&&n(e,i,{configurable:!0,value:t})}},(e,t,r)=>{var n=r(28),o=r(73);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),t=r instanceof Array}catch(i){}return function(r,i){return n(r),o(i),t?e.call(r,i):r.__proto__=i,r}}():void 0)},(e,t,r)=>{var n=r(21);e.exports=function(e){if(!n(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},(e,t,r)=>{var n=r(9),o=r(75),i=r(83);n({target:"Object",stat:!0},{fromEntries:function(e){var t={};return o(e,(function(e,r){i(t,e,r)}),{AS_ENTRIES:!0}),t}})},(e,t,r)=>{var n=r(28),o=r(76),i=r(47),a=r(77),s=r(79),l=r(82),c=function(e,t){this.stopped=e,this.result=t};e.exports=function(e,t,r){var u,d,p,f,h,m,g,y=r&&r.that,v=!(!r||!r.AS_ENTRIES),b=!(!r||!r.IS_ITERATOR),_=!(!r||!r.INTERRUPTED),S=a(t,y,1+v+_),w=function(e){return u&&l(u),new c(!0,e)},x=function(e){return v?(n(e),_?S(e[0],e[1],w):S(e[0],e[1])):_?S(e,w):S(e)};if(b)u=e;else{if("function"!=typeof(d=s(e)))throw TypeError("Target is not iterable");if(o(d)){for(p=0,f=i(e.length);f>p;p++)if((h=x(e[p]))&&h instanceof c)return h;return new c(!1)}u=d.call(e)}for(m=u.next;!(g=m.call(u)).done;){try{h=x(g.value)}catch(E){throw l(u),E}if("object"==typeof h&&h&&h instanceof c)return h}return new c(!1)}},(e,t,r)=>{var n=r(56),o=r(65),i=n("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||a[i]===e)}},(e,t,r)=>{var n=r(78);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},e=>{e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},(e,t,r)=>{var n=r(80),o=r(65),i=r(56)("iterator");e.exports=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[n(e)]}},(e,t,r)=>{var n=r(81),o=r(18),i=r(56)("toStringTag"),a="Arguments"==o(function(){return arguments}());e.exports=n?o:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(r){}}(t=Object(e),i))?r:a?o(t):"Object"==(n=o(t))&&"function"==typeof t.callee?"Arguments":n}},(e,t,r)=>{var n={};n[r(56)("toStringTag")]="z",e.exports="[object z]"===String(n)},(e,t,r)=>{var n=r(28);e.exports=function(e){var t=e.return;if(void 0!==t)return n(t.call(e)).value}},(e,t,r)=>{var n=r(20),o=r(27),i=r(15);e.exports=function(e,t,r){var a=n(t);a in e?o.f(e,a,i(0,r)):e[a]=r}},(e,t,r)=>{r(85),r(86),r(88),r(105),r(106),r(107),r(108),r(110);var n=r(43);e.exports=n.Promise},(e,t,r)=>{var n=r(9),o=r(69),i=r(72),a=r(61),s=r(26),l=r(15),c=r(75),u=function(e,t){var r=this;if(!(r instanceof u))return new u(e,t);i&&(r=i(new Error(void 0),o(r))),void 0!==t&&s(r,"message",String(t));var n=[];return c(e,n.push,{that:n}),s(r,"errors",n),r};u.prototype=a(Error.prototype,{constructor:l(5,u),message:l(5,""),name:l(5,"AggregateError")}),n({global:!0},{AggregateError:u})},(e,t,r)=>{var n=r(81),o=r(29),i=r(87);n||o(Object.prototype,"toString",i,{unsafe:!0})},(e,t,r)=>{var n=r(81),o=r(80);e.exports=n?{}.toString:function(){return"[object "+o(this)+"]"}},(e,t,r)=>{var n,o,i,a,s=r(9),l=r(37),c=r(10),u=r(42),d=r(89),p=r(29),f=r(90),h=r(72),m=r(71),g=r(91),y=r(21),v=r(78),b=r(92),_=r(31),S=r(75),w=r(93),x=r(94),E=r(95).set,A=r(98),k=r(100),P=r(102),T=r(101),C=r(103),R=r(33),O=r(52),I=r(56),L=r(104),D=r(97),j=r(58),M=I("species"),N="Promise",F=R.get,$=R.set,B=R.getterFor(N),U=d&&d.prototype,z=d,q=U,W=c.TypeError,V=c.document,G=c.process,H=T.f,K=H,Y=!!(V&&V.createEvent&&c.dispatchEvent),X="function"==typeof PromiseRejectionEvent,Q="unhandledrejection",J=!1,Z=O(N,(function(){var e=_(z)!==String(z);if(!e&&66===j)return!0;if(l&&!q.finally)return!0;if(j>=51&&/native code/.test(z))return!1;var t=new z((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};return(t.constructor={})[M]=r,!(J=t.then((function(){}))instanceof r)||!e&&L&&!X})),ee=Z||!w((function(e){z.all(e).catch((function(){}))})),te=function(e){var t;return!(!y(e)||"function"!=typeof(t=e.then))&&t},re=function(e,t){if(!e.notified){e.notified=!0;var r=e.reactions;A((function(){for(var n=e.value,o=1==e.state,i=0;r.length>i;){var a,s,l,c=r[i++],u=o?c.ok:c.fail,d=c.resolve,p=c.reject,f=c.domain;try{u?(o||(2===e.rejection&&ae(e),e.rejection=1),!0===u?a=n:(f&&f.enter(),a=u(n),f&&(f.exit(),l=!0)),a===c.promise?p(W("Promise-chain cycle")):(s=te(a))?s.call(a,d,p):d(a)):p(n)}catch(h){f&&!l&&f.exit(),p(h)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&oe(e)}))}},ne=function(e,t,r){var n,o;Y?((n=V.createEvent("Event")).promise=t,n.reason=r,n.initEvent(e,!1,!0),c.dispatchEvent(n)):n={promise:t,reason:r},!X&&(o=c["on"+e])?o(n):e===Q&&P("Unhandled promise rejection",r)},oe=function(e){E.call(c,(function(){var t,r=e.facade,n=e.value;if(ie(e)&&(t=C((function(){D?G.emit("unhandledRejection",n,r):ne(Q,r,n)})),e.rejection=D||ie(e)?2:1,t.error))throw t.value}))},ie=function(e){return 1!==e.rejection&&!e.parent},ae=function(e){E.call(c,(function(){var t=e.facade;D?G.emit("rejectionHandled",t):ne("rejectionhandled",t,e.value)}))},se=function(e,t,r){return function(n){e(t,n,r)}},le=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=2,re(e,!0))},ce=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw W("Promise can't be resolved itself");var n=te(t);n?A((function(){var r={done:!1};try{n.call(t,se(ce,r,e),se(le,r,e))}catch(o){le(r,o,e)}})):(e.value=t,e.state=1,re(e,!1))}catch(o){le({done:!1},o,e)}}};if(Z&&(q=(z=function(e){b(this,z,N),v(e),n.call(this);var t=F(this);try{e(se(ce,t),se(le,t))}catch(r){le(t,r)}}).prototype,(n=function(e){$(this,{type:N,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=f(q,{then:function(e,t){var r=B(this),n=H(x(this,z));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=D?G.domain:void 0,r.parent=!0,r.reactions.push(n),0!=r.state&&re(r,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new n,t=F(e);this.promise=e,this.resolve=se(ce,t),this.reject=se(le,t)},T.f=H=function(e){return e===z||e===i?new o(e):K(e)},!l&&"function"==typeof d&&U!==Object.prototype)){a=U.then,J||(p(U,"then",(function(e,t){var r=this;return new z((function(e,t){a.call(r,e,t)})).then(e,t)}),{unsafe:!0}),p(U,"catch",q.catch,{unsafe:!0}));try{delete U.constructor}catch(ue){}h&&h(U,q)}s({global:!0,wrap:!0,forced:Z},{Promise:z}),m(z,N,!1,!0),g(N),i=u(N),s({target:N,stat:!0,forced:Z},{reject:function(e){var t=H(this);return t.reject.call(void 0,e),t.promise}}),s({target:N,stat:!0,forced:l||Z},{resolve:function(e){return k(l&&this===i?z:this,e)}}),s({target:N,stat:!0,forced:ee},{all:function(e){var t=this,r=H(t),n=r.resolve,o=r.reject,i=C((function(){var r=v(t.resolve),i=[],a=0,s=1;S(e,(function(e){var l=a++,c=!1;i.push(void 0),s++,r.call(t,e).then((function(e){c||(c=!0,i[l]=e,--s||n(i))}),o)})),--s||n(i)}));return i.error&&o(i.value),r.promise},race:function(e){var t=this,r=H(t),n=r.reject,o=C((function(){var o=v(t.resolve);S(e,(function(e){o.call(t,e).then(r.resolve,n)}))}));return o.error&&n(o.value),r.promise}})},(e,t,r)=>{var n=r(10);e.exports=n.Promise},(e,t,r)=>{var n=r(29);e.exports=function(e,t,r){for(var o in t)n(e,o,t[o],r);return e}},(e,t,r)=>{var n=r(42),o=r(27),i=r(56),a=r(12),s=i("species");e.exports=function(e){var t=n(e),r=o.f;a&&t&&!t[s]&&r(t,s,{configurable:!0,get:function(){return this}})}},e=>{e.exports=function(e,t,r){if(!(e instanceof t))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return e}},(e,t,r)=>{var n=r(56)("iterator"),o=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){o=!0}};a[n]=function(){return this},Array.from(a,(function(){throw 2}))}catch(s){}e.exports=function(e,t){if(!t&&!o)return!1;var r=!1;try{var i={};i[n]=function(){return{next:function(){return{done:r=!0}}}},e(i)}catch(s){}return r}},(e,t,r)=>{var n=r(28),o=r(78),i=r(56)("species");e.exports=function(e,t){var r,a=n(e).constructor;return void 0===a||null==(r=n(a)[i])?t:o(r)}},(e,t,r)=>{var n,o,i,a=r(10),s=r(13),l=r(77),c=r(64),u=r(25),d=r(96),p=r(97),f=a.location,h=a.setImmediate,m=a.clearImmediate,g=a.process,y=a.MessageChannel,v=a.Dispatch,b=0,_={},S="onreadystatechange",w=function(e){if(_.hasOwnProperty(e)){var t=_[e];delete _[e],t()}},x=function(e){return function(){w(e)}},E=function(e){w(e.data)},A=function(e){a.postMessage(e+"",f.protocol+"//"+f.host)};h&&m||(h=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return _[++b]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},n(b),b},m=function(e){delete _[e]},p?n=function(e){g.nextTick(x(e))}:v&&v.now?n=function(e){v.now(x(e))}:y&&!d?(i=(o=new y).port2,o.port1.onmessage=E,n=l(i.postMessage,i,1)):a.addEventListener&&"function"==typeof postMessage&&!a.importScripts&&f&&"file:"!==f.protocol&&!s(A)?(n=A,a.addEventListener("message",E,!1)):n=S in u("script")?function(e){c.appendChild(u("script")).onreadystatechange=function(){c.removeChild(this),w(e)}}:function(e){setTimeout(x(e),0)}),e.exports={set:h,clear:m}},(e,t,r)=>{var n=r(59);e.exports=/(?:iphone|ipod|ipad).*applewebkit/i.test(n)},(e,t,r)=>{var n=r(18),o=r(10);e.exports="process"==n(o.process)},(e,t,r)=>{var n,o,i,a,s,l,c,u,d=r(10),p=r(11).f,f=r(95).set,h=r(96),m=r(99),g=r(97),y=d.MutationObserver||d.WebKitMutationObserver,v=d.document,b=d.process,_=d.Promise,S=p(d,"queueMicrotask"),w=S&&S.value;w||(n=function(){var e,t;for(g&&(e=b.domain)&&e.exit();o;){t=o.fn,o=o.next;try{t()}catch(r){throw o?a():i=void 0,r}}i=void 0,e&&e.enter()},h||g||m||!y||!v?_&&_.resolve?((c=_.resolve(void 0)).constructor=_,u=c.then,a=function(){u.call(c,n)}):a=g?function(){b.nextTick(n)}:function(){f.call(d,n)}:(s=!0,l=v.createTextNode(""),new y(n).observe(l,{characterData:!0}),a=function(){l.data=s=!s})),e.exports=w||function(e){var t={fn:e,next:void 0};i&&(i.next=t),o||(o=t,a()),i=t}},(e,t,r)=>{var n=r(59);e.exports=/web0s(?!.*chrome)/i.test(n)},(e,t,r)=>{var n=r(28),o=r(21),i=r(101);e.exports=function(e,t){if(n(e),o(t)&&t.constructor===e)return t;var r=i.f(e);return(0,r.resolve)(t),r.promise}},(e,t,r)=>{var n=r(78),o=function(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n})),this.resolve=n(t),this.reject=n(r)};e.exports.f=function(e){return new o(e)}},(e,t,r)=>{var n=r(10);e.exports=function(e,t){var r=n.console;r&&r.error&&(1===arguments.length?r.error(e):r.error(e,t))}},e=>{e.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}},e=>{e.exports="object"==typeof window},(e,t,r)=>{var n=r(9),o=r(78),i=r(101),a=r(103),s=r(75);n({target:"Promise",stat:!0},{allSettled:function(e){var t=this,r=i.f(t),n=r.resolve,l=r.reject,c=a((function(){var r=o(t.resolve),i=[],a=0,l=1;s(e,(function(e){var o=a++,s=!1;i.push(void 0),l++,r.call(t,e).then((function(e){s||(s=!0,i[o]={status:"fulfilled",value:e},--l||n(i))}),(function(e){s||(s=!0,i[o]={status:"rejected",reason:e},--l||n(i))}))})),--l||n(i)}));return c.error&&l(c.value),r.promise}})},(e,t,r)=>{var n=r(9),o=r(78),i=r(42),a=r(101),s=r(103),l=r(75),c="No one promise resolved";n({target:"Promise",stat:!0},{any:function(e){var t=this,r=a.f(t),n=r.resolve,u=r.reject,d=s((function(){var r=o(t.resolve),a=[],s=0,d=1,p=!1;l(e,(function(e){var o=s++,l=!1;a.push(void 0),d++,r.call(t,e).then((function(e){l||p||(p=!0,n(e))}),(function(e){l||p||(l=!0,a[o]=e,--d||u(new(i("AggregateError"))(a,c)))}))})),--d||u(new(i("AggregateError"))(a,c))}));return d.error&&u(d.value),r.promise}})},(e,t,r)=>{var n=r(9),o=r(37),i=r(89),a=r(13),s=r(42),l=r(94),c=r(100),u=r(29);if(n({target:"Promise",proto:!0,real:!0,forced:!!i&&a((function(){i.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=l(this,s("Promise")),r="function"==typeof e;return this.then(r?function(r){return c(t,e()).then((function(){return r}))}:e,r?function(r){return c(t,e()).then((function(){throw r}))}:e)}}),!o&&"function"==typeof i){var d=s("Promise").prototype.finally;i.prototype.finally!==d&&u(i.prototype,"finally",d,{unsafe:!0})}},(e,t,r)=>{var n=r(109).charAt,o=r(33),i=r(66),a="String Iterator",s=o.set,l=o.getterFor(a);i(String,"String",(function(e){s(this,{type:a,string:String(e),index:0})}),(function(){var e,t=l(this),r=t.string,o=t.index;return o>=r.length?{value:void 0,done:!0}:(e=n(r,o),t.index+=e.length,{value:e,done:!1})}))},(e,t,r)=>{var n=r(48),o=r(19),i=function(e){return function(t,r){var i,a,s=String(o(t)),l=n(r),c=s.length;return l<0||l>=c?e?"":void 0:(i=s.charCodeAt(l))<55296||i>56319||l+1===c||(a=s.charCodeAt(l+1))<56320||a>57343?e?s.charAt(l):i:e?s.slice(l,l+2):a-56320+(i-55296<<10)+65536}};e.exports={codeAt:i(!1),charAt:i(!0)}},(e,t,r)=>{var n=r(10),o=r(111),i=r(54),a=r(26),s=r(56),l=s("iterator"),c=s("toStringTag"),u=i.values;for(var d in o){var p=n[d],f=p&&p.prototype;if(f){if(f[l]!==u)try{a(f,l,u)}catch(m){f[l]=u}if(f[c]||a(f,c,d),o[d])for(var h in i)if(f[h]!==i[h])try{a(f,h,i[h])}catch(m){f[h]=i[h]}}}},e=>{e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t){!function(e){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol:function(e){return"Symbol("+e+")"};function r(){}function n(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==commonjsGlobal?commonjsGlobal:void 0}var o=n();function i(e){return"object"==typeof e&&null!==e||"function"==typeof e}var a=r,s=Promise,l=Promise.prototype.then,c=Promise.resolve.bind(s),u=Promise.reject.bind(s);function d(e){return new s(e)}function p(e){return c(e)}function f(e){return u(e)}function h(e,t,r){return l.call(e,t,r)}function m(e,t,r){h(h(e,t,r),void 0,a)}function g(e,t){m(e,t)}function y(e,t){m(e,void 0,t)}function v(e,t,r){return h(e,t,r)}function b(e){h(e,void 0,a)}var _=function(){var e=o&&o.queueMicrotask;if("function"==typeof e)return e;var t=p(void 0);return function(e){return h(t,e)}}();function S(e,t,r){if("function"!=typeof e)throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,t,r)}function w(e,t,r){try{return p(S(e,t,r))}catch(n){return f(n)}}var x=16384,E=function(){function e(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}return Object.defineProperty(e.prototype,"length",{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.push=function(e){var t=this._back,r=t;t._elements.length===x-1&&(r={_elements:[],_next:void 0}),t._elements.push(e),r!==t&&(this._back=r,t._next=r),++this._size},e.prototype.shift=function(){var e=this._front,t=e,r=this._cursor,n=r+1,o=e._elements,i=o[r];return n===x&&(t=e._next,n=0),--this._size,this._cursor=n,e!==t&&(this._front=t),o[r]=void 0,i},e.prototype.forEach=function(e){for(var t=this._cursor,r=this._front,n=r._elements;!(t===n.length&&void 0===r._next||t===n.length&&(t=0,0===(n=(r=r._next)._elements).length));)e(n[t]),++t},e.prototype.peek=function(){var e=this._front,t=this._cursor;return e._elements[t]},e}();function A(e,t){e._ownerReadableStream=t,t._reader=e,"readable"===t._state?C(e):"closed"===t._state?O(e):R(e,t._storedError)}function k(e,t){return yn(e._ownerReadableStream,t)}function P(e){"readable"===e._ownerReadableStream._state?I(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):L(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function T(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function C(e){e._closedPromise=d((function(t,r){e._closedPromise_resolve=t,e._closedPromise_reject=r}))}function R(e,t){C(e),I(e,t)}function O(e){C(e),D(e)}function I(e,t){void 0!==e._closedPromise_reject&&(b(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function L(e,t){R(e,t)}function D(e){void 0!==e._closedPromise_resolve&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}var j=t("[[AbortSteps]]"),M=t("[[ErrorSteps]]"),N=t("[[CancelSteps]]"),F=t("[[PullSteps]]"),$=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},B=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function U(e){return"object"==typeof e||"function"==typeof e}function z(e,t){if(void 0!==e&&!U(e))throw new TypeError(t+" is not an object.")}function q(e,t){if("function"!=typeof e)throw new TypeError(t+" is not a function.")}function W(e){return"object"==typeof e&&null!==e||"function"==typeof e}function V(e,t){if(!W(e))throw new TypeError(t+" is not an object.")}function G(e,t,r){if(void 0===e)throw new TypeError("Parameter "+t+" is required in '"+r+"'.")}function H(e,t,r){if(void 0===e)throw new TypeError(t+" is required in '"+r+"'.")}function K(e){return Number(e)}function Y(e){return 0===e?0:e}function X(e){return Y(B(e))}function Q(e,t){var r=0,n=Number.MAX_SAFE_INTEGER,o=Number(e);if(o=Y(o),!$(o))throw new TypeError(t+" is not a finite number");if((o=X(o))<r||o>n)throw new TypeError(t+" is outside the accepted range of "+r+" to "+n+", inclusive");return $(o)&&0!==o?o:0}function J(e,t){if(!mn(e))throw new TypeError(t+" is not a ReadableStream.")}function Z(e){return new ae(e)}function ee(e,t){e._reader._readRequests.push(t)}function te(e,t,r){var n=e._reader._readRequests.shift();r?n._closeSteps():n._chunkSteps(t)}function re(e){return e._reader._readRequests.length}function ne(e){var t=e._reader;return void 0!==t&&!!se(t)}var oe,ie,ae=function(){function e(e){if(G(e,1,"ReadableStreamDefaultReader"),J(e,"First parameter"),gn(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");A(this,e),this._readRequests=new E}return Object.defineProperty(e.prototype,"closed",{get:function(){return se(this)?this._closedPromise:f(ce("closed"))},enumerable:!1,configurable:!0}),e.prototype.cancel=function(e){return void 0===e&&(e=void 0),se(this)?void 0===this._ownerReadableStream?f(T("cancel")):k(this,e):f(ce("cancel"))},e.prototype.read=function(){if(!se(this))return f(ce("read"));if(void 0===this._ownerReadableStream)return f(T("read from"));var e,t,r=d((function(r,n){e=r,t=n}));return le(this,{_chunkSteps:function(t){return e({value:t,done:!1})},_closeSteps:function(){return e({value:void 0,done:!0})},_errorSteps:function(e){return t(e)}}),r},e.prototype.releaseLock=function(){if(!se(this))throw ce("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");P(this)}},e}();function se(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readRequests")}function le(e,t){var r=e._ownerReadableStream;r._disturbed=!0,"closed"===r._state?t._closeSteps():"errored"===r._state?t._errorSteps(r._storedError):r._readableStreamController[F](t)}function ce(e){return new TypeError("ReadableStreamDefaultReader.prototype."+e+" can only be used on a ReadableStreamDefaultReader")}Object.defineProperties(ae.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(ae.prototype,t.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0}),"symbol"==typeof t.asyncIterator&&((oe={})[t.asyncIterator]=function(){return this},ie=oe,Object.defineProperty(ie,t.asyncIterator,{enumerable:!1}));var ue=function(){function e(e,t){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=e,this._preventCancel=t}return e.prototype.next=function(){var e=this,t=function(){return e._nextSteps()};return this._ongoingPromise=this._ongoingPromise?v(this._ongoingPromise,t,t):t(),this._ongoingPromise},e.prototype.return=function(e){var t=this,r=function(){return t._returnSteps(e)};return this._ongoingPromise?v(this._ongoingPromise,r,r):r()},e.prototype._nextSteps=function(){var e=this;if(this._isFinished)return Promise.resolve({value:void 0,done:!0});var t,r,n=this._reader;if(void 0===n._ownerReadableStream)return f(T("iterate"));var o=d((function(e,n){t=e,r=n}));return le(n,{_chunkSteps:function(r){e._ongoingPromise=void 0,_((function(){return t({value:r,done:!1})}))},_closeSteps:function(){e._ongoingPromise=void 0,e._isFinished=!0,P(n),t({value:void 0,done:!0})},_errorSteps:function(t){e._ongoingPromise=void 0,e._isFinished=!0,P(n),r(t)}}),o},e.prototype._returnSteps=function(e){if(this._isFinished)return Promise.resolve({value:e,done:!0});this._isFinished=!0;var t=this._reader;if(void 0===t._ownerReadableStream)return f(T("finish iterating"));if(!this._preventCancel){var r=k(t,e);return P(t),v(r,(function(){return{value:e,done:!0}}))}return P(t),p({value:e,done:!0})},e}(),de={next:function(){return fe(this)?this._asyncIteratorImpl.next():f(he("next"))},return:function(e){return fe(this)?this._asyncIteratorImpl.return(e):f(he("return"))}};function pe(e,t){var r=Z(e),n=new ue(r,t),o=Object.create(de);return o._asyncIteratorImpl=n,o}function fe(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl")}function he(e){return new TypeError("ReadableStreamAsyncIterator."+e+" can only be used on a ReadableSteamAsyncIterator")}void 0!==ie&&Object.setPrototypeOf(de,ie);var me=Number.isNaN||function(e){return e!=e};function ge(e){return!!ye(e)&&e!==1/0}function ye(e){return!("number"!=typeof e||me(e)||e<0)}function ve(e){var t=e._queue.shift();return e._queueTotalSize-=t.size,e._queueTotalSize<0&&(e._queueTotalSize=0),t.value}function be(e,t,r){if(!ge(r=Number(r)))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:t,size:r}),e._queueTotalSize+=r}function _e(e){return e._queue.peek().value}function Se(e){e._queue=new E,e._queueTotalSize=0}function we(e){return e.slice()}function xe(e,t,r,n,o){new Uint8Array(e).set(new Uint8Array(r,n,o),t)}function Ee(e){return e}function Ae(e){return!1}var ke=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"view",{get:function(){if(!Ce(this))throw rt("view");return this._view},enumerable:!1,configurable:!0}),e.prototype.respond=function(e){if(!Ce(this))throw rt("respond");if(G(e,1,"respond"),e=Q(e,"First parameter"),void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");Ae(this._view.buffer),Qe(this._associatedReadableByteStreamController,e)},e.prototype.respondWithNewView=function(e){if(!Ce(this))throw rt("respondWithNewView");if(G(e,1,"respondWithNewView"),!ArrayBuffer.isView(e))throw new TypeError("You can only respond with array buffer views");if(0===e.byteLength)throw new TypeError("chunk must have non-zero byteLength");if(0===e.buffer.byteLength)throw new TypeError("chunk's buffer must have non-zero byteLength");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");Je(this._associatedReadableByteStreamController,e)},e}();Object.defineProperties(ke.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(ke.prototype,t.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});var Pe=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"byobRequest",{get:function(){if(!Te(this))throw nt("byobRequest");if(null===this._byobRequest&&this._pendingPullIntos.length>0){var e=this._pendingPullIntos.peek(),t=new Uint8Array(e.buffer,e.byteOffset+e.bytesFilled,e.byteLength-e.bytesFilled),r=Object.create(ke.prototype);tt(r,this,t),this._byobRequest=r}return this._byobRequest},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!Te(this))throw nt("desiredSize");return Xe(this)},enumerable:!1,configurable:!0}),e.prototype.close=function(){if(!Te(this))throw nt("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var e=this._controlledReadableByteStream._state;if("readable"!==e)throw new TypeError("The stream (in "+e+" state) is not in the readable state and cannot be closed");He(this)},e.prototype.enqueue=function(e){if(!Te(this))throw nt("enqueue");if(G(e,1,"enqueue"),!ArrayBuffer.isView(e))throw new TypeError("chunk must be an array buffer view");if(0===e.byteLength)throw new TypeError("chunk must have non-zero byteLength");if(0===e.buffer.byteLength)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");var t=this._controlledReadableByteStream._state;if("readable"!==t)throw new TypeError("The stream (in "+t+" state) is not in the readable state and cannot be enqueued to");Ke(this,e)},e.prototype.error=function(e){if(void 0===e&&(e=void 0),!Te(this))throw nt("error");Ye(this,e)},e.prototype[N]=function(e){this._pendingPullIntos.length>0&&(this._pendingPullIntos.peek().bytesFilled=0),Se(this);var t=this._cancelAlgorithm(e);return Ge(this),t},e.prototype[F]=function(e){var t=this._controlledReadableByteStream;if(this._queueTotalSize>0){var r=this._queue.shift();this._queueTotalSize-=r.byteLength,Ne(this);var n=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);e._chunkSteps(n)}else{var o=this._autoAllocateChunkSize;if(void 0!==o){var i=void 0;try{i=new ArrayBuffer(o)}catch(s){return void e._errorSteps(s)}var a={buffer:i,byteOffset:0,byteLength:o,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(a)}ee(t,e),Re(this)}},e}();function Te(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")}function Ce(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")}function Re(e){Ve(e)&&(e._pulling?e._pullAgain=!0:(e._pulling=!0,m(e._pullAlgorithm(),(function(){e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Re(e))}),(function(t){Ye(e,t)}))))}function Oe(e){Fe(e),e._pendingPullIntos=new E}function Ie(e,t){var r=!1;"closed"===e._state&&(r=!0);var n=Le(t);"default"===t.readerType?te(e,n,r):at(e,n,r)}function Le(e){var t=e.bytesFilled,r=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,t/r)}function De(e,t,r,n){e._queue.push({buffer:t,byteOffset:r,byteLength:n}),e._queueTotalSize+=n}function je(e,t){var r=t.elementSize,n=t.bytesFilled-t.bytesFilled%r,o=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),i=t.bytesFilled+o,a=i-i%r,s=o,l=!1;a>n&&(s=a-t.bytesFilled,l=!0);for(var c=e._queue;s>0;){var u=c.peek(),d=Math.min(s,u.byteLength),p=t.byteOffset+t.bytesFilled;xe(t.buffer,p,u.buffer,u.byteOffset,d),u.byteLength===d?c.shift():(u.byteOffset+=d,u.byteLength-=d),e._queueTotalSize-=d,Me(e,d,t),s-=d}return l}function Me(e,t,r){Fe(e),r.bytesFilled+=t}function Ne(e){0===e._queueTotalSize&&e._closeRequested?(Ge(e),vn(e._controlledReadableByteStream)):Re(e)}function Fe(e){null!==e._byobRequest&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function $e(e){for(;e._pendingPullIntos.length>0;){if(0===e._queueTotalSize)return;var t=e._pendingPullIntos.peek();je(e,t)&&(We(e),Ie(e._controlledReadableByteStream,t))}}function Be(e,t,r){var n=e._controlledReadableByteStream,o=1;t.constructor!==DataView&&(o=t.constructor.BYTES_PER_ELEMENT);var i=t.constructor,a={buffer:Ee(t.buffer),byteOffset:t.byteOffset,byteLength:t.byteLength,bytesFilled:0,elementSize:o,viewConstructor:i,readerType:"byob"};if(e._pendingPullIntos.length>0)return e._pendingPullIntos.push(a),void it(n,r);if("closed"!==n._state){if(e._queueTotalSize>0){if(je(e,a)){var s=Le(a);return Ne(e),void r._chunkSteps(s)}if(e._closeRequested){var l=new TypeError("Insufficient bytes to fill elements in the given buffer");return Ye(e,l),void r._errorSteps(l)}}e._pendingPullIntos.push(a),it(n,r),Re(e)}else{var c=new i(a.buffer,a.byteOffset,0);r._closeSteps(c)}}function Ue(e,t){t.buffer=Ee(t.buffer);var r=e._controlledReadableByteStream;if(lt(r))for(;st(r)>0;)Ie(r,We(e))}function ze(e,t,r){if(r.bytesFilled+t>r.byteLength)throw new RangeError("bytesWritten out of range");if(Me(e,t,r),!(r.bytesFilled<r.elementSize)){We(e);var n=r.bytesFilled%r.elementSize;if(n>0){var o=r.byteOffset+r.bytesFilled,i=r.buffer.slice(o-n,o);De(e,i,0,i.byteLength)}r.buffer=Ee(r.buffer),r.bytesFilled-=n,Ie(e._controlledReadableByteStream,r),$e(e)}}function qe(e,t){var r=e._pendingPullIntos.peek();if("closed"===e._controlledReadableByteStream._state){if(0!==t)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream");Ue(e,r)}else ze(e,t,r);Re(e)}function We(e){var t=e._pendingPullIntos.shift();return Fe(e),t}function Ve(e){var t=e._controlledReadableByteStream;return"readable"===t._state&&!e._closeRequested&&!!e._started&&(!!(ne(t)&&re(t)>0)||!!(lt(t)&&st(t)>0)||Xe(e)>0)}function Ge(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function He(e){var t=e._controlledReadableByteStream;if(!e._closeRequested&&"readable"===t._state)if(e._queueTotalSize>0)e._closeRequested=!0;else{if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){var r=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Ye(e,r),r}Ge(e),vn(t)}}function Ke(e,t){var r=e._controlledReadableByteStream;if(!e._closeRequested&&"readable"===r._state){var n=t.buffer,o=t.byteOffset,i=t.byteLength,a=Ee(n);ne(r)?0===re(r)?De(e,a,o,i):te(r,new Uint8Array(a,o,i),!1):lt(r)?(De(e,a,o,i),$e(e)):De(e,a,o,i),Re(e)}}function Ye(e,t){var r=e._controlledReadableByteStream;"readable"===r._state&&(Oe(e),Se(e),Ge(e),bn(r,t))}function Xe(e){var t=e._controlledReadableByteStream._state;return"errored"===t?null:"closed"===t?0:e._strategyHWM-e._queueTotalSize}function Qe(e,t){if(!ge(t=Number(t)))throw new RangeError("bytesWritten must be a finite");qe(e,t)}function Je(e,t){var r=e._pendingPullIntos.peek();if(r.byteOffset+r.bytesFilled!==t.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(r.byteLength!==t.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");r.buffer=t.buffer,qe(e,t.byteLength)}function Ze(e,t,r,n,o,i,a){t._controlledReadableByteStream=e,t._pullAgain=!1,t._pulling=!1,t._byobRequest=null,t._queue=t._queueTotalSize=void 0,Se(t),t._closeRequested=!1,t._started=!1,t._strategyHWM=i,t._pullAlgorithm=n,t._cancelAlgorithm=o,t._autoAllocateChunkSize=a,t._pendingPullIntos=new E,e._readableStreamController=t,m(p(r()),(function(){t._started=!0,Re(t)}),(function(e){Ye(t,e)}))}function et(e,t,r){var n=Object.create(Pe.prototype),o=function(){},i=function(){return p(void 0)},a=function(){return p(void 0)};void 0!==t.start&&(o=function(){return t.start(n)}),void 0!==t.pull&&(i=function(){return t.pull(n)}),void 0!==t.cancel&&(a=function(e){return t.cancel(e)});var s=t.autoAllocateChunkSize;if(0===s)throw new TypeError("autoAllocateChunkSize must be greater than 0");Ze(e,n,o,i,a,r,s)}function tt(e,t,r){e._associatedReadableByteStreamController=t,e._view=r}function rt(e){return new TypeError("ReadableStreamBYOBRequest.prototype."+e+" can only be used on a ReadableStreamBYOBRequest")}function nt(e){return new TypeError("ReadableByteStreamController.prototype."+e+" can only be used on a ReadableByteStreamController")}function ot(e){return new ct(e)}function it(e,t){e._reader._readIntoRequests.push(t)}function at(e,t,r){var n=e._reader._readIntoRequests.shift();r?n._closeSteps(t):n._chunkSteps(t)}function st(e){return e._reader._readIntoRequests.length}function lt(e){var t=e._reader;return void 0!==t&&!!ut(t)}Object.defineProperties(Pe.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Pe.prototype,t.toStringTag,{value:"ReadableByteStreamController",configurable:!0});var ct=function(){function e(e){if(G(e,1,"ReadableStreamBYOBReader"),J(e,"First parameter"),gn(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!Te(e._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");A(this,e),this._readIntoRequests=new E}return Object.defineProperty(e.prototype,"closed",{get:function(){return ut(this)?this._closedPromise:f(pt("closed"))},enumerable:!1,configurable:!0}),e.prototype.cancel=function(e){return void 0===e&&(e=void 0),ut(this)?void 0===this._ownerReadableStream?f(T("cancel")):k(this,e):f(pt("cancel"))},e.prototype.read=function(e){if(!ut(this))return f(pt("read"));if(!ArrayBuffer.isView(e))return f(new TypeError("view must be an array buffer view"));if(0===e.byteLength)return f(new TypeError("view must have non-zero byteLength"));if(0===e.buffer.byteLength)return f(new TypeError("view's buffer must have non-zero byteLength"));if(void 0===this._ownerReadableStream)return f(T("read from"));var t,r,n=d((function(e,n){t=e,r=n}));return dt(this,e,{_chunkSteps:function(e){return t({value:e,done:!1})},_closeSteps:function(e){return t({value:e,done:!0})},_errorSteps:function(e){return r(e)}}),n},e.prototype.releaseLock=function(){if(!ut(this))throw pt("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");P(this)}},e}();function ut(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")}function dt(e,t,r){var n=e._ownerReadableStream;n._disturbed=!0,"errored"===n._state?r._errorSteps(n._storedError):Be(n._readableStreamController,t,r)}function pt(e){return new TypeError("ReadableStreamBYOBReader.prototype."+e+" can only be used on a ReadableStreamBYOBReader")}function ft(e,t){var r=e.highWaterMark;if(void 0===r)return t;if(me(r)||r<0)throw new RangeError("Invalid highWaterMark");return r}function ht(e){var t=e.size;return t||function(){return 1}}function mt(e,t){z(e,t);var r=null==e?void 0:e.highWaterMark,n=null==e?void 0:e.size;return{highWaterMark:void 0===r?void 0:K(r),size:void 0===n?void 0:gt(n,t+" has member 'size' that")}}function gt(e,t){return q(e,t),function(t){return K(e(t))}}function yt(e,t){z(e,t);var r=null==e?void 0:e.abort,n=null==e?void 0:e.close,o=null==e?void 0:e.start,i=null==e?void 0:e.type,a=null==e?void 0:e.write;return{abort:void 0===r?void 0:vt(r,e,t+" has member 'abort' that"),close:void 0===n?void 0:bt(n,e,t+" has member 'close' that"),start:void 0===o?void 0:_t(o,e,t+" has member 'start' that"),write:void 0===a?void 0:St(a,e,t+" has member 'write' that"),type:i}}function vt(e,t,r){return q(e,r),function(r){return w(e,t,[r])}}function bt(e,t,r){return q(e,r),function(){return w(e,t,[])}}function _t(e,t,r){return q(e,r),function(r){return S(e,t,[r])}}function St(e,t,r){return q(e,r),function(r,n){return w(e,t,[r,n])}}function wt(e,t){if(!Pt(e))throw new TypeError(t+" is not a WritableStream.")}Object.defineProperties(ct.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(ct.prototype,t.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});var xt=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t={}),void 0===e?e=null:V(e,"First parameter");var r=mt(t,"Second parameter"),n=yt(e,"First parameter");if(kt(this),void 0!==n.type)throw new RangeError("Invalid type is specified");var o=ht(r);ir(this,n,ft(r,1),o)}return Object.defineProperty(e.prototype,"locked",{get:function(){if(!Pt(this))throw yr("locked");return Tt(this)},enumerable:!1,configurable:!0}),e.prototype.abort=function(e){return void 0===e&&(e=void 0),Pt(this)?Tt(this)?f(new TypeError("Cannot abort a stream that already has a writer")):Ct(this,e):f(yr("abort"))},e.prototype.close=function(){return Pt(this)?Tt(this)?f(new TypeError("Cannot close a stream that already has a writer")):$t(this)?f(new TypeError("Cannot close an already-closing stream")):Rt(this):f(yr("close"))},e.prototype.getWriter=function(){if(!Pt(this))throw yr("getWriter");return Et(this)},e}();function Et(e){return new Vt(e)}function At(e,t,r,n,o,i){void 0===o&&(o=1),void 0===i&&(i=function(){return 1});var a=Object.create(xt.prototype);return kt(a),or(a,Object.create(rr.prototype),e,t,r,n,o,i),a}function kt(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new E,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function Pt(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")}function Tt(e){return void 0!==e._writer}function Ct(e,t){var r=e._state;if("closed"===r||"errored"===r)return p(void 0);if(void 0!==e._pendingAbortRequest)return e._pendingAbortRequest._promise;var n=!1;"erroring"===r&&(n=!0,t=void 0);var o=d((function(r,o){e._pendingAbortRequest={_promise:void 0,_resolve:r,_reject:o,_reason:t,_wasAlreadyErroring:n}}));return e._pendingAbortRequest._promise=o,n||Lt(e,t),o}function Rt(e){var t=e._state;if("closed"===t||"errored"===t)return f(new TypeError("The stream (in "+t+" state) is not in the writable state and cannot be closed"));var r=d((function(t,r){var n={_resolve:t,_reject:r};e._closeRequest=n})),n=e._writer;return void 0!==n&&e._backpressure&&"writable"===t&&Ir(n),sr(e._writableStreamController),r}function Ot(e){return d((function(t,r){var n={_resolve:t,_reject:r};e._writeRequests.push(n)}))}function It(e,t){"writable"!==e._state?Dt(e):Lt(e,t)}function Lt(e,t){var r=e._writableStreamController;e._state="erroring",e._storedError=t;var n=e._writer;void 0!==n&&Qt(n,t),!Bt(e)&&r._started&&Dt(e)}function Dt(e){e._state="errored",e._writableStreamController[M]();var t=e._storedError;if(e._writeRequests.forEach((function(e){e._reject(t)})),e._writeRequests=new E,void 0!==e._pendingAbortRequest){var r=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,r._wasAlreadyErroring)return r._reject(t),void qt(e);m(e._writableStreamController[j](r._reason),(function(){r._resolve(),qt(e)}),(function(t){r._reject(t),qt(e)}))}else qt(e)}function jt(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function Mt(e,t){e._inFlightWriteRequest._reject(t),e._inFlightWriteRequest=void 0,It(e,t)}function Nt(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,"erroring"===e._state&&(e._storedError=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";var t=e._writer;void 0!==t&&Ar(t)}function Ft(e,t){e._inFlightCloseRequest._reject(t),e._inFlightCloseRequest=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._reject(t),e._pendingAbortRequest=void 0),It(e,t)}function $t(e){return void 0!==e._closeRequest||void 0!==e._inFlightCloseRequest}function Bt(e){return void 0!==e._inFlightWriteRequest||void 0!==e._inFlightCloseRequest}function Ut(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function zt(e){e._inFlightWriteRequest=e._writeRequests.shift()}function qt(e){void 0!==e._closeRequest&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);var t=e._writer;void 0!==t&&xr(t,e._storedError)}function Wt(e,t){var r=e._writer;void 0!==r&&t!==e._backpressure&&(t?Rr(r):Ir(r)),e._backpressure=t}Object.defineProperties(xt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(xt.prototype,t.toStringTag,{value:"WritableStream",configurable:!0});var Vt=function(){function e(e){if(G(e,1,"WritableStreamDefaultWriter"),wt(e,"First parameter"),Tt(e))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=e,e._writer=this;var t=e._state;if("writable"===t)!$t(e)&&e._backpressure?kr(this):Tr(this),_r(this);else if("erroring"===t)Pr(this,e._storedError),_r(this);else if("closed"===t)Tr(this),wr(this);else{var r=e._storedError;Pr(this,r),Sr(this,r)}}return Object.defineProperty(e.prototype,"closed",{get:function(){return Gt(this)?this._closedPromise:f(vr("closed"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!Gt(this))throw vr("desiredSize");if(void 0===this._ownerWritableStream)throw br("desiredSize");return Jt(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ready",{get:function(){return Gt(this)?this._readyPromise:f(vr("ready"))},enumerable:!1,configurable:!0}),e.prototype.abort=function(e){return void 0===e&&(e=void 0),Gt(this)?void 0===this._ownerWritableStream?f(br("abort")):Ht(this,e):f(vr("abort"))},e.prototype.close=function(){if(!Gt(this))return f(vr("close"));var e=this._ownerWritableStream;return void 0===e?f(br("close")):$t(e)?f(new TypeError("Cannot close an already-closing stream")):Kt(this)},e.prototype.releaseLock=function(){if(!Gt(this))throw vr("releaseLock");void 0!==this._ownerWritableStream&&Zt(this)},e.prototype.write=function(e){return void 0===e&&(e=void 0),Gt(this)?void 0===this._ownerWritableStream?f(br("write to")):er(this,e):f(vr("write"))},e}();function Gt(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")}function Ht(e,t){return Ct(e._ownerWritableStream,t)}function Kt(e){return Rt(e._ownerWritableStream)}function Yt(e){var t=e._ownerWritableStream,r=t._state;return $t(t)||"closed"===r?p(void 0):"errored"===r?f(t._storedError):Kt(e)}function Xt(e,t){"pending"===e._closedPromiseState?xr(e,t):Er(e,t)}function Qt(e,t){"pending"===e._readyPromiseState?Cr(e,t):Or(e,t)}function Jt(e){var t=e._ownerWritableStream,r=t._state;return"errored"===r||"erroring"===r?null:"closed"===r?0:cr(t._writableStreamController)}function Zt(e){var t=e._ownerWritableStream,r=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Qt(e,r),Xt(e,r),t._writer=void 0,e._ownerWritableStream=void 0}function er(e,t){var r=e._ownerWritableStream,n=r._writableStreamController,o=lr(n,t);if(r!==e._ownerWritableStream)return f(br("write to"));var i=r._state;if("errored"===i)return f(r._storedError);if($t(r)||"closed"===i)return f(new TypeError("The stream is closing or closed and cannot be written to"));if("erroring"===i)return f(r._storedError);var a=Ot(r);return ur(n,t,o),a}Object.defineProperties(Vt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Vt.prototype,t.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});var tr={},rr=function(){function e(){throw new TypeError("Illegal constructor")}return e.prototype.error=function(e){if(void 0===e&&(e=void 0),!nr(this))throw new TypeError("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");"writable"===this._controlledWritableStream._state&&gr(this,e)},e.prototype[j]=function(e){var t=this._abortAlgorithm(e);return ar(this),t},e.prototype[M]=function(){Se(this)},e}();function nr(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")}function or(e,t,r,n,o,i,a,s){t._controlledWritableStream=e,e._writableStreamController=t,t._queue=void 0,t._queueTotalSize=void 0,Se(t),t._started=!1,t._strategySizeAlgorithm=s,t._strategyHWM=a,t._writeAlgorithm=n,t._closeAlgorithm=o,t._abortAlgorithm=i;var l=mr(t);Wt(e,l),m(p(r()),(function(){t._started=!0,dr(t)}),(function(r){t._started=!0,It(e,r)}))}function ir(e,t,r,n){var o=Object.create(rr.prototype),i=function(){},a=function(){return p(void 0)},s=function(){return p(void 0)},l=function(){return p(void 0)};void 0!==t.start&&(i=function(){return t.start(o)}),void 0!==t.write&&(a=function(e){return t.write(e,o)}),void 0!==t.close&&(s=function(){return t.close()}),void 0!==t.abort&&(l=function(e){return t.abort(e)}),or(e,o,i,a,s,l,r,n)}function ar(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function sr(e){be(e,tr,0),dr(e)}function lr(e,t){try{return e._strategySizeAlgorithm(t)}catch(r){return pr(e,r),1}}function cr(e){return e._strategyHWM-e._queueTotalSize}function ur(e,t,r){try{be(e,t,r)}catch(o){return void pr(e,o)}var n=e._controlledWritableStream;$t(n)||"writable"!==n._state||Wt(n,mr(e)),dr(e)}function dr(e){var t=e._controlledWritableStream;if(e._started&&void 0===t._inFlightWriteRequest)if("erroring"!==t._state){if(0!==e._queue.length){var r=_e(e);r===tr?fr(e):hr(e,r)}}else Dt(t)}function pr(e,t){"writable"===e._controlledWritableStream._state&&gr(e,t)}function fr(e){var t=e._controlledWritableStream;Ut(t),ve(e);var r=e._closeAlgorithm();ar(e),m(r,(function(){Nt(t)}),(function(e){Ft(t,e)}))}function hr(e,t){var r=e._controlledWritableStream;zt(r),m(e._writeAlgorithm(t),(function(){jt(r);var t=r._state;if(ve(e),!$t(r)&&"writable"===t){var n=mr(e);Wt(r,n)}dr(e)}),(function(t){"writable"===r._state&&ar(e),Mt(r,t)}))}function mr(e){return cr(e)<=0}function gr(e,t){var r=e._controlledWritableStream;ar(e),Lt(r,t)}function yr(e){return new TypeError("WritableStream.prototype."+e+" can only be used on a WritableStream")}function vr(e){return new TypeError("WritableStreamDefaultWriter.prototype."+e+" can only be used on a WritableStreamDefaultWriter")}function br(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function _r(e){e._closedPromise=d((function(t,r){e._closedPromise_resolve=t,e._closedPromise_reject=r,e._closedPromiseState="pending"}))}function Sr(e,t){_r(e),xr(e,t)}function wr(e){_r(e),Ar(e)}function xr(e,t){void 0!==e._closedPromise_reject&&(b(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function Er(e,t){Sr(e,t)}function Ar(e){void 0!==e._closedPromise_resolve&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function kr(e){e._readyPromise=d((function(t,r){e._readyPromise_resolve=t,e._readyPromise_reject=r})),e._readyPromiseState="pending"}function Pr(e,t){kr(e),Cr(e,t)}function Tr(e){kr(e),Ir(e)}function Cr(e,t){void 0!==e._readyPromise_reject&&(b(e._readyPromise),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function Rr(e){kr(e)}function Or(e,t){Pr(e,t)}function Ir(e){void 0!==e._readyPromise_resolve&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}function Lr(e){if("object"!=typeof e||null===e)return!1;try{return"boolean"==typeof e.aborted}catch(t){return!1}}Object.defineProperties(rr.prototype,{error:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(rr.prototype,t.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});var Dr="undefined"!=typeof DOMException?DOMException:void 0;function jr(e){if("function"!=typeof e&&"object"!=typeof e)return!1;try{return new e,!0}catch(t){return!1}}function Mr(){var e=function(e,t){this.message=e||"",this.name=t||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}var Nr=jr(Dr)?Dr:Mr();function Fr(e,t,n,o,i,a){var s=Z(e),l=Et(t);e._disturbed=!0;var c=!1,u=p(void 0);return d((function(f,v){var _;if(void 0!==a){if(_=function(){var r=new Nr("Aborted","AbortError"),n=[];o||n.push((function(){return"writable"===t._state?Ct(t,r):p(void 0)})),i||n.push((function(){return"readable"===e._state?yn(e,r):p(void 0)})),T((function(){return Promise.all(n.map((function(e){return e()})))}),!0,r)},a.aborted)return void _();a.addEventListener("abort",_)}function S(){return d((function(e,t){function r(n){n?e():h(w(),r,t)}r(!1)}))}function w(){return c?p(!0):h(l._readyPromise,(function(){return d((function(e,t){le(s,{_chunkSteps:function(t){u=h(er(l,t),void 0,r),e(!1)},_closeSteps:function(){return e(!0)},_errorSteps:t})}))}))}if(A(e,s._closedPromise,(function(e){o?C(!0,e):T((function(){return Ct(t,e)}),!0,e)})),A(t,l._closedPromise,(function(t){i?C(!0,t):T((function(){return yn(e,t)}),!0,t)})),k(e,s._closedPromise,(function(){n?C():T((function(){return Yt(l)}))})),$t(t)||"closed"===t._state){var x=new TypeError("the destination writable stream closed before all data could be piped to it");i?C(!0,x):T((function(){return yn(e,x)}),!0,x)}function E(){var e=u;return h(u,(function(){return e!==u?E():void 0}))}function A(e,t,r){"errored"===e._state?r(e._storedError):y(t,r)}function k(e,t,r){"closed"===e._state?r():g(t,r)}function T(e,r,n){function o(){m(e(),(function(){return R(r,n)}),(function(e){return R(!0,e)}))}c||(c=!0,"writable"!==t._state||$t(t)?o():g(E(),o))}function C(e,r){c||(c=!0,"writable"!==t._state||$t(t)?R(e,r):g(E(),(function(){return R(e,r)})))}function R(e,t){Zt(l),P(s),void 0!==a&&a.removeEventListener("abort",_),e?v(t):f(void 0)}b(S())}))}var $r=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!Br(this))throw Jr("desiredSize");return Hr(this)},enumerable:!1,configurable:!0}),e.prototype.close=function(){if(!Br(this))throw Jr("close");if(!Yr(this))throw new TypeError("The stream is not in a state that permits close");Wr(this)},e.prototype.enqueue=function(e){if(void 0===e&&(e=void 0),!Br(this))throw Jr("enqueue");if(!Yr(this))throw new TypeError("The stream is not in a state that permits enqueue");return Vr(this,e)},e.prototype.error=function(e){if(void 0===e&&(e=void 0),!Br(this))throw Jr("error");Gr(this,e)},e.prototype[N]=function(e){Se(this);var t=this._cancelAlgorithm(e);return qr(this),t},e.prototype[F]=function(e){var t=this._controlledReadableStream;if(this._queue.length>0){var r=ve(this);this._closeRequested&&0===this._queue.length?(qr(this),vn(t)):Ur(this),e._chunkSteps(r)}else ee(t,e),Ur(this)},e}();function Br(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")}function Ur(e){zr(e)&&(e._pulling?e._pullAgain=!0:(e._pulling=!0,m(e._pullAlgorithm(),(function(){e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Ur(e))}),(function(t){Gr(e,t)}))))}function zr(e){var t=e._controlledReadableStream;return!!Yr(e)&&!!e._started&&(!!(gn(t)&&re(t)>0)||Hr(e)>0)}function qr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Wr(e){if(Yr(e)){var t=e._controlledReadableStream;e._closeRequested=!0,0===e._queue.length&&(qr(e),vn(t))}}function Vr(e,t){if(Yr(e)){var r=e._controlledReadableStream;if(gn(r)&&re(r)>0)te(r,t,!1);else{var n=void 0;try{n=e._strategySizeAlgorithm(t)}catch(o){throw Gr(e,o),o}try{be(e,t,n)}catch(i){throw Gr(e,i),i}}Ur(e)}}function Gr(e,t){var r=e._controlledReadableStream;"readable"===r._state&&(Se(e),qr(e),bn(r,t))}function Hr(e){var t=e._controlledReadableStream._state;return"errored"===t?null:"closed"===t?0:e._strategyHWM-e._queueTotalSize}function Kr(e){return!zr(e)}function Yr(e){var t=e._controlledReadableStream._state;return!e._closeRequested&&"readable"===t}function Xr(e,t,r,n,o,i,a){t._controlledReadableStream=e,t._queue=void 0,t._queueTotalSize=void 0,Se(t),t._started=!1,t._closeRequested=!1,t._pullAgain=!1,t._pulling=!1,t._strategySizeAlgorithm=a,t._strategyHWM=i,t._pullAlgorithm=n,t._cancelAlgorithm=o,e._readableStreamController=t,m(p(r()),(function(){t._started=!0,Ur(t)}),(function(e){Gr(t,e)}))}function Qr(e,t,r,n){var o=Object.create($r.prototype),i=function(){},a=function(){return p(void 0)},s=function(){return p(void 0)};void 0!==t.start&&(i=function(){return t.start(o)}),void 0!==t.pull&&(a=function(){return t.pull(o)}),void 0!==t.cancel&&(s=function(e){return t.cancel(e)}),Xr(e,o,i,a,s,r,n)}function Jr(e){return new TypeError("ReadableStreamDefaultController.prototype."+e+" can only be used on a ReadableStreamDefaultController")}function Zr(e,t){var r,n,o,i,a,s=Z(e),l=!1,c=!1,u=!1,f=d((function(e){a=e}));function h(){return l||(l=!0,le(s,{_chunkSteps:function(e){_((function(){l=!1;var t=e,r=e;c||Vr(o._readableStreamController,t),u||Vr(i._readableStreamController,r)}))},_closeSteps:function(){l=!1,c||Wr(o._readableStreamController),u||Wr(i._readableStreamController),c&&u||a(void 0)},_errorSteps:function(){l=!1}})),p(void 0)}function m(t){if(c=!0,r=t,u){var o=we([r,n]),i=yn(e,o);a(i)}return f}function g(t){if(u=!0,n=t,c){var o=we([r,n]),i=yn(e,o);a(i)}return f}function v(){}return o=fn(v,h,m),i=fn(v,h,g),y(s._closedPromise,(function(e){Gr(o._readableStreamController,e),Gr(i._readableStreamController,e),c&&u||a(void 0)})),[o,i]}function en(e,t){z(e,t);var r=e,n=null==r?void 0:r.autoAllocateChunkSize,o=null==r?void 0:r.cancel,i=null==r?void 0:r.pull,a=null==r?void 0:r.start,s=null==r?void 0:r.type;return{autoAllocateChunkSize:void 0===n?void 0:Q(n,t+" has member 'autoAllocateChunkSize' that"),cancel:void 0===o?void 0:tn(o,r,t+" has member 'cancel' that"),pull:void 0===i?void 0:rn(i,r,t+" has member 'pull' that"),start:void 0===a?void 0:nn(a,r,t+" has member 'start' that"),type:void 0===s?void 0:on(s,t+" has member 'type' that")}}function tn(e,t,r){return q(e,r),function(r){return w(e,t,[r])}}function rn(e,t,r){return q(e,r),function(r){return w(e,t,[r])}}function nn(e,t,r){return q(e,r),function(r){return S(e,t,[r])}}function on(e,t){if("bytes"!=(e=""+e))throw new TypeError(t+" '"+e+"' is not a valid enumeration value for ReadableStreamType");return e}function an(e,t){z(e,t);var r=null==e?void 0:e.mode;return{mode:void 0===r?void 0:sn(r,t+" has member 'mode' that")}}function sn(e,t){if("byob"!=(e=""+e))throw new TypeError(t+" '"+e+"' is not a valid enumeration value for ReadableStreamReaderMode");return e}function ln(e,t){z(e,t);var r=null==e?void 0:e.preventCancel;return{preventCancel:Boolean(r)}}function cn(e,t){z(e,t);var r=null==e?void 0:e.preventAbort,n=null==e?void 0:e.preventCancel,o=null==e?void 0:e.preventClose,i=null==e?void 0:e.signal;return void 0!==i&&un(i,t+" has member 'signal' that"),{preventAbort:Boolean(r),preventCancel:Boolean(n),preventClose:Boolean(o),signal:i}}function un(e,t){if(!Lr(e))throw new TypeError(t+" is not an AbortSignal.")}function dn(e,t){z(e,t);var r=null==e?void 0:e.readable;H(r,"readable","ReadableWritablePair"),J(r,t+" has member 'readable' that");var n=null==e?void 0:e.writable;return H(n,"writable","ReadableWritablePair"),wt(n,t+" has member 'writable' that"),{readable:r,writable:n}}Object.defineProperties($r.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty($r.prototype,t.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});var pn=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t={}),void 0===e?e=null:V(e,"First parameter");var r=mt(t,"Second parameter"),n=en(e,"First parameter");if(hn(this),"bytes"===n.type){if(void 0!==r.size)throw new RangeError("The strategy for a byte stream cannot have a size function");et(this,n,ft(r,0))}else{var o=ht(r);Qr(this,n,ft(r,1),o)}}return Object.defineProperty(e.prototype,"locked",{get:function(){if(!mn(this))throw _n("locked");return gn(this)},enumerable:!1,configurable:!0}),e.prototype.cancel=function(e){return void 0===e&&(e=void 0),mn(this)?gn(this)?f(new TypeError("Cannot cancel a stream that already has a reader")):yn(this,e):f(_n("cancel"))},e.prototype.getReader=function(e){if(void 0===e&&(e=void 0),!mn(this))throw _n("getReader");return void 0===an(e,"First parameter").mode?Z(this):ot(this)},e.prototype.pipeThrough=function(e,t){if(void 0===t&&(t={}),!mn(this))throw _n("pipeThrough");G(e,1,"pipeThrough");var r=dn(e,"First parameter"),n=cn(t,"Second parameter");if(gn(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(Tt(r.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return b(Fr(this,r.writable,n.preventClose,n.preventAbort,n.preventCancel,n.signal)),r.readable},e.prototype.pipeTo=function(e,t){if(void 0===t&&(t={}),!mn(this))return f(_n("pipeTo"));if(void 0===e)return f("Parameter 1 is required in 'pipeTo'.");if(!Pt(e))return f(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));var r;try{r=cn(t,"Second parameter")}catch(n){return f(n)}return gn(this)?f(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):Tt(e)?f(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Fr(this,e,r.preventClose,r.preventAbort,r.preventCancel,r.signal)},e.prototype.tee=function(){if(!mn(this))throw _n("tee");return we(Zr(this))},e.prototype.values=function(e){if(void 0===e&&(e=void 0),!mn(this))throw _n("values");return pe(this,ln(e,"First parameter").preventCancel)},e}();function fn(e,t,r,n,o){void 0===n&&(n=1),void 0===o&&(o=function(){return 1});var i=Object.create(pn.prototype);return hn(i),Xr(i,Object.create($r.prototype),e,t,r,n,o),i}function hn(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function mn(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")}function gn(e){return void 0!==e._reader}function yn(e,t){return e._disturbed=!0,"closed"===e._state?p(void 0):"errored"===e._state?f(e._storedError):(vn(e),v(e._readableStreamController[N](t),r))}function vn(e){e._state="closed";var t=e._reader;void 0!==t&&(D(t),se(t)&&(t._readRequests.forEach((function(e){e._closeSteps()})),t._readRequests=new E))}function bn(e,t){e._state="errored",e._storedError=t;var r=e._reader;void 0!==r&&(I(r,t),se(r)?(r._readRequests.forEach((function(e){e._errorSteps(t)})),r._readRequests=new E):(r._readIntoRequests.forEach((function(e){e._errorSteps(t)})),r._readIntoRequests=new E))}function _n(e){return new TypeError("ReadableStream.prototype."+e+" can only be used on a ReadableStream")}function Sn(e,t){z(e,t);var r=null==e?void 0:e.highWaterMark;return H(r,"highWaterMark","QueuingStrategyInit"),{highWaterMark:K(r)}}Object.defineProperties(pn.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(pn.prototype,t.toStringTag,{value:"ReadableStream",configurable:!0}),"symbol"==typeof t.asyncIterator&&Object.defineProperty(pn.prototype,t.asyncIterator,{value:pn.prototype.values,writable:!0,configurable:!0});var wn=function(e){return e.byteLength},xn=function(){function e(e){G(e,1,"ByteLengthQueuingStrategy"),e=Sn(e,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=e.highWaterMark}return Object.defineProperty(e.prototype,"highWaterMark",{get:function(){if(!An(this))throw En("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){if(!An(this))throw En("size");return wn},enumerable:!1,configurable:!0}),e}();function En(e){return new TypeError("ByteLengthQueuingStrategy.prototype."+e+" can only be used on a ByteLengthQueuingStrategy")}function An(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")}Object.defineProperties(xn.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(xn.prototype,t.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});var kn=function(){return 1},Pn=function(){function e(e){G(e,1,"CountQueuingStrategy"),e=Sn(e,"First parameter"),this._countQueuingStrategyHighWaterMark=e.highWaterMark}return Object.defineProperty(e.prototype,"highWaterMark",{get:function(){if(!Cn(this))throw Tn("highWaterMark");return this._countQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){if(!Cn(this))throw Tn("size");return kn},enumerable:!1,configurable:!0}),e}();function Tn(e){return new TypeError("CountQueuingStrategy.prototype."+e+" can only be used on a CountQueuingStrategy")}function Cn(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")}function Rn(e,t){z(e,t);var r=null==e?void 0:e.flush,n=null==e?void 0:e.readableType,o=null==e?void 0:e.start,i=null==e?void 0:e.transform,a=null==e?void 0:e.writableType;return{flush:void 0===r?void 0:On(r,e,t+" has member 'flush' that"),readableType:n,start:void 0===o?void 0:In(o,e,t+" has member 'start' that"),transform:void 0===i?void 0:Ln(i,e,t+" has member 'transform' that"),writableType:a}}function On(e,t,r){return q(e,r),function(r){return w(e,t,[r])}}function In(e,t,r){return q(e,r),function(r){return S(e,t,[r])}}function Ln(e,t,r){return q(e,r),function(r,n){return w(e,t,[r,n])}}Object.defineProperties(Pn.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Pn.prototype,t.toStringTag,{value:"CountQueuingStrategy",configurable:!0});var Dn=function(){function e(e,t,r){void 0===e&&(e={}),void 0===t&&(t={}),void 0===r&&(r={}),void 0===e&&(e=null);var n=mt(t,"Second parameter"),o=mt(r,"Third parameter"),i=Rn(e,"First parameter");if(void 0!==i.readableType)throw new RangeError("Invalid readableType specified");if(void 0!==i.writableType)throw new RangeError("Invalid writableType specified");var a,s=ft(o,0),l=ht(o),c=ft(n,1),u=ht(n);jn(this,d((function(e){a=e})),c,u,s,l),qn(this,i),void 0!==i.start?a(i.start(this._transformStreamController)):a(void 0)}return Object.defineProperty(e.prototype,"readable",{get:function(){if(!Mn(this))throw eo("readable");return this._readable},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"writable",{get:function(){if(!Mn(this))throw eo("writable");return this._writable},enumerable:!1,configurable:!0}),e}();function jn(e,t,r,n,o,i){function a(){return t}function s(t){return Yn(e,t)}function l(t){return Xn(e,t)}function c(){return Qn(e)}function u(){return Jn(e)}function d(t){return Fn(e,t),p(void 0)}e._writable=At(a,s,c,l,r,n),e._readable=fn(a,u,d,o,i),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,$n(e,!0),e._transformStreamController=void 0}function Mn(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")}function Nn(e,t){Gr(e._readable._readableStreamController,t),Fn(e,t)}function Fn(e,t){Wn(e._transformStreamController),pr(e._writable._writableStreamController,t),e._backpressure&&$n(e,!1)}function $n(e,t){void 0!==e._backpressureChangePromise&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=d((function(t){e._backpressureChangePromise_resolve=t})),e._backpressure=t}Object.defineProperties(Dn.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Dn.prototype,t.toStringTag,{value:"TransformStream",configurable:!0});var Bn=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!Un(this))throw Zn("desiredSize");return Hr(this._controlledTransformStream._readable._readableStreamController)},enumerable:!1,configurable:!0}),e.prototype.enqueue=function(e){if(void 0===e&&(e=void 0),!Un(this))throw Zn("enqueue");Vn(this,e)},e.prototype.error=function(e){if(void 0===e&&(e=void 0),!Un(this))throw Zn("error");Gn(this,e)},e.prototype.terminate=function(){if(!Un(this))throw Zn("terminate");Kn(this)},e}();function Un(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")}function zn(e,t,r,n){t._controlledTransformStream=e,e._transformStreamController=t,t._transformAlgorithm=r,t._flushAlgorithm=n}function qn(e,t){var r=Object.create(Bn.prototype),n=function(e){try{return Vn(r,e),p(void 0)}catch(t){return f(t)}},o=function(){return p(void 0)};void 0!==t.transform&&(n=function(e){return t.transform(e,r)}),void 0!==t.flush&&(o=function(){return t.flush(r)}),zn(e,r,n,o)}function Wn(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function Vn(e,t){var r=e._controlledTransformStream,n=r._readable._readableStreamController;if(!Yr(n))throw new TypeError("Readable side is not in a state that permits enqueue");try{Vr(n,t)}catch(o){throw Fn(r,o),r._readable._storedError}Kr(n)!==r._backpressure&&$n(r,!0)}function Gn(e,t){Nn(e._controlledTransformStream,t)}function Hn(e,t){return v(e._transformAlgorithm(t),void 0,(function(t){throw Nn(e._controlledTransformStream,t),t}))}function Kn(e){var t=e._controlledTransformStream;Wr(t._readable._readableStreamController),Fn(t,new TypeError("TransformStream terminated"))}function Yn(e,t){var r=e._transformStreamController;return e._backpressure?v(e._backpressureChangePromise,(function(){var n=e._writable;if("erroring"===n._state)throw n._storedError;return Hn(r,t)})):Hn(r,t)}function Xn(e,t){return Nn(e,t),p(void 0)}function Qn(e){var t=e._readable,r=e._transformStreamController,n=r._flushAlgorithm();return Wn(r),v(n,(function(){if("errored"===t._state)throw t._storedError;Wr(t._readableStreamController)}),(function(r){throw Nn(e,r),t._storedError}))}function Jn(e){return $n(e,!1),e._backpressureChangePromise}function Zn(e){return new TypeError("TransformStreamDefaultController.prototype."+e+" can only be used on a TransformStreamDefaultController")}function eo(e){return new TypeError("TransformStream.prototype."+e+" can only be used on a TransformStream")}Object.defineProperties(Bn.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Bn.prototype,t.toStringTag,{value:"TransformStreamDefaultController",configurable:!0}),e.ByteLengthQueuingStrategy=xn,e.CountQueuingStrategy=Pn,e.ReadableByteStreamController=Pe,e.ReadableStream=pn,e.ReadableStreamBYOBReader=ct,e.ReadableStreamBYOBRequest=ke,e.ReadableStreamDefaultController=$r,e.ReadableStreamDefaultReader=ae,e.TransformStream=Dn,e.TransformStreamDefaultController=Bn,e.WritableStream=xt,e.WritableStreamDefaultController=rr,e.WritableStreamDefaultWriter=Vt,Object.defineProperty(e,"__esModule",{value:!0})}(t)},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultCMapReaderFactory=exports.DefaultCanvasFactory=exports.build=void 0;var _regenerator=_interopRequireDefault(__w_pdfjs_require__(2)),_util=__w_pdfjs_require__(4),_display_utils=__w_pdfjs_require__(1),_font_loader=__w_pdfjs_require__(114),_node_utils=__w_pdfjs_require__(115),_annotation_storage=__w_pdfjs_require__(116),_api_compatibility=__w_pdfjs_require__(117),_canvas=__w_pdfjs_require__(118),_worker_options=__w_pdfjs_require__(120),_is_node=__w_pdfjs_require__(6),_message_handler=__w_pdfjs_require__(121),_metadata=__w_pdfjs_require__(122),_optional_content_config=__w_pdfjs_require__(123),_transport_stream=__w_pdfjs_require__(124);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,o)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){asyncGeneratorStep(i,n,o,a,s,"next",e)}function s(e){asyncGeneratorStep(i,n,o,a,s,"throw",e)}a(void 0)}))}}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _createForOfIteratorHelper(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _iterableToArrayLimit(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){s=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DefaultCanvasFactory=_is_node.isNodeJS?_node_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;var DefaultCMapReaderFactory=_is_node.isNodeJS?_node_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory,createPDFNetworkStream;function setPDFNetworkStreamFactory(e){createPDFNetworkStream=e}function getDocument(e){var t,r=new PDFDocumentLoadingTask;if("string"==typeof e||e instanceof URL)t={url:e};else if((0,_util.isArrayBuffer)(e))t={data:e};else if(e instanceof PDFDataRangeTransport)t={range:e};else{if("object"!==_typeof(e))throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!e.url&&!e.data&&!e.range)throw new Error("Invalid parameter object: need either .data, .range or .url");t=e}var n=Object.create(null),o=null,i=null;for(var a in t){var s=t[a];switch(a){case"url":if("undefined"!=typeof window)try{n[a]=new URL(s,window.location).href;continue}catch(u){(0,_util.warn)('Cannot create valid URL: "'.concat(u,'".'))}else if("string"==typeof s||s instanceof URL){n[a]=s.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":o=s;continue;case"worker":i=s;continue;case"data":if(_is_node.isNodeJS&&"undefined"!=typeof Buffer&&s instanceof Buffer)n[a]=new Uint8Array(s);else{if(s instanceof Uint8Array)break;if("string"==typeof s)n[a]=(0,_util.stringToBytes)(s);else if("object"!==_typeof(s)||null===s||isNaN(s.length)){if(!(0,_util.isArrayBuffer)(s))throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.");n[a]=new Uint8Array(s)}else n[a]=new Uint8Array(s)}continue}n[a]=s}if(n.rangeChunkSize=n.rangeChunkSize||DEFAULT_RANGE_CHUNK_SIZE,n.CMapReaderFactory=n.CMapReaderFactory||DefaultCMapReaderFactory,n.ignoreErrors=!0!==n.stopAtErrors,n.fontExtraProperties=!0===n.fontExtraProperties,n.pdfBug=!0===n.pdfBug,n.enableXfa=!0===n.enableXfa,("string"!=typeof n.docBaseUrl||(0,_display_utils.isDataScheme)(n.docBaseUrl))&&(n.docBaseUrl=null),Number.isInteger(n.maxImageSize)||(n.maxImageSize=-1),"boolean"!=typeof n.isEvalSupported&&(n.isEvalSupported=!0),"boolean"!=typeof n.disableFontFace&&(n.disableFontFace=_api_compatibility.apiCompatibilityParams.disableFontFace||!1),void 0===n.ownerDocument&&(n.ownerDocument=globalThis.document),"boolean"!=typeof n.disableRange&&(n.disableRange=!1),"boolean"!=typeof n.disableStream&&(n.disableStream=!1),"boolean"!=typeof n.disableAutoFetch&&(n.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(n.verbosity),!i){var l={verbosity:n.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};i=l.port?PDFWorker.fromPort(l):new PDFWorker(l),r._worker=i}var c=r.docId;return i.promise.then((function(){if(r.destroyed)throw new Error("Loading aborted");var e=_fetchDocument(i,n,o,c),t=new Promise((function(e){var t;o?t=new _transport_stream.PDFDataTransportStream({length:n.length,initialData:n.initialData,progressiveDone:n.progressiveDone,contentDispositionFilename:n.contentDispositionFilename,disableRange:n.disableRange,disableStream:n.disableStream},o):n.data||(t=createPDFNetworkStream({url:n.url,length:n.length,httpHeaders:n.httpHeaders,withCredentials:n.withCredentials,rangeChunkSize:n.rangeChunkSize,disableRange:n.disableRange,disableStream:n.disableStream})),e(t)}));return Promise.all([e,t]).then((function(e){var t=_slicedToArray(e,2),o=t[0],a=t[1];if(r.destroyed)throw new Error("Loading aborted");var s=new _message_handler.MessageHandler(c,o,i.port);s.postMessageTransfers=i.postMessageTransfers;var l=new WorkerTransport(s,r,a,n);r._transport=l,s.send("Ready",null)}))})).catch(r._capability.reject),r}function _fetchDocument(e,t,r,n){return e.destroyed?Promise.reject(new Error("Worker was destroyed")):(r&&(t.length=r.length,t.initialData=r.initialData,t.progressiveDone=r.progressiveDone,t.contentDispositionFilename=r.contentDispositionFilename),e.messageHandler.sendWithPromise("GetDocRequest",{docId:n,apiVersion:"2.9.359",source:{data:t.data,url:t.url,password:t.password,disableAutoFetch:t.disableAutoFetch,rangeChunkSize:t.rangeChunkSize,length:t.length},maxImageSize:t.maxImageSize,disableFontFace:t.disableFontFace,postMessageTransfers:e.postMessageTransfers,docBaseUrl:t.docBaseUrl,ignoreErrors:t.ignoreErrors,isEvalSupported:t.isEvalSupported,fontExtraProperties:t.fontExtraProperties,enableXfa:t.enableXfa}).then((function(t){if(e.destroyed)throw new Error("Worker was destroyed");return t})))}exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;var PDFDocumentLoadingTask=(nextDocumentId=0,function(){function e(){_classCallCheck(this,e),this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d"+nextDocumentId++,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}return _createClass(e,[{key:"promise",get:function(){return this._capability.promise}},{key:"destroy",value:function(){var e=this;return this.destroyed=!0,(this._transport?this._transport.destroy():Promise.resolve()).then((function(){e._transport=null,e._worker&&(e._worker.destroy(),e._worker=null)}))}}]),e}()),nextDocumentId,PDFDataRangeTransport=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;_classCallCheck(this,e),this.length=t,this.initialData=r,this.progressiveDone=n,this.contentDispositionFilename=o,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}return _createClass(e,[{key:"addRangeListener",value:function(e){this._rangeListeners.push(e)}},{key:"addProgressListener",value:function(e){this._progressListeners.push(e)}},{key:"addProgressiveReadListener",value:function(e){this._progressiveReadListeners.push(e)}},{key:"addProgressiveDoneListener",value:function(e){this._progressiveDoneListeners.push(e)}},{key:"onDataRange",value:function(e,t){var r,n=_createForOfIteratorHelper(this._rangeListeners);try{for(n.s();!(r=n.n()).done;)(0,r.value)(e,t)}catch(o){n.e(o)}finally{n.f()}}},{key:"onDataProgress",value:function(e,t){var r=this;this._readyCapability.promise.then((function(){var n,o=_createForOfIteratorHelper(r._progressListeners);try{for(o.s();!(n=o.n()).done;)(0,n.value)(e,t)}catch(i){o.e(i)}finally{o.f()}}))}},{key:"onDataProgressiveRead",value:function(e){var t=this;this._readyCapability.promise.then((function(){var r,n=_createForOfIteratorHelper(t._progressiveReadListeners);try{for(n.s();!(r=n.n()).done;)(0,r.value)(e)}catch(o){n.e(o)}finally{n.f()}}))}},{key:"onDataProgressiveDone",value:function(){var e=this;this._readyCapability.promise.then((function(){var t,r=_createForOfIteratorHelper(e._progressiveDoneListeners);try{for(r.s();!(t=r.n()).done;)(0,t.value)()}catch(n){r.e(n)}finally{r.f()}}))}},{key:"transportReady",value:function(){this._readyCapability.resolve()}},{key:"requestDataRange",value:function(e,t){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}},{key:"abort",value:function(){}}]),e}();exports.PDFDataRangeTransport=PDFDataRangeTransport;var PDFDocumentProxy=function(){function e(t,r){_classCallCheck(this,e),this._pdfInfo=t,this._transport=r}return _createClass(e,[{key:"annotationStorage",get:function(){return this._transport.annotationStorage}},{key:"numPages",get:function(){return this._pdfInfo.numPages}},{key:"fingerprint",get:function(){return this._pdfInfo.fingerprint}},{key:"isPureXfa",get:function(){return this._pdfInfo.isPureXfa}},{key:"getPage",value:function(e){return this._transport.getPage(e)}},{key:"getPageIndex",value:function(e){return this._transport.getPageIndex(e)}},{key:"getDestinations",value:function(){return this._transport.getDestinations()}},{key:"getDestination",value:function(e){return this._transport.getDestination(e)}},{key:"getPageLabels",value:function(){return this._transport.getPageLabels()}},{key:"getPageLayout",value:function(){return this._transport.getPageLayout()}},{key:"getPageMode",value:function(){return this._transport.getPageMode()}},{key:"getViewerPreferences",value:function(){return this._transport.getViewerPreferences()}},{key:"getOpenAction",value:function(){return this._transport.getOpenAction()}},{key:"getAttachments",value:function(){return this._transport.getAttachments()}},{key:"getJavaScript",value:function(){return this._transport.getJavaScript()}},{key:"getJSActions",value:function(){return this._transport.getDocJSActions()}},{key:"getOutline",value:function(){return this._transport.getOutline()}},{key:"getOptionalContentConfig",value:function(){return this._transport.getOptionalContentConfig()}},{key:"getPermissions",value:function(){return this._transport.getPermissions()}},{key:"getMetadata",value:function(){return this._transport.getMetadata()}},{key:"getMarkInfo",value:function(){return this._transport.getMarkInfo()}},{key:"getData",value:function(){return this._transport.getData()}},{key:"getDownloadInfo",value:function(){return this._transport.downloadInfoCapability.promise}},{key:"getStats",value:function(){return this._transport.getStats()}},{key:"cleanup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(e||this.isPureXfa)}},{key:"destroy",value:function(){return this.loadingTask.destroy()}},{key:"loadingParams",get:function(){return this._transport.loadingParams}},{key:"loadingTask",get:function(){return this._transport.loadingTask}},{key:"saveDocument",value:function(){return arguments.length>0&&(0,_display_utils.deprecated)("saveDocument no longer accepts any options."),this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}},{key:"getFieldObjects",value:function(){return this._transport.getFieldObjects()}},{key:"hasJSActions",value:function(){return this._transport.hasJSActions()}},{key:"getCalculationOrderIds",value:function(){return this._transport.getCalculationOrderIds()}}]),e}();exports.PDFDocumentProxy=PDFDocumentProxy;var PDFPageProxy=function(){function e(t,r,n,o){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_classCallCheck(this,e),this._pageIndex=t,this._pageInfo=r,this._ownerDocument=o,this._transport=n,this._stats=i?new _display_utils.StatTimer:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new PDFObjects,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this.destroyed=!1}return _createClass(e,[{key:"pageNumber",get:function(){return this._pageIndex+1}},{key:"rotate",get:function(){return this._pageInfo.rotate}},{key:"ref",get:function(){return this._pageInfo.ref}},{key:"userUnit",get:function(){return this._pageInfo.userUnit}},{key:"view",get:function(){return this._pageInfo.view}},{key:"getViewport",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.scale,r=e.rotation,n=void 0===r?this.rotate:r,o=e.offsetX,i=void 0===o?0:o,a=e.offsetY,s=void 0===a?0:a,l=e.dontFlip,c=void 0!==l&&l;return new _display_utils.PageViewport({viewBox:this.view,scale:t,rotation:n,offsetX:i,offsetY:s,dontFlip:c})}},{key:"getAnnotations",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.intent,r=void 0===t?null:t;return this._annotationsPromise&&this._annotationsIntent===r||(this._annotationsPromise=this._transport.getAnnotations(this._pageIndex,r),this._annotationsIntent=r),this._annotationsPromise}},{key:"getJSActions",value:function(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}},{key:"getXfa",value:function(){return this._xfaPromise||(this._xfaPromise=this._transport.getPageXfa(this._pageIndex))}},{key:"render",value:function(e){var t,r,n=this,o=e.canvasContext,i=e.viewport,a=e.intent,s=void 0===a?"display":a,l=e.renderInteractiveForms,c=void 0!==l&&l,u=e.transform,d=void 0===u?null:u,p=e.imageLayer,f=void 0===p?null:p,h=e.canvasFactory,m=void 0===h?null:h,g=e.background,y=void 0===g?null:g,v=e.includeAnnotationStorage,b=void 0!==v&&v,_=e.optionalContentConfigPromise,S=void 0===_?null:_;void 0!==(null===(t=arguments[0])||void 0===t?void 0:t.annotationStorage)&&((0,_display_utils.deprecated)("render no longer accepts an `annotationStorage` option, please use the `includeAnnotationStorage`-boolean instead."),b||(b=!!arguments[0].annotationStorage)),this._stats&&this._stats.time("Overall");var w="print"===s?"print":"display";this.pendingCleanup=!1,S||(S=this._transport.getOptionalContentConfig());var x=this._intentStates.get(w);x||(x=Object.create(null),this._intentStates.set(w,x)),x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null);var E=m||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),A=b?this._transport.annotationStorage.serializable:null;x.displayReadyCapability||(x.displayReadyCapability=(0,_util.createPromiseCapability)(),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList({pageIndex:this._pageIndex,intent:w,renderInteractiveForms:!0===c,annotationStorage:A}));var k=function(e){x.renderTasks.delete(P),(n.cleanupAfterRender||"print"===w)&&(n.pendingCleanup=!0),n._tryCleanup(),e?(P.capability.reject(e),n._abortOperatorList({intentState:x,reason:e})):P.capability.resolve(),n._stats&&(n._stats.timeEnd("Rendering"),n._stats.timeEnd("Overall"))},P=new InternalRenderTask({callback:k,params:{canvasContext:o,viewport:i,transform:d,imageLayer:f,background:y},objs:this.objs,commonObjs:this.commonObjs,operatorList:x.operatorList,pageIndex:this._pageIndex,canvasFactory:E,useRequestAnimationFrame:"print"!==w,pdfBug:this._pdfBug});((r=x).renderTasks||(r.renderTasks=new Set)).add(P);var T=P.task;return Promise.all([x.displayReadyCapability.promise,S]).then((function(e){var t=_slicedToArray(e,2),r=t[0],o=t[1];n.pendingCleanup?k():(n._stats&&n._stats.time("Rendering"),P.initializeGraphics({transparency:r,optionalContentConfig:o}),P.operatorListChanged())})).catch(k),T}},{key:"getOperatorList",value:function(){var e,t,r="oplist",n=this._intentStates.get(r);return n||(n=Object.create(null),this._intentStates.set(r,n)),n.opListReadCapability||((e=Object.create(null)).operatorListChanged=function(){n.operatorList.lastChunk&&(n.opListReadCapability.resolve(n.operatorList),n.renderTasks.delete(e))},n.opListReadCapability=(0,_util.createPromiseCapability)(),((t=n).renderTasks||(t.renderTasks=new Set)).add(e),n.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList({pageIndex:this._pageIndex,intent:r})),n.opListReadCapability.promise}},{key:"streamTextContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.normalizeWhitespace,r=void 0!==t&&t,n=e.disableCombineTextItems,o=void 0!==n&&n,i=e.includeMarkedContent,a=void 0!==i&&i,s=100;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,normalizeWhitespace:!0===r,combineTextItems:!0!==o,includeMarkedContent:!0===a},{highWaterMark:s,size:function(e){return e.items.length}})}},{key:"getTextContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.streamTextContent(e);return new Promise((function(e,r){var n=t.getReader(),o={items:[],styles:Object.create(null)};!function t(){n.read().then((function(r){var n,i=r.value;r.done?e(o):(Object.assign(o.styles,i.styles),(n=o.items).push.apply(n,_toConsumableArray(i.items)),t())}),r)}()}))}},{key:"getStructTree",value:function(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}},{key:"_destroy",value:function(){this.destroyed=!0,this._transport.pageCache[this._pageIndex]=null;var e,t=[],r=_createForOfIteratorHelper(this._intentStates);try{for(r.s();!(e=r.n()).done;){var n=_slicedToArray(e.value,2),o=n[0],i=n[1];if(this._abortOperatorList({intentState:i,reason:new Error("Page was destroyed."),force:!0}),"oplist"!==o){var a,s=_createForOfIteratorHelper(i.renderTasks);try{for(s.s();!(a=s.n()).done;){var l=a.value;t.push(l.completed),l.cancel()}}catch(c){s.e(c)}finally{s.f()}}}}catch(c){r.e(c)}finally{r.f()}return this.objs.clear(),this._annotationsPromise=null,this._jsActionsPromise=null,this._xfaPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(t)}},{key:"cleanup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.pendingCleanup=!0,this._tryCleanup(e)}},{key:"_tryCleanup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.pendingCleanup)return!1;var t,r=_createForOfIteratorHelper(this._intentStates.values());try{for(r.s();!(t=r.n()).done;){var n=t.value,o=n.renderTasks,i=n.operatorList;if(o.size>0||!i.lastChunk)return!1}}catch(a){r.e(a)}finally{r.f()}return this._intentStates.clear(),this.objs.clear(),this._annotationsPromise=null,this._jsActionsPromise=null,this._xfaPromise=null,this._structTreePromise=null,e&&this._stats&&(this._stats=new _display_utils.StatTimer),this.pendingCleanup=!1,!0}},{key:"_startRenderPage",value:function(e,t){var r=this._intentStates.get(t);r&&(this._stats&&this._stats.timeEnd("Page Request"),r.displayReadyCapability&&r.displayReadyCapability.resolve(e))}},{key:"_renderPageChunk",value:function(e,t){for(var r=0,n=e.length;r<n;r++)t.operatorList.fnArray.push(e.fnArray[r]),t.operatorList.argsArray.push(e.argsArray[r]);t.operatorList.lastChunk=e.lastChunk;var o,i=_createForOfIteratorHelper(t.renderTasks);try{for(i.s();!(o=i.n()).done;)o.value.operatorListChanged()}catch(a){i.e(a)}finally{i.f()}e.lastChunk&&this._tryCleanup()}},{key:"_pumpOperatorList",value:function(e){var t=this;(0,_util.assert)(e.intent,'PDFPageProxy._pumpOperatorList: Expected "intent" argument.');var r=this._transport.messageHandler.sendWithStream("GetOperatorList",e).getReader(),n=this._intentStates.get(e.intent);n.streamReader=r,function e(){r.read().then((function(r){var o=r.value;r.done?n.streamReader=null:t._transport.destroyed||(t._renderPageChunk(o,n),e())}),(function(e){if(n.streamReader=null,!t._transport.destroyed){if(n.operatorList){n.operatorList.lastChunk=!0;var r,o=_createForOfIteratorHelper(n.renderTasks);try{for(o.s();!(r=o.n()).done;)r.value.operatorListChanged()}catch(i){o.e(i)}finally{o.f()}t._tryCleanup()}if(n.displayReadyCapability)n.displayReadyCapability.reject(e);else{if(!n.opListReadCapability)throw e;n.opListReadCapability.reject(e)}}}))}()}},{key:"_abortOperatorList",value:function(e){var t=this,r=e.intentState,n=e.reason,o=e.force,i=void 0!==o&&o;if((0,_util.assert)(n instanceof Error||"object"===_typeof(n)&&null!==n,'PDFPageProxy._abortOperatorList: Expected "reason" argument.'),r.streamReader){if(!i){if(r.renderTasks.size>0)return;if(n instanceof _display_utils.RenderingCancelledException)return void(r.streamReaderCancelTimeout=setTimeout((function(){t._abortOperatorList({intentState:r,reason:n,force:!0}),r.streamReaderCancelTimeout=null}),RENDERING_CANCELLED_TIMEOUT))}if(r.streamReader.cancel(new _util.AbortException(null==n?void 0:n.message)),r.streamReader=null,!this._transport.destroyed){var a,s=_createForOfIteratorHelper(this._intentStates);try{for(s.s();!(a=s.n()).done;){var l=_slicedToArray(a.value,2),c=l[0];if(l[1]===r){this._intentStates.delete(c);break}}}catch(u){s.e(u)}finally{s.f()}this.cleanup()}}}},{key:"stats",get:function(){return this._stats}}]),e}();exports.PDFPageProxy=PDFPageProxy;var LoopbackPort=function(){function e(){_classCallCheck(this,e),this._listeners=[],this._deferred=Promise.resolve(void 0)}return _createClass(e,[{key:"postMessage",value:function(e,t){var r=this,n=new WeakMap,o={data:function e(r){if("object"!==_typeof(r)||null===r)return r;if(n.has(r))return n.get(r);var o,i;if((o=r.buffer)&&(0,_util.isArrayBuffer)(o))return i=null!=t&&t.includes(o)?new r.constructor(o,r.byteOffset,r.byteLength):new r.constructor(r),n.set(r,i),i;if(r instanceof Map){i=new Map,n.set(r,i);var a,s=_createForOfIteratorHelper(r);try{for(s.s();!(a=s.n()).done;){var l=_slicedToArray(a.value,2),c=l[0],u=l[1];i.set(c,e(u))}}catch(v){s.e(v)}finally{s.f()}return i}if(r instanceof Set){i=new Set,n.set(r,i);var d,p=_createForOfIteratorHelper(r);try{for(p.s();!(d=p.n()).done;){var f=d.value;i.add(e(f))}}catch(v){p.e(v)}finally{p.f()}return i}if(r instanceof URL)throw new Error("LoopbackPort.postMessage - cannot clone: ".concat(r));for(var h in i=Array.isArray(r)?[]:Object.create(null),n.set(r,i),r){for(var m,g=void 0,y=r;!(g=Object.getOwnPropertyDescriptor(y,h));)y=Object.getPrototypeOf(y);if(void 0!==g.value)if("function"!=typeof g.value)i[h]=e(g.value);else if(null!==(m=r.hasOwnProperty)&&void 0!==m&&m.call(r,h))throw new Error("LoopbackPort.postMessage - cannot clone: ".concat(r[h]))}return i}(e)};this._deferred.then((function(){var e,t=_createForOfIteratorHelper(r._listeners);try{for(t.s();!(e=t.n()).done;)e.value.call(r,o)}catch(n){t.e(n)}finally{t.f()}}))}},{key:"addEventListener",value:function(e,t){this._listeners.push(t)}},{key:"removeEventListener",value:function(e,t){var r=this._listeners.indexOf(t);this._listeners.splice(r,1)}},{key:"terminate",value:function(){this._listeners.length=0}}]),e}();exports.LoopbackPort=LoopbackPort;var PDFWorker=function PDFWorkerClosure(){var pdfWorkerPorts=new WeakMap,isWorkerDisabled=!1,fallbackWorkerSrc,nextFakeWorkerId=0,fakeWorkerCapability;if(_is_node.isNodeJS&&"function"==typeof commonjsRequire)isWorkerDisabled=!0,fallbackWorkerSrc="./pdf.worker.js";else if("object"===("undefined"==typeof document?"undefined":_typeof(document))&&"currentScript"in document){var _document$currentScri,pdfjsFilePath=null===(_document$currentScri=document.currentScript)||void 0===_document$currentScri?void 0:_document$currentScri.src;pdfjsFilePath&&(fallbackWorkerSrc=pdfjsFilePath.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}function _getWorkerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(void 0!==fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}function getMainThreadWorkerMessageHandler(){var e;try{var t;e=null===(t=globalThis.pdfjsWorker)||void 0===t?void 0:t.WorkerMessageHandler}catch(r){}return e||null}function setupFakeWorkerGlobal(){if(fakeWorkerCapability)return fakeWorkerCapability.promise;fakeWorkerCapability=(0,_util.createPromiseCapability)();var loader=function(){var _ref12=_asyncToGenerator(_regenerator.default.mark((function _callee(){var mainWorkerMessageHandler,worker;return _regenerator.default.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(mainWorkerMessageHandler=getMainThreadWorkerMessageHandler(),!mainWorkerMessageHandler){_context.next=3;break}return _context.abrupt("return",mainWorkerMessageHandler);case 3:if(!_is_node.isNodeJS||"function"!=typeof commonjsRequire){_context.next=6;break}return worker=eval("require")(_getWorkerSrc()),_context.abrupt("return",worker.WorkerMessageHandler);case 6:return _context.next=8,(0,_display_utils.loadScript)(_getWorkerSrc());case 8:return _context.abrupt("return",window.pdfjsWorker.WorkerMessageHandler);case 9:case"end":return _context.stop()}}),_callee)})));return function(){return _ref12.apply(this,arguments)}}();return loader().then(fakeWorkerCapability.resolve,fakeWorkerCapability.reject),fakeWorkerCapability.promise}function createCDNWrapper(e){var t="importScripts('"+e+"');";return URL.createObjectURL(new Blob([t]))}var PDFWorker=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.name,n=void 0===r?null:r,o=t.port,i=void 0===o?null:o,a=t.verbosity,s=void 0===a?(0,_util.getVerbosityLevel)():a;if(_classCallCheck(this,e),i&&pdfWorkerPorts.has(i))throw new Error("Cannot use more than one PDFWorker per port");if(this.name=n,this.destroyed=!1,this.postMessageTransfers=!0,this.verbosity=s,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,i)return pdfWorkerPorts.set(i,this),void this._initializeFromPort(i);this._initialize()}return _createClass(e,[{key:"promise",get:function(){return this._readyCapability.promise}},{key:"port",get:function(){return this._port}},{key:"messageHandler",get:function(){return this._messageHandler}},{key:"_initializeFromPort",value:function(e){this._port=e,this._messageHandler=new _message_handler.MessageHandler("main","worker",e),this._messageHandler.on("ready",(function(){})),this._readyCapability.resolve()}},{key:"_initialize",value:function(){var e=this;if("undefined"!=typeof Worker&&!isWorkerDisabled&&!getMainThreadWorkerMessageHandler()){var t=_getWorkerSrc();try{(0,_util.isSameOrigin)(window.location.href,t)||(t=createCDNWrapper(new URL(t,window.location).href));var r=new Worker(t),n=new _message_handler.MessageHandler("main","worker",r),o=function(){r.removeEventListener("error",i),n.destroy(),r.terminate(),e.destroyed?e._readyCapability.reject(new Error("Worker was destroyed")):e._setupFakeWorker()},i=function(){e._webWorker||o()};r.addEventListener("error",i),n.on("test",(function(t){r.removeEventListener("error",i),e.destroyed?o():t?(e._messageHandler=n,e._port=r,e._webWorker=r,t.supportTransfers||(e.postMessageTransfers=!1),e._readyCapability.resolve(),n.send("configure",{verbosity:e.verbosity})):(e._setupFakeWorker(),n.destroy(),r.terminate())})),n.on("ready",(function(t){if(r.removeEventListener("error",i),e.destroyed)o();else try{a()}catch(n){e._setupFakeWorker()}}));var a=function(){var t=new Uint8Array([e.postMessageTransfers?255:0]);try{n.send("test",t,[t.buffer])}catch(r){(0,_util.warn)("Cannot use postMessage transfers."),t[0]=0,n.send("test",t)}};return void a()}catch(s){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}},{key:"_setupFakeWorker",value:function(){var e=this;isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),isWorkerDisabled=!0),setupFakeWorkerGlobal().then((function(t){if(e.destroyed)e._readyCapability.reject(new Error("Worker was destroyed"));else{var r=new LoopbackPort;e._port=r;var n="fake"+nextFakeWorkerId++,o=new _message_handler.MessageHandler(n+"_worker",n,r);t.setup(o,r);var i=new _message_handler.MessageHandler(n,n+"_worker",r);e._messageHandler=i,e._readyCapability.resolve(),i.send("configure",{verbosity:e.verbosity})}})).catch((function(t){e._readyCapability.reject(new Error('Setting up fake worker failed: "'.concat(t.message,'".')))}))}},{key:"destroy",value:function(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),pdfWorkerPorts.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}}],[{key:"fromPort",value:function(t){if(!t||!t.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return pdfWorkerPorts.has(t.port)?pdfWorkerPorts.get(t.port):new e(t)}},{key:"getWorkerSrc",value:function(){return _getWorkerSrc()}}]),e}();return PDFWorker}();exports.PDFWorker=PDFWorker;var WorkerTransport=function(){function e(t,r,n,o){_classCallCheck(this,e),this.messageHandler=t,this.loadingTask=r,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:r.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:o.ownerDocument}),this._params=o,this.CMapReaderFactory=new o.CMapReaderFactory({baseUrl:o.cMapUrl,isCompressed:o.cMapPacked}),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.pageCache=[],this.pagePromises=[],this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}var t;return _createClass(e,[{key:"annotationStorage",get:function(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}},{key:"destroy",value:function(){var e=this;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));var t,r=[],n=_createForOfIteratorHelper(this.pageCache);try{for(n.s();!(t=n.n()).done;){var o=t.value;o&&r.push(o._destroy())}}catch(a){n.e(a)}finally{n.f()}this.pageCache.length=0,this.pagePromises.length=0,this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();var i=this.messageHandler.sendWithPromise("Terminate",null);return r.push(i),Promise.all(r).then((function(){e.commonObjs.clear(),e.fontLoader.clear(),e._hasJSActionsPromise=null,e._networkStream&&e._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),e.messageHandler&&(e.messageHandler.destroy(),e.messageHandler=null),e.destroyCapability.resolve()}),this.destroyCapability.reject),this.destroyCapability.promise}},{key:"setupMessageHandler",value:function(){var e=this,t=this.messageHandler,r=this.loadingTask;t.on("GetReader",(function(t,r){(0,_util.assert)(e._networkStream,"GetReader - no `IPDFStream` instance available."),e._fullReader=e._networkStream.getFullReader(),e._fullReader.onProgress=function(t){e._lastProgress={loaded:t.loaded,total:t.total}},r.onPull=function(){e._fullReader.read().then((function(e){var t=e.value;e.done?r.close():((0,_util.assert)((0,_util.isArrayBuffer)(t),"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(t),1,[t]))})).catch((function(e){r.error(e)}))},r.onCancel=function(t){e._fullReader.cancel(t),r.ready.catch((function(t){if(!e.destroyed)throw t}))}})),t.on("ReaderHeadersReady",(function(t){var n=(0,_util.createPromiseCapability)(),o=e._fullReader;return o.headersReady.then((function(){o.isStreamingSupported&&o.isRangeSupported||(e._lastProgress&&r.onProgress&&r.onProgress(e._lastProgress),o.onProgress=function(e){r.onProgress&&r.onProgress({loaded:e.loaded,total:e.total})}),n.resolve({isStreamingSupported:o.isStreamingSupported,isRangeSupported:o.isRangeSupported,contentLength:o.contentLength})}),n.reject),n.promise})),t.on("GetRangeReader",(function(t,r){(0,_util.assert)(e._networkStream,"GetRangeReader - no `IPDFStream` instance available.");var n=e._networkStream.getRangeReader(t.begin,t.end);n?(r.onPull=function(){n.read().then((function(e){var t=e.value;e.done?r.close():((0,_util.assert)((0,_util.isArrayBuffer)(t),"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(t),1,[t]))})).catch((function(e){r.error(e)}))},r.onCancel=function(t){n.cancel(t),r.ready.catch((function(t){if(!e.destroyed)throw t}))}):r.close()})),t.on("GetDoc",(function(t){var n=t.pdfInfo;e._numPages=n.numPages,r._capability.resolve(new PDFDocumentProxy(n,e))})),t.on("DocException",(function(e){var t;switch(e.name){case"PasswordException":t=new _util.PasswordException(e.message,e.code);break;case"InvalidPDFException":t=new _util.InvalidPDFException(e.message);break;case"MissingPDFException":t=new _util.MissingPDFException(e.message);break;case"UnexpectedResponseException":t=new _util.UnexpectedResponseException(e.message,e.status);break;case"UnknownErrorException":t=new _util.UnknownErrorException(e.message,e.details)}t instanceof Error||(0,_util.warn)("DocException - expected a valid Error."),r._capability.reject(t)})),t.on("PasswordRequest",(function(t){if(e._passwordCapability=(0,_util.createPromiseCapability)(),r.onPassword)try{r.onPassword((function(t){e._passwordCapability.resolve({password:t})}),t.code)}catch(n){e._passwordCapability.reject(n)}else e._passwordCapability.reject(new _util.PasswordException(t.message,t.code));return e._passwordCapability.promise})),t.on("DataLoaded",(function(t){r.onProgress&&r.onProgress({loaded:t.length,total:t.length}),e.downloadInfoCapability.resolve(t)})),t.on("StartRenderPage",(function(t){e.destroyed||e.pageCache[t.pageIndex]._startRenderPage(t.transparency,t.intent)})),t.on("commonobj",(function(r){var n;if(!e.destroyed){var o=_slicedToArray(r,3),i=o[0],a=o[1],s=o[2];if(!e.commonObjs.has(i))switch(a){case"Font":var l=e._params;if("error"in s){var c=s.error;(0,_util.warn)("Error during font loading: ".concat(c)),e.commonObjs.resolve(i,c);break}var u=null;l.pdfBug&&null!==(n=globalThis.FontInspector)&&void 0!==n&&n.enabled&&(u={registerFont:function(e,t){globalThis.FontInspector.fontAdded(e,t)}});var d=new _font_loader.FontFaceObject(s,{isEvalSupported:l.isEvalSupported,disableFontFace:l.disableFontFace,ignoreErrors:l.ignoreErrors,onUnsupportedFeature:e._onUnsupportedFeature.bind(e),fontRegistry:u});e.fontLoader.bind(d).catch((function(e){return t.sendWithPromise("FontFallback",{id:i})})).finally((function(){!l.fontExtraProperties&&d.data&&(d.data=null),e.commonObjs.resolve(i,d)}));break;case"FontPath":case"Image":e.commonObjs.resolve(i,s);break;default:throw new Error("Got unknown common object type ".concat(a))}}})),t.on("obj",(function(t){var r;if(!e.destroyed){var n=_slicedToArray(t,4),o=n[0],i=n[1],a=n[2],s=n[3],l=e.pageCache[i];if(!l.objs.has(o))switch(a){case"Image":l.objs.resolve(o,s),(null==s||null===(r=s.data)||void 0===r?void 0:r.length)>8e6&&(l.cleanupAfterRender=!0);break;default:throw new Error("Got unknown object type ".concat(a))}}})),t.on("DocProgress",(function(t){e.destroyed||r.onProgress&&r.onProgress({loaded:t.loaded,total:t.total})})),t.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),t.on("FetchBuiltInCMap",(function(t,r){if(e.destroyed)r.error(new Error("Worker was destroyed"));else{var n=!1;r.onPull=function(){n?r.close():(n=!0,e.CMapReaderFactory.fetch(t).then((function(e){r.enqueue(e,1,[e.cMapData.buffer])})).catch((function(e){r.error(e)})))}}}))}},{key:"_onUnsupportedFeature",value:function(e){var t=e.featureId;this.destroyed||this.loadingTask.onUnsupportedFeature&&this.loadingTask.onUnsupportedFeature(t)}},{key:"getData",value:function(){return this.messageHandler.sendWithPromise("GetData",null)}},{key:"getPage",value:function(e){var t=this;if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request"));var r=e-1;if(r in this.pagePromises)return this.pagePromises[r];var n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:r}).then((function(e){if(t.destroyed)throw new Error("Transport destroyed");var n=new PDFPageProxy(r,e,t,t._params.ownerDocument,t._params.pdfBug);return t.pageCache[r]=n,n}));return this.pagePromises[r]=n,n}},{key:"getPageIndex",value:function(e){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:e}).catch((function(e){return Promise.reject(new Error(e))}))}},{key:"getAnnotations",value:function(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}},{key:"saveDocument",value:function(){var e,t,r=this;return this.messageHandler.sendWithPromise("SaveDocument",{numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:null!==(e=null===(t=this._fullReader)||void 0===t?void 0:t.filename)&&void 0!==e?e:null}).finally((function(){r.annotationStorage.resetModified()}))}},{key:"getFieldObjects",value:function(){return this.messageHandler.sendWithPromise("GetFieldObjects",null)}},{key:"hasJSActions",value:function(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}},{key:"getCalculationOrderIds",value:function(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}},{key:"getDestinations",value:function(){return this.messageHandler.sendWithPromise("GetDestinations",null)}},{key:"getDestination",value:function(e){return"string"!=typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}},{key:"getPageLabels",value:function(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}},{key:"getPageLayout",value:function(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}},{key:"getPageMode",value:function(){return this.messageHandler.sendWithPromise("GetPageMode",null)}},{key:"getViewerPreferences",value:function(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}},{key:"getOpenAction",value:function(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}},{key:"getAttachments",value:function(){return this.messageHandler.sendWithPromise("GetAttachments",null)}},{key:"getJavaScript",value:function(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}},{key:"getDocJSActions",value:function(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}},{key:"getPageJSActions",value:function(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}},{key:"getPageXfa",value:function(e){return this.messageHandler.sendWithPromise("GetPageXfa",{pageIndex:e})}},{key:"getStructTree",value:function(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}},{key:"getOutline",value:function(){return this.messageHandler.sendWithPromise("GetOutline",null)}},{key:"getOptionalContentConfig",value:function(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then((function(e){return new _optional_content_config.OptionalContentConfig(e)}))}},{key:"getPermissions",value:function(){return this.messageHandler.sendWithPromise("GetPermissions",null)}},{key:"getMetadata",value:function(){var e=this;return this.messageHandler.sendWithPromise("GetMetadata",null).then((function(t){var r,n,o,i;return{info:t[0],metadata:t[1]?new _metadata.Metadata(t[1]):null,contentDispositionFilename:null!==(r=null===(n=e._fullReader)||void 0===n?void 0:n.filename)&&void 0!==r?r:null,contentLength:null!==(o=null===(i=e._fullReader)||void 0===i?void 0:i.contentLength)&&void 0!==o?o:null}}))}},{key:"getMarkInfo",value:function(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}},{key:"getStats",value:function(){return this.messageHandler.sendWithPromise("GetStats",null)}},{key:"startCleanup",value:(t=_asyncToGenerator(_regenerator.default.mark((function e(){var t,r,n,o,i=arguments;return _regenerator.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]&&i[0],e.next=3,this.messageHandler.sendWithPromise("Cleanup",null);case 3:if(!this.destroyed){e.next=5;break}return e.abrupt("return");case 5:r=0,n=this.pageCache.length;case 6:if(!(r<n)){e.next=16;break}if(o=this.pageCache[r]){e.next=10;break}return e.abrupt("continue",13);case 10:if(o.cleanup()){e.next=13;break}throw new Error("startCleanup: Page ".concat(r+1," is currently rendering."));case 13:r++,e.next=6;break;case 16:this.commonObjs.clear(),t||this.fontLoader.clear(),this._hasJSActionsPromise=null;case 19:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"loadingParams",get:function(){var e=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e.disableAutoFetch,disableFontFace:e.disableFontFace})}}]),e}(),PDFObjects=function(){function e(){_classCallCheck(this,e),this._objs=Object.create(null)}return _createClass(e,[{key:"_ensureObj",value:function(e){return this._objs[e]?this._objs[e]:this._objs[e]={capability:(0,_util.createPromiseCapability)(),data:null,resolved:!1}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t)return this._ensureObj(e).capability.promise.then(t),null;var r=this._objs[e];if(!r||!r.resolved)throw new Error("Requesting object that isn't resolved yet ".concat(e,"."));return r.data}},{key:"has",value:function(e){var t=this._objs[e];return(null==t?void 0:t.resolved)||!1}},{key:"resolve",value:function(e,t){var r=this._ensureObj(e);r.resolved=!0,r.data=t,r.capability.resolve(t)}},{key:"clear",value:function(){this._objs=Object.create(null)}}]),e}(),RenderTask=function(){function e(t){_classCallCheck(this,e),this._internalRenderTask=t,this.onContinue=null}return _createClass(e,[{key:"promise",get:function(){return this._internalRenderTask.capability.promise}},{key:"cancel",value:function(){this._internalRenderTask.cancel()}}]),e}(),InternalRenderTask=(canvasInRendering=new WeakSet,function(){function e(t){var r=t.callback,n=t.params,o=t.objs,i=t.commonObjs,a=t.operatorList,s=t.pageIndex,l=t.canvasFactory,c=t.useRequestAnimationFrame,u=void 0!==c&&c,d=t.pdfBug,p=void 0!==d&&d;_classCallCheck(this,e),this.callback=r,this.params=n,this.objs=o,this.commonObjs=i,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=s,this.canvasFactory=l,this._pdfBug=p,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===u&&"undefined"!=typeof window,this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}var t;return _createClass(e,[{key:"completed",get:function(){return this.capability.promise.catch((function(){}))}},{key:"initializeGraphics",value:function(e){var t,r=e.transparency,n=void 0!==r&&r,o=e.optionalContentConfig;if(!this.cancelled){if(this._canvas){if(canvasInRendering.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");canvasInRendering.add(this._canvas)}this._pdfBug&&null!==(t=globalThis.StepperManager)&&void 0!==t&&t.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());var i=this.params,a=i.canvasContext,s=i.viewport,l=i.transform,c=i.imageLayer,u=i.background;this.gfx=new _canvas.CanvasGraphics(a,this.commonObjs,this.objs,this.canvasFactory,c,o),this.gfx.beginDrawing({transform:l,viewport:s,transparency:n,background:u}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}}},{key:"cancel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&canvasInRendering.delete(this._canvas),this.callback(e||new _display_utils.RenderingCancelledException("Rendering cancelled, page ".concat(this._pageIndex+1),"canvas"))}},{key:"operatorListChanged",value:function(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}},{key:"_continue",value:function(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}},{key:"_scheduleNext",value:function(){var e=this;this._useRequestAnimationFrame?window.requestAnimationFrame((function(){e._nextBound().catch(e._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}},{key:"_next",value:(t=_asyncToGenerator(_regenerator.default.mark((function e(){return _regenerator.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.cancelled){e.next=2;break}return e.abrupt("return");case 2:this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&canvasInRendering.delete(this._canvas),this.callback()));case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}()),canvasInRendering,version="2.9.359";exports.version=version;var build="e667c8cbc";exports.build=build},(e,t,r)=>{function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var o,i=(o=r(2))&&o.__esModule?o:{default:o},a=r(4);function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,o)}function p(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e,t,r){return t&&m(e.prototype,t),r&&m(e,r),e}var y,v=function(){function e(t){var r=t.docId,n=t.onUnsupportedFeature,o=t.ownerDocument,i=void 0===o?globalThis.document:o;h(this,e),this.constructor===e&&(0,a.unreachable)("Cannot initialize BaseFontLoader."),this.docId=r,this._onUnsupportedFeature=n,this._document=i,this.nativeFontFaces=[],this.styleElement=null}var t,r;return g(e,[{key:"addNativeFontFace",value:function(e){this.nativeFontFaces.push(e),this._document.fonts.add(e)}},{key:"insertRule",value:function(e){var t=this.styleElement;t||((t=this.styleElement=this._document.createElement("style")).id="PDFJS_FONT_STYLE_TAG_".concat(this.docId),this._document.documentElement.getElementsByTagName("head")[0].appendChild(t));var r=t.sheet;r.insertRule(e,r.cssRules.length)}},{key:"clear",value:function(){var e,t=p(this.nativeFontFaces);try{for(t.s();!(e=t.n()).done;){var r=e.value;this._document.fonts.delete(r)}}catch(n){t.e(n)}finally{t.f()}this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}},{key:"bind",value:(t=i.default.mark((function e(t){var r,n,o=this;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.attached&&!t.missingFile){e.next=2;break}return e.abrupt("return");case 2:if(t.attached=!0,!this.isFontLoadingAPISupported){e.next=19;break}if(!(r=t.createNativeFontFace())){e.next=18;break}return this.addNativeFontFace(r),e.prev=7,e.next=10,r.loaded;case 10:e.next=18;break;case 12:throw e.prev=12,e.t0=e.catch(7),this._onUnsupportedFeature({featureId:a.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,a.warn)("Failed to load font '".concat(r.family,"': '").concat(e.t0,"'.")),t.disableFontFace=!0,e.t0;case 18:return e.abrupt("return");case 19:if(!(n=t.createFontFaceRule())){e.next=26;break}if(this.insertRule(n),!this.isSyncFontLoadingSupported){e.next=24;break}return e.abrupt("return");case 24:return e.next=26,new Promise((function(e){var r=o._queueLoadingCallback(e);o._prepareFontLoadEvent([n],[t],r)}));case 26:case"end":return e.stop()}}),e,this,[[7,12]])})),r=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(e){d(i,n,o,a,s,"next",e)}function s(e){d(i,n,o,a,s,"throw",e)}a(void 0)}))},function(e){return r.apply(this,arguments)})},{key:"_queueLoadingCallback",value:function(e){(0,a.unreachable)("Abstract method `_queueLoadingCallback`.")}},{key:"isFontLoadingAPISupported",get:function(){var e;return(0,a.shadow)(this,"isFontLoadingAPISupported",!(null===(e=this._document)||void 0===e||!e.fonts))}},{key:"isSyncFontLoadingSupported",get:function(){(0,a.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}},{key:"_loadTestFont",get:function(){(0,a.unreachable)("Abstract method `_loadTestFont`.")}},{key:"_prepareFontLoadEvent",value:function(e,t,r){(0,a.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}]),e}();t.FontLoader=y,t.FontLoader=y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(r,e);var t=l(r);function r(e){var n;return h(this,r),(n=t.call(this,e)).loadingContext={requests:[],nextRequestId:0},n.loadTestFontId=0,n}return g(r,[{key:"isSyncFontLoadingSupported",get:function(){var e=!1;if("undefined"==typeof navigator)e=!0;else{var t=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(null==t?void 0:t[1])>=14&&(e=!0)}return(0,a.shadow)(this,"isSyncFontLoadingSupported",e)}},{key:"_queueLoadingCallback",value:function(e){var t=this.loadingContext,r={id:"pdfjs-font-loading-".concat(t.nextRequestId++),done:!1,complete:function(){for((0,a.assert)(!r.done,"completeRequest() cannot be called twice."),r.done=!0;t.requests.length>0&&t.requests[0].done;){var e=t.requests.shift();setTimeout(e.callback,0)}},callback:e};return t.requests.push(r),r}},{key:"_loadTestFont",get:function(){return(0,a.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}},{key:"_prepareFontLoadEvent",value:function(e,t,r){var n,o,i=this;function s(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|255&e.charCodeAt(t+3)}function l(e,t,r,n){return e.substring(0,t)+n+e.substring(t+r)}var c=this._document.createElement("canvas");c.width=1,c.height=1;var u=c.getContext("2d"),d=0,f="lt".concat(Date.now()).concat(this.loadTestFontId++),h=this._loadTestFont,m=1482184792,g=s(h=l(h,976,f.length,f),16);for(n=0,o=f.length-3;n<o;n+=4)g=g-m+s(f,n)|0;n<f.length&&(g=g-m+s(f+"XXX",n)|0),h=l(h,16,4,(0,a.string32)(g));var y="url(data:font/opentype;base64,".concat(btoa(h),");"),v='@font-face {font-family:"'.concat(f,'";src:').concat(y,"}");this.insertRule(v);var b,_=[],S=p(t);try{for(S.s();!(b=S.n()).done;){var w=b.value;_.push(w.loadedName)}}catch(T){S.e(T)}finally{S.f()}_.push(f);var x=this._document.createElement("div");x.style.visibility="hidden",x.style.width=x.style.height="10px",x.style.position="absolute",x.style.top=x.style.left="0px";for(var E=0,A=_;E<A.length;E++){var k=A[E],P=this._document.createElement("span");P.textContent="Hi",P.style.fontFamily=k,x.appendChild(P)}this._document.body.appendChild(x),function e(t,r){if(++d>30)return(0,a.warn)("Load test font never loaded."),void r();u.font="30px "+t,u.fillText(".",0,20),u.getImageData(0,0,1,1).data[3]>0?r():setTimeout(e.bind(null,t,r))}(f,(function(){i._document.body.removeChild(x),r.complete()}))}}]),r}(v);var b=function(){function e(t,r){var n=r.isEvalSupported,o=void 0===n||n,i=r.disableFontFace,a=void 0!==i&&i,s=r.ignoreErrors,l=void 0!==s&&s,c=r.onUnsupportedFeature,u=r.fontRegistry,d=void 0===u?null:u;for(var p in h(this,e),this.compiledGlyphs=Object.create(null),t)this[p]=t[p];this.isEvalSupported=!1!==o,this.disableFontFace=!0===a,this.ignoreErrors=!0===l,this._onUnsupportedFeature=c,this.fontRegistry=d}return g(e,[{key:"createNativeFontFace",value:function(){if(!this.data||this.disableFontFace)return null;var e;if(this.cssFontInfo){var t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}else e=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),e}},{key:"createFontFaceRule",value:function(){if(!this.data||this.disableFontFace)return null;var e,t=(0,a.bytesToString)(this.data),r="url(data:".concat(this.mimetype,";base64,").concat(btoa(t),");");if(this.cssFontInfo){var n="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(n+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),e='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(n,"src:").concat(r,"}")}else e='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(r,"}");return this.fontRegistry&&this.fontRegistry.registerFont(this,r),e}},{key:"getPathGenerator",value:function(e,t){if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];var r;try{r=e.get(this.loadedName+"_path_"+t)}catch(c){if(!this.ignoreErrors)throw c;return this._onUnsupportedFeature({featureId:a.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,a.warn)('getPathGenerator - ignoring character: "'.concat(c,'".')),this.compiledGlyphs[t]=function(e,t){}}if(this.isEvalSupported&&a.IsEvalSupportedCached.value){var n,o=[],i=p(r);try{for(i.s();!(n=i.n()).done;){var s=n.value,l=void 0!==s.args?s.args.join(","):"";o.push("c.",s.cmd,"(",l,");\n")}}catch(u){i.e(u)}finally{i.f()}return this.compiledGlyphs[t]=new Function("c","size",o.join(""))}return this.compiledGlyphs[t]=function(e,t){var n,o=p(r);try{for(o.s();!(n=o.n()).done;){var i=n.value;"scale"===i.cmd&&(i.args=[t,-t]),e[i.cmd].apply(e,i.args)}}catch(u){o.e(u)}finally{o.f()}}}}]),e}();t.FontFaceObject=b},(e,t,r)=>{function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.NodeCMapReaderFactory=t.NodeCanvasFactory=void 0;var o=r(1),i=r(6),a=r(4);function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var o=f(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var m=function e(){h(this,e),(0,a.unreachable)("Not implemented: NodeCanvasFactory")};t.NodeCanvasFactory=m;var g=function e(){h(this,e),(0,a.unreachable)("Not implemented: NodeCMapReaderFactory")};t.NodeCMapReaderFactory=g,i.isNodeJS&&(t.NodeCanvasFactory=m=function(e){c(r,e);var t=d(r);function r(){return h(this,r),t.apply(this,arguments)}return l(r,[{key:"create",value:function(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");var r=require$$5.createCanvas(e,t);return{canvas:r,context:r.getContext("2d")}}}]),r}(o.BaseCanvasFactory),t.NodeCMapReaderFactory=g=function(e){c(r,e);var t=d(r);function r(){return h(this,r),t.apply(this,arguments)}return l(r,[{key:"_fetchData",value:function(e,t){return new Promise((function(r,n){require$$5.readFile(e,(function(e,o){!e&&o?r({cMapData:new Uint8Array(o),compressionType:t}):n(new Error(e))}))}))}}]),r}(o.BaseCMapReaderFactory))},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationStorage=void 0;var n=r(4);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){s=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null}var t,r,i;return t=e,(r=[{key:"getValue",value:function(e,t){var r=this._storage.get(e);return void 0!==r?r:t}},{key:"setValue",value:function(e,t){var r=this._storage.get(e),n=!1;if(void 0!==r)for(var i=0,a=Object.entries(t);i<a.length;i++){var s=o(a[i],2),l=s[0],c=s[1];r[l]!==c&&(n=!0,r[l]=c)}else this._storage.set(e,t),n=!0;n&&this._setModified()}},{key:"getAll",value:function(){return this._storage.size>0?(0,n.objectFromMap)(this._storage):null}},{key:"size",get:function(){return this._storage.size}},{key:"_setModified",value:function(){this._modified||(this._modified=!0,"function"==typeof this.onSetModified&&this.onSetModified())}},{key:"resetModified",value:function(){this._modified&&(this._modified=!1,"function"==typeof this.onResetModified&&this.onResetModified())}},{key:"serializable",get:function(){return this._storage.size>0?this._storage:null}}])&&a(t.prototype,r),i&&a(t,i),e}();t.AnnotationStorage=s},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.apiCompatibilityParams=void 0;var n=r(6),o=Object.create(null);n.isNodeJS&&(o.disableFontFace=!0);var i=Object.freeze(o);t.apiCompatibilityParams=i},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var n=r(4),o=r(119);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=d(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){s=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var f=4096,h=16;function m(e){if(!e.mozCurrentTransform){e._originalSave=e.save,e._originalRestore=e.restore,e._originalRotate=e.rotate,e._originalScale=e.scale,e._originalTranslate=e.translate,e._originalTransform=e.transform,e._originalSetTransform=e.setTransform,e._originalResetTransform=e.resetTransform,e._transformMatrix=e._transformMatrix||[1,0,0,1,0,0],e._transformStack=[];try{var t=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(e),"lineWidth");e._setLineWidth=t.set,e._getLineWidth=t.get,Object.defineProperty(e,"lineWidth",{set:function(e){this._setLineWidth(1.000001*e)},get:function(){return this._getLineWidth()}})}catch(r){}Object.defineProperty(e,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(e,"mozCurrentTransformInverse",{get:function(){var e=u(this._transformMatrix,6),t=e[0],r=e[1],n=e[2],o=e[3],i=e[4],a=e[5],s=t*o-r*n,l=r*n-t*o;return[o/s,r/l,n/l,t/s,(o*i-n*a)/l,(r*i-t*a)/s]}}),e.save=function(){var e=this._transformMatrix;this._transformStack.push(e),this._transformMatrix=e.slice(0,6),this._originalSave()},e.restore=function(){var e=this._transformStack.pop();e&&(this._transformMatrix=e,this._originalRestore())},e.translate=function(e,t){var r=this._transformMatrix;r[4]=r[0]*e+r[2]*t+r[4],r[5]=r[1]*e+r[3]*t+r[5],this._originalTranslate(e,t)},e.scale=function(e,t){var r=this._transformMatrix;r[0]=r[0]*e,r[1]=r[1]*e,r[2]=r[2]*t,r[3]=r[3]*t,this._originalScale(e,t)},e.transform=function(t,r,n,o,i,a){var s=this._transformMatrix;this._transformMatrix=[s[0]*t+s[2]*r,s[1]*t+s[3]*r,s[0]*n+s[2]*o,s[1]*n+s[3]*o,s[0]*i+s[2]*a+s[4],s[1]*i+s[3]*a+s[5]],e._originalTransform(t,r,n,o,i,a)},e.setTransform=function(t,r,n,o,i,a){this._transformMatrix=[t,r,n,o,i,a],e._originalSetTransform(t,r,n,o,i,a)},e.resetTransform=function(){this._transformMatrix=[1,0,0,1,0,0],e._originalResetTransform()},e.rotate=function(e){var t=Math.cos(e),r=Math.sin(e),n=this._transformMatrix;this._transformMatrix=[n[0]*t+n[2]*r,n[1]*t+n[3]*r,n[0]*-r+n[2]*t,n[1]*-r+n[3]*t,n[4],n[5]],this._originalRotate(e)}}}var g=function(){function e(t){s(this,e),this.canvasFactory=t,this.cache=Object.create(null)}return c(e,[{key:"getCanvas",value:function(e,t,r,n){var o;return void 0!==this.cache[e]?(o=this.cache[e],this.canvasFactory.reset(o,t,r),o.context.setTransform(1,0,0,1,0,0)):(o=this.canvasFactory.create(t,r),this.cache[e]=o),n&&m(o.context),o}},{key:"clear",value:function(){for(var e in this.cache){var t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}]),e}(),y=function(){function e(){s(this,e),this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=n.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=n.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.resumeSMaskCtx=null,this.transferMaps=null}return c(e,[{key:"clone",value:function(){return Object.create(this)}},{key:"setCurrentPoint",value:function(e,t){this.x=e,this.y=t}}]),e}(),v=function(){function e(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("undefined"!=typeof ImageData&&t instanceof ImageData)e.putImageData(t,0,0);else{var o,i,a,s,l,c,u,d,p,f=t.height,m=t.width,g=f%h,y=(f-g)/h,v=0===g?y:y+1,b=e.createImageData(m,h),_=0,S=t.data,w=b.data;if(r)switch(r.length){case 1:c=r[0],u=r[0],d=r[0],p=r[0];break;case 4:c=r[0],u=r[1],d=r[2],p=r[3]}if(t.kind===n.ImageKind.GRAYSCALE_1BPP){var x=S.byteLength,E=new Uint32Array(w.buffer,0,w.byteLength>>2),A=E.length,k=m+7>>3,P=4294967295,T=n.IsLittleEndianCached.value?4278190080:255;if(p&&255===p[0]&&0===p[255]){var C=[T,P];P=C[0],T=C[1]}for(i=0;i<v;i++){for(s=i<y?h:g,o=0,a=0;a<s;a++){for(var R=x-_,O=0,I=R>k?m:8*R-7,L=-8&I,D=0,j=0;O<L;O+=8)j=S[_++],E[o++]=128&j?P:T,E[o++]=64&j?P:T,E[o++]=32&j?P:T,E[o++]=16&j?P:T,E[o++]=8&j?P:T,E[o++]=4&j?P:T,E[o++]=2&j?P:T,E[o++]=1&j?P:T;for(;O<I;O++)0===D&&(j=S[_++],D=128),E[o++]=j&D?P:T,D>>=1}for(;o<A;)E[o++]=0;e.putImageData(b,0,i*h)}}else if(t.kind===n.ImageKind.RGBA_32BPP){var M=!!(c||u||d);for(a=0,l=m*h*4,i=0;i<y;i++){if(w.set(S.subarray(_,_+l)),_+=l,M)for(var N=0;N<l;N+=4)c&&(w[N+0]=c[w[N+0]]),u&&(w[N+1]=u[w[N+1]]),d&&(w[N+2]=d[w[N+2]]);e.putImageData(b,0,a),a+=h}if(i<v){if(l=m*g*4,w.set(S.subarray(_,_+l)),M)for(var F=0;F<l;F+=4)c&&(w[F+0]=c[w[F+0]]),u&&(w[F+1]=u[w[F+1]]),d&&(w[F+2]=d[w[F+2]]);e.putImageData(b,0,a)}}else{if(t.kind!==n.ImageKind.RGB_24BPP)throw new Error("bad image kind: ".concat(t.kind));var $=!!(c||u||d);for(l=m*(s=h),i=0;i<v;i++){for(i>=y&&(l=m*(s=g)),o=0,a=l;a--;)w[o++]=S[_++],w[o++]=S[_++],w[o++]=S[_++],w[o++]=255;if($)for(var B=0;B<o;B+=4)c&&(w[B+0]=c[w[B+0]]),u&&(w[B+1]=u[w[B+1]]),d&&(w[B+2]=d[w[B+2]]);e.putImageData(b,0,i*h)}}}}function t(e,t){for(var r=t.height,n=t.width,o=r%h,i=(r-o)/h,a=0===o?i:i+1,s=e.createImageData(n,h),l=0,c=t.data,u=s.data,d=0;d<a;d++){for(var p=d<i?h:o,f=3,m=0;m<p;m++)for(var g=void 0,y=0,v=0;v<n;v++)y||(g=c[l++],y=128),u[f]=g&y?0:255,f+=4,y>>=1;e.putImageData(s,0,d*h)}}function r(e,t){for(var r=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"],n=0,o=r.length;n<o;n++){var i=r[n];void 0!==e[i]&&(t[i]=e[i])}void 0!==e.setLineDash&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function l(e){e.strokeStyle="#000000",e.fillStyle="#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",void 0!==e.setLineDash&&(e.setLineDash([]),e.lineDashOffset=0)}function u(e,t,r,n){for(var o=e.length,i=3;i<o;i+=4){var a=e[i];if(0===a)e[i-3]=t,e[i-2]=r,e[i-1]=n;else if(a<255){var s=255-a;e[i-3]=e[i-3]*a+t*s>>8,e[i-2]=e[i-2]*a+r*s>>8,e[i-1]=e[i-1]*a+n*s>>8}}}function d(e,t,r){for(var n=e.length,o=3;o<n;o+=4){var i=r?r[e[o]]:e[o];t[o]=t[o]*i*.00392156862745098|0}}function p(e,t,r){for(var n=e.length,o=3;o<n;o+=4){var i=77*e[o-3]+152*e[o-2]+28*e[o-1];t[o]=r?t[o]*r[i>>8]>>8:t[o]*i>>16}}function v(e,t,r){var n=t.canvas,o=t.context;e.setTransform(t.scaleX,0,0,t.scaleY,t.offsetX,t.offsetY),function(e,t,r,n,o,i,a){var s,l=!!i,c=l?i[0]:0,f=l?i[1]:0,h=l?i[2]:0;s="Luminosity"===o?p:d;for(var m=Math.min(n,Math.ceil(1048576/r)),g=0;g<n;g+=m){var y=Math.min(m,n-g),v=e.getImageData(0,g,r,y),b=t.getImageData(0,g,r,y);l&&u(v.data,c,f,h),s(v.data,b.data,a),e.putImageData(b,0,g)}}(o,r,n.width,n.height,t.subtype,t.backdrop,t.transferMap),e.drawImage(n,0,0)}var b=["butt","round","square"],_=["miter","round","bevel"],S={},w={},x=function(){function u(e,t,r,n,o,i){s(this,u),this.ctx=e,this.current=new y,this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=r,this.canvasFactory=n,this.imageLayer=o,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=i,this.cachedCanvases=new g(this.canvasFactory),e&&m(e),this._cachedGetSinglePixelWidth=null}return c(u,[{key:"beginDrawing",value:function(e){var t=e.transform,r=e.viewport,n=e.transparency,o=void 0!==n&&n,i=e.background,a=void 0===i?null:i,s=this.ctx.canvas.width,c=this.ctx.canvas.height;if(this.ctx.save(),this.ctx.fillStyle=a||"rgb(255, 255, 255)",this.ctx.fillRect(0,0,s,c),this.ctx.restore(),o){var u=this.cachedCanvases.getCanvas("transparent",s,c,!0);this.compositeCtx=this.ctx,this.transparentCanvas=u.canvas,this.ctx=u.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),l(this.ctx),t&&this.ctx.transform.apply(this.ctx,t),this.ctx.transform.apply(this.ctx,r.transform),this.baseTransform=this.ctx.mozCurrentTransform.slice(),this._combinedScaleFactor=Math.hypot(this.baseTransform[0],this.baseTransform[2]),this.imageLayer&&this.imageLayer.beginLayout()}},{key:"executeOperatorList",value:function(e,t,r,o){var i=e.argsArray,s=e.fnArray,l=t||0,c=i.length;if(c===l)return l;for(var u,d=c-l>10&&"function"==typeof r,p=d?Date.now()+15:0,f=0,h=this.commonObjs,m=this.objs;;){if(void 0!==o&&l===o.nextBreakPoint)return o.breakIt(l,r),l;if((u=s[l])!==n.OPS.dependency)this[u].apply(this,i[l]);else{var g,y=a(i[l]);try{for(y.s();!(g=y.n()).done;){var v=g.value,b=v.startsWith("g_")?h:m;if(!b.has(v))return b.get(v,r),l}}catch(_){y.e(_)}finally{y.f()}}if(++l===c)return l;if(d&&++f>10){if(Date.now()>p)return r(),l;f=0}}}},{key:"endDrawing",value:function(){for(;this.stateStack.length||null!==this.current.activeSMask;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.imageLayer&&this.imageLayer.endLayout()}},{key:"setLineWidth",value:function(e){this.current.lineWidth=e,this.ctx.lineWidth=e}},{key:"setLineCap",value:function(e){this.ctx.lineCap=b[e]}},{key:"setLineJoin",value:function(e){this.ctx.lineJoin=_[e]}},{key:"setMiterLimit",value:function(e){this.ctx.miterLimit=e}},{key:"setDash",value:function(e,t){var r=this.ctx;void 0!==r.setLineDash&&(r.setLineDash(e),r.lineDashOffset=t)}},{key:"setRenderingIntent",value:function(e){}},{key:"setFlatness",value:function(e){}},{key:"setGState",value:function(e){for(var t=0,r=e.length;t<r;t++){var n=e[t],o=n[0],i=n[1];switch(o){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=n[1];break;case"ca":this.current.fillAlpha=n[1],this.ctx.globalAlpha=n[1];break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask&&(this.stateStack.length>0&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask?this.suspendSMaskGroup():this.endSMaskGroup()),this.current.activeSMask=i?this.tempSMask:null,this.current.activeSMask&&this.beginSMaskGroup(),this.tempSMask=null;break;case"TR":this.current.transferMaps=i}}}},{key:"beginSMaskGroup",value:function(){var e=this.current.activeSMask,t=e.canvas.width,n=e.canvas.height,o="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(o,t,n,!0),a=this.ctx,s=a.mozCurrentTransform;this.ctx.save();var l=i.context;l.scale(1/e.scaleX,1/e.scaleY),l.translate(-e.offsetX,-e.offsetY),l.transform.apply(l,s),e.startTransformInverse=l.mozCurrentTransformInverse,r(a,l),this.ctx=l,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(a),this.groupLevel++}},{key:"suspendSMaskGroup",value:function(){var e=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),v(this.ctx,this.current.activeSMask,e),this.ctx.restore(),this.ctx.save(),r(e,this.ctx),this.current.resumeSMaskCtx=e;var t=n.Util.transform(this.current.activeSMask.startTransformInverse,e.mozCurrentTransform);this.ctx.transform.apply(this.ctx,t),e.save(),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,e.canvas.width,e.canvas.height),e.restore()}},{key:"resumeSMaskGroup",value:function(){var e=this.current.resumeSMaskCtx,t=this.ctx;this.ctx=e,this.groupStack.push(t),this.groupLevel++}},{key:"endSMaskGroup",value:function(){var e=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),v(this.ctx,this.current.activeSMask,e),this.ctx.restore(),r(e,this.ctx);var t=n.Util.transform(this.current.activeSMask.startTransformInverse,e.mozCurrentTransform);this.ctx.transform.apply(this.ctx,t)}},{key:"save",value:function(){this.ctx.save();var e=this.current;this.stateStack.push(e),this.current=e.clone(),this.current.resumeSMaskCtx=null}},{key:"restore",value:function(){this.current.resumeSMaskCtx&&this.resumeSMaskGroup(),null===this.current.activeSMask||0!==this.stateStack.length&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask||this.endSMaskGroup(),0!==this.stateStack.length?(this.current=this.stateStack.pop(),this.ctx.restore(),this.pendingClip=null,this._cachedGetSinglePixelWidth=null):this.current.activeSMask=null}},{key:"transform",value:function(e,t,r,n,o,i){this.ctx.transform(e,t,r,n,o,i),this._cachedGetSinglePixelWidth=null}},{key:"constructPath",value:function(e,t){for(var r=this.ctx,o=this.current,i=o.x,a=o.y,s=0,l=0,c=e.length;s<c;s++)switch(0|e[s]){case n.OPS.rectangle:i=t[l++],a=t[l++];var u=t[l++],d=t[l++],p=i+u,f=a+d;r.moveTo(i,a),0===u||0===d?r.lineTo(p,f):(r.lineTo(p,a),r.lineTo(p,f),r.lineTo(i,f)),r.closePath();break;case n.OPS.moveTo:i=t[l++],a=t[l++],r.moveTo(i,a);break;case n.OPS.lineTo:i=t[l++],a=t[l++],r.lineTo(i,a);break;case n.OPS.curveTo:i=t[l+4],a=t[l+5],r.bezierCurveTo(t[l],t[l+1],t[l+2],t[l+3],i,a),l+=6;break;case n.OPS.curveTo2:r.bezierCurveTo(i,a,t[l],t[l+1],t[l+2],t[l+3]),i=t[l+2],a=t[l+3],l+=4;break;case n.OPS.curveTo3:i=t[l+2],a=t[l+3],r.bezierCurveTo(t[l],t[l+1],i,a,i,a),l+=4;break;case n.OPS.closePath:r.closePath()}o.setCurrentPoint(i,a)}},{key:"closePath",value:function(){this.ctx.closePath()}},{key:"stroke",value:function(e){e=void 0===e||e;var t=this.ctx,r=this.current.strokeColor;if(t.globalAlpha=this.current.strokeAlpha,this.contentVisible)if("object"===i(r)&&null!=r&&r.getPattern){var n=this.getSinglePixelWidth();t.save(),t.strokeStyle=r.getPattern(t,this),t.lineWidth=Math.max(n,this.current.lineWidth),t.stroke(),t.restore()}else{var o=this.getSinglePixelWidth();o<0&&-o>=this.current.lineWidth?(t.save(),t.resetTransform(),t.lineWidth=Math.round(this._combinedScaleFactor),t.stroke(),t.restore()):(t.lineWidth=Math.max(o,this.current.lineWidth),t.stroke())}e&&this.consumePath(),t.globalAlpha=this.current.fillAlpha}},{key:"closeStroke",value:function(){this.closePath(),this.stroke()}},{key:"fill",value:function(e){e=void 0===e||e;var t=this.ctx,r=this.current.fillColor,n=!1;this.current.patternFill&&(t.save(),t.fillStyle=r.getPattern(t,this),n=!0),this.contentVisible&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),n&&t.restore(),e&&this.consumePath()}},{key:"eoFill",value:function(){this.pendingEOFill=!0,this.fill()}},{key:"fillStroke",value:function(){this.fill(!1),this.stroke(!1),this.consumePath()}},{key:"eoFillStroke",value:function(){this.pendingEOFill=!0,this.fillStroke()}},{key:"closeFillStroke",value:function(){this.closePath(),this.fillStroke()}},{key:"closeEOFillStroke",value:function(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}},{key:"endPath",value:function(){this.consumePath()}},{key:"clip",value:function(){this.pendingClip=S}},{key:"eoClip",value:function(){this.pendingClip=w}},{key:"beginText",value:function(){this.current.textMatrix=n.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}},{key:"endText",value:function(){var e=this.pendingTextPaths,t=this.ctx;if(void 0!==e){t.save(),t.beginPath();for(var r=0;r<e.length;r++){var n=e[r];t.setTransform.apply(t,n.transform),t.translate(n.x,n.y),n.addToPath(t,n.fontSize)}t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}else t.beginPath()}},{key:"setCharSpacing",value:function(e){this.current.charSpacing=e}},{key:"setWordSpacing",value:function(e){this.current.wordSpacing=e}},{key:"setHScale",value:function(e){this.current.textHScale=e/100}},{key:"setLeading",value:function(e){this.current.leading=-e}},{key:"setFont",value:function(e,t){var r=this.commonObjs.get(e),o=this.current;if(!r)throw new Error("Can't find font for ".concat(e));if(o.fontMatrix=r.fontMatrix||n.FONT_IDENTITY_MATRIX,0!==o.fontMatrix[0]&&0!==o.fontMatrix[3]||(0,n.warn)("Invalid font matrix for font "+e),t<0?(t=-t,o.fontDirection=-1):o.fontDirection=1,this.current.font=r,this.current.fontSize=t,!r.isType3Font){var i=r.loadedName||"sans-serif",a="normal";r.black?a="900":r.bold&&(a="bold");var s=r.italic?"italic":"normal",l='"'.concat(i,'", ').concat(r.fallbackName),c=t;t<16?c=16:t>100&&(c=100),this.current.fontSizeScale=t/c,this.ctx.font="".concat(s," ").concat(a," ").concat(c,"px ").concat(l)}}},{key:"setTextRenderingMode",value:function(e){this.current.textRenderingMode=e}},{key:"setTextRise",value:function(e){this.current.textRise=e}},{key:"moveText",value:function(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}},{key:"setLeadingMoveText",value:function(e,t){this.setLeading(-t),this.moveText(e,t)}},{key:"setTextMatrix",value:function(e,t,r,n,o,i){this.current.textMatrix=[e,t,r,n,o,i],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}},{key:"nextLine",value:function(){this.moveText(0,this.current.leading)}},{key:"paintChar",value:function(e,t,r,o,i){var a,s=this.ctx,l=this.current,c=l.font,u=l.textRenderingMode,d=l.fontSize/l.fontSizeScale,p=u&n.TextRenderingMode.FILL_STROKE_MASK,f=!!(u&n.TextRenderingMode.ADD_TO_PATH_FLAG),h=l.patternFill&&!c.missingFile;(c.disableFontFace||f||h)&&(a=c.getPathGenerator(this.commonObjs,e)),c.disableFontFace||h?(s.save(),s.translate(t,r),s.beginPath(),a(s,d),o&&s.setTransform.apply(s,o),p!==n.TextRenderingMode.FILL&&p!==n.TextRenderingMode.FILL_STROKE||s.fill(),p!==n.TextRenderingMode.STROKE&&p!==n.TextRenderingMode.FILL_STROKE||(i&&(s.resetTransform(),s.lineWidth=Math.round(this._combinedScaleFactor)),s.stroke()),s.restore()):(p!==n.TextRenderingMode.FILL&&p!==n.TextRenderingMode.FILL_STROKE||s.fillText(e,t,r),p!==n.TextRenderingMode.STROKE&&p!==n.TextRenderingMode.FILL_STROKE||(i?(s.save(),s.moveTo(t,r),s.resetTransform(),s.lineWidth=Math.round(this._combinedScaleFactor),s.strokeText(e,0,0),s.restore()):s.strokeText(e,t,r))),f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:s.mozCurrentTransform,x:t,y:r,fontSize:d,addToPath:a})}},{key:"isFontSubpixelAAEnabled",get:function(){var e=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10).context;e.scale(1.5,1),e.fillText("I",0,10);for(var t=e.getImageData(0,0,10,10).data,r=!1,o=3;o<t.length;o+=4)if(t[o]>0&&t[o]<255){r=!0;break}return(0,n.shadow)(this,"isFontSubpixelAAEnabled",r)}},{key:"showText",value:function(e){var t=this.current,r=t.font;if(r.isType3Font)return this.showType3Text(e);var o=t.fontSize;if(0!==o){var i,a=this.ctx,s=t.fontSizeScale,l=t.charSpacing,c=t.wordSpacing,u=t.fontDirection,d=t.textHScale*u,p=e.length,f=r.vertical,h=f?1:-1,m=r.defaultVMetrics,g=o*t.fontMatrix[0],y=t.textRenderingMode===n.TextRenderingMode.FILL&&!r.disableFontFace&&!t.patternFill;if(a.save(),t.patternFill){a.save();var v=t.fillColor.getPattern(a,this);i=a.mozCurrentTransform,a.restore(),a.fillStyle=v}a.transform.apply(a,t.textMatrix),a.translate(t.x,t.y+t.textRise),u>0?a.scale(d,-1):a.scale(d,1);var b=t.lineWidth,_=!1,S=t.textMatrixScale;if(0===S||0===b){var w=t.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;w!==n.TextRenderingMode.STROKE&&w!==n.TextRenderingMode.FILL_STROKE||(this._cachedGetSinglePixelWidth=null,_=(b=this.getSinglePixelWidth())<0)}else b/=S;1!==s&&(a.scale(s,s),b/=s),a.lineWidth=b;var x,E=0;for(x=0;x<p;++x){var A=e[x];if((0,n.isNum)(A))E+=h*A*o/1e3;else{var k=!1,P=(A.isSpace?c:0)+l,T=A.fontChar,C=A.accent,R=void 0,O=void 0,I=A.width;if(f){var L=A.vmetric||m,D=-(A.vmetric?L[1]:.5*I)*g,j=L[2]*g;I=L?-L[0]:I,R=D/s,O=(E+j)/s}else R=E/s,O=0;if(r.remeasure&&I>0){var M=1e3*a.measureText(T).width/o*s;if(I<M&&this.isFontSubpixelAAEnabled){var N=I/M;k=!0,a.save(),a.scale(N,1),R/=N}else I!==M&&(R+=(I-M)/2e3*o/s)}if(this.contentVisible&&(A.isInFont||r.missingFile))if(y&&!C)a.fillText(T,R,O);else if(this.paintChar(T,R,O,i,_),C){var F=R+o*C.offset.x/s,$=O-o*C.offset.y/s;this.paintChar(C.fontChar,F,$,i,_)}E+=f?I*g-P*u:I*g+P*u,k&&a.restore()}}f?t.y-=E:t.x+=E*d,a.restore()}}},{key:"showType3Text",value:function(e){var t,r,o,i,a=this.ctx,s=this.current,l=s.font,c=s.fontSize,u=s.fontDirection,d=l.vertical?1:-1,p=s.charSpacing,f=s.wordSpacing,h=s.textHScale*u,m=s.fontMatrix||n.FONT_IDENTITY_MATRIX,g=e.length;if(s.textRenderingMode!==n.TextRenderingMode.INVISIBLE&&0!==c){for(this._cachedGetSinglePixelWidth=null,a.save(),a.transform.apply(a,s.textMatrix),a.translate(s.x,s.y),a.scale(h,u),t=0;t<g;++t)if(r=e[t],(0,n.isNum)(r))i=d*r*c/1e3,this.ctx.translate(i,0),s.x+=i*h;else{var y=(r.isSpace?f:0)+p,v=l.charProcOperatorList[r.operatorListId];v?(this.contentVisible&&(this.processingType3=r,this.save(),a.scale(c,c),a.transform.apply(a,m),this.executeOperatorList(v),this.restore()),o=n.Util.applyTransform([r.width,0],m)[0]*c+y,a.translate(o,0),s.x+=o*h):(0,n.warn)('Type3 character "'.concat(r.operatorListId,'" is not available.'))}a.restore(),this.processingType3=null}}},{key:"setCharWidth",value:function(e,t){}},{key:"setCharWidthAndBounds",value:function(e,t,r,n,o,i){this.ctx.rect(r,n,o-r,i-n),this.clip(),this.endPath()}},{key:"getColorN_Pattern",value:function(e){var t,r=this;if("TilingPattern"===e[0]){var n=e[1],i=this.baseTransform||this.ctx.mozCurrentTransform.slice(),a={createCanvasGraphics:function(e){return new u(e,r.commonObjs,r.objs,r.canvasFactory)}};t=new o.TilingPattern(e,n,this.ctx,a,i)}else t=(0,o.getShadingPattern)(e);return t}},{key:"setStrokeColorN",value:function(){this.current.strokeColor=this.getColorN_Pattern(arguments)}},{key:"setFillColorN",value:function(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}},{key:"setStrokeRGBColor",value:function(e,t,r){var o=n.Util.makeHexColor(e,t,r);this.ctx.strokeStyle=o,this.current.strokeColor=o}},{key:"setFillRGBColor",value:function(e,t,r){var o=n.Util.makeHexColor(e,t,r);this.ctx.fillStyle=o,this.current.fillColor=o,this.current.patternFill=!1}},{key:"shadingFill",value:function(e){if(this.contentVisible){var t=this.ctx;this.save();var r=(0,o.getShadingPattern)(e);t.fillStyle=r.getPattern(t,this,!0);var i=t.mozCurrentTransformInverse;if(i){var a=t.canvas,s=a.width,l=a.height,c=n.Util.applyTransform([0,0],i),u=n.Util.applyTransform([0,l],i),d=n.Util.applyTransform([s,0],i),p=n.Util.applyTransform([s,l],i),f=Math.min(c[0],u[0],d[0],p[0]),h=Math.min(c[1],u[1],d[1],p[1]),m=Math.max(c[0],u[0],d[0],p[0]),g=Math.max(c[1],u[1],d[1],p[1]);this.ctx.fillRect(f,h,m-f,g-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.restore()}}},{key:"beginInlineImage",value:function(){(0,n.unreachable)("Should not call beginInlineImage")}},{key:"beginImageData",value:function(){(0,n.unreachable)("Should not call beginImageData")}},{key:"paintFormXObjectBegin",value:function(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(e)&&6===e.length&&this.transform.apply(this,e),this.baseTransform=this.ctx.mozCurrentTransform,t)){var r=t[2]-t[0],n=t[3]-t[1];this.ctx.rect(t[0],t[1],r,n),this.clip(),this.endPath()}}},{key:"paintFormXObjectEnd",value:function(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}},{key:"beginGroup",value:function(e){if(this.contentVisible){this.save();var t=this.ctx;e.isolated||(0,n.info)("TODO: Support non-isolated groups."),e.knockout&&(0,n.warn)("Knockout groups not supported.");var o=t.mozCurrentTransform;if(e.matrix&&t.transform.apply(t,e.matrix),!e.bbox)throw new Error("Bounding box is required.");var i=n.Util.getAxialAlignedBoundingBox(e.bbox,t.mozCurrentTransform),a=[0,0,t.canvas.width,t.canvas.height];i=n.Util.intersect(i,a)||[0,0,0,0];var s=Math.floor(i[0]),l=Math.floor(i[1]),c=Math.max(Math.ceil(i[2])-s,1),u=Math.max(Math.ceil(i[3])-l,1),d=1,p=1;c>f&&(d=c/f,c=f),u>f&&(p=u/f,u=f);var h="groupAt"+this.groupLevel;e.smask&&(h+="_smask_"+this.smaskCounter++%2);var m=this.cachedCanvases.getCanvas(h,c,u,!0),g=m.context;g.scale(1/d,1/p),g.translate(-s,-l),g.transform.apply(g,o),e.smask?this.smaskStack.push({canvas:m.canvas,context:g,offsetX:s,offsetY:l,scaleX:d,scaleY:p,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(s,l),t.scale(d,p)),r(t,g),this.ctx=g,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++,this.current.activeSMask=null}}},{key:"endGroup",value:function(e){if(this.contentVisible){this.groupLevel--;var t=this.ctx;this.ctx=this.groupStack.pop(),void 0!==this.ctx.imageSmoothingEnabled?this.ctx.imageSmoothingEnabled=!1:this.ctx.mozImageSmoothingEnabled=!1,e.smask?this.tempSMask=this.smaskStack.pop():this.ctx.drawImage(t.canvas,0,0),this.restore()}}},{key:"beginAnnotations",value:function(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)}},{key:"endAnnotations",value:function(){this.restore()}},{key:"beginAnnotation",value:function(e,t,r){if(this.save(),l(this.ctx),this.current=new y,Array.isArray(e)&&4===e.length){var n=e[2]-e[0],o=e[3]-e[1];this.ctx.rect(e[0],e[1],n,o),this.clip(),this.endPath()}this.transform.apply(this,t),this.transform.apply(this,r)}},{key:"endAnnotation",value:function(){this.restore()}},{key:"paintImageMaskXObject",value:function(e){if(this.contentVisible){var r=this.ctx,n=e.width,o=e.height,i=this.current.fillColor,a=this.current.patternFill,s=this.processingType3;if(s&&void 0===s.compiled&&(s.compiled=n<=1e3&&o<=1e3?function(e){var t,r,n,o,i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),a=e.width,s=e.height,l=a+1,c=new Uint8Array(l*(s+1)),u=a+7&-8,d=e.data,p=new Uint8Array(u*s),f=0;for(t=0,r=d.length;t<r;t++)for(var h=d[t],m=128;m>0;)p[f++]=h&m?0:255,m>>=1;var g=0;for(0!==p[f=0]&&(c[0]=1,++g),n=1;n<a;n++)p[f]!==p[f+1]&&(c[n]=p[f]?2:1,++g),f++;for(0!==p[f]&&(c[n]=2,++g),t=1;t<s;t++){o=t*l,p[(f=t*u)-u]!==p[f]&&(c[o]=p[f]?1:8,++g);var y=(p[f]?4:0)+(p[f-u]?8:0);for(n=1;n<a;n++)i[y=(y>>2)+(p[f+1]?4:0)+(p[f-u+1]?8:0)]&&(c[o+n]=i[y],++g),f++;if(p[f-u]!==p[f]&&(c[o+n]=p[f]?2:4,++g),g>1e3)return null}for(o=t*l,0!==p[f=u*(s-1)]&&(c[o]=8,++g),n=1;n<a;n++)p[f]!==p[f+1]&&(c[o+n]=p[f]?4:8,++g),f++;if(0!==p[f]&&(c[o+n]=4,++g),g>1e3)return null;var v=new Int32Array([0,l,-1,0,-l,0,0,0,1]),b=[];for(t=0;g&&t<=s;t++){for(var _=t*l,S=_+a;_<S&&!c[_];)_++;if(_!==S){var w=[_%l,t],x=_,E=c[_];do{var A=v[E];do{_+=A}while(!c[_]);var k=c[_];5!==k&&10!==k?(E=k,c[_]=0):(E=k&51*E>>4,c[_]&=E>>2|E<<2),w.push(_%l,_/l|0),c[_]||--g}while(x!==_);b.push(w),--t}}return function(e){e.save(),e.scale(1/a,-1/s),e.translate(0,-s),e.beginPath();for(var t=0,r=b.length;t<r;t++){var n=b[t];e.moveTo(n[0],n[1]);for(var o=2,i=n.length;o<i;o+=2)e.lineTo(n[o],n[o+1])}e.fill(),e.beginPath(),e.restore()}}({data:e.data,width:n,height:o}):null),null!=s&&s.compiled)s.compiled(r);else{var l=this.cachedCanvases.getCanvas("maskCanvas",n,o),c=l.context;c.save(),t(c,e),c.globalCompositeOperation="source-in",c.fillStyle=a?i.getPattern(c,this):i,c.fillRect(0,0,n,o),c.restore(),this.paintInlineImageXObject(l.canvas)}}}},{key:"paintImageMaskXObjectRepeat",value:function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;if(this.contentVisible){var s=e.width,l=e.height,c=this.current.fillColor,u=this.current.patternFill,d=this.cachedCanvases.getCanvas("maskCanvas",s,l),p=d.context;p.save(),t(p,e),p.globalCompositeOperation="source-in",p.fillStyle=u?c.getPattern(p,this):c,p.fillRect(0,0,s,l),p.restore();for(var f=this.ctx,h=0,m=a.length;h<m;h+=2)f.save(),f.transform(r,n,o,i,a[h],a[h+1]),f.scale(1,-1),f.drawImage(d.canvas,0,0,s,l,0,-1,1,1),f.restore()}}},{key:"paintImageMaskXObjectGroup",value:function(e){if(this.contentVisible)for(var r=this.ctx,n=this.current.fillColor,o=this.current.patternFill,i=0,a=e.length;i<a;i++){var s=e[i],l=s.width,c=s.height,u=this.cachedCanvases.getCanvas("maskCanvas",l,c),d=u.context;d.save(),t(d,s),d.globalCompositeOperation="source-in",d.fillStyle=o?n.getPattern(d,this):n,d.fillRect(0,0,l,c),d.restore(),r.save(),r.transform.apply(r,s.transform),r.scale(1,-1),r.drawImage(u.canvas,0,0,l,c,0,-1,1,1),r.restore()}}},{key:"paintImageXObject",value:function(e){if(this.contentVisible){var t=e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e);t?this.paintInlineImageXObject(t):(0,n.warn)("Dependent image isn't ready yet")}}},{key:"paintImageXObjectRepeat",value:function(e,t,r,o){if(this.contentVisible){var i=e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e);if(i){for(var a=i.width,s=i.height,l=[],c=0,u=o.length;c<u;c+=2)l.push({transform:[t,0,0,r,o[c],o[c+1]],x:0,y:0,w:a,h:s});this.paintInlineImageXObjectGroup(i,l)}else(0,n.warn)("Dependent image isn't ready yet")}}},{key:"paintInlineImageXObject",value:function(t){if(this.contentVisible){var r=t.width,n=t.height,o=this.ctx;this.save(),o.scale(1/r,-1/n);var i,a,s,l=o.mozCurrentTransformInverse,c=Math.max(Math.hypot(l[0],l[1]),1),u=Math.max(Math.hypot(l[2],l[3]),1);"function"==typeof HTMLElement&&t instanceof HTMLElement||!t.data?i=t:(e(s=(a=this.cachedCanvases.getCanvas("inlineImage",r,n)).context,t,this.current.transferMaps),i=a.canvas);for(var d=r,p=n,f="prescale1";c>2&&d>1||u>2&&p>1;){var h=d,m=p;c>2&&d>1&&(c/=d/(h=Math.ceil(d/2))),u>2&&p>1&&(u/=p/(m=Math.ceil(p/2))),(s=(a=this.cachedCanvases.getCanvas(f,h,m)).context).clearRect(0,0,h,m),s.drawImage(i,0,0,d,p,0,0,h,m),i=a.canvas,d=h,p=m,f="prescale1"===f?"prescale2":"prescale1"}if(o.drawImage(i,0,0,d,p,0,-n,r,n),this.imageLayer){var g=this.getCanvasPosition(0,-n);this.imageLayer.appendImage({imgData:t,left:g[0],top:g[1],width:r/l[0],height:n/l[3]})}this.restore()}}},{key:"paintInlineImageXObjectGroup",value:function(t,r){if(this.contentVisible){var n=this.ctx,o=t.width,i=t.height,a=this.cachedCanvases.getCanvas("inlineImage",o,i);e(a.context,t,this.current.transferMaps);for(var s=0,l=r.length;s<l;s++){var c=r[s];if(n.save(),n.transform.apply(n,c.transform),n.scale(1,-1),n.drawImage(a.canvas,c.x,c.y,c.w,c.h,0,-1,1,1),this.imageLayer){var u=this.getCanvasPosition(c.x,c.y);this.imageLayer.appendImage({imgData:t,left:u[0],top:u[1],width:o,height:i})}n.restore()}}}},{key:"paintSolidColorImageMask",value:function(){this.contentVisible&&this.ctx.fillRect(0,0,1,1)}},{key:"markPoint",value:function(e){}},{key:"markPointProps",value:function(e,t){}},{key:"beginMarkedContent",value:function(e){this.markedContentStack.push({visible:!0})}},{key:"beginMarkedContentProps",value:function(e,t){"OC"===e?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}},{key:"endMarkedContent",value:function(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}},{key:"beginCompat",value:function(){}},{key:"endCompat",value:function(){}},{key:"consumePath",value:function(){var e=this.ctx;this.pendingClip&&(this.pendingClip===w?e.clip("evenodd"):e.clip(),this.pendingClip=null),e.beginPath()}},{key:"getSinglePixelWidth",value:function(){if(null===this._cachedGetSinglePixelWidth){var e=this.ctx.mozCurrentTransform,t=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.pow(e[0],2)+Math.pow(e[2],2),n=Math.pow(e[1],2)+Math.pow(e[3],2),o=Math.sqrt(Math.max(r,n))/t;r!==n&&this._combinedScaleFactor*o>1?this._cachedGetSinglePixelWidth=-this._combinedScaleFactor*o:t>Number.EPSILON?this._cachedGetSinglePixelWidth=o:this._cachedGetSinglePixelWidth=1}return this._cachedGetSinglePixelWidth}},{key:"getCanvasPosition",value:function(e,t){var r=this.ctx.mozCurrentTransform;return[r[0]*e+r[2]*t+r[4],r[1]*e+r[3]*t+r[5]]}},{key:"isContentVisible",value:function(){for(var e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}]),u}();for(var E in n.OPS)x.prototype[n.OPS[E]]=x.prototype[E];return x}();t.CanvasGraphics=v},(e,t,r)=>{function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getShadingPattern=function(e){switch(e[0]){case"RadialAxial":return new b(e);case"Mesh":return new w(e);case"Dummy":return new x}throw new Error("Unknown IR type: ".concat(e[0]))},t.TilingPattern=void 0;var o,i=r(4);function a(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var o=p(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return d(this,r)}}function d(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t,r){return t&&h(e.prototype,t),r&&h(e,r),e}function g(e){return"undefined"!=typeof DOMMatrix?new DOMMatrix(e):(o||(o=document.createElementNS("http://www.w3.org/2000/svg","svg")),o.createSVGMatrix(e))}function y(e,t){if(t&&"undefined"!=typeof Path2D){var r=t[2]-t[0],n=t[3]-t[1],o=new Path2D;o.rect(t[0],t[1],r,n),e.clip(o)}}var v=function(){function e(){f(this,e),this.constructor===e&&(0,i.unreachable)("Cannot initialize BaseShadingPattern.")}return m(e,[{key:"getPattern",value:function(){(0,i.unreachable)("Abstract method `getPattern` called.")}}]),e}(),b=function(e){l(r,e);var t=u(r);function r(e){var n;return f(this,r),(n=t.call(this))._type=e[1],n._bbox=e[2],n._colorStops=e[3],n._p0=e[4],n._p1=e[5],n._r0=e[6],n._r1=e[7],n._matrix=e[8],n}return m(r,[{key:"getPattern",value:function(e,t,r){var n,o=t.cachedCanvases.getCanvas("pattern",e.canvas.width,e.canvas.height,!0),i=o.context;i.clearRect(0,0,i.canvas.width,i.canvas.height),i.beginPath(),i.rect(0,0,i.canvas.width,i.canvas.height),r?i.setTransform.apply(i,e.mozCurrentTransform):(i.setTransform.apply(i,t.baseTransform),this._matrix&&i.transform.apply(i,this._matrix)),y(i,this._bbox),"axial"===this._type?n=i.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(n=i.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));var s,l=a(this._colorStops);try{for(l.s();!(s=l.n()).done;){var c=s.value;n.addColorStop(c[0],c[1])}}catch(d){l.e(d)}finally{l.f()}i.fillStyle=n,i.fill();var u=e.createPattern(o.canvas,"repeat");return u.setTransform(g(e.mozCurrentTransformInverse)),u}}]),r}(v);function _(e,t,r,n,o,i,a,s){var l,c=t.coords,u=t.colors,d=e.data,p=4*e.width;c[r+1]>c[n+1]&&(l=r,r=n,n=l,l=i,i=a,a=l),c[n+1]>c[o+1]&&(l=n,n=o,o=l,l=a,a=s,s=l),c[r+1]>c[n+1]&&(l=r,r=n,n=l,l=i,i=a,a=l);var f=(c[r]+t.offsetX)*t.scaleX,h=(c[r+1]+t.offsetY)*t.scaleY,m=(c[n]+t.offsetX)*t.scaleX,g=(c[n+1]+t.offsetY)*t.scaleY,y=(c[o]+t.offsetX)*t.scaleX,v=(c[o+1]+t.offsetY)*t.scaleY;if(!(h>=v))for(var b,_,S,w,x,E,A,k,P=u[i],T=u[i+1],C=u[i+2],R=u[a],O=u[a+1],I=u[a+2],L=u[s],D=u[s+1],j=u[s+2],M=Math.round(h),N=Math.round(v),F=M;F<=N;F++){if(F<g){var $=void 0;b=f-(f-m)*($=F<h?0:h===g?1:(h-F)/(h-g)),_=P-(P-R)*$,S=T-(T-O)*$,w=C-(C-I)*$}else{var B=void 0;b=m-(m-y)*(B=F>v?1:g===v?0:(g-F)/(g-v)),_=R-(R-L)*B,S=O-(O-D)*B,w=I-(I-j)*B}var U=void 0;x=f-(f-y)*(U=F<h?0:F>v?1:(h-F)/(h-v)),E=P-(P-L)*U,A=T-(T-D)*U,k=C-(C-j)*U;for(var z=Math.round(Math.min(b,x)),q=Math.round(Math.max(b,x)),W=p*F+4*z,V=z;V<=q;V++)(U=(b-V)/(b-x))<0?U=0:U>1&&(U=1),d[W++]=_-(_-E)*U|0,d[W++]=S-(S-A)*U|0,d[W++]=w-(w-k)*U|0,d[W++]=255}}function S(e,t,r){var n,o,i=t.coords,a=t.colors;switch(t.type){case"lattice":var s=t.verticesPerRow,l=Math.floor(i.length/s)-1,c=s-1;for(n=0;n<l;n++)for(var u=n*s,d=0;d<c;d++,u++)_(e,r,i[u],i[u+1],i[u+s],a[u],a[u+1],a[u+s]),_(e,r,i[u+s+1],i[u+1],i[u+s],a[u+s+1],a[u+1],a[u+s]);break;case"triangles":for(n=0,o=i.length;n<o;n+=3)_(e,r,i[n],i[n+1],i[n+2],a[n],a[n+1],a[n+2]);break;default:throw new Error("illegal figure")}}var w=function(e){l(r,e);var t=u(r);function r(e){var n;return f(this,r),(n=t.call(this))._coords=e[2],n._colors=e[3],n._figures=e[4],n._bounds=e[5],n._matrix=e[6],n._bbox=e[7],n._background=e[8],n}return m(r,[{key:"_createMeshCanvas",value:function(e,t,r){var n=Math.floor(this._bounds[0]),o=Math.floor(this._bounds[1]),i=Math.ceil(this._bounds[2])-n,s=Math.ceil(this._bounds[3])-o,l=Math.min(Math.ceil(Math.abs(i*e[0]*1.1)),3e3),c=Math.min(Math.ceil(Math.abs(s*e[1]*1.1)),3e3),u=i/l,d=s/c,p={coords:this._coords,colors:this._colors,offsetX:-n,offsetY:-o,scaleX:1/u,scaleY:1/d},f=l+4,h=c+4,m=r.getCanvas("mesh",f,h,!1),g=m.context,y=g.createImageData(l,c);if(t)for(var v=y.data,b=0,_=v.length;b<_;b+=4)v[b]=t[0],v[b+1]=t[1],v[b+2]=t[2],v[b+3]=255;var w,x=a(this._figures);try{for(x.s();!(w=x.n()).done;)S(y,w.value,p)}catch(E){x.e(E)}finally{x.f()}return g.putImageData(y,2,2),{canvas:m.canvas,offsetX:n-2*u,offsetY:o-2*d,scaleX:u,scaleY:d}}},{key:"getPattern",value:function(e,t,r){var n;if(y(e,this._bbox),r)n=i.Util.singularValueDecompose2dScale(e.mozCurrentTransform);else if(n=i.Util.singularValueDecompose2dScale(t.baseTransform),this._matrix){var o=i.Util.singularValueDecompose2dScale(this._matrix);n=[n[0]*o[0],n[1]*o[1]]}var a=this._createMeshCanvas(n,r?null:this._background,t.cachedCanvases);return r||(e.setTransform.apply(e,t.baseTransform),this._matrix&&e.transform.apply(e,this._matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}]),r}(v),x=function(e){l(r,e);var t=u(r);function r(){return f(this,r),t.apply(this,arguments)}return m(r,[{key:"getPattern",value:function(){return"hotpink"}}]),r}(v),E=1,A=2,k=function(){function e(t,r,n,o,i){f(this,e),this.operatorList=t[2],this.matrix=t[3]||[1,0,0,1,0,0],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=r,this.ctx=n,this.canvasGraphicsFactory=o,this.baseTransform=i}return m(e,[{key:"createPatternCanvas",value:function(e){var t=this.operatorList,r=this.bbox,n=this.xstep,o=this.ystep,a=this.paintType,s=this.tilingType,l=this.color,c=this.canvasGraphicsFactory;(0,i.info)("TilingType: "+s);var u=r[0],d=r[1],p=r[2],f=r[3],h=i.Util.singularValueDecompose2dScale(this.matrix),m=i.Util.singularValueDecompose2dScale(this.baseTransform),g=[h[0]*m[0],h[1]*m[1]],y=this.getSizeAndScale(n,this.ctx.canvas.width,g[0]),v=this.getSizeAndScale(o,this.ctx.canvas.height,g[1]),b=e.cachedCanvases.getCanvas("pattern",y.size,v.size,!0),_=b.context,S=c.createCanvasGraphics(_);return S.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(S,a,l),S.transform(y.scale,0,0,v.scale,0,0),this.clipBbox(S,r,u,d,p,f),S.baseTransform=S.ctx.mozCurrentTransform.slice(),S.executeOperatorList(t),S.endDrawing(),{canvas:b.canvas,scaleX:y.scale,scaleY:v.scale}}},{key:"getSizeAndScale",value:function(t,r,n){t=Math.abs(t);var o=Math.max(e.MAX_PATTERN_SIZE,r),i=Math.ceil(t*n);return i>=o?i=o:n=i/t,{scale:n,size:i}}},{key:"clipBbox",value:function(e,t,r,n,o,i){if(Array.isArray(t)&&4===t.length){var a=o-r,s=i-n;e.ctx.rect(r,n,a,s),e.clip(),e.endPath()}}},{key:"setFillAndStrokeStyleToContext",value:function(e,t,r){var n=e.ctx,o=e.current;switch(t){case E:var a=this.ctx;n.fillStyle=a.fillStyle,n.strokeStyle=a.strokeStyle,o.fillColor=a.fillStyle,o.strokeColor=a.strokeStyle;break;case A:var s=i.Util.makeHexColor(r[0],r[1],r[2]);n.fillStyle=s,n.strokeStyle=s,o.fillColor=s,o.strokeColor=s;break;default:throw new i.FormatError("Unsupported paint type: ".concat(t))}}},{key:"getPattern",value:function(e,t,r){var n=(e=this.ctx).mozCurrentTransformInverse;r||(n=i.Util.transform(n,t.baseTransform),this.matrix&&(n=i.Util.transform(n,this.matrix)));var o=this.createPatternCanvas(t),a=g(n);a=a.scale(1/o.scaleX,1/o.scaleY);var s=e.createPattern(o.canvas,"repeat");return s.setTransform(a),s}}],[{key:"MAX_PATTERN_SIZE",get:function(){return(0,i.shadow)(this,"MAX_PATTERN_SIZE",3e3)}}]),e}();t.TilingPattern=k},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;var r=Object.create(null);t.GlobalWorkerOptions=r,r.workerPort=void 0===r.workerPort?null:r.workerPort,r.workerSrc=void 0===r.workerSrc?"":r.workerSrc},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var n,o=(n=r(2))&&n.__esModule?n:{default:n},i=r(4);function a(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,o)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=1,u=2,d=1,p=2,f=3,h=4,m=5,g=6,y=7,v=8;function b(e){if("object"!==l(e)||null===e)return e;switch(e.name){case"AbortException":return new i.AbortException(e.message);case"MissingPDFException":return new i.MissingPDFException(e.message);case"UnexpectedResponseException":return new i.UnexpectedResponseException(e.message,e.status);case"UnknownErrorException":return new i.UnknownErrorException(e.message,e.details);default:return new i.UnknownErrorException(e.message,e.toString())}}var _=function(){function e(t,r,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sourceName=t,this.targetName=r,this.comObj=n,this.callbackId=1,this.streamId=1,this.postMessageTransfers=!0,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=function(e){var t=e.data;if(t.targetName===o.sourceName)if(t.stream)o._processStreamMessage(t);else if(t.callback){var r=t.callbackId,i=o.callbackCapabilities[r];if(!i)throw new Error("Cannot resolve callback ".concat(r));if(delete o.callbackCapabilities[r],t.callback===c)i.resolve(t.data);else{if(t.callback!==u)throw new Error("Unexpected callback case");i.reject(b(t.reason))}}else{var a=o.actionHandler[t.action];if(!a)throw new Error("Unknown action from worker: ".concat(t.action));if(t.callbackId){var s=o.sourceName,l=t.sourceName;new Promise((function(e){e(a(t.data))})).then((function(e){n.postMessage({sourceName:s,targetName:l,callback:c,callbackId:t.callbackId,data:e})}),(function(e){n.postMessage({sourceName:s,targetName:l,callback:u,callbackId:t.callbackId,reason:b(e)})}))}else t.streamId?o._createStreamSink(t):a(t.data)}},n.addEventListener("message",this._onComObjOnMessage)}var t,r,n,l,_;return t=e,(r=[{key:"on",value:function(e,t){var r=this.actionHandler;if(r[e])throw new Error('There is already an actionName called "'.concat(e,'"'));r[e]=t}},{key:"send",value:function(e,t,r){this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},r)}},{key:"sendWithPromise",value:function(e,t,r){var n=this.callbackId++,o=(0,i.createPromiseCapability)();this.callbackCapabilities[n]=o;try{this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:n,data:t},r)}catch(a){o.reject(a)}return o.promise}},{key:"sendWithStream",value:function(e,t,r,n){var o=this,a=this.streamId++,s=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:function(r){var c=(0,i.createPromiseCapability)();return o.streamControllers[a]={controller:r,startCall:c,pullCall:null,cancelCall:null,isClosed:!1},o._postMessage({sourceName:s,targetName:l,action:e,streamId:a,data:t,desiredSize:r.desiredSize},n),c.promise},pull:function(e){var t=(0,i.createPromiseCapability)();return o.streamControllers[a].pullCall=t,c.postMessage({sourceName:s,targetName:l,stream:g,streamId:a,desiredSize:e.desiredSize}),t.promise},cancel:function(e){(0,i.assert)(e instanceof Error,"cancel must have a valid reason");var t=(0,i.createPromiseCapability)();return o.streamControllers[a].cancelCall=t,o.streamControllers[a].isClosed=!0,c.postMessage({sourceName:s,targetName:l,stream:d,streamId:a,reason:b(e)}),t.promise}},r)}},{key:"_createStreamSink",value:function(e){var t=this,r=this.actionHandler[e.action],n=e.streamId,o=this.sourceName,a=e.sourceName,s=this.comObj,l={enqueue:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2?arguments[2]:void 0;if(!this.isCancelled){var l=this.desiredSize;this.desiredSize-=r,l>0&&this.desiredSize<=0&&(this.sinkCapability=(0,i.createPromiseCapability)(),this.ready=this.sinkCapability.promise),t._postMessage({sourceName:o,targetName:a,stream:h,streamId:n,chunk:e},s)}},close:function(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:o,targetName:a,stream:f,streamId:n}),delete t.streamSinks[n])},error:function(e){(0,i.assert)(e instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:o,targetName:a,stream:m,streamId:n,reason:b(e)}))},sinkCapability:(0,i.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[n]=l,new Promise((function(t){t(r(e.data,l))})).then((function(){s.postMessage({sourceName:o,targetName:a,stream:v,streamId:n,success:!0})}),(function(e){s.postMessage({sourceName:o,targetName:a,stream:v,streamId:n,reason:b(e)})}))}},{key:"_processStreamMessage",value:function(e){var t=e.streamId,r=this.sourceName,n=e.sourceName,o=this.comObj;switch(e.stream){case v:e.success?this.streamControllers[t].startCall.resolve():this.streamControllers[t].startCall.reject(b(e.reason));break;case y:e.success?this.streamControllers[t].pullCall.resolve():this.streamControllers[t].pullCall.reject(b(e.reason));break;case g:if(!this.streamSinks[t]){o.postMessage({sourceName:r,targetName:n,stream:y,streamId:t,success:!0});break}this.streamSinks[t].desiredSize<=0&&e.desiredSize>0&&this.streamSinks[t].sinkCapability.resolve(),this.streamSinks[t].desiredSize=e.desiredSize;var a=this.streamSinks[e.streamId].onPull;new Promise((function(e){e(a&&a())})).then((function(){o.postMessage({sourceName:r,targetName:n,stream:y,streamId:t,success:!0})}),(function(e){o.postMessage({sourceName:r,targetName:n,stream:y,streamId:t,reason:b(e)})}));break;case h:if((0,i.assert)(this.streamControllers[t],"enqueue should have stream controller"),this.streamControllers[t].isClosed)break;this.streamControllers[t].controller.enqueue(e.chunk);break;case f:if((0,i.assert)(this.streamControllers[t],"close should have stream controller"),this.streamControllers[t].isClosed)break;this.streamControllers[t].isClosed=!0,this.streamControllers[t].controller.close(),this._deleteStreamController(t);break;case m:(0,i.assert)(this.streamControllers[t],"error should have stream controller"),this.streamControllers[t].controller.error(b(e.reason)),this._deleteStreamController(t);break;case p:e.success?this.streamControllers[t].cancelCall.resolve():this.streamControllers[t].cancelCall.reject(b(e.reason)),this._deleteStreamController(t);break;case d:if(!this.streamSinks[t])break;var s=this.streamSinks[e.streamId].onCancel;new Promise((function(t){t(s&&s(b(e.reason)))})).then((function(){o.postMessage({sourceName:r,targetName:n,stream:p,streamId:t,success:!0})}),(function(e){o.postMessage({sourceName:r,targetName:n,stream:p,streamId:t,reason:b(e)})})),this.streamSinks[t].sinkCapability.reject(b(e.reason)),this.streamSinks[t].isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}},{key:"_deleteStreamController",value:(l=o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.allSettled([this.streamControllers[t].startCall,this.streamControllers[t].pullCall,this.streamControllers[t].cancelCall].map((function(e){return e&&e.promise})));case 2:delete this.streamControllers[t];case 3:case"end":return e.stop()}}),e,this)})),_=function(){var e=this,t=arguments;return new Promise((function(r,n){var o=l.apply(e,t);function i(e){a(o,r,n,i,s,"next",e)}function s(e){a(o,r,n,i,s,"throw",e)}i(void 0)}))},function(e){return _.apply(this,arguments)})},{key:"_postMessage",value:function(e,t){t&&this.postMessageTransfers?this.comObj.postMessage(e,t):this.comObj.postMessage(e)}},{key:"destroy",value:function(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}])&&s(t.prototype,r),n&&s(t,n),e}();t.MessageHandler=_},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var n=r(4);function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(){function e(t){var r=t.parsedData,n=t.rawData;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._metadataMap=r,this._data=n}var t,r,i;return t=e,(r=[{key:"getRaw",value:function(){return this._data}},{key:"get",value:function(e){var t;return null!==(t=this._metadataMap.get(e))&&void 0!==t?t:null}},{key:"getAll",value:function(){return(0,n.objectFromMap)(this._metadataMap)}},{key:"has",value:function(e){return this._metadataMap.has(e)}}])&&o(t.prototype,r),i&&o(t,i),e}();t.Metadata=i},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var n=r(4);function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=function e(t,r){s(this,e),this.visible=!0,this.name=t,this.intent=r},c=function(){function e(t){if(s(this,e),this.name=null,this.creator=null,this._order=null,this._groups=new Map,null!==t){this.name=t.name,this.creator=t.creator,this._order=t.order;var r,n=o(t.groups);try{for(n.s();!(r=n.n()).done;){var i=r.value;this._groups.set(i.id,new l(i.name,i.intent))}}catch(g){n.e(g)}finally{n.f()}if("OFF"===t.baseState){var a,c=o(this._groups);try{for(c.s();!(a=c.n()).done;)a.value.visible=!1}catch(g){c.e(g)}finally{c.f()}}var u,d=o(t.on);try{for(d.s();!(u=d.n()).done;){var p=u.value;this._groups.get(p).visible=!0}}catch(g){d.e(g)}finally{d.f()}var f,h=o(t.off);try{for(h.s();!(f=h.n()).done;){var m=f.value;this._groups.get(m).visible=!1}}catch(g){h.e(g)}finally{h.f()}}}var t,r,i;return t=e,(r=[{key:"_evaluateVisibilityExpression",value:function(e){var t=e.length;if(t<2)return!0;for(var r=e[0],o=1;o<t;o++){var i=e[o],a=void 0;if(Array.isArray(i))a=this._evaluateVisibilityExpression(i);else{if(!this._groups.has(i))return(0,n.warn)("Optional content group not found: ".concat(i)),!0;a=this._groups.get(i).visible}switch(r){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return"And"===r}},{key:"isVisible",value:function(e){if("OCG"===e.type)return this._groups.has(e.id)?this._groups.get(e.id).visible:((0,n.warn)("Optional content group not found: ".concat(e.id)),!0);if("OCMD"===e.type){if(e.expression)return this._evaluateVisibilityExpression(e.expression);if(!e.policy||"AnyOn"===e.policy){var t,r=o(e.ids);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(!this._groups.has(i))return(0,n.warn)("Optional content group not found: ".concat(i)),!0;if(this._groups.get(i).visible)return!0}}catch(m){r.e(m)}finally{r.f()}return!1}if("AllOn"===e.policy){var a,s=o(e.ids);try{for(s.s();!(a=s.n()).done;){var l=a.value;if(!this._groups.has(l))return(0,n.warn)("Optional content group not found: ".concat(l)),!0;if(!this._groups.get(l).visible)return!1}}catch(m){s.e(m)}finally{s.f()}return!0}if("AnyOff"===e.policy){var c,u=o(e.ids);try{for(u.s();!(c=u.n()).done;){var d=c.value;if(!this._groups.has(d))return(0,n.warn)("Optional content group not found: ".concat(d)),!0;if(!this._groups.get(d).visible)return!0}}catch(m){u.e(m)}finally{u.f()}return!1}if("AllOff"===e.policy){var p,f=o(e.ids);try{for(f.s();!(p=f.n()).done;){var h=p.value;if(!this._groups.has(h))return(0,n.warn)("Optional content group not found: ".concat(h)),!0;if(this._groups.get(h).visible)return!1}}catch(m){f.e(m)}finally{f.f()}return!0}return(0,n.warn)("Unknown optional content policy ".concat(e.policy,".")),!0}return(0,n.warn)("Unknown group type ".concat(e.type,".")),!0}},{key:"setVisibility",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._groups.has(e)?this._groups.get(e).visible=!!t:(0,n.warn)("Optional content group not found: ".concat(e))}},{key:"getOrder",value:function(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}},{key:"getGroups",value:function(){return this._groups.size>0?(0,n.objectFromMap)(this._groups):null}},{key:"getGroup",value:function(e){return this._groups.get(e)||null}}])&&a(t.prototype,r),i&&a(t,i),e}();t.OptionalContentConfig=c},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var n,o=(n=r(2))&&n.__esModule?n:{default:n},i=r(4),a=r(1);function s(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,o)}function l(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){s(i,n,o,a,l,"next",e)}function l(e){s(i,n,o,a,l,"throw",e)}a(void 0)}))}}function c(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t&&p(e.prototype,t),r&&p(e,r),e}var h=function(){function e(t,r){var n=this;d(this,e),(0,i.assert)(r,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=t.progressiveDone||!1,this._contentDispositionFilename=t.contentDispositionFilename||null;var o=t.initialData;if((null==o?void 0:o.length)>0){var a=new Uint8Array(o).buffer;this._queuedChunks.push(a)}this._pdfDataRangeTransport=r,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._contentLength=t.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((function(e,t){n._onReceiveData({begin:e,chunk:t})})),this._pdfDataRangeTransport.addProgressListener((function(e,t){n._onProgress({loaded:e,total:t})})),this._pdfDataRangeTransport.addProgressiveReadListener((function(e){n._onReceiveData({chunk:e})})),this._pdfDataRangeTransport.addProgressiveDoneListener((function(){n._onProgressiveDone()})),this._pdfDataRangeTransport.transportReady()}return f(e,[{key:"_onReceiveData",value:function(e){var t=new Uint8Array(e.chunk).buffer;if(void 0===e.begin)this._fullRequestReader?this._fullRequestReader._enqueue(t):this._queuedChunks.push(t);else{var r=this._rangeReaders.some((function(r){return r._begin===e.begin&&(r._enqueue(t),!0)}));(0,i.assert)(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}},{key:"_progressiveDataLength",get:function(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}},{key:"_onProgress",value:function(e){if(void 0===e.total){var t=this._rangeReaders[0];null!=t&&t.onProgress&&t.onProgress({loaded:e.loaded})}else{var r=this._fullRequestReader;null!=r&&r.onProgress&&r.onProgress({loaded:e.loaded,total:e.total})}}},{key:"_onProgressiveDone",value:function(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}},{key:"_removeRangeReader",value:function(e){var t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}},{key:"getFullReader",value:function(){(0,i.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");var e=this._queuedChunks;return this._queuedChunks=null,new m(this,e,this._progressiveDone,this._contentDispositionFilename)}},{key:"getRangeReader",value:function(e,t){if(t<=this._progressiveDataLength)return null;var r=new g(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(r),r}},{key:"cancelAllRequests",value:function(e){this._fullRequestReader&&this._fullRequestReader.cancel(e);var t,r=c(this._rangeReaders.slice(0));try{for(r.s();!(t=r.n()).done;)t.value.cancel(e)}catch(n){r.e(n)}finally{r.f()}this._pdfDataRangeTransport.abort()}}]),e}();t.PDFDataTransportStream=h;var m=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;d(this,e),this._stream=t,this._done=n||!1,this._filename=(0,a.isPdfFile)(o)?o:null,this._queuedChunks=r||[],this._loaded=0;var i,s=c(this._queuedChunks);try{for(s.s();!(i=s.n()).done;){var l=i.value;this._loaded+=l.byteLength}}catch(u){s.e(u)}finally{s.f()}this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}var t;return f(e,[{key:"_enqueue",value:function(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}},{key:"headersReady",get:function(){return this._headersReady}},{key:"filename",get:function(){return this._filename}},{key:"isRangeSupported",get:function(){return this._stream._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._stream._isStreamingSupported}},{key:"contentLength",get:function(){return this._stream._contentLength}},{key:"read",value:(t=l(o.default.mark((function e(){var t,r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this._queuedChunks.length>0)){e.next=3;break}return t=this._queuedChunks.shift(),e.abrupt("return",{value:t,done:!1});case 3:if(!this._done){e.next=5;break}return e.abrupt("return",{value:void 0,done:!0});case 5:return r=(0,i.createPromiseCapability)(),this._requests.push(r),e.abrupt("return",r.promise);case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(e){this._done=!0;var t,r=c(this._requests);try{for(r.s();!(t=r.n()).done;)t.value.resolve({value:void 0,done:!0})}catch(n){r.e(n)}finally{r.f()}this._requests.length=0}},{key:"progressiveDone",value:function(){this._done||(this._done=!0)}}]),e}(),g=function(){function e(t,r,n){d(this,e),this._stream=t,this._begin=r,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}var t;return f(e,[{key:"_enqueue",value:function(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});var t,r=c(this._requests);try{for(r.s();!(t=r.n()).done;)t.value.resolve({value:void 0,done:!0})}catch(n){r.e(n)}finally{r.f()}this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}},{key:"isStreamingSupported",get:function(){return!1}},{key:"read",value:(t=l(o.default.mark((function e(){var t,r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._queuedChunk){e.next=4;break}return t=this._queuedChunk,this._queuedChunk=null,e.abrupt("return",{value:t,done:!1});case 4:if(!this._done){e.next=6;break}return e.abrupt("return",{value:void 0,done:!0});case 6:return r=(0,i.createPromiseCapability)(),this._requests.push(r),e.abrupt("return",r.promise);case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(e){this._done=!0;var t,r=c(this._requests);try{for(r.s();!(t=r.n()).done;)t.value.resolve({value:void 0,done:!0})}catch(n){r.e(n)}finally{r.f()}this._requests.length=0,this._stream._removeRangeReader(this)}}]),e}()},(e,t,r)=>{function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationLayer=void 0;var o=r(1),i=r(4),a=r(116),s=r(126);function l(e,t,r){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){s=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}(e,t)||y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m(e);if(t){var o=m(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return f(this,r)}}function f(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=y(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function y(e,t){if(e){if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,t,r){return t&&_(e.prototype,t),r&&_(e,r),e}var w=function(){function e(){b(this,e)}return S(e,null,[{key:"create",value:function(e){switch(e.data.annotationType){case i.AnnotationType.LINK:return new E(e);case i.AnnotationType.TEXT:return new A(e);case i.AnnotationType.WIDGET:switch(e.data.fieldType){case"Tx":return new P(e);case"Btn":return e.data.radioButton?new C(e):e.data.checkBox?new T(e):new R(e);case"Ch":return new O(e)}return new k(e);case i.AnnotationType.POPUP:return new I(e);case i.AnnotationType.FREETEXT:return new D(e);case i.AnnotationType.LINE:return new j(e);case i.AnnotationType.SQUARE:return new M(e);case i.AnnotationType.CIRCLE:return new N(e);case i.AnnotationType.POLYLINE:return new F(e);case i.AnnotationType.CARET:return new B(e);case i.AnnotationType.INK:return new U(e);case i.AnnotationType.POLYGON:return new $(e);case i.AnnotationType.HIGHLIGHT:return new z(e);case i.AnnotationType.UNDERLINE:return new q(e);case i.AnnotationType.SQUIGGLY:return new W(e);case i.AnnotationType.STRIKEOUT:return new V(e);case i.AnnotationType.STAMP:return new G(e);case i.AnnotationType.FILEATTACHMENT:return new H(e);default:return new x(e)}}}]),e}(),x=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.isRenderable,o=void 0!==n&&n,i=r.ignoreBorder,a=void 0!==i&&i,s=r.createQuadrilaterals,l=void 0!==s&&s;b(this,e),this.isRenderable=o,this.data=t.data,this.layer=t.layer,this.page=t.page,this.viewport=t.viewport,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderInteractiveForms=t.renderInteractiveForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._mouseState=t.mouseState,o&&(this.container=this._createContainer(a)),l&&(this.quadrilaterals=this._createQuadrilaterals(a))}return S(e,[{key:"_createContainer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.data,r=this.page,n=this.viewport,o=document.createElement("section"),a=t.rect[2]-t.rect[0],s=t.rect[3]-t.rect[1];o.setAttribute("data-annotation-id",t.id);var l=i.Util.normalizeRect([t.rect[0],r.view[3]-t.rect[1]+r.view[1],t.rect[2],r.view[3]-t.rect[3]+r.view[1]]);if(o.style.transform="matrix(".concat(n.transform.join(","),")"),o.style.transformOrigin="".concat(-l[0],"px ").concat(-l[1],"px"),!e&&t.borderStyle.width>0){o.style.borderWidth="".concat(t.borderStyle.width,"px"),t.borderStyle.style!==i.AnnotationBorderStyleType.UNDERLINE&&(a-=2*t.borderStyle.width,s-=2*t.borderStyle.width);var c=t.borderStyle.horizontalCornerRadius,u=t.borderStyle.verticalCornerRadius;if(c>0||u>0){var d="".concat(c,"px / ").concat(u,"px");o.style.borderRadius=d}switch(t.borderStyle.style){case i.AnnotationBorderStyleType.SOLID:o.style.borderStyle="solid";break;case i.AnnotationBorderStyleType.DASHED:o.style.borderStyle="dashed";break;case i.AnnotationBorderStyleType.BEVELED:(0,i.warn)("Unimplemented border style: beveled");break;case i.AnnotationBorderStyleType.INSET:(0,i.warn)("Unimplemented border style: inset");break;case i.AnnotationBorderStyleType.UNDERLINE:o.style.borderBottomStyle="solid"}t.color?o.style.borderColor=i.Util.makeHexColor(0|t.color[0],0|t.color[1],0|t.color[2]):o.style.borderWidth=0}return o.style.left="".concat(l[0],"px"),o.style.top="".concat(l[1],"px"),o.style.width="".concat(a,"px"),o.style.height="".concat(s,"px"),o}},{key:"_createQuadrilaterals",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.data.quadPoints)return null;var t,r=[],n=this.data.rect,o=g(this.data.quadPoints);try{for(o.s();!(t=o.n()).done;){var i=t.value;this.data.rect=[i[2].x,i[2].y,i[1].x,i[1].y],r.push(this._createContainer(e))}}catch(a){o.e(a)}finally{o.f()}return this.data.rect=n,r}},{key:"_createPopup",value:function(e,t){var r=this.container;this.quadrilaterals&&(e=e||this.quadrilaterals,r=this.quadrilaterals[0]),e||((e=document.createElement("div")).style.height=r.style.height,e.style.width=r.style.width,r.appendChild(e));var n=new L({container:r,trigger:e,color:t.color,title:t.title,modificationDate:t.modificationDate,contents:t.contents,hideWrapper:!0}).render();n.style.left=r.style.width,r.appendChild(n)}},{key:"_renderQuadrilaterals",value:function(e){var t,r=g(this.quadrilaterals);try{for(r.s();!(t=r.n()).done;)t.value.className=e}catch(n){r.e(n)}finally{r.f()}return this.quadrilaterals}},{key:"render",value:function(){(0,i.unreachable)("Abstract method `AnnotationElement.render` called")}}]),e}(),E=function(e){u(r,e);var t=p(r);function r(e){b(this,r);var n=!!(e.data.url||e.data.dest||e.data.action||e.data.isTooltipOnly||e.data.actions&&(e.data.actions.Action||e.data.actions["Mouse Up"]||e.data.actions["Mouse Down"]));return t.call(this,e,{isRenderable:n,createQuadrilaterals:!0})}return S(r,[{key:"render",value:function(){var e=this.data,t=this.linkService,r=document.createElement("a");return e.url?(0,o.addLinkAttributes)(r,{url:e.url,target:e.newWindow?o.LinkTarget.BLANK:t.externalLinkTarget,rel:t.externalLinkRel,enabled:t.externalLinkEnabled}):e.action?this._bindNamedAction(r,e.action):e.dest?this._bindLink(r,e.dest):e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions?this._bindJSAction(r,e):this._bindLink(r,""),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((function(e,t){var n=0===t?r:r.cloneNode();return e.appendChild(n),e})):(this.container.className="linkAnnotation",this.container.appendChild(r),this.container)}},{key:"_bindLink",value:function(e,t){var r=this;e.href=this.linkService.getDestinationHash(t),e.onclick=function(){return t&&r.linkService.goToDestination(t),!1},(t||""===t)&&(e.className="internalLink")}},{key:"_bindNamedAction",value:function(e,t){var r=this;e.href=this.linkService.getAnchorUrl(""),e.onclick=function(){return r.linkService.executeNamedAction(t),!1},e.className="internalLink"}},{key:"_bindJSAction",value:function(e,t){var r=this;e.href=this.linkService.getAnchorUrl("");for(var n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]),o=function(){var o=a[i],s=n.get(o);if(!s)return"continue";e[s]=function(){var e;return null===(e=r.linkService.eventBus)||void 0===e||e.dispatch("dispatcheventinsandbox",{source:r,detail:{id:t.id,name:o}}),!1}},i=0,a=Object.keys(t.actions);i<a.length;i++)o();e.className="internalLink"}}]),r}(x),A=function(e){u(r,e);var t=p(r);function r(e){b(this,r);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return t.call(this,e,{isRenderable:n})}return S(r,[{key:"render",value:function(){this.container.className="textAnnotation";var e=document.createElement("img");return e.style.height=this.container.style.height,e.style.width=this.container.style.width,e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.alt="[{{type}} Annotation]",e.dataset.l10nId="text_annotation_type",e.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(e,this.data),this.container.appendChild(e),this.container}}]),r}(x),k=function(e){u(r,e);var t=p(r);function r(){return b(this,r),t.apply(this,arguments)}return S(r,[{key:"render",value:function(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}},{key:"_getKeyModifier",value:function(e){return navigator.platform.includes("Win")&&e.ctrlKey||navigator.platform.includes("Mac")&&e.metaKey}},{key:"_setEventListener",value:function(e,t,r,n){var o=this;t.includes("mouse")?e.addEventListener(t,(function(e){var t;null===(t=o.linkService.eventBus)||void 0===t||t.dispatch("dispatcheventinsandbox",{source:o,detail:{id:o.data.id,name:r,value:n(e),shift:e.shiftKey,modifier:o._getKeyModifier(e)}})})):e.addEventListener(t,(function(e){var t;null===(t=o.linkService.eventBus)||void 0===t||t.dispatch("dispatcheventinsandbox",{source:o,detail:{id:o.data.id,name:r,value:e.target.checked}})}))}},{key:"_setEventListeners",value:function(e,t,r){var n,o=g(t);try{for(o.s();!(n=o.n()).done;){var i,a=c(n.value,2),s=a[0],l=a[1];("Action"===l||null!==(i=this.data.actions)&&void 0!==i&&i[l])&&this._setEventListener(e,s,l,r)}}catch(u){o.e(u)}finally{o.f()}}},{key:"_dispatchEventFromSandbox",value:function(e,t){for(var r=this,n=function(e,t,r){var n=r.detail[e];r.target.style[t]=s.ColorConverters["".concat(n[0],"_HTML")](n.slice(1))},o={display:function(e){var t=e.detail.display%2==1;e.target.style.visibility=t?"hidden":"visible",r.annotationStorage.setValue(r.data.id,{hidden:t,print:0===e.detail.display||3===e.detail.display})},print:function(e){r.annotationStorage.setValue(r.data.id,{print:e.detail.print})},hidden:function(e){e.target.style.visibility=e.detail.hidden?"hidden":"visible",r.annotationStorage.setValue(r.data.id,{hidden:e.detail.hidden})},focus:function(e){setTimeout((function(){return e.target.focus({preventScroll:!1})}),0)},userName:function(e){e.target.title=e.detail.userName},readonly:function(e){e.detail.readonly?e.target.setAttribute("readonly",""):e.target.removeAttribute("readonly")},required:function(e){e.detail.required?e.target.setAttribute("required",""):e.target.removeAttribute("required")},bgColor:function(e){n("bgColor","backgroundColor",e)},fillColor:function(e){n("fillColor","backgroundColor",e)},fgColor:function(e){n("fgColor","color",e)},textColor:function(e){n("textColor","color",e)},borderColor:function(e){n("borderColor","borderColor",e)},strokeColor:function(e){n("strokeColor","borderColor",e)}},i=0,a=Object.keys(t.detail);i<a.length;i++){var l=a[i],c=e[l]||o[l];c&&c(t)}}}]),r}(x),P=function(e){u(r,e);var t=p(r);function r(e){b(this,r);var n=e.renderInteractiveForms||!e.data.hasAppearance&&!!e.data.fieldValue;return t.call(this,e,{isRenderable:n})}return S(r,[{key:"setPropertyOnSiblings",value:function(e,t,r,n){var o,i=this.annotationStorage,a=g(document.getElementsByName(e.name));try{for(a.s();!(o=a.n()).done;){var s=o.value;if(s!==e){s[t]=r;var l=Object.create(null);l[n]=r,i.setValue(s.getAttribute("id"),l)}}}catch(c){a.e(c)}finally{a.f()}}},{key:"render",value:function(){var e=this,t=this.annotationStorage,r=this.data.id;this.container.className="textWidgetAnnotation";var n=null;if(this.renderInteractiveForms){var o=t.getValue(r,{value:this.data.fieldValue,valueAsString:this.data.fieldValue}),i=o.valueAsString||o.value||"",a={userValue:null,formattedValue:null,beforeInputSelectionRange:null,beforeInputValue:null};this.data.multiLine?(n=document.createElement("textarea")).textContent=i:((n=document.createElement("input")).type="text",n.setAttribute("value",i)),a.userValue=i,n.setAttribute("id",r),n.addEventListener("input",(function(o){t.setValue(r,{value:o.target.value}),e.setPropertyOnSiblings(n,"value",o.target.value,"value")}));var s=function(e){a.formattedValue&&(e.target.value=a.formattedValue),e.target.scrollLeft=0,a.beforeInputSelectionRange=null};if(this.enableScripting&&this.hasJSActions){var l;n.addEventListener("focus",(function(e){a.userValue&&(e.target.value=a.userValue)})),n.addEventListener("updatefromsandbox",(function(n){var o={value:function(e){a.userValue=e.detail.value||"",t.setValue(r,{value:a.userValue.toString()}),a.formattedValue||(e.target.value=a.userValue)},valueAsString:function(e){a.formattedValue=e.detail.valueAsString||"",e.target!==document.activeElement&&(e.target.value=a.formattedValue),t.setValue(r,{formattedValue:a.formattedValue})},selRange:function(e){var t=c(e.detail.selRange,2),r=t[0],n=t[1];r>=0&&n<e.target.value.length&&e.target.setSelectionRange(r,n)}};e._dispatchEventFromSandbox(o,n)})),n.addEventListener("keydown",(function(t){var n;a.beforeInputValue=t.target.value;var o=-1;"Escape"===t.key?o=0:"Enter"===t.key?o=2:"Tab"===t.key&&(o=3),-1!==o&&(a.userValue=t.target.value,null===(n=e.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:e,detail:{id:r,name:"Keystroke",value:t.target.value,willCommit:!0,commitKey:o,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}}))}));var u=s;s=null,n.addEventListener("blur",(function(t){var n;e._mouseState.isDown&&(a.userValue=t.target.value,null===(n=e.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:e,detail:{id:r,name:"Keystroke",value:t.target.value,willCommit:!0,commitKey:1,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}})),u(t)})),n.addEventListener("mousedown",(function(e){a.beforeInputValue=e.target.value,a.beforeInputSelectionRange=null})),n.addEventListener("keyup",(function(e){e.target.selectionStart===e.target.selectionEnd&&(a.beforeInputSelectionRange=null)})),n.addEventListener("select",(function(e){a.beforeInputSelectionRange=[e.target.selectionStart,e.target.selectionEnd]})),null!==(l=this.data.actions)&&void 0!==l&&l.Keystroke&&n.addEventListener("input",(function(t){var n,o=-1,i=-1;if(a.beforeInputSelectionRange){var s=c(a.beforeInputSelectionRange,2);o=s[0],i=s[1]}null===(n=e.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:e,detail:{id:r,name:"Keystroke",value:a.beforeInputValue,change:t.data,willCommit:!1,selStart:o,selEnd:i}})})),this._setEventListeners(n,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(function(e){return e.target.value}))}if(s&&n.addEventListener("blur",s),n.disabled=this.data.readOnly,n.name=this.data.fieldName,null!==this.data.maxLen&&(n.maxLength=this.data.maxLen),this.data.comb){var d=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;n.classList.add("comb"),n.style.letterSpacing="calc(".concat(d,"px - 1ch)")}}else(n=document.createElement("div")).textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell";return this._setTextStyle(n),this.container.appendChild(n),this.container}},{key:"_setTextStyle",value:function(e){var t=this.data.defaultAppearanceData,r=t.fontSize,n=t.fontColor,o=e.style;r&&(o.fontSize="".concat(r,"px")),o.color=i.Util.makeHexColor(n[0],n[1],n[2]),null!==this.data.textAlignment&&(o.textAlign=["left","center","right"][this.data.textAlignment])}}]),r}(k),T=function(e){u(r,e);var t=p(r);function r(e){return b(this,r),t.call(this,e,{isRenderable:e.renderInteractiveForms})}return S(r,[{key:"render",value:function(){var e=this,t=this.annotationStorage,r=this.data,n=r.id,o=t.getValue(n,{value:r.fieldValue&&(r.exportValue&&r.exportValue===r.fieldValue||!r.exportValue&&"Off"!==r.fieldValue)}).value;"string"==typeof o&&(o="Off"!==o,t.setValue(n,{value:o})),this.container.className="buttonWidgetAnnotation checkBox";var i=document.createElement("input");return i.disabled=r.readOnly,i.type="checkbox",i.name=this.data.fieldName,o&&i.setAttribute("checked",!0),i.setAttribute("id",n),i.addEventListener("change",(function(e){var r,o=e.target.name,i=g(document.getElementsByName(o));try{for(i.s();!(r=i.n()).done;){var a=r.value;a!==e.target&&(a.checked=!1,t.setValue(a.parentNode.getAttribute("data-annotation-id"),{value:!1}))}}catch(s){i.e(s)}finally{i.f()}t.setValue(n,{value:e.target.checked})})),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",(function(r){var o={value:function(e){e.target.checked="Off"!==e.detail.value,t.setValue(n,{value:e.target.checked})}};e._dispatchEventFromSandbox(o,r)})),this._setEventListeners(i,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(function(e){return e.target.checked}))),this.container.appendChild(i),this.container}}]),r}(k),C=function(e){u(r,e);var t=p(r);function r(e){return b(this,r),t.call(this,e,{isRenderable:e.renderInteractiveForms})}return S(r,[{key:"render",value:function(){var e=this;this.container.className="buttonWidgetAnnotation radioButton";var t=this.annotationStorage,r=this.data,n=r.id,o=t.getValue(n,{value:r.fieldValue===r.buttonValue}).value;"string"==typeof o&&(o=o!==r.buttonValue,t.setValue(n,{value:o}));var i=document.createElement("input");if(i.disabled=r.readOnly,i.type="radio",i.name=r.fieldName,o&&i.setAttribute("checked",!0),i.setAttribute("id",n),i.addEventListener("change",(function(e){var r,o=e.target,i=g(document.getElementsByName(o.name));try{for(i.s();!(r=i.n()).done;){var a=r.value;a!==o&&t.setValue(a.getAttribute("id"),{value:!1})}}catch(s){i.e(s)}finally{i.f()}t.setValue(n,{value:o.checked})})),this.enableScripting&&this.hasJSActions){var a=r.buttonValue;i.addEventListener("updatefromsandbox",(function(r){var o={value:function(e){var r,o=a===e.detail.value,i=g(document.getElementsByName(e.target.name));try{for(i.s();!(r=i.n()).done;){var s=r.value,l=s.getAttribute("id");s.checked=l===n&&o,t.setValue(l,{value:s.checked})}}catch(c){i.e(c)}finally{i.f()}}};e._dispatchEventFromSandbox(o,r)})),this._setEventListeners(i,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(function(e){return e.target.checked}))}return this.container.appendChild(i),this.container}}]),r}(k),R=function(e){u(r,e);var t=p(r);function r(){return b(this,r),t.apply(this,arguments)}return S(r,[{key:"render",value:function(){var e=l(m(r.prototype),"render",this).call(this);return e.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(e.title=this.data.alternativeText),e}}]),r}(E),O=function(e){u(r,e);var t=p(r);function r(e){return b(this,r),t.call(this,e,{isRenderable:e.renderInteractiveForms})}return S(r,[{key:"render",value:function(){var e=this;this.container.className="choiceWidgetAnnotation";var t=this.annotationStorage,r=this.data.id;t.getValue(r,{value:this.data.fieldValue.length>0?this.data.fieldValue[0]:void 0});var n=document.createElement("select");n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.setAttribute("id",r),this.data.combo||(n.size=this.data.options.length,this.data.multiSelect&&(n.multiple=!0));var o,i=g(this.data.options);try{for(i.s();!(o=i.n()).done;){var a=o.value,s=document.createElement("option");s.textContent=a.displayValue,s.value=a.exportValue,this.data.fieldValue.includes(a.exportValue)&&s.setAttribute("selected",!0),n.appendChild(s)}}catch(u){i.e(u)}finally{i.f()}var l=function(e,t){var r=t?"value":"textContent",n=e.target.options;return e.target.multiple?Array.prototype.filter.call(n,(function(e){return e.selected})).map((function(e){return e[r]})):-1===n.selectedIndex?null:n[n.selectedIndex][r]},c=function(e){var t=e.target.options;return Array.prototype.map.call(t,(function(e){return{displayValue:e.textContent,exportValue:e.value}}))};return this.enableScripting&&this.hasJSActions?(n.addEventListener("updatefromsandbox",(function(o){var i={value:function(e){var o=n.options,i=e.detail.value,a=new Set(Array.isArray(i)?i:[i]);Array.prototype.forEach.call(o,(function(e){e.selected=a.has(e.value)})),t.setValue(r,{value:l(e,!0)})},multipleSelection:function(e){n.multiple=!0},remove:function(e){var o=n.options,i=e.detail.remove;o[i].selected=!1,n.remove(i),o.length>0&&-1===Array.prototype.findIndex.call(o,(function(e){return e.selected}))&&(o[0].selected=!0),t.setValue(r,{value:l(e,!0),items:c(e)})},clear:function(e){for(;0!==n.length;)n.remove(0);t.setValue(r,{value:null,items:[]})},insert:function(e){var o=e.detail.insert,i=o.index,a=o.displayValue,s=o.exportValue,u=document.createElement("option");u.textContent=a,u.value=s,n.insertBefore(u,n.children[i]),t.setValue(r,{value:l(e,!0),items:c(e)})},items:function(e){for(var o=e.detail.items;0!==n.length;)n.remove(0);var i,a=g(o);try{for(a.s();!(i=a.n()).done;){var s=i.value,d=s.displayValue,p=s.exportValue,f=document.createElement("option");f.textContent=d,f.value=p,n.appendChild(f)}}catch(u){a.e(u)}finally{a.f()}n.options.length>0&&(n.options[0].selected=!0),t.setValue(r,{value:l(e,!0),items:c(e)})},indices:function(e){var n=new Set(e.detail.indices),o=e.target.options;Array.prototype.forEach.call(o,(function(e,t){e.selected=n.has(t)})),t.setValue(r,{value:l(e,!0)})},editable:function(e){e.target.disabled=!e.detail.editable}};e._dispatchEventFromSandbox(i,o)})),n.addEventListener("input",(function(n){var o,i=l(n,!0),a=l(n,!1);t.setValue(r,{value:i}),null===(o=e.linkService.eventBus)||void 0===o||o.dispatch("dispatcheventinsandbox",{source:e,detail:{id:r,name:"Keystroke",value:a,changeEx:i,willCommit:!0,commitKey:1,keyDown:!1}})})),this._setEventListeners(n,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],(function(e){return e.target.checked}))):n.addEventListener("input",(function(e){t.setValue(r,{value:l(e)})})),this.container.appendChild(n),this.container}}]),r}(k),I=function(e){u(r,e);var t=p(r);function r(e){b(this,r);var n=!(!e.data.title&&!e.data.contents);return t.call(this,e,{isRenderable:n})}return S(r,[{key:"render",value:function(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;var e='[data-annotation-id="'.concat(this.data.parentId,'"]'),t=this.layer.querySelectorAll(e);if(0===t.length)return this.container;var r=new L({container:this.container,trigger:Array.from(t),color:this.data.color,title:this.data.title,modificationDate:this.data.modificationDate,contents:this.data.contents}),n=this.page,o=i.Util.normalizeRect([this.data.parentRect[0],n.view[3]-this.data.parentRect[1]+n.view[1],this.data.parentRect[2],n.view[3]-this.data.parentRect[3]+n.view[1]]),a=o[0]+this.data.parentRect[2]-this.data.parentRect[0],s=o[1];return this.container.style.transformOrigin="".concat(-a,"px ").concat(-s,"px"),this.container.style.left="".concat(a,"px"),this.container.style.top="".concat(s,"px"),this.container.appendChild(r.render()),this.container}}]),r}(x),L=function(){function e(t){b(this,e),this.container=t.container,this.trigger=t.trigger,this.color=t.color,this.title=t.title,this.modificationDate=t.modificationDate,this.contents=t.contents,this.hideWrapper=t.hideWrapper||!1,this.pinned=!1}return S(e,[{key:"render",value:function(){var e=document.createElement("div");e.className="popupWrapper",this.hideElement=this.hideWrapper?e:this.container,this.hideElement.hidden=!0;var t=document.createElement("div");t.className="popup";var r=this.color;if(r){var n=.7*(255-r[0])+r[0],a=.7*(255-r[1])+r[1],s=.7*(255-r[2])+r[2];t.style.backgroundColor=i.Util.makeHexColor(0|n,0|a,0|s)}var l=document.createElement("h1");l.textContent=this.title,t.appendChild(l);var c=o.PDFDateString.toDateObject(this.modificationDate);if(c){var u=document.createElement("span");u.textContent="{{date}}, {{time}}",u.dataset.l10nId="annotation_date_string",u.dataset.l10nArgs=JSON.stringify({date:c.toLocaleDateString(),time:c.toLocaleTimeString()}),t.appendChild(u)}var d=this._formatContents(this.contents);t.appendChild(d),Array.isArray(this.trigger)||(this.trigger=[this.trigger]);var p,f=g(this.trigger);try{for(f.s();!(p=f.n()).done;){var h=p.value;h.addEventListener("click",this._toggle.bind(this)),h.addEventListener("mouseover",this._show.bind(this,!1)),h.addEventListener("mouseout",this._hide.bind(this,!1))}}catch(m){f.e(m)}finally{f.f()}return t.addEventListener("click",this._hide.bind(this,!0)),e.appendChild(t),e}},{key:"_formatContents",value:function(e){for(var t=document.createElement("p"),r=e.split(/(?:\r\n?|\n)/),n=0,o=r.length;n<o;++n){var i=r[n];t.appendChild(document.createTextNode(i)),n<o-1&&t.appendChild(document.createElement("br"))}return t}},{key:"_toggle",value:function(){this.pinned?this._hide(!0):this._show(!0)}},{key:"_show",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex+=1)}},{key:"_hide",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&(this.pinned=!1),this.hideElement.hidden||this.pinned||(this.hideElement.hidden=!0,this.container.style.zIndex-=1)}}]),e}(),D=function(e){u(r,e);var t=p(r);function r(e){b(this,r);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return t.call(this,e,{isRenderable:n,ignoreBorder:!0})}return S(r,[{key:"render",value:function(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}]),r}(x),j=function(e){u(r,e);var t=p(r);function r(e){b(this,r);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return t.call(this,e,{isRenderable:n,ignoreBorder:!0})}return S(r,[{key:"render",value:function(){this.container.className="lineAnnotation";var e=this.data,t=e.rect[2]-e.rect[0],r=e.rect[3]-e.rect[1],n=this.svgFactory.create(t,r),o=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),o.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),o.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),o.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),n.appendChild(o),this.container.append(n),this._createPopup(o,e),this.container}}]),r}(x),M=function(e){u(r,e);var t=p(r);function r(e){b(this,r);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return t.call(this,e,{isRenderable:n,ignoreBorder:!0})}return S(r,[{key:"render",value:function(){this.container.className="squareAnnotation";var e=this.data,t=e.rect[2]-e.rect[0],r=e.rect[3]-e.rect[1],n=this.svgFactory.create(t,r),o=e.borderStyle.width,i=this.svgFactory.createElement("svg:rect");return i.setAttribute("x",o/2),i.setAttribute("y",o/2),i.setAttribute("width",t-o),i.setAttribute("height",r-o),i.setAttribute("stroke-width",o||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","none"),n.appendChild(i),this.container.append(n),this._createPopup(i,e),this.container}}]),r}(x),N=function(e){u(r,e);var t=p(r);function r(e){b(this,r);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return t.call(this,e,{isRenderable:n,ignoreBorder:!0})}return S(r,[{key:"render",value:function(){this.container.className="circleAnnotation";var e=this.data,t=e.rect[2]-e.rect[0],r=e.rect[3]-e.rect[1],n=this.svgFactory.create(t,r),o=e.borderStyle.width,i=this.svgFactory.createElement("svg:ellipse");return i.setAttribute("cx",t/2),i.setAttribute("cy",r/2),i.setAttribute("rx",t/2-o/2),i.setAttribute("ry",r/2-o/2),i.setAttribute("stroke-width",o||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","none"),n.appendChild(i),this.container.append(n),this._createPopup(i,e),this.container}}]),r}(x),F=function(e){u(r,e);var t=p(r);function r(e){var n;b(this,r);var o=!!(e.data.hasPopup||e.data.title||e.data.contents);return(n=t.call(this,e,{isRenderable:o,ignoreBorder:!0})).containerClassName="polylineAnnotation",n.svgElementName="svg:polyline",n}return S(r,[{key:"render",value:function(){this.container.className=this.containerClassName;var e,t=this.data,r=t.rect[2]-t.rect[0],n=t.rect[3]-t.rect[1],o=this.svgFactory.create(r,n),i=[],a=g(t.vertices);try{for(a.s();!(e=a.n()).done;){var s=e.value,l=s.x-t.rect[0],c=t.rect[3]-s.y;i.push(l+","+c)}}catch(d){a.e(d)}finally{a.f()}i=i.join(" ");var u=this.svgFactory.createElement(this.svgElementName);return u.setAttribute("points",i),u.setAttribute("stroke-width",t.borderStyle.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","none"),o.appendChild(u),this.container.append(o),this._createPopup(u,t),this.container}}]),r}(x),$=function(e){u(r,e);var t=p(r);function r(e){var n;return b(this,r),(n=t.call(this,e)).containerClassName="polygonAnnotation",n.svgElementName="svg:polygon",n}return r}(F),B=function(e){u(r,e);var t=p(r);function r(e){b(this,r);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return t.call(this,e,{isRenderable:n,ignoreBorder:!0})}return S(r,[{key:"render",value:function(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}]),r}(x),U=function(e){u(r,e);var t=p(r);function r(e){var n;b(this,r);var o=!!(e.data.hasPopup||e.data.title||e.data.contents);return(n=t.call(this,e,{isRenderable:o,ignoreBorder:!0})).containerClassName="inkAnnotation",n.svgElementName="svg:polyline",n}return S(r,[{key:"render",value:function(){this.container.className=this.containerClassName;var e,t=this.data,r=t.rect[2]-t.rect[0],n=t.rect[3]-t.rect[1],o=this.svgFactory.create(r,n),i=g(t.inkLists);try{for(i.s();!(e=i.n()).done;){var a,s=e.value,l=[],c=g(s);try{for(c.s();!(a=c.n()).done;){var u=a.value,d=u.x-t.rect[0],p=t.rect[3]-u.y;l.push("".concat(d,",").concat(p))}}catch(h){c.e(h)}finally{c.f()}l=l.join(" ");var f=this.svgFactory.createElement(this.svgElementName);f.setAttribute("points",l),f.setAttribute("stroke-width",t.borderStyle.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","none"),this._createPopup(f,t),o.appendChild(f)}}catch(h){i.e(h)}finally{i.f()}return this.container.append(o),this.container}}]),r}(x),z=function(e){u(r,e);var t=p(r);function r(e){b(this,r);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return t.call(this,e,{isRenderable:n,ignoreBorder:!0,createQuadrilaterals:!0})}return S(r,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}]),r}(x),q=function(e){u(r,e);var t=p(r);function r(e){b(this,r);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return t.call(this,e,{isRenderable:n,ignoreBorder:!0,createQuadrilaterals:!0})}return S(r,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}]),r}(x),W=function(e){u(r,e);var t=p(r);function r(e){b(this,r);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return t.call(this,e,{isRenderable:n,ignoreBorder:!0,createQuadrilaterals:!0})}return S(r,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}]),r}(x),V=function(e){u(r,e);var t=p(r);function r(e){b(this,r);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return t.call(this,e,{isRenderable:n,ignoreBorder:!0,createQuadrilaterals:!0})}return S(r,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}]),r}(x),G=function(e){u(r,e);var t=p(r);function r(e){b(this,r);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return t.call(this,e,{isRenderable:n,ignoreBorder:!0})}return S(r,[{key:"render",value:function(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}]),r}(x),H=function(e){u(r,e);var t=p(r);function r(e){var n,a;b(this,r);var s=(a=t.call(this,e,{isRenderable:!0})).data.file,l=s.filename,c=s.content;return a.filename=(0,o.getFilenameFromUrl)(l),a.content=c,null===(n=a.linkService.eventBus)||void 0===n||n.dispatch("fileattachmentannotation",{source:h(a),id:(0,i.stringToPDFString)(l),filename:l,content:c}),a}return S(r,[{key:"render",value:function(){this.container.className="fileAttachmentAnnotation";var e=document.createElement("div");return e.style.height=this.container.style.height,e.style.width=this.container.style.width,e.addEventListener("dblclick",this._download.bind(this)),this.data.hasPopup||!this.data.title&&!this.data.contents||this._createPopup(e,this.data),this.container.appendChild(e),this.container}},{key:"_download",value:function(){var e;null===(e=this.downloadManager)||void 0===e||e.openOrDownloadData(this.container,this.content,this.filename)}}]),r}(x),K=function(){function e(){b(this,e)}return S(e,null,[{key:"render",value:function(e){var t,r=[],n=[],s=g(e.annotations);try{for(s.s();!(t=s.n()).done;){var l=t.value;l&&(l.annotationType!==i.AnnotationType.POPUP?r.push(l):n.push(l))}}catch(v){s.e(v)}finally{s.f()}n.length&&r.push.apply(r,n);for(var c=0,u=r;c<u.length;c++){var d=u[c],p=w.create({data:d,layer:e.div,page:e.page,viewport:e.viewport,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderInteractiveForms:!1!==e.renderInteractiveForms,svgFactory:new o.DOMSVGFactory,annotationStorage:e.annotationStorage||new a.AnnotationStorage,enableScripting:e.enableScripting,hasJSActions:e.hasJSActions,mouseState:e.mouseState||{isDown:!1}});if(p.isRenderable){var f=p.render();if(d.hidden&&(f.style.visibility="hidden"),Array.isArray(f)){var h,m=g(f);try{for(m.s();!(h=m.n()).done;){var y=h.value;e.div.appendChild(y)}}catch(v){m.e(v)}finally{m.f()}}else p instanceof I?e.div.prepend(f):e.div.appendChild(f)}}}},{key:"update",value:function(e){var t,r="matrix(".concat(e.viewport.transform.join(","),")"),n=g(e.annotations);try{for(n.s();!(t=n.n()).done;){var o=t.value,i=e.div.querySelectorAll('[data-annotation-id="'.concat(o.id,'"]'));if(i){var a,s=g(i);try{for(s.s();!(a=s.n()).done;)a.value.style.transform=r}catch(l){s.e(l)}finally{s.f()}}}}catch(l){n.e(l)}finally{n.f()}e.div.hidden=!1}}]),e}();t.AnnotationLayer=K},(e,t)=>{function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){s=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e){return Math.floor(255*Math.max(0,Math.min(1,e))).toString(16).padStart(2,"0")}Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0;var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"CMYK_G",value:function(e){var t=r(e,4),n=t[0],o=t[1],i=t[2],a=t[3];return["G",1-Math.min(1,.3*n+.59*i+.11*o+a)]}},{key:"G_CMYK",value:function(e){return["CMYK",0,0,0,1-r(e,1)[0]]}},{key:"G_RGB",value:function(e){var t=r(e,1)[0];return["RGB",t,t,t]}},{key:"G_HTML",value:function(e){var t=i(r(e,1)[0]);return"#".concat(t).concat(t).concat(t)}},{key:"RGB_G",value:function(e){var t=r(e,3);return["G",.3*t[0]+.59*t[1]+.11*t[2]]}},{key:"RGB_HTML",value:function(e){var t=r(e,3),n=t[0],o=t[1],a=t[2],s=i(n),l=i(o),c=i(a);return"#".concat(s).concat(l).concat(c)}},{key:"T_HTML",value:function(){return"#00000000"}},{key:"CMYK_RGB",value:function(e){var t=r(e,4),n=t[0],o=t[1],i=t[2],a=t[3];return["RGB",1-Math.min(1,n+a),1-Math.min(1,i+a),1-Math.min(1,o+a)]}},{key:"CMYK_HTML",value:function(e){return this.RGB_HTML(this.CMYK_RGB(e))}},{key:"RGB_CMYK",value:function(e){var t=r(e,3),n=1-t[0],o=1-t[1],i=1-t[2];return["CMYK",n,o,i,Math.min(n,o,i)]}}],(n=null)&&o(t.prototype,n),a&&o(t,a),e}();t.ColorConverters=a},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.renderTextLayer=function(e){var t=new m({textContent:e.textContent,textContentStream:e.textContentStream,container:e.container,viewport:e.viewport,textDivs:e.textDivs,textContentItemsStr:e.textContentItemsStr,enhanceTextSelection:e.enhanceTextSelection});return t._render(e.timeout),t};var n=r(4);function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var s=30,l=new Map,c=/^\s+$/g;function u(e,t,r,o){var i=document.createElement("span"),a={angle:0,canvasWidth:0,hasText:""!==t.str,hasEOL:t.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1};e._textDivs.push(i);var u=n.Util.transform(e._viewport.transform,t.transform),d=Math.atan2(u[1],u[0]),p=r[t.fontName];p.vertical&&(d+=Math.PI/2);var f,h,m=Math.hypot(u[2],u[3]),g=m*function(e,t){var r=l.get(e);if(r)return r;t.save(),t.font="".concat(s,"px ").concat(e);var n=t.measureText(""),o=n.fontBoundingBoxAscent,i=Math.abs(n.fontBoundingBoxDescent);if(o){t.restore();var a=o/(o+i);return l.set(e,a),a}t.strokeStyle="red",t.clearRect(0,0,s,s),t.strokeText("g",0,0);var c=t.getImageData(0,0,s,s).data;i=0;for(var u=c.length-1-3;u>=0;u-=4)if(c[u]>0){i=Math.ceil(u/4/s);break}t.clearRect(0,0,s,s),t.strokeText("A",0,s),o=0;for(var d=0,p=(c=t.getImageData(0,0,s,s).data).length;d<p;d+=4)if(c[d]>0){o=s-Math.floor(d/4/s);break}if(t.restore(),o){var f=o/(o+i);return l.set(e,f),f}return l.set(e,.8),.8}(p.fontFamily,o);0===d?(f=u[4],h=u[5]-g):(f=u[4]+g*Math.sin(d),h=u[5]-g*Math.cos(d)),i.style.left="".concat(f,"px"),i.style.top="".concat(h,"px"),i.style.fontSize="".concat(m,"px"),i.style.fontFamily=p.fontFamily,i.setAttribute("role","presentation"),i.textContent=t.str,i.dir=t.dir,e._fontInspectorEnabled&&(i.dataset.fontName=t.fontName),0!==d&&(a.angle=d*(180/Math.PI));var y=!1;if(t.str.length>1||e._enhanceTextSelection&&c.test(t.str))y=!0;else if(t.transform[0]!==t.transform[3]){var v=Math.abs(t.transform[0]),b=Math.abs(t.transform[3]);v!==b&&Math.max(v,b)/Math.min(v,b)>1.5&&(y=!0)}if(y&&(p.vertical?a.canvasWidth=t.height*e._viewport.scale:a.canvasWidth=t.width*e._viewport.scale),e._textDivProperties.set(i,a),e._textContentStream&&e._layoutText(i),e._enhanceTextSelection&&a.hasText){var _=1,S=0;0!==d&&(_=Math.cos(d),S=Math.sin(d));var w,x,E=(p.vertical?t.height:t.width)*e._viewport.scale,A=m;0!==d?(w=[_,S,-S,_,f,h],x=n.Util.getAxialAlignedBoundingBox([0,0,E,A],w)):x=[f,h,f+E,h+A],e._bounds.push({left:x[0],top:x[1],right:x[2],bottom:x[3],div:i,size:[E,A],m:w})}}function d(e){if(!e._canceled){var t=e._textDivs,r=e._capability,n=t.length;if(n>1e5)return e._renderingDone=!0,void r.resolve();if(!e._textContentStream)for(var o=0;o<n;o++)e._layoutText(t[o]);e._renderingDone=!0,r.resolve()}}function p(e,t,r){for(var n=0,o=0;o<r;o++){var i=e[t++];i>0&&(n=n?Math.min(i,n):i)}return n}function f(e){for(var t=e._bounds,r=e._viewport,o=function(e,t,r){var n=r.map((function(e,t){return{x1:e.left,y1:e.top,x2:e.right,y2:e.bottom,index:t,x1New:void 0,x2New:void 0}}));h(e,n);var o,a=new Array(r.length),s=i(n);try{for(s.s();!(o=s.n()).done;){var l=o.value,c=l.index;a[c]={left:l.x1New,top:0,right:l.x2New,bottom:0}}}catch(m){s.e(m)}finally{s.f()}r.map((function(t,r){var o=a[r],i=n[r];i.x1=t.top,i.y1=e-o.right,i.x2=t.bottom,i.y2=e-o.left,i.index=r,i.x1New=void 0,i.x2New=void 0})),h(t,n);var u,d=i(n);try{for(d.s();!(u=d.n()).done;){var p=u.value,f=p.index;a[f].top=p.x1New,a[f].bottom=p.x2New}}catch(m){d.e(m)}finally{d.f()}return a}(r.width,r.height,t),a=0;a<o.length;a++){var s=t[a].div,l=e._textDivProperties.get(s);if(0!==l.angle){for(var c=o[a],u=t[a],d=u.m,f=d[0],m=d[1],g=[[0,0],[0,u.size[1]],[u.size[0],0],u.size],y=new Float64Array(64),v=0,b=g.length;v<b;v++){var _=n.Util.applyTransform(g[v],d);y[v+0]=f&&(c.left-_[0])/f,y[v+4]=m&&(c.top-_[1])/m,y[v+8]=f&&(c.right-_[0])/f,y[v+12]=m&&(c.bottom-_[1])/m,y[v+16]=m&&(c.left-_[0])/-m,y[v+20]=f&&(c.top-_[1])/f,y[v+24]=m&&(c.right-_[0])/-m,y[v+28]=f&&(c.bottom-_[1])/f,y[v+32]=f&&(c.left-_[0])/-f,y[v+36]=m&&(c.top-_[1])/-m,y[v+40]=f&&(c.right-_[0])/-f,y[v+44]=m&&(c.bottom-_[1])/-m,y[v+48]=m&&(c.left-_[0])/m,y[v+52]=f&&(c.top-_[1])/-f,y[v+56]=m&&(c.right-_[0])/m,y[v+60]=f&&(c.bottom-_[1])/-f}var S=1+Math.min(Math.abs(f),Math.abs(m));l.paddingLeft=p(y,32,16)/S,l.paddingTop=p(y,48,16)/S,l.paddingRight=p(y,0,16)/S,l.paddingBottom=p(y,16,16)/S,e._textDivProperties.set(s,l)}else l.paddingLeft=t[a].left-o[a].left,l.paddingTop=t[a].top-o[a].top,l.paddingRight=o[a].right-t[a].right,l.paddingBottom=o[a].bottom-t[a].bottom,e._textDivProperties.set(s,l)}}function h(e,t){t.sort((function(e,t){return e.x1-t.x1||e.index-t.index}));var r,n=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}],o=i(t);try{for(o.s();!(r=o.n()).done;){for(var a=r.value,s=0;s<n.length&&n[s].end<=a.y1;)s++;for(var l=n.length-1;l>=0&&n[l].start>=a.y2;)l--;var c=void 0,u=void 0,d=void 0,p=void 0,f=-1/0;for(d=s;d<=l;d++){u=(c=n[d]).boundary;var h=void 0;(h=u.x2>a.x1?u.index>a.index?u.x1New:a.x1:void 0===u.x2New?(u.x2+a.x1)/2:u.x2New)>f&&(f=h)}for(a.x1New=f,d=s;d<=l;d++)void 0===(u=(c=n[d]).boundary).x2New?u.x2>a.x1?u.index>a.index&&(u.x2New=u.x2):u.x2New=f:u.x2New>f&&(u.x2New=Math.max(f,u.x2));var m=[],g=null;for(d=s;d<=l;d++){var y=(u=(c=n[d]).boundary).x2>a.x2?u:a;g===y?m[m.length-1].end=c.end:(m.push({start:c.start,end:c.end,boundary:y}),g=y)}for(n[s].start<a.y1&&(m[0].start=a.y1,m.unshift({start:n[s].start,end:a.y1,boundary:n[s].boundary})),a.y2<n[l].end&&(m[m.length-1].end=a.y2,m.push({start:a.y2,end:n[l].end,boundary:n[l].boundary})),d=s;d<=l;d++)if(void 0===(u=(c=n[d]).boundary).x2New){var v=!1;for(p=s-1;!v&&p>=0&&n[p].start>=u.y1;p--)v=n[p].boundary===u;for(p=l+1;!v&&p<n.length&&n[p].end<=u.y2;p++)v=n[p].boundary===u;for(p=0;!v&&p<m.length;p++)v=m[p].boundary===u;v||(u.x2New=f)}Array.prototype.splice.apply(n,[s,l-s+1].concat(m))}}catch(w){o.e(w)}finally{o.f()}for(var b=0,_=n;b<_.length;b++){var S=_[b].boundary;void 0===S.x2New&&(S.x2New=Math.max(e,S.x2))}}var m=function(){function e(t){var r,o=this,i=t.textContent,a=t.textContentStream,s=t.container,l=t.viewport,c=t.textDivs,u=t.textContentItemsStr,d=t.enhanceTextSelection;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._textContent=i,this._textContentStream=a,this._container=s,this._document=s.ownerDocument,this._viewport=l,this._textDivs=c||[],this._textContentItemsStr=u||[],this._enhanceTextSelection=!!d,this._fontInspectorEnabled=!(null===(r=globalThis.FontInspector)||void 0===r||!r.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,n.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally((function(){o._layoutTextCtx&&(o._layoutTextCtx.canvas.width=0,o._layoutTextCtx.canvas.height=0,o._layoutTextCtx=null)})).catch((function(){}))}var t,r,i;return t=e,(r=[{key:"promise",get:function(){return this._capability.promise}},{key:"cancel",value:function(){this._canceled=!0,this._reader&&(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}},{key:"_processItems",value:function(e,t){for(var r=0,n=e.length;r<n;r++)if(void 0!==e[r].str)this._textContentItemsStr.push(e[r].str),u(this,e[r],t,this._layoutTextCtx);else if("beginMarkedContentProps"===e[r].type||"beginMarkedContent"===e[r].type){var o=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==e[r].id&&this._container.setAttribute("id","".concat(e[r].id)),o.appendChild(this._container)}else"endMarkedContent"===e[r].type&&(this._container=this._container.parentNode)}},{key:"_layoutText",value:function(e){var t=this._textDivProperties.get(e),r="";if(0!==t.canvasWidth&&t.hasText){var n=e.style,o=n.fontSize,i=n.fontFamily;o===this._layoutTextLastFontSize&&i===this._layoutTextLastFontFamily||(this._layoutTextCtx.font="".concat(o," ").concat(i),this._layoutTextLastFontSize=o,this._layoutTextLastFontFamily=i);var a=this._layoutTextCtx.measureText(e.textContent).width;a>0&&(t.scale=t.canvasWidth/a,r="scaleX(".concat(t.scale,")"))}if(0!==t.angle&&(r="rotate(".concat(t.angle,"deg) ").concat(r)),r.length>0&&(this._enhanceTextSelection&&(t.originalTransform=r),e.style.transform=r),t.hasText&&this._container.appendChild(e),t.hasEOL){var s=document.createElement("br");s.setAttribute("role","presentation"),this._container.appendChild(s)}}},{key:"_render",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=(0,n.createPromiseCapability)(),o=Object.create(null),i=this._document.createElement("canvas");if(i.height=i.width=s,i.mozOpaque=!0,this._layoutTextCtx=i.getContext("2d",{alpha:!1}),this._textContent){var a=this._textContent.items,l=this._textContent.styles;this._processItems(a,l),r.resolve()}else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');var c=function t(){e._reader.read().then((function(n){var i=n.value;n.done?r.resolve():(Object.assign(o,i.styles),e._processItems(i.items,o),t())}),r.reject)};this._reader=this._textContentStream.getReader(),c()}r.promise.then((function(){o=null,t?e._renderTimer=setTimeout((function(){d(e),e._renderTimer=null}),t):d(e)}),this._capability.reject)}},{key:"expandTextDivs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._enhanceTextSelection&&this._renderingDone){null!==this._bounds&&(f(this),this._bounds=null);for(var t=[],r=[],n=0,o=this._textDivs.length;n<o;n++){var i=this._textDivs[n],a=this._textDivProperties.get(i);a.hasText&&(e?(t.length=0,r.length=0,a.originalTransform&&t.push(a.originalTransform),a.paddingTop>0?(r.push("".concat(a.paddingTop,"px")),t.push("translateY(".concat(-a.paddingTop,"px)"))):r.push(0),a.paddingRight>0?r.push("".concat(a.paddingRight/a.scale,"px")):r.push(0),a.paddingBottom>0?r.push("".concat(a.paddingBottom,"px")):r.push(0),a.paddingLeft>0?(r.push("".concat(a.paddingLeft/a.scale,"px")),t.push("translateX(".concat(-a.paddingLeft/a.scale,"px)"))):r.push(0),i.style.padding=r.join(" "),t.length&&(i.style.transform=t.join(" "))):(i.style.padding=null,i.style.transform=a.originalTransform))}}}}])&&o(t.prototype,r),i&&o(t,i),e}()},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var n=r(4),o=r(1),i=r(6);function a(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){s=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=c(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function c(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var h=function e(){f(this,e),(0,n.unreachable)("Not implemented: SVGGraphics")};t.SVGGraphics=h;var m=function(e){if(Number.isInteger(e))return e.toString();var t=e.toFixed(10),r=t.length-1;if("0"!==t[r])return t;do{r--}while("0"===t[r]);return t.substring(0,"."===t[r]?r:r+1)},g=function(e){if(0===e[4]&&0===e[5]){if(0===e[1]&&0===e[2])return 1===e[0]&&1===e[3]?"":"scale(".concat(m(e[0])," ").concat(m(e[3]),")");if(e[0]===e[3]&&e[1]===-e[2]){var t=180*Math.acos(e[0])/Math.PI;return"rotate(".concat(m(t),")")}}else if(1===e[0]&&0===e[1]&&0===e[2]&&1===e[3])return"translate(".concat(m(e[4])," ").concat(m(e[5]),")");return"matrix(".concat(m(e[0])," ").concat(m(e[1])," ").concat(m(e[2])," ").concat(m(e[3])," ").concat(m(e[4])," ")+"".concat(m(e[5]),")")},y={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},v=["butt","round","square"],b=["miter","round","bevel"],_=function(){for(var e=new Uint8Array([137,80,78,71,13,10,26,10]),t=new Int32Array(256),r=0;r<256;r++){for(var o=r,a=0;a<8;a++)o=1&o?3988292384^o>>1&2147483647:o>>1&2147483647;t[r]=o}function s(e,r,n,o){var i=o,a=r.length;n[i]=a>>24&255,n[i+1]=a>>16&255,n[i+2]=a>>8&255,n[i+3]=255&a,n[i+=4]=255&e.charCodeAt(0),n[i+1]=255&e.charCodeAt(1),n[i+2]=255&e.charCodeAt(2),n[i+3]=255&e.charCodeAt(3),i+=4,n.set(r,i);var s=function(e,r,n){for(var o=-1,i=r;i<n;i++){var a=255&(o^e[i]);o=o>>>8^t[a]}return-1^o}(n,o+4,i+=r.length);n[i]=s>>24&255,n[i+1]=s>>16&255,n[i+2]=s>>8&255,n[i+3]=255&s}function l(e){var t=e.length,r=65535,n=Math.ceil(t/r),o=new Uint8Array(2+t+5*n+4),i=0;o[i++]=120,o[i++]=156;for(var a=0;t>r;)o[i++]=0,o[i++]=255,o[i++]=255,o[i++]=0,o[i++]=0,o.set(e.subarray(a,a+r),i),i+=r,a+=r,t-=r;o[i++]=1,o[i++]=255&t,o[i++]=t>>8&255,o[i++]=255&~t,o[i++]=(65535&~t)>>8&255,o.set(e.subarray(a),i),i+=e.length-a;var s=function(e,t,r){for(var n=1,o=0,i=t;i<r;++i)o=(o+(n=(n+(255&e[i]))%65521))%65521;return o<<16|n}(e,0,e.length);return o[i++]=s>>24&255,o[i++]=s>>16&255,o[i++]=s>>8&255,o[i++]=255&s,o}function c(t,r,o,a){var c,u,d,p=t.width,f=t.height,h=t.data;switch(r){case n.ImageKind.GRAYSCALE_1BPP:u=0,c=1,d=p+7>>3;break;case n.ImageKind.RGB_24BPP:u=2,c=8,d=3*p;break;case n.ImageKind.RGBA_32BPP:u=6,c=8,d=4*p;break;default:throw new Error("invalid format")}for(var m=new Uint8Array((1+d)*f),g=0,y=0,v=0;v<f;++v)m[g++]=0,m.set(h.subarray(y,y+d),g),y+=d,g+=d;if(r===n.ImageKind.GRAYSCALE_1BPP&&a){g=0;for(var b=0;b<f;b++){g++;for(var _=0;_<d;_++)m[g++]^=255}}var S=new Uint8Array([p>>24&255,p>>16&255,p>>8&255,255&p,f>>24&255,f>>16&255,f>>8&255,255&f,c,u,0,0,0]),w=function(e){if(!i.isNodeJS)return l(e);try{var t;t=parseInt(process.versions.node)>=8?e:Buffer.from(e);var r=require$$5.deflateSync(t,{level:9});return r instanceof Uint8Array?r:new Uint8Array(r)}catch(o){(0,n.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+o)}return l(e)}(m),x=e.length+36+S.length+w.length,E=new Uint8Array(x),A=0;return E.set(e,A),s("IHDR",S,E,A+=e.length),s("IDATA",w,E,A+=12+S.length),A+=12+w.length,s("IEND",new Uint8Array(0),E,A),(0,n.createObjectURL)(E,"image/png",o)}return function(e,t,r){return c(e,void 0===e.kind?n.ImageKind.GRAYSCALE_1BPP:e.kind,t,r)}}(),S=function(){function e(){f(this,e),this.fontSizeScale=1,this.fontWeight=y.fontWeight,this.fontSize=0,this.textMatrix=n.IDENTITY_MATRIX,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=n.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=y.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}return p(e,[{key:"clone",value:function(){return Object.create(this)}},{key:"setCurrentPoint",value:function(e,t){this.x=e,this.y=t}}]),e}(),w=0,x=0,E=0;t.SVGGraphics=h=function(){function e(t,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(var a in f(this,e),this.svgFactory=new o.DOMSVGFactory,this.current=new S,this.transformMatrix=n.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=t,this.objs=r,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!i,this._operatorIdMapping=[],n.OPS)this._operatorIdMapping[n.OPS[a]]=a}return p(e,[{key:"save",value:function(){this.transformStack.push(this.transformMatrix);var e=this.current;this.extraStack.push(e),this.current=e.clone()}},{key:"restore",value:function(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}},{key:"group",value:function(e){this.save(),this.executeOpTree(e),this.restore()}},{key:"loadDependencies",value:function(e){for(var t=this,r=e.fnArray,o=e.argsArray,i=0,a=r.length;i<a;i++)if(r[i]===n.OPS.dependency){var s,c=l(o[i]);try{var u=function(){var e=s.value,r=e.startsWith("g_")?t.commonObjs:t.objs,n=new Promise((function(t){r.get(e,t)}));t.current.dependencies.push(n)};for(c.s();!(s=c.n()).done;)u()}catch(d){c.e(d)}finally{c.f()}}return Promise.all(this.current.dependencies)}},{key:"transform",value:function(e,t,r,o,i,a){var s=[e,t,r,o,i,a];this.transformMatrix=n.Util.transform(this.transformMatrix,s),this.tgrp=null}},{key:"getSVG",value:function(e,t){var r=this;this.viewport=t;var o=this._initialize(t);return this.loadDependencies(e).then((function(){return r.transformMatrix=n.IDENTITY_MATRIX,r.executeOpTree(r.convertOpList(e)),o}))}},{key:"convertOpList",value:function(e){for(var t=this._operatorIdMapping,r=e.argsArray,n=e.fnArray,o=[],i=0,a=n.length;i<a;i++){var s=n[i];o.push({fnId:s,fn:t[s],args:r[i]})}return function(e){var t,r=[],n=[],o=l(e);try{for(o.s();!(t=o.n()).done;){var i=t.value;"save"!==i.fn?"restore"===i.fn?r=n.pop():r.push(i):(r.push({fnId:92,fn:"group",items:[]}),n.push(r),r=r[r.length-1].items)}}catch(a){o.e(a)}finally{o.f()}return r}(o)}},{key:"executeOpTree",value:function(e){var t,r=l(e);try{for(r.s();!(t=r.n()).done;){var o=t.value,i=o.fn,a=o.fnId,s=o.args;switch(0|a){case n.OPS.beginText:this.beginText();break;case n.OPS.dependency:break;case n.OPS.setLeading:this.setLeading(s);break;case n.OPS.setLeadingMoveText:this.setLeadingMoveText(s[0],s[1]);break;case n.OPS.setFont:this.setFont(s);break;case n.OPS.showText:case n.OPS.showSpacedText:this.showText(s[0]);break;case n.OPS.endText:this.endText();break;case n.OPS.moveText:this.moveText(s[0],s[1]);break;case n.OPS.setCharSpacing:this.setCharSpacing(s[0]);break;case n.OPS.setWordSpacing:this.setWordSpacing(s[0]);break;case n.OPS.setHScale:this.setHScale(s[0]);break;case n.OPS.setTextMatrix:this.setTextMatrix(s[0],s[1],s[2],s[3],s[4],s[5]);break;case n.OPS.setTextRise:this.setTextRise(s[0]);break;case n.OPS.setTextRenderingMode:this.setTextRenderingMode(s[0]);break;case n.OPS.setLineWidth:this.setLineWidth(s[0]);break;case n.OPS.setLineJoin:this.setLineJoin(s[0]);break;case n.OPS.setLineCap:this.setLineCap(s[0]);break;case n.OPS.setMiterLimit:this.setMiterLimit(s[0]);break;case n.OPS.setFillRGBColor:this.setFillRGBColor(s[0],s[1],s[2]);break;case n.OPS.setStrokeRGBColor:this.setStrokeRGBColor(s[0],s[1],s[2]);break;case n.OPS.setStrokeColorN:this.setStrokeColorN(s);break;case n.OPS.setFillColorN:this.setFillColorN(s);break;case n.OPS.shadingFill:this.shadingFill(s[0]);break;case n.OPS.setDash:this.setDash(s[0],s[1]);break;case n.OPS.setRenderingIntent:this.setRenderingIntent(s[0]);break;case n.OPS.setFlatness:this.setFlatness(s[0]);break;case n.OPS.setGState:this.setGState(s[0]);break;case n.OPS.fill:this.fill();break;case n.OPS.eoFill:this.eoFill();break;case n.OPS.stroke:this.stroke();break;case n.OPS.fillStroke:this.fillStroke();break;case n.OPS.eoFillStroke:this.eoFillStroke();break;case n.OPS.clip:this.clip("nonzero");break;case n.OPS.eoClip:this.clip("evenodd");break;case n.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case n.OPS.paintImageXObject:this.paintImageXObject(s[0]);break;case n.OPS.paintInlineImageXObject:this.paintInlineImageXObject(s[0]);break;case n.OPS.paintImageMaskXObject:this.paintImageMaskXObject(s[0]);break;case n.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(s[0],s[1]);break;case n.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case n.OPS.closePath:this.closePath();break;case n.OPS.closeStroke:this.closeStroke();break;case n.OPS.closeFillStroke:this.closeFillStroke();break;case n.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case n.OPS.nextLine:this.nextLine();break;case n.OPS.transform:this.transform(s[0],s[1],s[2],s[3],s[4],s[5]);break;case n.OPS.constructPath:this.constructPath(s[0],s[1]);break;case n.OPS.endPath:this.endPath();break;case 92:this.group(o.items);break;default:(0,n.warn)("Unimplemented operator ".concat(i))}}}catch(c){r.e(c)}finally{r.f()}}},{key:"setWordSpacing",value:function(e){this.current.wordSpacing=e}},{key:"setCharSpacing",value:function(e){this.current.charSpacing=e}},{key:"nextLine",value:function(){this.moveText(0,this.current.leading)}},{key:"setTextMatrix",value:function(e,t,r,n,o,i){var a=this.current;a.textMatrix=a.lineMatrix=[e,t,r,n,o,i],a.textMatrixScale=Math.hypot(e,t),a.x=a.lineX=0,a.y=a.lineY=0,a.xcoords=[],a.ycoords=[],a.tspan=this.svgFactory.createElement("svg:tspan"),a.tspan.setAttributeNS(null,"font-family",a.fontFamily),a.tspan.setAttributeNS(null,"font-size","".concat(m(a.fontSize),"px")),a.tspan.setAttributeNS(null,"y",m(-a.y)),a.txtElement=this.svgFactory.createElement("svg:text"),a.txtElement.appendChild(a.tspan)}},{key:"beginText",value:function(){var e=this.current;e.x=e.lineX=0,e.y=e.lineY=0,e.textMatrix=n.IDENTITY_MATRIX,e.lineMatrix=n.IDENTITY_MATRIX,e.textMatrixScale=1,e.tspan=this.svgFactory.createElement("svg:tspan"),e.txtElement=this.svgFactory.createElement("svg:text"),e.txtgrp=this.svgFactory.createElement("svg:g"),e.xcoords=[],e.ycoords=[]}},{key:"moveText",value:function(e,t){var r=this.current;r.x=r.lineX+=e,r.y=r.lineY+=t,r.xcoords=[],r.ycoords=[],r.tspan=this.svgFactory.createElement("svg:tspan"),r.tspan.setAttributeNS(null,"font-family",r.fontFamily),r.tspan.setAttributeNS(null,"font-size","".concat(m(r.fontSize),"px")),r.tspan.setAttributeNS(null,"y",m(-r.y))}},{key:"showText",value:function(e){var t=this.current,r=t.font,o=t.fontSize;if(0!==o){var i,a=t.fontSizeScale,s=t.charSpacing,c=t.wordSpacing,u=t.fontDirection,d=t.textHScale*u,p=r.vertical,f=p?1:-1,h=r.defaultVMetrics,v=o*t.fontMatrix[0],b=0,_=l(e);try{for(_.s();!(i=_.n()).done;){var S=i.value;if(null!==S)if((0,n.isNum)(S))b+=f*S*o/1e3;else{var w=(S.isSpace?c:0)+s,x=S.fontChar,E=void 0,A=void 0,k=S.width;if(p){var P=void 0,T=S.vmetric||h;P=-(P=S.vmetric?T[1]:.5*k)*v;var C=T[2]*v;k=T?-T[0]:k,E=P/a,A=(b+C)/a}else E=b/a,A=0;(S.isInFont||r.missingFile)&&(t.xcoords.push(t.x+E),p&&t.ycoords.push(-t.y+A),t.tspan.textContent+=x),b+=p?k*v-w*u:k*v+w*u}else b+=u*c}}catch(L){_.e(L)}finally{_.f()}t.tspan.setAttributeNS(null,"x",t.xcoords.map(m).join(" ")),p?t.tspan.setAttributeNS(null,"y",t.ycoords.map(m).join(" ")):t.tspan.setAttributeNS(null,"y",m(-t.y)),p?t.y-=b:t.x+=b*d,t.tspan.setAttributeNS(null,"font-family",t.fontFamily),t.tspan.setAttributeNS(null,"font-size","".concat(m(t.fontSize),"px")),t.fontStyle!==y.fontStyle&&t.tspan.setAttributeNS(null,"font-style",t.fontStyle),t.fontWeight!==y.fontWeight&&t.tspan.setAttributeNS(null,"font-weight",t.fontWeight);var R=t.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;if(R===n.TextRenderingMode.FILL||R===n.TextRenderingMode.FILL_STROKE?(t.fillColor!==y.fillColor&&t.tspan.setAttributeNS(null,"fill",t.fillColor),t.fillAlpha<1&&t.tspan.setAttributeNS(null,"fill-opacity",t.fillAlpha)):t.textRenderingMode===n.TextRenderingMode.ADD_TO_PATH?t.tspan.setAttributeNS(null,"fill","transparent"):t.tspan.setAttributeNS(null,"fill","none"),R===n.TextRenderingMode.STROKE||R===n.TextRenderingMode.FILL_STROKE){var O=1/(t.textMatrixScale||1);this._setStrokeAttributes(t.tspan,O)}var I=t.textMatrix;0!==t.textRise&&((I=I.slice())[5]+=t.textRise),t.txtElement.setAttributeNS(null,"transform","".concat(g(I)," scale(").concat(m(d),", -1)")),t.txtElement.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),t.txtElement.appendChild(t.tspan),t.txtgrp.appendChild(t.txtElement),this._ensureTransformGroup().appendChild(t.txtElement)}}},{key:"setLeadingMoveText",value:function(e,t){this.setLeading(-t),this.moveText(e,t)}},{key:"addFontStyle",value:function(e){if(!e.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));var t=(0,n.createObjectURL)(e.data,e.mimetype,this.forceDataSchema);this.cssStyle.textContent+='@font-face { font-family: "'.concat(e.loadedName,'";')+" src: url(".concat(t,"); }\n")}},{key:"setFont",value:function(e){var t=this.current,r=this.commonObjs.get(e[0]),o=e[1];t.font=r,!this.embedFonts||r.missingFile||this.embeddedFonts[r.loadedName]||(this.addFontStyle(r),this.embeddedFonts[r.loadedName]=r),t.fontMatrix=r.fontMatrix||n.FONT_IDENTITY_MATRIX;var i="normal";r.black?i="900":r.bold&&(i="bold");var a=r.italic?"italic":"normal";o<0?(o=-o,t.fontDirection=-1):t.fontDirection=1,t.fontSize=o,t.fontFamily=r.loadedName,t.fontWeight=i,t.fontStyle=a,t.tspan=this.svgFactory.createElement("svg:tspan"),t.tspan.setAttributeNS(null,"y",m(-t.y)),t.xcoords=[],t.ycoords=[]}},{key:"endText",value:function(){var e,t=this.current;t.textRenderingMode&n.TextRenderingMode.ADD_TO_PATH_FLAG&&null!==(e=t.txtElement)&&void 0!==e&&e.hasChildNodes()&&(t.element=t.txtElement,this.clip("nonzero"),this.endPath())}},{key:"setLineWidth",value:function(e){e>0&&(this.current.lineWidth=e)}},{key:"setLineCap",value:function(e){this.current.lineCap=v[e]}},{key:"setLineJoin",value:function(e){this.current.lineJoin=b[e]}},{key:"setMiterLimit",value:function(e){this.current.miterLimit=e}},{key:"setStrokeAlpha",value:function(e){this.current.strokeAlpha=e}},{key:"setStrokeRGBColor",value:function(e,t,r){this.current.strokeColor=n.Util.makeHexColor(e,t,r)}},{key:"setFillAlpha",value:function(e){this.current.fillAlpha=e}},{key:"setFillRGBColor",value:function(e,t,r){this.current.fillColor=n.Util.makeHexColor(e,t,r),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}},{key:"setStrokeColorN",value:function(e){this.current.strokeColor=this._makeColorN_Pattern(e)}},{key:"setFillColorN",value:function(e){this.current.fillColor=this._makeColorN_Pattern(e)}},{key:"shadingFill",value:function(e){var t=this.viewport.width,r=this.viewport.height,o=n.Util.inverseTransform(this.transformMatrix),i=n.Util.applyTransform([0,0],o),a=n.Util.applyTransform([0,r],o),s=n.Util.applyTransform([t,0],o),l=n.Util.applyTransform([t,r],o),c=Math.min(i[0],a[0],s[0],l[0]),u=Math.min(i[1],a[1],s[1],l[1]),d=Math.max(i[0],a[0],s[0],l[0]),p=Math.max(i[1],a[1],s[1],l[1]),f=this.svgFactory.createElement("svg:rect");f.setAttributeNS(null,"x",c),f.setAttributeNS(null,"y",u),f.setAttributeNS(null,"width",d-c),f.setAttributeNS(null,"height",p-u),f.setAttributeNS(null,"fill",this._makeShadingPattern(e)),this.current.fillAlpha<1&&f.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(f)}},{key:"_makeColorN_Pattern",value:function(e){return"TilingPattern"===e[0]?this._makeTilingPattern(e):this._makeShadingPattern(e)}},{key:"_makeTilingPattern",value:function(e){var t=e[1],r=e[2],o=e[3]||n.IDENTITY_MATRIX,i=s(e[4],4),l=i[0],c=i[1],u=i[2],d=i[3],p=e[5],f=e[6],h=e[7],m="shading".concat(E++),g=s(n.Util.applyTransform([l,c],o),2),y=g[0],v=g[1],b=s(n.Util.applyTransform([u,d],o),2),_=b[0],S=b[1],w=s(n.Util.singularValueDecompose2dScale(o),2),x=p*w[0],A=f*w[1],k=this.svgFactory.createElement("svg:pattern");k.setAttributeNS(null,"id",m),k.setAttributeNS(null,"patternUnits","userSpaceOnUse"),k.setAttributeNS(null,"width",x),k.setAttributeNS(null,"height",A),k.setAttributeNS(null,"x","".concat(y)),k.setAttributeNS(null,"y","".concat(v));var P=this.svg,T=this.transformMatrix,C=this.current.fillColor,R=this.current.strokeColor,O=this.svgFactory.create(_-y,S-v);if(this.svg=O,this.transformMatrix=o,2===h){var I=n.Util.makeHexColor.apply(n.Util,a(t));this.current.fillColor=I,this.current.strokeColor=I}return this.executeOpTree(this.convertOpList(r)),this.svg=P,this.transformMatrix=T,this.current.fillColor=C,this.current.strokeColor=R,k.appendChild(O.childNodes[0]),this.defs.appendChild(k),"url(#".concat(m,")")}},{key:"_makeShadingPattern",value:function(e){switch(e[0]){case"RadialAxial":var t,r="shading".concat(E++),o=e[3];switch(e[1]){case"axial":var i=e[4],a=e[5];(t=this.svgFactory.createElement("svg:linearGradient")).setAttributeNS(null,"id",r),t.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),t.setAttributeNS(null,"x1",i[0]),t.setAttributeNS(null,"y1",i[1]),t.setAttributeNS(null,"x2",a[0]),t.setAttributeNS(null,"y2",a[1]);break;case"radial":var s=e[4],c=e[5],u=e[6],d=e[7];(t=this.svgFactory.createElement("svg:radialGradient")).setAttributeNS(null,"id",r),t.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),t.setAttributeNS(null,"cx",c[0]),t.setAttributeNS(null,"cy",c[1]),t.setAttributeNS(null,"r",d),t.setAttributeNS(null,"fx",s[0]),t.setAttributeNS(null,"fy",s[1]),t.setAttributeNS(null,"fr",u);break;default:throw new Error("Unknown RadialAxial type: ".concat(e[1]))}var p,f=l(o);try{for(f.s();!(p=f.n()).done;){var h=p.value,m=this.svgFactory.createElement("svg:stop");m.setAttributeNS(null,"offset",h[0]),m.setAttributeNS(null,"stop-color",h[1]),t.appendChild(m)}}catch(g){f.e(g)}finally{f.f()}return this.defs.appendChild(t),"url(#".concat(r,")");case"Mesh":return(0,n.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error("Unknown IR type: ".concat(e[0]))}}},{key:"setDash",value:function(e,t){this.current.dashArray=e,this.current.dashPhase=t}},{key:"constructPath",value:function(e,t){var r,o=this.current,i=o.x,a=o.y,s=[],c=0,u=l(e);try{for(u.s();!(r=u.n()).done;)switch(0|r.value){case n.OPS.rectangle:i=t[c++],a=t[c++];var d=t[c++],p=t[c++],f=i+d,h=a+p;s.push("M",m(i),m(a),"L",m(f),m(a),"L",m(f),m(h),"L",m(i),m(h),"Z");break;case n.OPS.moveTo:i=t[c++],a=t[c++],s.push("M",m(i),m(a));break;case n.OPS.lineTo:i=t[c++],a=t[c++],s.push("L",m(i),m(a));break;case n.OPS.curveTo:i=t[c+4],a=t[c+5],s.push("C",m(t[c]),m(t[c+1]),m(t[c+2]),m(t[c+3]),m(i),m(a)),c+=6;break;case n.OPS.curveTo2:s.push("C",m(i),m(a),m(t[c]),m(t[c+1]),m(t[c+2]),m(t[c+3])),i=t[c+2],a=t[c+3],c+=4;break;case n.OPS.curveTo3:i=t[c+2],a=t[c+3],s.push("C",m(t[c]),m(t[c+1]),m(i),m(a),m(i),m(a)),c+=4;break;case n.OPS.closePath:s.push("Z")}}catch(g){u.e(g)}finally{u.f()}s=s.join(" "),o.path&&e.length>0&&e[0]!==n.OPS.rectangle&&e[0]!==n.OPS.moveTo?s=o.path.getAttributeNS(null,"d")+s:(o.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(o.path)),o.path.setAttributeNS(null,"d",s),o.path.setAttributeNS(null,"fill","none"),o.element=o.path,o.setCurrentPoint(i,a)}},{key:"endPath",value:function(){var e=this.current;if(e.path=null,this.pendingClip)if(e.element){var t="clippath".concat(w++),r=this.svgFactory.createElement("svg:clipPath");r.setAttributeNS(null,"id",t),r.setAttributeNS(null,"transform",g(this.transformMatrix));var n=e.element.cloneNode(!0);if("evenodd"===this.pendingClip?n.setAttributeNS(null,"clip-rule","evenodd"):n.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,r.appendChild(n),this.defs.appendChild(r),e.activeClipUrl){e.clipGroup=null;var o,i=l(this.extraStack);try{for(i.s();!(o=i.n()).done;)o.value.clipGroup=null}catch(a){i.e(a)}finally{i.f()}r.setAttributeNS(null,"clip-path",e.activeClipUrl)}e.activeClipUrl="url(#".concat(t,")"),this.tgrp=null}else this.pendingClip=null}},{key:"clip",value:function(e){this.pendingClip=e}},{key:"closePath",value:function(){var e=this.current;if(e.path){var t="".concat(e.path.getAttributeNS(null,"d"),"Z");e.path.setAttributeNS(null,"d",t)}}},{key:"setLeading",value:function(e){this.current.leading=-e}},{key:"setTextRise",value:function(e){this.current.textRise=e}},{key:"setTextRenderingMode",value:function(e){this.current.textRenderingMode=e}},{key:"setHScale",value:function(e){this.current.textHScale=e/100}},{key:"setRenderingIntent",value:function(e){}},{key:"setFlatness",value:function(e){}},{key:"setGState",value:function(e){var t,r=l(e);try{for(r.s();!(t=r.n()).done;){var o=s(t.value,2),i=o[0],a=o[1];switch(i){case"LW":this.setLineWidth(a);break;case"LC":this.setLineCap(a);break;case"LJ":this.setLineJoin(a);break;case"ML":this.setMiterLimit(a);break;case"D":this.setDash(a[0],a[1]);break;case"RI":this.setRenderingIntent(a);break;case"FL":this.setFlatness(a);break;case"Font":this.setFont(a);break;case"CA":this.setStrokeAlpha(a);break;case"ca":this.setFillAlpha(a);break;default:(0,n.warn)("Unimplemented graphic state operator ".concat(i))}}}catch(c){r.e(c)}finally{r.f()}}},{key:"fill",value:function(){var e=this.current;e.element&&(e.element.setAttributeNS(null,"fill",e.fillColor),e.element.setAttributeNS(null,"fill-opacity",e.fillAlpha),this.endPath())}},{key:"stroke",value:function(){var e=this.current;e.element&&(this._setStrokeAttributes(e.element),e.element.setAttributeNS(null,"fill","none"),this.endPath())}},{key:"_setStrokeAttributes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=this.current,n=r.dashArray;1!==t&&n.length>0&&(n=n.map((function(e){return t*e}))),e.setAttributeNS(null,"stroke",r.strokeColor),e.setAttributeNS(null,"stroke-opacity",r.strokeAlpha),e.setAttributeNS(null,"stroke-miterlimit",m(r.miterLimit)),e.setAttributeNS(null,"stroke-linecap",r.lineCap),e.setAttributeNS(null,"stroke-linejoin",r.lineJoin),e.setAttributeNS(null,"stroke-width",m(t*r.lineWidth)+"px"),e.setAttributeNS(null,"stroke-dasharray",n.map(m).join(" ")),e.setAttributeNS(null,"stroke-dashoffset",m(t*r.dashPhase)+"px")}},{key:"eoFill",value:function(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}},{key:"fillStroke",value:function(){this.stroke(),this.fill()}},{key:"eoFillStroke",value:function(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}},{key:"closeStroke",value:function(){this.closePath(),this.stroke()}},{key:"closeFillStroke",value:function(){this.closePath(),this.fillStroke()}},{key:"closeEOFillStroke",value:function(){this.closePath(),this.eoFillStroke()}},{key:"paintSolidColorImageMask",value:function(){var e=this.svgFactory.createElement("svg:rect");e.setAttributeNS(null,"x","0"),e.setAttributeNS(null,"y","0"),e.setAttributeNS(null,"width","1px"),e.setAttributeNS(null,"height","1px"),e.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(e)}},{key:"paintImageXObject",value:function(e){var t=e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e);t?this.paintInlineImageXObject(t):(0,n.warn)("Dependent image with object ID ".concat(e," is not ready yet"))}},{key:"paintInlineImageXObject",value:function(e,t){var r=e.width,n=e.height,o=_(e,this.forceDataSchema,!!t),i=this.svgFactory.createElement("svg:rect");i.setAttributeNS(null,"x","0"),i.setAttributeNS(null,"y","0"),i.setAttributeNS(null,"width",m(r)),i.setAttributeNS(null,"height",m(n)),this.current.element=i,this.clip("nonzero");var a=this.svgFactory.createElement("svg:image");a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o),a.setAttributeNS(null,"x","0"),a.setAttributeNS(null,"y",m(-n)),a.setAttributeNS(null,"width",m(r)+"px"),a.setAttributeNS(null,"height",m(n)+"px"),a.setAttributeNS(null,"transform","scale(".concat(m(1/r)," ").concat(m(-1/n),")")),t?t.appendChild(a):this._ensureTransformGroup().appendChild(a)}},{key:"paintImageMaskXObject",value:function(e){var t=this.current,r=e.width,n=e.height,o=t.fillColor;t.maskId="mask".concat(x++);var i=this.svgFactory.createElement("svg:mask");i.setAttributeNS(null,"id",t.maskId);var a=this.svgFactory.createElement("svg:rect");a.setAttributeNS(null,"x","0"),a.setAttributeNS(null,"y","0"),a.setAttributeNS(null,"width",m(r)),a.setAttributeNS(null,"height",m(n)),a.setAttributeNS(null,"fill",o),a.setAttributeNS(null,"mask","url(#".concat(t.maskId,")")),this.defs.appendChild(i),this._ensureTransformGroup().appendChild(a),this.paintInlineImageXObject(e,i)}},{key:"paintFormXObjectBegin",value:function(e,t){if(Array.isArray(e)&&6===e.length&&this.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t){var r=t[2]-t[0],n=t[3]-t[1],o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x",t[0]),o.setAttributeNS(null,"y",t[1]),o.setAttributeNS(null,"width",m(r)),o.setAttributeNS(null,"height",m(n)),this.current.element=o,this.clip("nonzero"),this.endPath()}}},{key:"paintFormXObjectEnd",value:function(){}},{key:"_initialize",value:function(e){var t=this.svgFactory.create(e.width,e.height),r=this.svgFactory.createElement("svg:defs");t.appendChild(r),this.defs=r;var n=this.svgFactory.createElement("svg:g");return n.setAttributeNS(null,"transform",g(e.transform)),t.appendChild(n),this.svg=n,t}},{key:"_ensureClipGroup",value:function(){if(!this.current.clipGroup){var e=this.svgFactory.createElement("svg:g");e.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(e),this.current.clipGroup=e}return this.current.clipGroup}},{key:"_ensureTransformGroup",value:function(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",g(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}]),e}()},(e,t)=>{function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){s=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}(e,t)||o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=o(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw a}}}}function o(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,o,i;return t=e,i=[{key:"setupStorage",value:function(e,t,r,o){var i=o.getValue(t,{value:null});switch(r.name){case"textarea":e.textContent=null!==i.value?i.value:"",e.addEventListener("input",(function(e){o.setValue(t,{value:e.target.value})}));break;case"input":null!==i.value&&e.setAttribute("value",i.value),"radio"===r.attributes.type?e.addEventListener("change",(function(e){var r,i=e.target,a=n(document.getElementsByName(i.name));try{for(a.s();!(r=a.n()).done;){var s=r.value;if(s!==i){var l=s.id;o.setValue(l.split("-")[0],{value:!1})}}}catch(c){a.e(c)}finally{a.f()}o.setValue(t,{value:i.checked})})):e.addEventListener("input",(function(e){o.setValue(t,{value:e.target.value})}));break;case"select":if(null!==i.value){var a,s=n(r.children);try{for(s.s();!(a=s.n()).done;){var l=a.value;l.attributes.value===i.value&&(l.attributes.selected=!0)}}catch(c){s.e(c)}finally{s.f()}}e.addEventListener("input",(function(e){var r=e.target.options,n=-1===r.selectedIndex?null:r[r.selectedIndex].value;o.setValue(t,{value:n})}))}}},{key:"setAttributes",value:function(e,t,n){for(var o=t.attributes,i=0,a=Object.entries(o);i<a.length;i++){var s=r(a[i],2),l=s[0],c=s[1];null!=c&&"fieldId"!==l&&("style"!==l?"textContent"===l?e.textContent=c:e.setAttribute(l,c):Object.assign(e.style,c))}n&&void 0!==o.fieldId&&this.setupStorage(e,o.fieldId,t,n)}},{key:"render",value:function(e){var t=e.annotationStorage,n=e.xfa,o=document.createElement(n.name);n.attributes&&this.setAttributes(o,n);var i=[[n,-1,o]],a=e.div;a.appendChild(o);var s=e.viewport.transform.join(",");for(a.style.transform="matrix(".concat(s,")"),a.setAttribute("class","xfaLayer xfaFont");i.length>0;){var l=r(i[i.length-1],3),c=l[0],u=l[1],d=l[2];if(u+1!==c.children.length){var p=c.children[++i[i.length-1][1]];if(null!==p){var f=p.name;if("#text"!==f){var h=document.createElement(f);d.appendChild(h),p.attributes&&this.setAttributes(h,p,t),p.children&&p.children.length>0?i.push([p,-1,h]):p.value&&h.appendChild(document.createTextNode(p.value))}else d.appendChild(document.createTextNode(p.value))}}else i.pop()}}},{key:"update",value:function(e){var t="matrix(".concat(e.viewport.transform.join(","),")");e.div.style.transform=t,e.div.hidden=!1}}],(o=null)&&a(t.prototype,o),i&&a(t,i),e}();t.XfaLayer=s},(e,t,r)=>{function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var o,i=(o=r(2))&&o.__esModule?o:{default:o},a=r(4),s=r(131);function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var o=p(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return d(this,r)}}function d(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,o)}function h(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){f(i,n,o,a,s,"next",e)}function s(e){f(i,n,o,a,s,"throw",e)}a(void 0)}))}}function m(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t,r){return t&&v(e.prototype,t),r&&v(e,r),e}var _=require$$5,S=require$$5,w=require$$5,x=require$$5,E=/^file:\/\/\/[a-zA-Z]:\//,A=function(){function e(t){var r,n;y(this,e),this.source=t,this.url=(r=t.url,"file:"===(n=x.parse(r)).protocol||n.host?n:/^[a-z]:[/\\]/i.test(r)?x.parse("file:///".concat(r)):(n.host||(n.protocol="file:"),n)),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}return b(e,[{key:"_progressiveDataLength",get:function(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}},{key:"getFullReader",value:function(){return(0,a.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new O(this):new C(this),this._fullRequestReader}},{key:"getRangeReader",value:function(e,t){if(t<=this._progressiveDataLength)return null;var r=this.isFsUrl?new I(this,e,t):new R(this,e,t);return this._rangeRequestReaders.push(r),r}},{key:"cancelAllRequests",value:function(e){this._fullRequestReader&&this._fullRequestReader.cancel(e);var t,r=m(this._rangeRequestReaders.slice(0));try{for(r.s();!(t=r.n()).done;)t.value.cancel(e)}catch(n){r.e(n)}finally{r.f()}}}]),e}();t.PDFNodeStream=A;var k=function(){function e(t){y(this,e),this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;var r=t.source;this._contentLength=r.length,this._loaded=0,this._filename=null,this._disableRange=r.disableRange||!1,this._rangeChunkSize=r.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!r.disableStream,this._isRangeSupported=!r.disableRange,this._readableStream=null,this._readCapability=(0,a.createPromiseCapability)(),this._headersCapability=(0,a.createPromiseCapability)()}var t;return b(e,[{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:(t=h(i.default.mark((function e(){var t,r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._readCapability.promise;case 2:if(!this._done){e.next=4;break}return e.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){e.next=6;break}throw this._storedError;case 6:if(null!==(t=this._readableStream.read())){e.next=10;break}return this._readCapability=(0,a.createPromiseCapability)(),e.abrupt("return",this.read());case 10:return this._loaded+=t.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),r=new Uint8Array(t).buffer,e.abrupt("return",{value:r,done:!1});case 14:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}},{key:"_error",value:function(e){this._storedError=e,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(e){var t=this;this._readableStream=e,e.on("readable",(function(){t._readCapability.resolve()})),e.on("end",(function(){e.destroy(),t._done=!0,t._readCapability.resolve()})),e.on("error",(function(e){t._error(e)})),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new a.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}]),e}(),P=function(){function e(t){y(this,e),this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,a.createPromiseCapability)();var r=t.source;this._isStreamingSupported=!r.disableStream}var t;return b(e,[{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:(t=h(i.default.mark((function e(){var t,r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._readCapability.promise;case 2:if(!this._done){e.next=4;break}return e.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){e.next=6;break}throw this._storedError;case 6:if(null!==(t=this._readableStream.read())){e.next=10;break}return this._readCapability=(0,a.createPromiseCapability)(),e.abrupt("return",this.read());case 10:return this._loaded+=t.length,this.onProgress&&this.onProgress({loaded:this._loaded}),r=new Uint8Array(t).buffer,e.abrupt("return",{value:r,done:!1});case 14:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}},{key:"_error",value:function(e){this._storedError=e,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(e){var t=this;this._readableStream=e,e.on("readable",(function(){t._readCapability.resolve()})),e.on("end",(function(){e.destroy(),t._done=!0,t._readCapability.resolve()})),e.on("error",(function(e){t._error(e)})),this._storedError&&this._readableStream.destroy(this._storedError)}}]),e}();function T(e,t){return{protocol:e.protocol,auth:e.auth,host:e.hostname,port:e.port,path:e.path,method:"GET",headers:t}}var C=function(e){l(r,e);var t=u(r);function r(e){var n;y(this,r);var o=function(t){if(404===t.statusCode){var r=new a.MissingPDFException('Missing PDF "'.concat(n._url,'".'));return n._storedError=r,void n._headersCapability.reject(r)}n._headersCapability.resolve(),n._setReadableStream(t);var o=function(e){return n._readableStream.headers[e.toLowerCase()]},i=(0,s.validateRangeRequestCapabilities)({getResponseHeader:o,isHttp:e.isHttp,rangeChunkSize:n._rangeChunkSize,disableRange:n._disableRange}),l=i.allowRangeRequests,c=i.suggestedLength;n._isRangeSupported=l,n._contentLength=c||n._contentLength,n._filename=(0,s.extractFilenameFromHeader)(o)};return(n=t.call(this,e))._request=null,"http:"===n._url.protocol?n._request=S.request(T(n._url,e.httpHeaders),o):n._request=w.request(T(n._url,e.httpHeaders),o),n._request.on("error",(function(e){n._storedError=e,n._headersCapability.reject(e)})),n._request.end(),n}return r}(k),R=function(e){l(r,e);var t=u(r);function r(e,n,o){var i;for(var s in y(this,r),(i=t.call(this,e))._httpHeaders={},e.httpHeaders){var l=e.httpHeaders[s];void 0!==l&&(i._httpHeaders[s]=l)}i._httpHeaders.Range="bytes=".concat(n,"-").concat(o-1);var c=function(e){if(404!==e.statusCode)i._setReadableStream(e);else{var t=new a.MissingPDFException('Missing PDF "'.concat(i._url,'".'));i._storedError=t}};return i._request=null,"http:"===i._url.protocol?i._request=S.request(T(i._url,i._httpHeaders),c):i._request=w.request(T(i._url,i._httpHeaders),c),i._request.on("error",(function(e){i._storedError=e})),i._request.end(),i}return r}(P),O=function(e){l(r,e);var t=u(r);function r(e){var n;y(this,r),n=t.call(this,e);var o=decodeURIComponent(n._url.path);return E.test(n._url.href)&&(o=o.replace(/^\//,"")),_.lstat(o,(function(e,t){if(e)return"ENOENT"===e.code&&(e=new a.MissingPDFException('Missing PDF "'.concat(o,'".'))),n._storedError=e,void n._headersCapability.reject(e);n._contentLength=t.size,n._setReadableStream(_.createReadStream(o)),n._headersCapability.resolve()})),n}return r}(k),I=function(e){l(r,e);var t=u(r);function r(e,n,o){var i;y(this,r),i=t.call(this,e);var a=decodeURIComponent(i._url.path);return E.test(i._url.href)&&(a=a.replace(/^\//,"")),i._setReadableStream(_.createReadStream(a,{start:n,end:o-1})),i}return r}(P)},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=function(e,t){return 404===e||0===e&&t.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+t+'".'):new n.UnexpectedResponseException("Unexpected server response (".concat(e,') while retrieving PDF "').concat(t,'".'),e)},t.extractFilenameFromHeader=function(e){var t=e("Content-Disposition");if(t){var r=(0,o.getFilenameFromContentDispositionHeader)(t);if(r.includes("%"))try{r=decodeURIComponent(r)}catch(n){}if((0,i.isPdfFile)(r))return r}return null},t.validateRangeRequestCapabilities=function(e){var t=e.getResponseHeader,r=e.isHttp,o=e.rangeChunkSize,i=e.disableRange;(0,n.assert)(o>0,"Range chunk size must be larger than zero");var a={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(t("Content-Length"),10);return Number.isInteger(s)?(a.suggestedLength=s,s<=2*o||i||!r||"bytes"!==t("Accept-Ranges")||"identity"!==(t("Content-Encoding")||"identity")||(a.allowRangeRequests=!0),a):a},t.validateResponseStatus=function(e){return 200===e||206===e};var n=r(4),o=r(132),i=r(1)},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=function(e){var t=!0,r=s("filename\\*","i").exec(e);if(r){var i=u(r=r[1]);return c(i=p(i=d(i=unescape(i))))}if(r=function(e){for(var t,r=[],n=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");null!==(t=n.exec(e));){var i=o(t,4),a=i[1],l=i[2],c=i[3];if((a=parseInt(a,10))in r){if(0===a)break}else r[a]=[l,c]}for(var p=[],f=0;f<r.length&&f in r;++f){var h=o(r[f],2),m=h[0],g=h[1];g=u(g),m&&(g=unescape(g),0===f&&(g=d(g))),p.push(g)}return p.join("")}(e))return c(p(r));if(r=s("filename","i").exec(e)){var a=u(r=r[1]);return c(a=p(a))}function s(e,t){return new RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',t)}function l(e,r){if(e){if(!/^[\x00-\xFF]+$/.test(r))return r;try{var o=new TextDecoder(e,{fatal:!0}),i=(0,n.stringToBytes)(r);r=o.decode(i),t=!1}catch(a){if(/^utf-?8$/i.test(e))try{r=decodeURIComponent(escape(r)),t=!1}catch(s){}}}return r}function c(e){return t&&/[\x80-\xff]/.test(e)&&(e=l("utf-8",e),t&&(e=l("iso-8859-1",e))),e}function u(e){if(e.startsWith('"')){for(var t=e.slice(1).split('\\"'),r=0;r<t.length;++r){var n=t[r].indexOf('"');-1!==n&&(t[r]=t[r].slice(0,n),t.length=r+1),t[r]=t[r].replace(/\\(.)/g,"$1")}e=t.join('"')}return e}function d(e){var t=e.indexOf("'");return-1===t?e:l(e.slice(0,t),e.slice(t+1).replace(/^[^']*'/,""))}function p(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(e,t,r,n){if("q"===r||"Q"===r)return l(t,n=(n=n.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,(function(e,t){return String.fromCharCode(parseInt(t,16))})));try{n=atob(n)}catch(o){}return l(t,n)}))}return""};var n=r(4);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){s=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var n,o=(n=r(2))&&n.__esModule?n:{default:n},i=r(4),a=r(131);function s(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,o)}function l(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){s(i,n,o,a,l,"next",e)}function l(e){s(i,n,o,a,l,"throw",e)}a(void 0)}))}}function c(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t&&p(e.prototype,t),r&&p(e,r),e}var h=function(){function e(t,r){d(this,e),this.url=t,r=r||{},this.isHttp=/^https?:/i.test(t),this.httpHeaders=this.isHttp&&r.httpHeaders||{},this.withCredentials=r.withCredentials||!1,this.getXhr=r.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}return f(e,[{key:"requestRange",value:function(e,t,r){var n={begin:e,end:t};for(var o in r)n[o]=r[o];return this.request(n)}},{key:"requestFull",value:function(e){return this.request(e)}},{key:"request",value:function(e){var t=this.getXhr(),r=this.currXhrId++,n=this.pendingRequests[r]={xhr:t};for(var o in t.open("GET",this.url),t.withCredentials=this.withCredentials,this.httpHeaders){var i=this.httpHeaders[o];void 0!==i&&t.setRequestHeader(o,i)}return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range","bytes=".concat(e.begin,"-").concat(e.end-1)),n.expectedStatus=206):n.expectedStatus=200,t.responseType="arraybuffer",e.onError&&(t.onerror=function(r){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,r),t.onprogress=this.onProgress.bind(this,r),n.onHeadersReceived=e.onHeadersReceived,n.onDone=e.onDone,n.onError=e.onError,n.onProgress=e.onProgress,t.send(null),r}},{key:"onProgress",value:function(e,t){var r=this.pendingRequests[e];r&&r.onProgress&&r.onProgress(t)}},{key:"onStateChange",value:function(e,t){var r=this.pendingRequests[e];if(r){var n=r.xhr;if(n.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),4===n.readyState&&e in this.pendingRequests)if(delete this.pendingRequests[e],0===n.status&&this.isHttp)r.onError&&r.onError(n.status);else{var o=n.status||200;if(200===o&&206===r.expectedStatus||o===r.expectedStatus){var a=function(e){var t=e.response;return"string"!=typeof t?t:(0,i.stringToBytes)(t).buffer}(n);if(206===o){var s=n.getResponseHeader("Content-Range"),l=/bytes (\d+)-(\d+)\/(\d+)/.exec(s);r.onDone({begin:parseInt(l[1],10),chunk:a})}else a?r.onDone({begin:0,chunk:a}):r.onError&&r.onError(n.status)}else r.onError&&r.onError(n.status)}}}},{key:"getRequestXhr",value:function(e){return this.pendingRequests[e].xhr}},{key:"isPendingRequest",value:function(e){return e in this.pendingRequests}},{key:"abortRequest",value:function(e){var t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}]),e}(),m=function(){function e(t){d(this,e),this._source=t,this._manager=new h(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials}),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}return f(e,[{key:"_onRangeRequestReaderClosed",value:function(e){var t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}},{key:"getFullReader",value:function(){return(0,i.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new g(this._manager,this._source),this._fullRequestReader}},{key:"getRangeReader",value:function(e,t){var r=new y(this._manager,e,t);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}},{key:"cancelAllRequests",value:function(e){this._fullRequestReader&&this._fullRequestReader.cancel(e);var t,r=c(this._rangeRequestReaders.slice(0));try{for(r.s();!(t=r.n()).done;)t.value.cancel(e)}catch(n){r.e(n)}finally{r.f()}}}]),e}();t.PDFNetworkStream=m;var g=function(){function e(t,r){d(this,e),this._manager=t;var n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=r.url,this._fullRequestId=t.requestFull(n),this._headersReceivedCapability=(0,i.createPromiseCapability)(),this._disableRange=r.disableRange||!1,this._contentLength=r.length,this._rangeChunkSize=r.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}var t;return f(e,[{key:"_onHeadersReceived",value:function(){var e=this._fullRequestId,t=this._manager.getRequestXhr(e),r=function(e){return t.getResponseHeader(e)},n=(0,a.validateRangeRequestCapabilities)({getResponseHeader:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange}),o=n.allowRangeRequests,i=n.suggestedLength;o&&(this._isRangeSupported=!0),this._contentLength=i||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersReceivedCapability.resolve()}},{key:"_onDone",value:function(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){var t,r=c(this._requests);try{for(r.s();!(t=r.n()).done;)t.value.resolve({value:void 0,done:!0})}catch(n){r.e(n)}finally{r.f()}this._requests.length=0}}},{key:"_onError",value:function(e){var t=this._url,r=(0,a.createResponseStatusError)(e,t);this._storedError=r,this._headersReceivedCapability.reject(r);var n,o=c(this._requests);try{for(o.s();!(n=o.n()).done;)n.value.reject(r)}catch(i){o.e(i)}finally{o.f()}this._requests.length=0,this._cachedChunks.length=0}},{key:"_onProgress",value:function(e){this.onProgress&&this.onProgress({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}},{key:"filename",get:function(){return this._filename}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"contentLength",get:function(){return this._contentLength}},{key:"headersReady",get:function(){return this._headersReceivedCapability.promise}},{key:"read",value:(t=l(o.default.mark((function e(){var t,r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._storedError){e.next=2;break}throw this._storedError;case 2:if(!(this._cachedChunks.length>0)){e.next=5;break}return t=this._cachedChunks.shift(),e.abrupt("return",{value:t,done:!1});case 5:if(!this._done){e.next=7;break}return e.abrupt("return",{value:void 0,done:!0});case 7:return r=(0,i.createPromiseCapability)(),this._requests.push(r),e.abrupt("return",r.promise);case 10:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(e){this._done=!0,this._headersReceivedCapability.reject(e);var t,r=c(this._requests);try{for(r.s();!(t=r.n()).done;)t.value.resolve({value:void 0,done:!0})}catch(n){r.e(n)}finally{r.f()}this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}]),e}(),y=function(){function e(t,r,n){d(this,e),this._manager=t;var o={onDone:this._onDone.bind(this),onProgress:this._onProgress.bind(this)};this._requestId=t.requestRange(r,n,o),this._requests=[],this._queuedChunk=null,this._done=!1,this.onProgress=null,this.onClosed=null}var t;return f(e,[{key:"_close",value:function(){this.onClosed&&this.onClosed(this)}},{key:"_onDone",value:function(e){var t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;var r,n=c(this._requests);try{for(n.s();!(r=n.n()).done;)r.value.resolve({value:void 0,done:!0})}catch(o){n.e(o)}finally{n.f()}this._requests.length=0,this._close()}},{key:"_onProgress",value:function(e){!this.isStreamingSupported&&this.onProgress&&this.onProgress({loaded:e.loaded})}},{key:"isStreamingSupported",get:function(){return!1}},{key:"read",value:(t=l(o.default.mark((function e(){var t,r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===this._queuedChunk){e.next=4;break}return t=this._queuedChunk,this._queuedChunk=null,e.abrupt("return",{value:t,done:!1});case 4:if(!this._done){e.next=6;break}return e.abrupt("return",{value:void 0,done:!0});case 6:return r=(0,i.createPromiseCapability)(),this._requests.push(r),e.abrupt("return",r.promise);case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(e){this._done=!0;var t,r=c(this._requests);try{for(r.s();!(t=r.n()).done;)t.value.resolve({value:void 0,done:!0})}catch(n){r.e(n)}finally{r.f()}this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}]),e}()},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var n,o=(n=r(2))&&n.__esModule?n:{default:n},i=r(4),a=r(131);function s(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,o)}function l(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){s(i,n,o,a,l,"next",e)}function l(e){s(i,n,o,a,l,"throw",e)}a(void 0)}))}}function c(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t&&p(e.prototype,t),r&&p(e,r),e}function h(e,t,r){return{method:"GET",headers:e,signal:null==r?void 0:r.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function m(e){var t=new Headers;for(var r in e){var n=e[r];void 0!==n&&t.append(r,n)}return t}var g=function(){function e(t){d(this,e),this.source=t,this.isHttp=/^https?:/i.test(t.url),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}return f(e,[{key:"_progressiveDataLength",get:function(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}},{key:"getFullReader",value:function(){return(0,i.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new y(this),this._fullRequestReader}},{key:"getRangeReader",value:function(e,t){if(t<=this._progressiveDataLength)return null;var r=new v(this,e,t);return this._rangeRequestReaders.push(r),r}},{key:"cancelAllRequests",value:function(e){this._fullRequestReader&&this._fullRequestReader.cancel(e);var t,r=c(this._rangeRequestReaders.slice(0));try{for(r.s();!(t=r.n()).done;)t.value.cancel(e)}catch(n){r.e(n)}finally{r.f()}}}]),e}();t.PDFFetchStream=g;var y=function(){function e(t){var r=this;d(this,e),this._stream=t,this._reader=null,this._loaded=0,this._filename=null;var n=t.source;this._withCredentials=n.withCredentials||!1,this._contentLength=n.length,this._headersCapability=(0,i.createPromiseCapability)(),this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._headers=m(this._stream.httpHeaders);var o=n.url;fetch(o,h(this._headers,this._withCredentials,this._abortController)).then((function(e){if(!(0,a.validateResponseStatus)(e.status))throw(0,a.createResponseStatusError)(e.status,o);r._reader=e.body.getReader(),r._headersCapability.resolve();var t=function(t){return e.headers.get(t)},n=(0,a.validateRangeRequestCapabilities)({getResponseHeader:t,isHttp:r._stream.isHttp,rangeChunkSize:r._rangeChunkSize,disableRange:r._disableRange}),s=n.allowRangeRequests,l=n.suggestedLength;r._isRangeSupported=s,r._contentLength=l||r._contentLength,r._filename=(0,a.extractFilenameFromHeader)(t),!r._isStreamingSupported&&r._isRangeSupported&&r.cancel(new i.AbortException("Streaming is disabled."))})).catch(this._headersCapability.reject),this.onProgress=null}var t;return f(e,[{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:(t=l(o.default.mark((function e(){var t,r,n,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._headersCapability.promise;case 2:return e.next=4,this._reader.read();case 4:if(t=e.sent,r=t.value,!(n=t.done)){e.next=9;break}return e.abrupt("return",{value:r,done:n});case 9:return this._loaded+=r.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),i=new Uint8Array(r).buffer,e.abrupt("return",{value:i,done:!1});case 13:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(e){this._reader&&this._reader.cancel(e),this._abortController&&this._abortController.abort()}}]),e}(),v=function(){function e(t,r,n){var o=this;d(this,e),this._stream=t,this._reader=null,this._loaded=0;var s=t.source;this._withCredentials=s.withCredentials||!1,this._readCapability=(0,i.createPromiseCapability)(),this._isStreamingSupported=!s.disableStream,"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._headers=m(this._stream.httpHeaders),this._headers.append("Range","bytes=".concat(r,"-").concat(n-1));var l=s.url;fetch(l,h(this._headers,this._withCredentials,this._abortController)).then((function(e){if(!(0,a.validateResponseStatus)(e.status))throw(0,a.createResponseStatusError)(e.status,l);o._readCapability.resolve(),o._reader=e.body.getReader()})).catch((function(e){if("AbortError"!==(null==e?void 0:e.name))throw e})),this.onProgress=null}var t;return f(e,[{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:(t=l(o.default.mark((function e(){var t,r,n,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._readCapability.promise;case 2:return e.next=4,this._reader.read();case 4:if(t=e.sent,r=t.value,!(n=t.done)){e.next=9;break}return e.abrupt("return",{value:r,done:n});case 9:return this._loaded+=r.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),i=new Uint8Array(r).buffer,e.abrupt("return",{value:i,done:!1});case 13:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(e){this._reader&&this._reader.cancel(e),this._abortController&&this._abortController.abort()}}]),e}()}],__webpack_module_cache__={};function __w_pdfjs_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__w_pdfjs_require__),r.loaded=!0,r.exports}__w_pdfjs_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var __webpack_exports__={};return(()=>{var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"addLinkAttributes",{enumerable:!0,get:function(){return t.addLinkAttributes}}),Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return t.getFilenameFromUrl}}),Object.defineProperty(e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return t.getPdfFilenameFromUrl}}),Object.defineProperty(e,"isPdfFile",{enumerable:!0,get:function(){return t.isPdfFile}}),Object.defineProperty(e,"LinkTarget",{enumerable:!0,get:function(){return t.LinkTarget}}),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return t.loadScript}}),Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return t.PDFDateString}}),Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return t.RenderingCancelledException}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return r.build}}),Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return r.getDocument}}),Object.defineProperty(e,"LoopbackPort",{enumerable:!0,get:function(){return r.LoopbackPort}}),Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return r.PDFDataRangeTransport}}),Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return r.PDFWorker}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return r.version}}),Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return n.CMapCompressionType}}),Object.defineProperty(e,"createObjectURL",{enumerable:!0,get:function(){return n.createObjectURL}}),Object.defineProperty(e,"createPromiseCapability",{enumerable:!0,get:function(){return n.createPromiseCapability}}),Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return n.createValidAbsoluteUrl}}),Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return n.InvalidPDFException}}),Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return n.MissingPDFException}}),Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return n.OPS}}),Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return n.PasswordResponses}}),Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return n.PermissionFlag}}),Object.defineProperty(e,"removeNullCharacters",{enumerable:!0,get:function(){return n.removeNullCharacters}}),Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return n.shadow}}),Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return n.UnexpectedResponseException}}),Object.defineProperty(e,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return n.UNSUPPORTED_FEATURES}}),Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return n.Util}}),Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return n.VerbosityLevel}}),Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return o.AnnotationLayer}}),Object.defineProperty(e,"apiCompatibilityParams",{enumerable:!0,get:function(){return i.apiCompatibilityParams}}),Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return a.GlobalWorkerOptions}}),Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return s.renderTextLayer}}),Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return l.SVGGraphics}}),Object.defineProperty(e,"XfaLayer",{enumerable:!0,get:function(){return c.XfaLayer}});var t=__w_pdfjs_require__(1),r=__w_pdfjs_require__(113),n=__w_pdfjs_require__(4),o=__w_pdfjs_require__(125),i=__w_pdfjs_require__(117),a=__w_pdfjs_require__(120),s=__w_pdfjs_require__(127),l=__w_pdfjs_require__(128),c=__w_pdfjs_require__(129);if(__w_pdfjs_require__(6).isNodeJS){var u=__w_pdfjs_require__(130).PDFNodeStream;(0,r.setPDFNetworkStreamFactory)((function(e){return new u(e)}))}else{var d,p=__w_pdfjs_require__(133).PDFNetworkStream;(0,t.isFetchSupported)()&&(d=__w_pdfjs_require__(134).PDFFetchStream),(0,r.setPDFNetworkStreamFactory)((function(e){return d&&(0,t.isValidFetchUrl)(e.url)?new d(e):new p(e)}))}})(),__webpack_exports__})()},module.exports=factory()})(pdf);var clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],focusEvents=["onFocus","onBlur"],formEvents=["onChange","onInput","onInvalid","onReset","onSubmit"],genericEvents=["onError","onLoad"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],uiEvents=["onScroll"],wheelEvents=["onWheel"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],imageEvents=["onLoad","onError"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],allEvents=[].concat(clipboardEvents,compositionEvents,keyboardEvents,focusEvents,formEvents,genericEvents,mouseEvents,pointerEvents,selectionEvents,touchEvents,uiEvents,wheelEvents,mediaEvents,imageEvents,animationEvents,transitionEvents,otherEvents),makeEventProps=function(e,t){var r={};return allEvents.forEach((function(n){n in e&&(r[n]=t?function(r){return e[n](r,t(n))}:e[n])})),r};function makeCancellablePromise(e){var t=!1;return{promise:new Promise((function(r,n){e.then((function(){return!t&&r.apply(void 0,arguments)})).catch((function(e){return!t&&n(e)}))})),cancel:function(){t=!0}}}function mergeClassNames(){return Array.prototype.slice.call(arguments).reduce((function(e,t){return e.concat(t)}),[]).filter((function(e){return"string"==typeof e})).join(" ")}var DocumentContext=react.exports.createContext(null);function Message(e){var t=e.children,r=e.type;return React$1.createElement("div",{className:"react-pdf__message react-pdf__message--".concat(r)},t)}Message.propTypes={children:PropTypes.node,type:PropTypes.oneOf(["error","loading","no-data"]).isRequired};var LinkService=function(){function e(){_classCallCheck(this,e),this.externalLinkTarget=null,this.externalLinkRel=null,this.externalLinkEnabled=!0}return _createClass(e,[{key:"setDocument",value:function(e){this.pdfDocument=e}},{key:"setViewer",value:function(e){this.pdfViewer=e}},{key:"setHistory",value:function(){}},{key:"pagesCount",get:function(){return this.pdfDocument?this.pdfDocument.numPages:0}},{key:"page",get:function(){return this.pdfViewer.currentPageNumber},set:function(e){this.pdfViewer.currentPageNumber=e}},{key:"rotation",get:function(){return 0},set:function(e){}},{key:"goToDestination",value:function(e){var t=this;new Promise((function(r){"string"==typeof e?t.pdfDocument.getDestination(e).then(r):Array.isArray(e)?r(e):e.then(r)})).then((function(e){if(!Array.isArray(e))throw new Error('"'.concat(e,'" is not a valid destination array.'));var r=e[0];new Promise((function(e){if(r instanceof Object)t.pdfDocument.getPageIndex(r).then((function(t){e(t+1)})).catch((function(){throw new Error('"'.concat(r,'" is not a valid page reference.'))}));else{if("number"!=typeof r)throw new Error('"'.concat(r,'" is not a valid destination reference.'));e(r+1)}})).then((function(e){if(!e||e<1||e>t.pagesCount)throw new Error('"'.concat(e,'" is not a valid page number.'));t.pdfViewer.scrollPageIntoView({pageNumber:e})}))}))}},{key:"navigateTo",value:function(e){this.goToDestination(e)}},{key:"goToPage",value:function(){}},{key:"getDestinationHash",value:function(){return"#"}},{key:"getAnchorUrl",value:function(){return"#"}},{key:"setHash",value:function(){}},{key:"executeNamedAction",value:function(){}},{key:"cachePageRef",value:function(){}},{key:"isPageVisible",value:function(){return!0}},{key:"isPageCached",value:function(){return!0}}]),e}(),PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){s=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}var isBrowser="undefined"!=typeof window,isLocalFileSystem=isBrowser&&"file:"===window.location.protocol;function isDefined(e){return void 0!==e}function isProvided(e){return isDefined(e)&&null!==e}function isString(e){return"string"==typeof e}function isArrayBuffer(e){return e instanceof ArrayBuffer}function isBlob(e){if(!isBrowser)throw new Error("Attempted to check if a variable is a Blob on a non-browser environment.");return e instanceof Blob}function isFile$1(e){if(!isBrowser)throw new Error("Attempted to check if a variable is a File on a non-browser environment.");return e instanceof File}function isDataURI(e){return isString(e)&&/^data:/.test(e)}function dataURItoByteString(e){if(!isDataURI(e))throw new Error("Invalid data URI.");var t=_slicedToArray(e.split(","),2),r=t[0],n=t[1];return-1!==r.split(";").indexOf("base64")?atob(n):unescape(n)}function getPixelRatio(){return isBrowser&&window.devicePixelRatio||1}function consoleOnDev(e){}function warnOnDev(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];consoleOnDev.apply(void 0,["warn"].concat(t))}function errorOnDev(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];consoleOnDev.apply(void 0,["error"].concat(t))}function displayCORSWarning(){isLocalFileSystem&&warnOnDev("Loading PDF as base64 strings/URLs might not work on protocols other than HTTP/HTTPS. On Google Chrome, you can use --allow-file-access-from-files flag for debugging purposes.")}function cancelRunningTask(e){e&&e.cancel&&e.cancel()}function makePageCallback(e,t){return Object.defineProperty(e,"width",{get:function(){return this.view[2]*t},configurable:!0}),Object.defineProperty(e,"height",{get:function(){return this.view[3]*t},configurable:!0}),Object.defineProperty(e,"originalWidth",{get:function(){return this.view[2]},configurable:!0}),Object.defineProperty(e,"originalHeight",{get:function(){return this.view[3]},configurable:!0}),e}function isCancelException(e){return"RenderingCancelledException"===e.name}function loadFromFile(e){return new Promise((function(t,r){var n=new FileReader;return n.onload=function(){return t(new Uint8Array(n.result))},n.onerror=function(e){switch(e.target.error.code){case e.target.error.NOT_FOUND_ERR:return r(new Error("Error while reading a file: File not found."));case e.target.error.NOT_READABLE_ERR:return r(new Error("Error while reading a file: File not readable."));case e.target.error.SECURITY_ERR:return r(new Error("Error while reading a file: Security error."));case e.target.error.ABORT_ERR:return r(new Error("Error while reading a file: Aborted."));default:return r(new Error("Error while reading a file."))}},n.readAsArrayBuffer(e),null}))}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}var eventProps=(result={},[].concat(_toConsumableArray(mouseEvents),_toConsumableArray(touchEvents),_toConsumableArray(keyboardEvents)).forEach((function(e){result[e]=PropTypes.func})),result),result,fileTypes=[PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.shape({data:PropTypes.oneOfType([PropTypes.object,PropTypes.string]),httpHeaders:PropTypes.object,range:PropTypes.object,url:PropTypes.string,withCredentials:PropTypes.bool})];"undefined"!=typeof File&&fileTypes.push(PropTypes.instanceOf(File)),"undefined"!=typeof Blob&&fileTypes.push(PropTypes.instanceOf(Blob));var isClassName=PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.string)]),isFile=PropTypes.oneOfType(fileTypes),isLinkService=PropTypes.instanceOf(LinkService);PropTypes.oneOf(["_self","_blank","_parent","_top"]);var isPage=PropTypes.shape({_transport:PropTypes.shape({fontLoader:PropTypes.object.isRequired}).isRequired,commonObjs:PropTypes.shape({_objs:PropTypes.object.isRequired}).isRequired,getAnnotations:PropTypes.func.isRequired,getTextContent:PropTypes.func.isRequired,getViewport:PropTypes.func.isRequired,render:PropTypes.func.isRequired}),isPageIndex=function(e,t,r){var n=e[t],o=e.pageNumber,i=e.pdf;if(!isDefined(i))return null;if(isDefined(n)){if("number"!=typeof n)return new Error("`".concat(t,"` of type `").concat(_typeof(n),"` supplied to `").concat(r,"`, expected `number`."));if(n<0)return new Error("Expected `".concat(t,"` to be greater or equal to 0."));var a=i.numPages;if(n+1>a)return new Error("Expected `".concat(t,"` to be less or equal to ").concat(a-1,"."))}else if(!isDefined(o))return new Error("`".concat(t,"` not supplied. Either pageIndex or pageNumber must be supplied to `").concat(r,"`."));return null},isPageNumber=function(e,t,r){var n=e[t],o=e.pageIndex,i=e.pdf;if(!isDefined(i))return null;if(isDefined(n)){if("number"!=typeof n)return new Error("`".concat(t,"` of type `").concat(_typeof(n),"` supplied to `").concat(r,"`, expected `number`."));if(n<1)return new Error("Expected `".concat(t,"` to be greater or equal to 1."));var a=i.numPages;if(n>a)return new Error("Expected `".concat(t,"` to be less or equal to ").concat(a,"."))}else if(!isDefined(o))return new Error("`".concat(t,"` not supplied. Either pageIndex or pageNumber must be supplied to `").concat(r,"`."));return null},isPdf=PropTypes.oneOfType([PropTypes.shape({getDestination:PropTypes.func.isRequired,getOutline:PropTypes.func.isRequired,getPage:PropTypes.func.isRequired,numPages:PropTypes.number.isRequired}),PropTypes.bool]),isRef=PropTypes.oneOfType([PropTypes.func,PropTypes.shape({current:PropTypes.any})]),isRenderMode=PropTypes.oneOf(["canvas","none","svg"]),isRotate=PropTypes.oneOf([0,90,180,270]),_excluded=["url"];function ownKeys$2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread$2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$2(Object(r),!0).forEach((function(t){_defineProperty$6(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$2(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _createSuper$6(e){var t=_isNativeReflectConstruct$6();return function(){var r,n=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _isNativeReflectConstruct$6(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var PDFDataRangeTransport=pdf.exports.PDFDataRangeTransport,Document=function(e){_inherits(r,react.exports.PureComponent);var t=_createSuper$6(r);function r(){var e;_classCallCheck(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),_defineProperty$6(_assertThisInitialized(e),"state",{pdf:null}),_defineProperty$6(_assertThisInitialized(e),"viewer",{scrollPageIntoView:function(t){var r=t.pageNumber,n=e.props.onItemClick;if(n)n({pageNumber:r});else{var o=e.pages[r-1];o?o.scrollIntoView():warnOnDev("Warning: An internal link leading to page ".concat(r," was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>."))}}}),_defineProperty$6(_assertThisInitialized(e),"linkService",new LinkService),_defineProperty$6(_assertThisInitialized(e),"loadDocument",(function(){e.findDocumentSource().then((function(t){if(e.onSourceSuccess(),t){e.setState((function(e){return e.pdf?{pdf:null}:null}));var r=e.props,n=r.options,o=r.onLoadProgress,i=r.onPassword;cancelRunningTask(e.runningTask),e.loadingTask&&e.loadingTask.destroy(),e.loadingTask=pdf.exports.getDocument(_objectSpread$2(_objectSpread$2({},t),n)),e.loadingTask.onPassword=i,o&&(e.loadingTask.onProgress=o);var a=makeCancellablePromise(e.loadingTask.promise);e.runningTask=a,a.promise.then((function(t){e.setState((function(e){return e.pdf&&e.pdf.fingerprint===t.fingerprint?null:{pdf:t}}),e.onLoadSuccess)})).catch((function(t){e.onLoadError(t)}))}})).catch((function(t){e.onSourceError(t)}))})),_defineProperty$6(_assertThisInitialized(e),"setupLinkService",(function(){e.linkService.setViewer(e.viewer);var t=_assertThisInitialized(e);Object.defineProperty(e.linkService,"externalLinkTarget",{get:function(){switch(t.props.externalLinkTarget){case"_self":return 1;case"_blank":return 2;case"_parent":return 3;case"_top":return 4;default:return 0}}})})),_defineProperty$6(_assertThisInitialized(e),"onSourceSuccess",(function(){var t=e.props.onSourceSuccess;t&&t()})),_defineProperty$6(_assertThisInitialized(e),"onSourceError",(function(t){errorOnDev(t);var r=e.props.onSourceError;r&&r(t)})),_defineProperty$6(_assertThisInitialized(e),"onLoadSuccess",(function(){var t=e.props.onLoadSuccess,r=e.state.pdf;t&&t(r),e.pages=new Array(r.numPages),e.linkService.setDocument(r)})),_defineProperty$6(_assertThisInitialized(e),"onLoadError",(function(t){e.setState({pdf:!1}),errorOnDev(t);var r=e.props.onLoadError;r&&r(t)})),_defineProperty$6(_assertThisInitialized(e),"findDocumentSource",(function(){return new Promise((function(t){var r=e.props.file;if(r||t(null),"string"==typeof r){if(isDataURI(r)){var n=dataURItoByteString(r);t({data:n})}displayCORSWarning(),t({url:r})}if(r instanceof PDFDataRangeTransport&&t({range:r}),isArrayBuffer(r)&&t({data:r}),isBrowser&&(isBlob(r)||isFile$1(r)))loadFromFile(r).then((function(e){t({data:e})}));else{if("object"!==_typeof(r))throw new Error("Invalid parameter in file, need either Uint8Array, string or a parameter object");if(!r.url&&!r.data&&!r.range)throw new Error("Invalid parameter object: need either .data, .range or .url");if("string"==typeof r.url){if(isDataURI(r.url)){var o=r.url,i=_objectWithoutProperties(r,_excluded),a=dataURItoByteString(o);t(_objectSpread$2({data:a},i))}displayCORSWarning()}t(r)}}))})),_defineProperty$6(_assertThisInitialized(e),"registerPage",(function(t,r){e.pages[t]=r})),_defineProperty$6(_assertThisInitialized(e),"unregisterPage",(function(t){delete e.pages[t]})),e}return _createClass(r,[{key:"componentDidMount",value:function(){this.loadDocument(),this.setupLinkService()}},{key:"componentDidUpdate",value:function(e){this.props.file!==e.file&&this.loadDocument()}},{key:"componentWillUnmount",value:function(){cancelRunningTask(this.runningTask),this.loadingTask&&this.loadingTask.destroy()}},{key:"childContext",get:function(){var e=this.linkService,t=this.registerPage,r=this.unregisterPage,n=this.props,o=n.imageResourcesPath,i=n.renderMode,a=n.rotate;return{imageResourcesPath:o,linkService:e,pdf:this.state.pdf,registerPage:t,renderMode:i,rotate:a,unregisterPage:r}}},{key:"eventProps",get:function(){var e=this;return makeEventProps(this.props,(function(){return e.state.pdf}))}},{key:"renderChildren",value:function(){var e=this.props.children;return React$1.createElement(DocumentContext.Provider,{value:this.childContext},e)}},{key:"renderContent",value:function(){var e=this.props.file,t=this.state.pdf;if(!e){var r=this.props.noData;return React$1.createElement(Message,{type:"no-data"},"function"==typeof r?r():r)}if(null===t){var n=this.props.loading;return React$1.createElement(Message,{type:"loading"},"function"==typeof n?n():n)}if(!1===t){var o=this.props.error;return React$1.createElement(Message,{type:"error"},"function"==typeof o?o():o)}return this.renderChildren()}},{key:"render",value:function(){var e=this.props,t=e.className,r=e.inputRef;return React$1.createElement("div",_extends$3({className:mergeClassNames("react-pdf__Document",t),ref:r},this.eventProps),this.renderContent())}}]),r}();Document.defaultProps={error:"Failed to load PDF file.",loading:"Loading PDF…",noData:"No PDF file specified.",onPassword:function(e,t){switch(t){case PasswordResponses.NEED_PASSWORD:e(prompt("Enter the password to open this PDF file."));break;case PasswordResponses.INCORRECT_PASSWORD:e(prompt("Invalid password. Please try again."))}}};var isFunctionOrNode$1=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Document.propTypes=_objectSpread$2(_objectSpread$2({},eventProps),{},{children:PropTypes.node,className:isClassName,error:isFunctionOrNode$1,file:isFile,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode$1,noData:isFunctionOrNode$1,onItemClick:PropTypes.func,onLoadError:PropTypes.func,onLoadProgress:PropTypes.func,onLoadSuccess:PropTypes.func,onPassword:PropTypes.func,onSourceError:PropTypes.func,onSourceSuccess:PropTypes.func,rotate:PropTypes.number});var isDestination=PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.any)]);function ownKeys$1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread$1(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$1(Object(r),!0).forEach((function(t){_defineProperty$6(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$1(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function mergeRefs(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.filter(Boolean);return n.length<=1?n[0]:function(e){n.forEach((function(t){"function"==typeof t?t(e):t.current=e}))}}PropTypes.shape({dest:isDestination,items:PropTypes.arrayOf(PropTypes.shape({dest:isDestination,title:PropTypes.string})),title:PropTypes.string}).isRequired,PropTypes.func,isPdf.isRequired,_objectSpread$1({className:isClassName,inputRef:isRef,onItemClick:PropTypes.func,onLoadError:PropTypes.func,onLoadSuccess:PropTypes.func,pdf:isPdf},eventProps);var PageContext=react.exports.createContext(null);function _createSuper$5(e){var t=_isNativeReflectConstruct$5();return function(){var r,n=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _isNativeReflectConstruct$5(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var PageCanvasInternal=function(e){_inherits(r,react.exports.PureComponent);var t=_createSuper$5(r);function r(){var e;_classCallCheck(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),_defineProperty$6(_assertThisInitialized(e),"onRenderSuccess",(function(){e.renderer=null;var t=e.props,r=t.onRenderSuccess,n=t.page,o=t.scale;r&&r(makePageCallback(n,o))})),_defineProperty$6(_assertThisInitialized(e),"onRenderError",(function(t){if(!isCancelException(t)){errorOnDev(t);var r=e.props.onRenderError;r&&r(t)}})),_defineProperty$6(_assertThisInitialized(e),"drawPageOnCanvas",(function(){var t=_assertThisInitialized(e).canvasLayer;if(!t)return null;var r=_assertThisInitialized(e),n=r.renderViewport,o=r.viewport,i=e.props,a=i.canvasBackground,s=i.page,l=i.renderInteractiveForms;t.width=n.width,t.height=n.height,t.style.width="".concat(Math.floor(o.width),"px"),t.style.height="".concat(Math.floor(o.height),"px");var c={get canvasContext(){return t.getContext("2d")},viewport:n,renderInteractiveForms:l};return a&&(c.background=a),e.cancelRenderingTask(),e.renderer=s.render(c),e.renderer.promise.then(e.onRenderSuccess).catch(e.onRenderError)})),e}return _createClass(r,[{key:"componentDidMount",value:function(){this.drawPageOnCanvas()}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.canvasBackground,n=t.page,o=t.renderInteractiveForms;r===e.canvasBackground&&o===e.renderInteractiveForms||(n.cleanup(),this.drawPageOnCanvas())}},{key:"componentWillUnmount",value:function(){this.cancelRenderingTask(),this.canvasLayer&&(this.canvasLayer.width=0,this.canvasLayer.height=0,this.canvasLayer=null)}},{key:"cancelRenderingTask",value:function(){this.renderer&&(this.renderer.cancel(),this.renderer=null)}},{key:"renderViewport",get:function(){var e=this.props,t=e.page,r=e.rotate,n=e.scale,o=getPixelRatio();return t.getViewport({scale:n*o,rotation:r})}},{key:"viewport",get:function(){var e=this.props,t=e.page,r=e.rotate,n=e.scale;return t.getViewport({scale:n,rotation:r})}},{key:"render",value:function(){var e=this,t=this.props.canvasRef;return React$1.createElement("canvas",{className:"react-pdf__Page__canvas",dir:"ltr",ref:mergeRefs(t,(function(t){e.canvasLayer=t})),style:{display:"block",userSelect:"none"}})}}]),r}();function PageCanvas(e){return React$1.createElement(PageContext.Consumer,null,(function(t){return React$1.createElement(PageCanvasInternal,_extends$3({},t,e))}))}function _createSuper$4(e){var t=_isNativeReflectConstruct$4();return function(){var r,n=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _isNativeReflectConstruct$4(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}PageCanvasInternal.propTypes={canvasBackground:PropTypes.string,canvasRef:isRef,onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,page:isPage.isRequired,renderInteractiveForms:PropTypes.bool,rotate:isRotate,scale:PropTypes.number.isRequired};var PageSVGInternal=function(e){_inherits(r,react.exports.PureComponent);var t=_createSuper$4(r);function r(){var e;_classCallCheck(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),_defineProperty$6(_assertThisInitialized(e),"state",{svg:null}),_defineProperty$6(_assertThisInitialized(e),"onRenderSuccess",(function(){e.renderer=null;var t=e.props,r=t.onRenderSuccess,n=t.page,o=t.scale;r&&r(makePageCallback(n,o))})),_defineProperty$6(_assertThisInitialized(e),"onRenderError",(function(t){if(!isCancelException(t)){errorOnDev(t);var r=e.props.onRenderError;r&&r(t)}})),_defineProperty$6(_assertThisInitialized(e),"renderSVG",(function(){var t=e.props.page;return e.renderer=t.getOperatorList(),e.renderer.then((function(r){var n=new pdf.exports.SVGGraphics(t.commonObjs,t.objs);e.renderer=n.getSVG(r,e.viewport).then((function(t){e.setState({svg:t},e.onRenderSuccess)})).catch(e.onRenderError)})).catch(e.onRenderError)})),_defineProperty$6(_assertThisInitialized(e),"drawPageOnContainer",(function(t){var r=e.state.svg;if(t&&r){t.firstElementChild||t.appendChild(r);var n=e.viewport,o=n.width,i=n.height;r.setAttribute("width",o),r.setAttribute("height",i)}})),e}return _createClass(r,[{key:"componentDidMount",value:function(){this.renderSVG()}},{key:"viewport",get:function(){var e=this.props,t=e.page,r=e.rotate,n=e.scale;return t.getViewport({scale:n,rotation:r})}},{key:"render",value:function(){var e=this,t=this.viewport,r=t.width,n=t.height;return React$1.createElement("div",{className:"react-pdf__Page__svg",ref:function(t){return e.drawPageOnContainer(t)},style:{display:"block",backgroundColor:"white",overflow:"hidden",width:r,height:n,userSelect:"none"}})}}]),r}();function PageSVG(e){return React$1.createElement(PageContext.Consumer,null,(function(t){return React$1.createElement(PageSVGInternal,_extends$3({},t,e))}))}function _createSuper$3(e){var t=_isNativeReflectConstruct$3();return function(){var r,n=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _isNativeReflectConstruct$3(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}PageSVGInternal.propTypes={onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,page:isPage.isRequired,rotate:isRotate,scale:PropTypes.number.isRequired};var TextLayerItemInternal=function(e){_inherits(r,react.exports.PureComponent);var t=_createSuper$3(r);function r(){var e;_classCallCheck(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),_defineProperty$6(_assertThisInitialized(e),"getElementWidth",(function(t){var r=_assertThisInitialized(e).sideways;return t.getBoundingClientRect()[r?"height":"width"]})),e}return _createClass(r,[{key:"componentDidMount",value:function(){this.alignTextItem()}},{key:"componentDidUpdate",value:function(){this.alignTextItem()}},{key:"unrotatedViewport",get:function(){var e=this.props,t=e.page,r=e.scale;return t.getViewport({scale:r})}},{key:"rotate",get:function(){var e=this.props,t=e.page;return e.rotate-t.rotate}},{key:"sideways",get:function(){return this.rotate%180!=0}},{key:"defaultSideways",get:function(){return this.unrotatedViewport.rotation%180!=0}},{key:"fontSize",get:function(){var e=this.props.transform,t=this.defaultSideways,r=_slicedToArray(e,2),n=r[0],o=r[1];return t?o:n}},{key:"top",get:function(){var e=this.props.transform,t=this.unrotatedViewport,r=this.defaultSideways,n=_slicedToArray(e,6),o=n[2],i=n[3],a=n[4],s=n[5],l=_slicedToArray(t.viewBox,4),c=l[1],u=l[3];return r?a+o+c:u-(s+i)}},{key:"left",get:function(){var e=this.props.transform,t=this.unrotatedViewport,r=this.defaultSideways,n=_slicedToArray(e,6),o=n[4],i=n[5],a=_slicedToArray(t.viewBox,1)[0];return r?i-a:o-a}},{key:"getFontData",value:function(e){var t=this.props.page;return new Promise((function(r){t.commonObjs.get(e,r)}))}},{key:"alignTextItem",value:function(){var e=this,t=this.item;if(t){t.style.transform="";var r=this.props,n=r.fontName,o=r.scale,i=r.width;t.style.fontFamily="".concat(n,", sans-serif"),this.getFontData(n).then((function(r){var a=r?r.fallbackName:"sans-serif";t.style.fontFamily="".concat(n,", ").concat(a);var s=i*o,l=e.getElementWidth(t),c="scaleX(".concat(s/l,")"),u=r?r.ascent:0;u&&(c+=" translateY(".concat(100*(1-u),"%)")),t.style.transform=c,t.style.WebkitTransform=c}))}}},{key:"render",value:function(){var e=this,t=this.fontSize,r=this.top,n=this.left,o=this.props,i=o.customTextRenderer,a=o.scale,s=o.str;return React$1.createElement("span",{ref:function(t){e.item=t},style:{height:"1em",fontFamily:"sans-serif",fontSize:"".concat(t*a,"px"),position:"absolute",top:"".concat(r*a,"px"),left:"".concat(n*a,"px"),transformOrigin:"left bottom",whiteSpace:"pre",pointerEvents:"all"}},i?i(this.props):s)}}]),r}();function TextLayerItem(e){return React$1.createElement(PageContext.Consumer,null,(function(t){return React$1.createElement(TextLayerItemInternal,_extends$3({},t,e))}))}function _createSuper$2(e){var t=_isNativeReflectConstruct$2();return function(){var r,n=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _isNativeReflectConstruct$2(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}TextLayerItemInternal.propTypes={customTextRenderer:PropTypes.func,fontName:PropTypes.string.isRequired,itemIndex:PropTypes.number.isRequired,page:isPage.isRequired,rotate:isRotate,scale:PropTypes.number,str:PropTypes.string.isRequired,transform:PropTypes.arrayOf(PropTypes.number).isRequired,width:PropTypes.number.isRequired};var TextLayerInternal=function(e){_inherits(r,react.exports.PureComponent);var t=_createSuper$2(r);function r(){var e;_classCallCheck(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),_defineProperty$6(_assertThisInitialized(e),"state",{textItems:null}),_defineProperty$6(_assertThisInitialized(e),"loadTextItems",(function(){var t=makeCancellablePromise(e.props.page.getTextContent());e.runningTask=t,t.promise.then((function(t){var r=t.items;e.setState({textItems:r},e.onLoadSuccess)})).catch((function(t){e.onLoadError(t)}))})),_defineProperty$6(_assertThisInitialized(e),"onLoadSuccess",(function(){var t=e.props.onGetTextSuccess,r=e.state.textItems;t&&t(r)})),_defineProperty$6(_assertThisInitialized(e),"onLoadError",(function(t){e.setState({textItems:!1}),errorOnDev(t);var r=e.props.onGetTextError;r&&r(t)})),e}return _createClass(r,[{key:"componentDidMount",value:function(){if(!this.props.page)throw new Error("Attempted to load page text content, but no page was specified.");this.loadTextItems()}},{key:"componentDidUpdate",value:function(e){var t=this.props.page;e.page&&t!==e.page&&this.loadTextItems()}},{key:"componentWillUnmount",value:function(){cancelRunningTask(this.runningTask)}},{key:"unrotatedViewport",get:function(){var e=this.props,t=e.page,r=e.scale;return t.getViewport({scale:r})}},{key:"rotate",get:function(){var e=this.props,t=e.page;return e.rotate-t.rotate}},{key:"renderTextItems",value:function(){var e=this.state.textItems;return e?e.map((function(e,t){return React$1.createElement(TextLayerItem,_extends$3({key:t,itemIndex:t},e))})):null}},{key:"render",value:function(){var e=this.unrotatedViewport,t=this.rotate;return React$1.createElement("div",{className:"react-pdf__Page__textContent",style:{position:"absolute",top:"50%",left:"50%",width:"".concat(e.width,"px"),height:"".concat(e.height,"px"),color:"transparent",transform:"translate(-50%, -50%) rotate(".concat(t,"deg)"),WebkitTransform:"translate(-50%, -50%) rotate(".concat(t,"deg)"),pointerEvents:"none"}},this.renderTextItems())}}]),r}();function TextLayer(e){return React$1.createElement(PageContext.Consumer,null,(function(t){return React$1.createElement(TextLayerInternal,_extends$3({},t,e))}))}function _createSuper$1(e){var t=_isNativeReflectConstruct$1();return function(){var r,n=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _isNativeReflectConstruct$1(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}TextLayerInternal.propTypes={onGetTextError:PropTypes.func,onGetTextSuccess:PropTypes.func,page:isPage.isRequired,rotate:isRotate,scale:PropTypes.number};var AnnotationLayerInternal=function(e){_inherits(r,react.exports.PureComponent);var t=_createSuper$1(r);function r(){var e;_classCallCheck(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),_defineProperty$6(_assertThisInitialized(e),"state",{annotations:null}),_defineProperty$6(_assertThisInitialized(e),"loadAnnotations",(function(){var t=makeCancellablePromise(e.props.page.getAnnotations());e.runningTask=t,t.promise.then((function(t){e.setState({annotations:t},e.onLoadSuccess)})).catch((function(t){e.onLoadError(t)}))})),_defineProperty$6(_assertThisInitialized(e),"onLoadSuccess",(function(){var t=e.props.onGetAnnotationsSuccess,r=e.state.annotations;t&&t(r)})),_defineProperty$6(_assertThisInitialized(e),"onLoadError",(function(t){e.setState({annotations:!1}),errorOnDev(t);var r=e.props.onGetAnnotationsError;r&&r(t)})),_defineProperty$6(_assertThisInitialized(e),"onRenderSuccess",(function(){var t=e.props.onRenderAnnotationLayerSuccess;t&&t()})),_defineProperty$6(_assertThisInitialized(e),"onRenderError",(function(t){errorOnDev(t);var r=e.props.onRenderAnnotationLayerError;r&&r(t)})),e}return _createClass(r,[{key:"componentDidMount",value:function(){if(!this.props.page)throw new Error("Attempted to load page annotations, but no page was specified.");this.loadAnnotations()}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.page,n=t.renderInteractiveForms;(e.page&&r!==e.page||n!==e.renderInteractiveForms)&&this.loadAnnotations()}},{key:"componentWillUnmount",value:function(){cancelRunningTask(this.runningTask)}},{key:"viewport",get:function(){var e=this.props,t=e.page,r=e.rotate,n=e.scale;return t.getViewport({scale:n,rotation:r})}},{key:"renderAnnotationLayer",value:function(){var e=this.state.annotations;if(e){var t=this.props,r=t.imageResourcesPath,n=t.linkService,o=t.page,i=t.renderInteractiveForms,a=this.viewport.clone({dontFlip:!0}),s={annotations:e,div:this.annotationLayer,imageResourcesPath:r,linkService:n,page:o,renderInteractiveForms:i,viewport:a};this.annotationLayer.innerHTML="";try{pdf.exports.AnnotationLayer.render(s),this.onRenderSuccess()}catch(l){this.onRenderError(l)}}}},{key:"render",value:function(){var e=this;return React$1.createElement("div",{className:"react-pdf__Page__annotations annotationLayer",ref:function(t){e.annotationLayer=t}},this.renderAnnotationLayer())}}]),r}();AnnotationLayerInternal.propTypes={imageResourcesPath:PropTypes.string,linkService:isLinkService.isRequired,onGetAnnotationsError:PropTypes.func,onGetAnnotationsSuccess:PropTypes.func,onRenderAnnotationLayerError:PropTypes.func,onRenderAnnotationLayerSuccess:PropTypes.func,page:isPage,renderInteractiveForms:PropTypes.bool,rotate:isRotate,scale:PropTypes.number};var AnnotationLayer$1=function(e){return React$1.createElement(DocumentContext.Consumer,null,(function(t){return React$1.createElement(PageContext.Consumer,null,(function(r){return React$1.createElement(AnnotationLayerInternal,_extends$3({},t,r,e))}))}))};function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty$6(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var defaultScale=1,PageInternal=function(e){_inherits(r,react.exports.PureComponent);var t=_createSuper(r);function r(){var e;_classCallCheck(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),_defineProperty$6(_assertThisInitialized(e),"state",{page:null}),_defineProperty$6(_assertThisInitialized(e),"onLoadSuccess",(function(){var t=e.props,r=t.onLoadSuccess,n=t.registerPage,o=e.state.page;r&&r(makePageCallback(o,e.scale)),n&&n(e.pageIndex,e.ref)})),_defineProperty$6(_assertThisInitialized(e),"onLoadError",(function(t){errorOnDev(t);var r=e.props.onLoadError;r&&r(t)})),_defineProperty$6(_assertThisInitialized(e),"loadPage",(function(){var t=e.props.pdf,r=e.getPageNumber();if(r){e.setState((function(e){return e.page?{page:null}:null}));var n=makeCancellablePromise(t.getPage(r));e.runningTask=n,n.promise.then((function(t){e.setState({page:t},e.onLoadSuccess)})).catch((function(t){e.setState({page:!1}),e.onLoadError(t)}))}})),e}return _createClass(r,[{key:"componentDidMount",value:function(){if(!this.props.pdf)throw new Error("Attempted to load a page, but no document was specified.");this.loadPage()}},{key:"componentDidUpdate",value:function(e){var t=this.props.pdf;if(e.pdf&&t!==e.pdf||this.getPageNumber()!==this.getPageNumber(e)){var r=this.props.unregisterPage;r&&r(this.getPageIndex(e)),this.loadPage()}}},{key:"componentWillUnmount",value:function(){var e=this.props.unregisterPage;e&&e(this.pageIndex),cancelRunningTask(this.runningTask)}},{key:"childContext",get:function(){var e=this.state.page;if(!e)return{};var t=this.props;return{canvasBackground:t.canvasBackground,customTextRenderer:t.customTextRenderer,onGetAnnotationsError:t.onGetAnnotationsError,onGetAnnotationsSuccess:t.onGetAnnotationsSuccess,onGetTextError:t.onGetTextError,onGetTextSuccess:t.onGetTextSuccess,onRenderAnnotationLayerError:t.onRenderAnnotationLayerError,onRenderAnnotationLayerSuccess:t.onRenderAnnotationLayerSuccess,onRenderError:t.onRenderError,onRenderSuccess:t.onRenderSuccess,page:e,renderInteractiveForms:t.renderInteractiveForms,rotate:this.rotate,scale:this.scale}}},{key:"getPageIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return isProvided(e.pageNumber)?e.pageNumber-1:isProvided(e.pageIndex)?e.pageIndex:null}},{key:"getPageNumber",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return isProvided(e.pageNumber)?e.pageNumber:isProvided(e.pageIndex)?e.pageIndex+1:null}},{key:"pageIndex",get:function(){return this.getPageIndex()}},{key:"pageNumber",get:function(){return this.getPageNumber()}},{key:"rotate",get:function(){var e=this.props.rotate;if(isProvided(e))return e;var t=this.state.page;return t?t.rotate:null}},{key:"scale",get:function(){var e=this.state.page;if(!e)return null;var t=this.props,r=t.scale,n=t.width,o=t.height,i=this.rotate,a=1,s=null===r?defaultScale:r;if(n||o){var l=e.getViewport({scale:1,rotation:i});a=n?n/l.width:o/l.height}return s*a}},{key:"eventProps",get:function(){var e=this;return makeEventProps(this.props,(function(){var t=e.state.page;return t?makePageCallback(t,e.scale):t}))}},{key:"pageKey",get:function(){var e=this.state.page;return"".concat(e.pageIndex,"@").concat(this.scale,"/").concat(this.rotate)}},{key:"pageKeyNoScale",get:function(){var e=this.state.page;return"".concat(e.pageIndex,"/").concat(this.rotate)}},{key:"renderMainLayer",value:function(){var e=this.props,t=e.canvasRef;switch(e.renderMode){case"none":return null;case"svg":return React$1.createElement(PageSVG,{key:"".concat(this.pageKeyNoScale,"_svg")});case"canvas":default:return React$1.createElement(PageCanvas,{key:"".concat(this.pageKey,"_canvas"),canvasRef:t})}}},{key:"renderTextLayer",value:function(){return this.props.renderTextLayer?React$1.createElement(TextLayer,{key:"".concat(this.pageKey,"_text")}):null}},{key:"renderAnnotationLayer",value:function(){return this.props.renderAnnotationLayer?React$1.createElement(AnnotationLayer$1,{key:"".concat(this.pageKey,"_annotations")}):null}},{key:"renderChildren",value:function(){var e=this.props.children;return React$1.createElement(PageContext.Provider,{value:this.childContext},this.renderMainLayer(),this.renderTextLayer(),this.renderAnnotationLayer(),e)}},{key:"renderContent",value:function(){var e=this.pageNumber,t=this.props.pdf,r=this.state.page;if(!e){var n=this.props.noData;return React$1.createElement(Message,{type:"no-data"},"function"==typeof n?n():n)}if(null===t||null===r){var o=this.props.loading;return React$1.createElement(Message,{type:"loading"},"function"==typeof o?o():o)}if(!1===t||!1===r){var i=this.props.error;return React$1.createElement(Message,{type:"error"},"function"==typeof i?i():i)}return this.renderChildren()}},{key:"render",value:function(){var e=this.pageNumber,t=this.props,r=t.className,n=t.inputRef;return React$1.createElement("div",_extends$3({className:mergeClassNames("react-pdf__Page",r),"data-page-number":e,ref:mergeRefs(n,this.ref),style:{position:"relative"}},this.eventProps),this.renderContent())}}]),r}();PageInternal.defaultProps={error:"Failed to load the page.",loading:"Loading page…",noData:"No page specified.",renderAnnotationLayer:!0,renderInteractiveForms:!1,renderMode:"canvas",renderTextLayer:!0,scale:defaultScale};var isFunctionOrNode=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);function Page(e,t){return React$1.createElement(DocumentContext.Consumer,null,(function(r){return React$1.createElement(PageInternal,_extends$3({ref:t},r,e))}))}PageInternal.propTypes=_objectSpread(_objectSpread({},eventProps),{},{canvasBackground:PropTypes.string,children:PropTypes.node,className:isClassName,customTextRenderer:PropTypes.func,error:isFunctionOrNode,height:PropTypes.number,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode,noData:isFunctionOrNode,onGetTextError:PropTypes.func,onGetTextSuccess:PropTypes.func,onLoadError:PropTypes.func,onLoadSuccess:PropTypes.func,onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,pageIndex:isPageIndex,pageNumber:isPageNumber,pdf:isPdf,registerPage:PropTypes.func,renderAnnotationLayer:PropTypes.bool,renderInteractiveForms:PropTypes.bool,renderMode:isRenderMode,renderTextLayer:PropTypes.bool,rotate:isRotate,scale:PropTypes.number,unregisterPage:PropTypes.func,width:PropTypes.number});var Page$1=React$1.forwardRef(Page);isLocalFileSystem&&warnOnDev("You are running React-PDF from your local file system. PDF.js Worker may fail to load due to browser's security policies. If you're on Google Chrome, you can use --allow-file-access-from-files flag for debugging purposes."),pdf.exports.GlobalWorkerOptions.workerSrc="pdf.worker.js";var AnnotationLayer='/* Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n.annotationLayer section {\n  position: absolute;\n}\n\n.annotationLayer .linkAnnotation > a,\n.annotationLayer .buttonWidgetAnnotation.pushButton > a {\n  position: absolute;\n  font-size: 1em;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.annotationLayer .linkAnnotation > a:hover,\n.annotationLayer .buttonWidgetAnnotation.pushButton > a:hover {\n  opacity: 0.2;\n  background: #ff0;\n  box-shadow: 0px 2px 10px #ff0;\n}\n\n.annotationLayer .textAnnotation img {\n  position: absolute;\n  cursor: pointer;\n}\n\n.annotationLayer .textWidgetAnnotation input,\n.annotationLayer .textWidgetAnnotation textarea,\n.annotationLayer .choiceWidgetAnnotation select,\n.annotationLayer .buttonWidgetAnnotation.checkBox input,\n.annotationLayer .buttonWidgetAnnotation.radioButton input {\n  background-color: rgba(0, 54, 255, 0.13);\n  border: 1px solid transparent;\n  box-sizing: border-box;\n  font-size: 9px;\n  height: 100%;\n  margin: 0;\n  padding: 0 3px;\n  vertical-align: top;\n  width: 100%;\n}\n\n.annotationLayer .choiceWidgetAnnotation select option {\n  padding: 0;\n}\n\n.annotationLayer .buttonWidgetAnnotation.radioButton input {\n  border-radius: 50%;\n}\n\n.annotationLayer .textWidgetAnnotation textarea {\n  font: message-box;\n  font-size: 9px;\n  resize: none;\n}\n\n.annotationLayer .textWidgetAnnotation input[disabled],\n.annotationLayer .textWidgetAnnotation textarea[disabled],\n.annotationLayer .choiceWidgetAnnotation select[disabled],\n.annotationLayer .buttonWidgetAnnotation.checkBox input[disabled],\n.annotationLayer .buttonWidgetAnnotation.radioButton input[disabled] {\n  background: none;\n  border: 1px solid transparent;\n  cursor: not-allowed;\n}\n\n.annotationLayer .textWidgetAnnotation input:hover,\n.annotationLayer .textWidgetAnnotation textarea:hover,\n.annotationLayer .choiceWidgetAnnotation select:hover,\n.annotationLayer .buttonWidgetAnnotation.checkBox input:hover,\n.annotationLayer .buttonWidgetAnnotation.radioButton input:hover {\n  border: 1px solid #000;\n}\n\n.annotationLayer .textWidgetAnnotation input:focus,\n.annotationLayer .textWidgetAnnotation textarea:focus,\n.annotationLayer .choiceWidgetAnnotation select:focus {\n  background: none;\n  border: 1px solid transparent;\n}\n\n.annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before,\n.annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after,\n.annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before {\n  background-color: #000;\n  content: \'\';\n  display: block;\n  position: absolute;\n}\n\n.annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before,\n.annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after {\n  height: 80%;\n  left: 45%;\n  width: 1px;\n}\n\n.annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before {\n  transform: rotate(45deg);\n}\n\n.annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after {\n  transform: rotate(-45deg);\n}\n\n.annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before {\n  border-radius: 50%;\n  height: 50%;\n  left: 30%;\n  top: 20%;\n  width: 50%;\n}\n\n.annotationLayer .textWidgetAnnotation input.comb {\n  font-family: monospace;\n  padding-left: 2px;\n  padding-right: 0;\n}\n\n.annotationLayer .textWidgetAnnotation input.comb:focus {\n  /*\n   * Letter spacing is placed on the right side of each character. Hence, the\n   * letter spacing of the last character may be placed outside the visible\n   * area, causing horizontal scrolling. We avoid this by extending the width\n   * when the element has focus and revert this when it loses focus.\n   */\n  width: 115%;\n}\n\n.annotationLayer .buttonWidgetAnnotation.checkBox input,\n.annotationLayer .buttonWidgetAnnotation.radioButton input {\n  appearance: none;\n  padding: 0;\n}\n\n.annotationLayer .popupWrapper {\n  position: absolute;\n  width: 20em;\n}\n\n.annotationLayer .popup {\n  position: absolute;\n  z-index: 200;\n  max-width: 20em;\n  background-color: #FFFF99;\n  box-shadow: 0px 2px 5px #888;\n  border-radius: 2px;\n  padding: 6px;\n  margin-left: 5px;\n  cursor: pointer;\n  font: message-box;\n  font-size: 9px;\n  word-wrap: break-word;\n}\n\n.annotationLayer .popup > * {\n  font-size: 9px;\n}\n\n.annotationLayer .popup h1 {\n  display: inline-block;\n}\n\n.annotationLayer .popup span {\n  display: inline-block;\n  margin-left: 5px;\n}\n\n.annotationLayer .popup p {\n  border-top: 1px solid #333;\n  margin-top: 2px;\n  padding-top: 2px;\n}\n\n.annotationLayer .highlightAnnotation,\n.annotationLayer .underlineAnnotation,\n.annotationLayer .squigglyAnnotation,\n.annotationLayer .strikeoutAnnotation,\n.annotationLayer .freeTextAnnotation,\n.annotationLayer .lineAnnotation svg line,\n.annotationLayer .squareAnnotation svg rect,\n.annotationLayer .circleAnnotation svg ellipse,\n.annotationLayer .polylineAnnotation svg polyline,\n.annotationLayer .polygonAnnotation svg polygon,\n.annotationLayer .caretAnnotation,\n.annotationLayer .inkAnnotation svg polyline,\n.annotationLayer .stampAnnotation,\n.annotationLayer .fileAttachmentAnnotation {\n  cursor: pointer;\n}\n';const Pagination=e=>{const t=useToast(),{t:r}=useTranslation(),n=e=>{const t={bg:useColorModeValue("brand.600","brand.500"),color:useColorModeValue("white","gray.200")};return React$1.createElement(chakra.button,__spreadValues(__spreadValues({mx:1,px:2,py:2,rounded:"md",bg:useColorModeValue("white","gray.800"),color:useColorModeValue("gray.700","gray.200"),opacity:e.disabled&&.6,_hover:!e.disabled&&t,cursor:e.disabled&&"not-allowed"},e.active&&t),e),e.children)},[o,i]=React$1.useState(e.currentPage+""),a=e.vertical?VStack:HStack;return React$1.createElement(Flex,{bg:useColorModeValue("#F9FAFB","gray.600"),p:"2",w:"full",alignItems:"center",justifyContent:"center",rounded:"lg"},React$1.createElement(a,null,React$1.createElement(n,{onClick:()=>{e.currentPage>1?(i(e.currentPage-1+""),e.onPageChange(e.currentPage-1)):t({title:r("Already the first page"),status:"warning",duration:3e3,isClosable:!0})}},React$1.createElement(Icon,{as:e.vertical?IoIosArrowUp:IoIosArrowBack,color:useColorModeValue("gray.700","gray.200"),boxSize:4})),e.pageButton&&Array.from(Array(e.totalPages).keys()).map((t=>React$1.createElement(n,{key:t,active:t===e.currentPage,onClick:()=>{i(t+""),e.onPageChange(t)}},t+1))),React$1.createElement(n,{onClick:()=>{e.currentPage<e.totalPages?(i(e.currentPage+1+""),e.onPageChange(e.currentPage+1)):t({title:r("Already the last page"),status:"warning",duration:3e3,isClosable:!0})}},React$1.createElement(Icon,{as:e.vertical?IoIosArrowDown:IoIosArrowForward,color:useColorModeValue("gray.700","gray.200"),boxSize:4})),React$1.createElement(a,null,React$1.createElement(Text,{wordBreak:"unset"},`${e.currentPage}/${e.totalPages}`),React$1.createElement(Input,{w:"50px",value:o,onChange:e=>{i(e.target.value)},onKeyDown:n=>{if("Enter"===n.key){const n=parseInt(o);!isNaN(n)&&n>0&&n<=e.totalPages?e.onPageChange(n):t({title:r("Input is illegal"),status:"warning",duration:3e3,isClosable:!0})}}}))))},type$1=-1,exts$1=[];pdf.exports.GlobalWorkerOptions.workerSrc=`//cdn.jsdelivr.net/npm/pdfjs-dist@${pdf.exports.version}/build/pdf.worker.min.js`;const Pdf=({url:e,unfold:t})=>{const[r,n]=react.exports.useState(0),[o,i]=react.exports.useState(1);useToast(),useTranslation();const{getSetting:a}=react.exports.useContext(IContext);const s=useBreakpointValue({base:!1,md:!0});return React$1.createElement(Center,{w:"full",h:"full",className:"pdf-preview-box"},React$1.createElement(Box,{shadow:t?"0 30px 40px 0 rgb(16 36 94 / 20%)":"unset"},React$1.createElement(Document,{renderMode:"canvas",file:e,onLoadSuccess:function({numPages:e}){n(e)},loading:React$1.createElement(Spinner,{color:a("icon color")||"teal.300",size:"xl"})},React$1.createElement(Page$1,{height:document.body.clientHeight*(t?1:.75),pageNumber:o}))),React$1.createElement(Box,{pos:"fixed",right:{base:"unset",md:"0"},bottom:{base:"0",md:"unset"}},React$1.createElement(Pagination,{vertical:s,currentPage:o,totalPages:r,onPageChange:e=>{i(e)}})))};var __glob_8_4=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",type:type$1,exts:exts$1,default:Pdf}),artplayer={exports:{}};artplayer.exports=function(){var e=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e},n=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e};function o(e,t){return e(t={exports:{}},t.exports),t.exports}var i=o((function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(r,n)}e.exports=t})),a=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)},s=o((function(e){function t(r){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=t=function(e){return typeof e}:e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(r)}e.exports=t})),l=function(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?n(e):t},c=o((function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(r)}e.exports=t}));!function(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===r&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}('.art-undercover{background:#000;position:fixed;top:0;left:0;display:none;height:100%;width:100%;opacity:.9;z-index:10}.art-video-player{display:-webkit-box;display:-ms-flexbox;display:flex;position:relative;margin:0 auto;z-index:20;width:100%;height:100%;outline:0;zoom:1;font-family:Roboto,Arial,Helvetica,sans-serif;color:#eee;background-color:#000;text-align:left;direction:ltr;font-size:14px;line-height:1.3;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-ms-touch-action:manipulation;touch-action:manipulation;-ms-high-contrast-adjust:none}.art-video-player *{margin:0;padding:0;-webkit-box-sizing:border-box;box-sizing:border-box}.art-video-player ::-webkit-scrollbar{width:5px}.art-video-player ::-webkit-scrollbar-thumb{background-color:#666}.art-video-player ::-webkit-scrollbar-thumb:hover{background-color:#ccc}.art-video-player .art-icon{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;line-height:1.5}.art-video-player .art-icon svg{fill:#fff}.art-video-player img{max-width:100%;vertical-align:top}@supports ((-webkit-backdrop-filter:initial) or (backdrop-filter:initial)){.art-video-player .art-backdrop-filter{-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px);background-color:rgba(0,0,0,.7)!important}}.art-video-player .art-video{z-index:10;background-color:#000;cursor:pointer}.art-video-player .art-poster,.art-video-player .art-video{position:absolute;left:0;top:0;right:0;bottom:0;width:100%;height:100%}.art-video-player .art-poster{z-index:11;background-position:50%;background-repeat:no-repeat;background-size:cover;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none}.art-video-player .art-subtitle{display:none;position:absolute;z-index:20;bottom:10px;width:100%;padding:0 20px;text-align:center;color:#fff;font-size:20px;pointer-events:none;text-shadow:.5px .5px .5px rgba(0,0,0,.5)}.art-video-player .art-subtitle p{word-break:break-all;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;margin:5px 0 0;line-height:1.2}.art-video-player .art-bilingual p:nth-child(n+2){-webkit-transform:scale(.6);transform:scale(.6);-webkit-transform-origin:center top;transform-origin:center top}.art-video-player.art-subtitle-show .art-subtitle{display:block}.art-video-player.art-control-show .art-subtitle{bottom:50px}.art-video-player .art-danmuku{z-index:30}.art-video-player .art-danmuku,.art-video-player .art-layers{position:absolute;left:0;top:0;right:0;bottom:0;width:100%;height:100%;overflow:hidden;pointer-events:none}.art-video-player .art-layers{display:none;z-index:40}.art-video-player .art-layers .art-layer{pointer-events:auto}.art-video-player.art-layer-show .art-layers{display:block}.art-video-player .art-mask{display:none;z-index:50;left:0;top:0;right:0;bottom:0;width:100%;height:100%;overflow:hidden;pointer-events:none}.art-video-player .art-mask,.art-video-player .art-mask .art-state{-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;position:absolute}.art-video-player .art-mask .art-state{right:30px;bottom:55px;width:60px;height:60px;opacity:.6}.art-video-player.art-mask-show .art-mask,.art-video-player .art-mask .art-state{display:-webkit-box;display:-ms-flexbox;display:flex}.art-video-player .art-loading{display:none;position:absolute;z-index:70;left:0;top:0;right:0;bottom:0;width:100%;height:100%;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;pointer-events:none}.art-video-player.art-loading-show .art-loading{display:-webkit-box;display:-ms-flexbox;display:flex}.art-video-player .art-bottom{position:absolute;z-index:60;left:0;right:0;bottom:0;height:100px;padding:55px 10px 0;opacity:0;visibility:hidden;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out;pointer-events:none;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAADGCAYAAAAT+OqFAAAAdklEQVQoz42QQQ7AIAgEF/T/D+kbq/RWAlnQyyazA4aoAB4FsBSA/bFjuF1EOL7VbrIrBuusmrt4ZZORfb6ehbWdnRHEIiITaEUKa5EJqUakRSaEYBJSCY2dEstQY7AuxahwXFrvZmWl2rh4JZ07z9dLtesfNj5q0FU3A5ObbwAAAABJRU5ErkJggg==) repeat-x bottom}.art-video-player .art-bottom .art-progress{position:relative;pointer-events:auto}.art-video-player .art-bottom .art-progress .art-control-progress{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:4px;cursor:pointer}.art-video-player .art-bottom .art-progress .art-control-progress .art-control-progress-inner{position:relative;height:50%;width:100%;background:hsla(0,0%,100%,.2)}.art-video-player .art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-loaded{position:absolute;z-index:10;left:0;top:0;right:0;bottom:0;height:100%;width:0;background:hsla(0,0%,100%,.4)}.art-video-player .art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-played{position:absolute;z-index:20;left:0;top:0;right:0;bottom:0;height:100%;width:0}.art-video-player .art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-highlight{position:absolute;z-index:30;left:0;top:0;right:0;bottom:0;height:100%;pointer-events:none}.art-video-player .art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-highlight span{display:inline-block;position:absolute;left:0;top:0;width:7px;height:100%;background:#fff;pointer-events:auto}.art-video-player .art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator{display:none;position:absolute;z-index:40;top:-5px;left:-6.5px;width:13px;height:13px;border-radius:50%}.art-video-player .art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator.art-show-indicator{display:block}.art-video-player .art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-tip{display:none;position:absolute;z-index:50;top:-25px;left:0;height:20px;padding:0 5px;line-height:20px;color:#fff;font-size:12px;text-align:center;background:rgba(0,0,0,.7);border-radius:3px;font-weight:700;white-space:nowrap}.art-video-player .art-bottom .art-progress .art-control-progress:hover .art-control-progress-inner{height:100%}.art-video-player .art-bottom .art-progress .art-control-progress:hover .art-control-progress-inner .art-progress-indicator,.art-video-player .art-bottom .art-progress .art-control-progress:hover .art-control-progress-inner .art-progress-tip{display:block}.art-video-player .art-bottom .art-progress .art-control-thumbnails{display:none;position:absolute;bottom:8px;left:0;pointer-events:none;background-color:rgba(0,0,0,.7)}.art-video-player .art-bottom .art-progress .art-control-loop{display:none;position:absolute;width:100%;height:100%;left:0;top:0;right:0;bottom:0;pointer-events:none}.art-video-player .art-bottom .art-progress .art-control-loop .art-loop-point{position:absolute;left:0;top:-2px;width:2px;height:8px;background:hsla(0,0%,100%,.75)}.art-video-player .art-bottom .art-controls{position:relative;pointer-events:auto;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;height:40px;padding:5px 0}.art-video-player .art-bottom .art-controls,.art-video-player .art-bottom .art-controls .art-controls-left,.art-video-player .art-bottom .art-controls .art-controls-right{display:-webkit-box;display:-ms-flexbox;display:flex}.art-video-player .art-bottom .art-controls .art-control{opacity:.9;font-size:12px;height:36px;min-width:36px;line-height:36px;text-align:center;cursor:pointer;white-space:nowrap}.art-video-player .art-bottom .art-controls .art-control .art-icon{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;float:left;height:36px;width:36px}.art-video-player .art-bottom .art-controls .art-control:hover{opacity:1}.art-video-player .art-bottom .art-controls .art-control-onlyText{padding:0 10px}.art-video-player .art-bottom .art-controls .art-control-volume .art-volume-panel{position:relative;float:left;width:0;height:100%;-webkit-transition:margin .2s cubic-bezier(.4,0,1,1),width .2s cubic-bezier(.4,0,1,1);transition:margin .2s cubic-bezier(.4,0,1,1),width .2s cubic-bezier(.4,0,1,1);overflow:hidden}.art-video-player .art-bottom .art-controls .art-control-volume .art-volume-panel .art-volume-slider-handle{position:absolute;top:50%;left:0;width:12px;height:12px;border-radius:12px;margin-top:-6px;background:#fff}.art-video-player .art-bottom .art-controls .art-control-volume .art-volume-panel .art-volume-slider-handle:before{left:-54px;background:#fff}.art-video-player .art-bottom .art-controls .art-control-volume .art-volume-panel .art-volume-slider-handle:after{left:6px;background:hsla(0,0%,100%,.2)}.art-video-player .art-bottom .art-controls .art-control-volume .art-volume-panel .art-volume-slider-handle:after,.art-video-player .art-bottom .art-controls .art-control-volume .art-volume-panel .art-volume-slider-handle:before{content:"";position:absolute;display:block;top:50%;height:3px;margin-top:-2px;width:60px}.art-video-player .art-bottom .art-controls .art-control-volume:hover .art-volume-panel{width:60px}.art-video-player .art-bottom .art-controls .art-control-quality{position:relative;z-index:30}.art-video-player .art-bottom .art-controls .art-control-quality .art-qualitys{display:none;position:absolute;bottom:35px;width:100px;padding:5px 0;text-align:center;color:#fff;background:rgba(0,0,0,.8);border-radius:3px}.art-video-player .art-bottom .art-controls .art-control-quality .art-qualitys .art-quality-item{height:30px;line-height:30px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;text-shadow:0 0 2px rgba(0,0,0,.5)}.art-video-player .art-bottom .art-controls .art-control-quality .art-qualitys .art-quality-item:hover{background-color:hsla(0,0%,100%,.1)}.art-video-player .art-bottom .art-controls .art-control-quality:hover .art-qualitys{display:block}.art-video-player.art-control-show .art-bottom,.art-video-player.art-hover .art-bottom{opacity:1;visibility:visible}.art-video-player.art-destroy .art-progress-indicator,.art-video-player.art-destroy .art-progress-tip,.art-video-player.art-error .art-progress-indicator,.art-video-player.art-error .art-progress-tip{display:none!important}.art-video-player .art-notice{display:none;font-size:14px;position:absolute;z-index:80;left:0;top:0;padding:10px;width:100%;pointer-events:none}.art-video-player .art-notice .art-notice-inner{display:inline-block;padding:5px 10px;color:#fff;background:rgba(0,0,0,.6);border-radius:3px}.art-video-player.art-notice-show .art-notice{display:-webkit-box;display:-ms-flexbox;display:flex}.art-video-player .art-contextmenus{display:none;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;position:absolute;z-index:120;left:0;top:0;min-width:200px;padding:5px 0;background:rgba(0,0,0,.9);border-radius:3px}.art-video-player .art-contextmenus .art-contextmenu{cursor:pointer;font-size:12px;display:block;color:#fff;padding:10px 15px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;text-shadow:0 0 2px rgba(0,0,0,.5);border-bottom:1px solid hsla(0,0%,100%,.1)}.art-video-player .art-contextmenus .art-contextmenu a{color:#fff;text-decoration:none}.art-video-player .art-contextmenus .art-contextmenu span{display:inline-block;padding:0 7px}.art-video-player .art-contextmenus .art-contextmenu span.art-current,.art-video-player .art-contextmenus .art-contextmenu span:hover{color:#00c9ff}.art-video-player .art-contextmenus .art-contextmenu:hover{background-color:hsla(0,0%,100%,.1)}.art-video-player .art-contextmenus .art-contextmenu:last-child{border-bottom:none}.art-video-player.art-contextmenu-show .art-contextmenus,.art-video-player .art-settings{display:-webkit-box;display:-ms-flexbox;display:flex}.art-video-player .art-settings{-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;position:absolute;z-index:90;left:0;top:0;height:100%;width:100%;opacity:0;visibility:hidden;pointer-events:none;overflow:hidden}.art-video-player .art-settings .art-setting-inner{position:absolute;top:0;right:-300px;bottom:0;width:300px;height:100%;font-size:12px;background:rgba(0,0,0,.9);-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out;overflow:auto}.art-video-player .art-settings .art-setting-inner .art-setting-body{overflow-y:auto;width:100%;height:100%}.art-video-player .art-settings .art-setting-inner .art-setting-body .art-setting{border-bottom:1px solid hsla(0,0%,100%,.1);padding:10px 15px}.art-video-player .art-settings .art-setting-inner .art-setting-body .art-setting .art-setting-header{margin-bottom:5px}.art-video-player .art-settings .art-setting-radio{display:-webkit-box;display:-ms-flexbox;display:flex}.art-video-player .art-settings .art-setting-radio .art-radio-item{-webkit-box-flex:1;-ms-flex:1;flex:1;padding:0 2px}.art-video-player .art-settings .art-setting-radio .art-radio-item button{height:22px;width:100%;border:none;outline:none;color:#fff;background:hsla(0,0%,100%,.2);border-radius:2px}.art-video-player .art-settings .art-setting-radio .art-radio-item.current button,.art-video-player .art-settings .art-setting-radio .art-radio-item button:active{background-color:#00a1d6}.art-video-player .art-settings .art-setting-range input{width:100%;height:3px;outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:hsla(0,0%,100%,.5)}.art-video-player .art-settings .art-setting-checkbox{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.art-video-player .art-settings .art-setting-checkbox input{height:14px;width:14px;margin-right:5px}.art-video-player .art-settings .art-setting-upload{display:-webkit-box;display:-ms-flexbox;display:flex}.art-video-player .art-settings .art-setting-upload .art-upload-btn{width:80px;height:22px;line-height:22px;border:none;outline:none;color:#fff;background:hsla(0,0%,100%,.2);border-radius:2px;text-align:center}.art-video-player .art-settings .art-setting-upload .art-upload-value{-webkit-box-flex:1;-ms-flex:1;flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;height:22px;line-height:22px;padding-left:10px}.art-video-player.art-setting-show .art-settings{opacity:1;visibility:visible;pointer-events:auto}.art-video-player.art-setting-show .art-settings .art-setting-inner{right:0}.art-video-player .art-info{display:none;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;position:absolute;left:10px;top:10px;z-index:100;width:350px;padding:10px;color:#fff;font-size:12px;font-family:Noto Sans CJK SC DemiLight,Roboto,Segoe UI,Tahoma,Arial,Helvetica,sans-serif;-webkit-font-smoothing:antialiased;background:rgba(0,0,0,.9)}.art-video-player .art-info .art-info-item{display:-webkit-box;display:-ms-flexbox;display:flex;margin-bottom:5px}.art-video-player .art-info .art-info-item .art-info-title{width:100px;text-align:right}.art-video-player .art-info .art-info-item .art-info-content{-webkit-box-flex:1;-ms-flex:1;flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding-left:5px}.art-video-player .art-info .art-info-item:last-child{margin-bottom:0}.art-video-player .art-info .art-info-close{position:absolute;top:5px;right:5px;cursor:pointer}.art-video-player.art-info-show .art-info{display:-webkit-box;display:-ms-flexbox;display:flex}.art-video-player.art-hide-cursor *{cursor:none!important}.art-video-player[data-aspect-ratio] video{-webkit-box-sizing:content-box;box-sizing:content-box;-o-object-fit:fill;object-fit:fill}.art-video-player.art-fullscreen-web{position:fixed;z-index:9999;width:100%!important;height:100%!important;left:0;top:0;right:0;bottom:0}.art-fullscreen-rotate{position:fixed;z-index:9999;width:100%;height:100%;left:0;top:0;right:0;bottom:0;background:#000}.art-video-player .art-mini-header{display:none;position:absolute;z-index:110;left:0;top:0;right:0;height:35px;line-height:35px;color:#fff;background:rgba(0,0,0,.5);-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;opacity:0;visibility:hidden;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.art-video-player .art-mini-header .art-mini-title{-webkit-box-flex:1;-ms-flex:1;flex:1;padding:0 10px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;cursor:move}.art-video-player .art-mini-header .art-mini-close{width:35px;text-align:center;font-size:22px;cursor:pointer}.art-video-player.art-is-dragging{opacity:.7}.art-video-player.art-mini{position:fixed;z-index:9999;width:400px;height:225px;-webkit-box-shadow:0 2px 5px 0 rgba(0,0,0,.16),0 3px 6px 0 rgba(0,0,0,.2);box-shadow:0 2px 5px 0 rgba(0,0,0,.16),0 3px 6px 0 rgba(0,0,0,.2)}.art-video-player.art-mini .art-mini-header{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.art-video-player.art-mini.art-hover .art-mini-header{opacity:1;visibility:visible}.art-video-player.art-mini .art-mask .art-state{position:static}.art-video-player.art-mini .art-bottom,.art-video-player.art-mini .art-contextmenu,.art-video-player.art-mini .art-danmu,.art-video-player.art-mini .art-info,.art-video-player.art-mini .art-layers,.art-video-player.art-mini .art-notice,.art-video-player.art-mini .art-setting,.art-video-player.art-mini .art-subtitle{display:none!important}.art-auto-size{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.art-video-player[data-flip=horizontal] .art-video{-webkit-transform:scaleX(-1);transform:scaleX(-1)}.art-video-player[data-flip=vertical] .art-video{-webkit-transform:scaleY(-1);transform:scaleY(-1)}.art-video-player .art-layers .art-layer-log{display:none;position:absolute;left:10px;bottom:10px;width:120px;color:#fff;text-shadow:0 0 2px rgba(0,0,0,.5);background-color:rgba(0,0,0,.5);border-radius:3px;padding:5px;font-size:13px;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.art-video-player .art-layers .art-layer-log p{margin-bottom:0;word-break:break-all}.art-video-player .art-control-selector{position:relative}.art-video-player .art-control-selector .art-selector-list{display:none;position:absolute;bottom:35px;width:100px;padding:5px 0;text-align:center;color:#fff;background:rgba(0,0,0,.8);border-radius:3px}.art-video-player .art-control-selector .art-selector-list .art-selector-item{height:30px;line-height:30px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;text-shadow:0 0 2px rgba(0,0,0,.5)}.art-video-player .art-control-selector .art-selector-list .art-selector-item:hover{background-color:hsla(0,0%,100%,.1)}.art-video-player .art-control-selector:hover .art-selector-list{display:block}:root{--balloon-color:rgba(16,16,16,0.95);--balloon-font-size:12px;--balloon-move:4px}button[aria-label][data-balloon-pos]{overflow:visible}[aria-label][data-balloon-pos]{position:relative;cursor:pointer}[aria-label][data-balloon-pos]:after{text-indent:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;font-weight:400;font-style:normal;text-shadow:none;font-size:var(--balloon-font-size);background:var(--balloon-color);border-radius:2px;color:#fff;content:attr(aria-label);padding:.5em 1em;white-space:nowrap;line-height:1.2}[aria-label][data-balloon-pos]:after,[aria-label][data-balloon-pos]:before{opacity:0;pointer-events:none;-webkit-transition:all .18s ease-out .18s;transition:all .18s ease-out .18s;position:absolute;z-index:10}[aria-label][data-balloon-pos]:before{width:0;height:0;border:5px solid transparent;border-top:5px solid var(--balloon-color);content:""}[aria-label][data-balloon-pos]:hover:after,[aria-label][data-balloon-pos]:hover:before{opacity:1;pointer-events:none}[aria-label][data-balloon-pos][data-balloon-pos=up]:after{margin-bottom:10px}[aria-label][data-balloon-pos][data-balloon-pos=up]:after,[aria-label][data-balloon-pos][data-balloon-pos=up]:before{bottom:100%;left:50%;-webkit-transform:translate(-50%,var(--balloon-move));transform:translate(-50%,var(--balloon-move));-webkit-transform-origin:top;transform-origin:top}[aria-label][data-balloon-pos][data-balloon-pos=up]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=up]:hover:before{-webkit-transform:translate(-50%);transform:translate(-50%)}');var u=o((function(e,t){e.exports=function(){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}var t=Object.prototype.toString,r=function(r){if(void 0===r)return"undefined";if(null===r)return"null";var o=e(r);if("boolean"===o)return"boolean";if("string"===o)return"string";if("number"===o)return"number";if("symbol"===o)return"symbol";if("function"===o)return"GeneratorFunction"===n(r)?"generatorfunction":"function";if(function(e){return Array.isArray?Array.isArray(e):e instanceof Array}(r))return"array";if(function(e){return!(!e.constructor||"function"!=typeof e.constructor.isBuffer)&&e.constructor.isBuffer(e)}(r))return"buffer";if(function(e){try{if("number"==typeof e.length&&"function"==typeof e.callee)return!0}catch(t){if(-1!==t.message.indexOf("callee"))return!0}return!1}(r))return"arguments";if(function(e){return e instanceof Date||"function"==typeof e.toDateString&&"function"==typeof e.getDate&&"function"==typeof e.setDate}(r))return"date";if(function(e){return e instanceof Error||"string"==typeof e.message&&e.constructor&&"number"==typeof e.constructor.stackTraceLimit}(r))return"error";if(function(e){return e instanceof RegExp||"string"==typeof e.flags&&"boolean"==typeof e.ignoreCase&&"boolean"==typeof e.multiline&&"boolean"==typeof e.global}(r))return"regexp";switch(n(r)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(function(e){return"function"==typeof e.throw&&"function"==typeof e.return&&"function"==typeof e.next}(r))return"generator";switch(o=t.call(r)){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return o.slice(8,-1).toLowerCase().replace(/\s/g,"")};function n(e){return e.constructor?e.constructor.name:null}function o(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:["option"];return i(e,t,n),a(e,t,n),function(e,t,n){var s=r(t),l=r(e);if("object"===s){if("object"!==l)throw new Error("[Type Error]: '".concat(n.join("."),"' require 'object' type, but got '").concat(l,"'"));Object.keys(t).forEach((function(r){var s=e[r],l=t[r],c=n.slice();c.push(r),i(s,l,c),a(s,l,c),o(s,l,c)}))}if("array"===s){if("array"!==l)throw new Error("[Type Error]: '".concat(n.join("."),"' require 'array' type, but got '").concat(l,"'"));e.forEach((function(r,s){var l=e[s],c=t[s]||t[0],u=n.slice();u.push(s),i(l,c,u),a(l,c,u),o(l,c,u)}))}}(e,t,n),e}function i(e,t,n){if("string"===r(t)){var o=r(e);if("?"===t[0]&&(t=t.slice(1)+"|undefined"),!(-1<t.indexOf("|")?t.split("|").map((function(e){return e.toLowerCase().trim()})).filter(Boolean).some((function(e){return o===e})):t.toLowerCase().trim()===o))throw new Error("[Type Error]: '".concat(n.join("."),"' require '").concat(t,"' type, but got '").concat(o,"'"))}}function a(e,t,n){if("function"===r(t)){var o=t(e,r(e),n);if(!0!==o){var i=r(o);throw"string"===i?new Error(o):"error"===i?o:new Error("[Validator Error]: The scheme for '".concat(n.join("."),"' validator require return true, but got '").concat(o,"'"))}}}return o.kindOf=r,o}()})),d=function(){function t(){e(this,t)}return r(t,[{key:"on",value:function(e,t,r){var n=this.e||(this.e={});return(n[e]||(n[e]=[])).push({fn:t,ctx:r}),this}},{key:"once",value:function(e,t,r){var n=this;function o(){n.off(e,o);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];t.apply(r,a)}return o._=t,this.on(e,o,r)}},{key:"emit",value:function(e){for(var t=((this.e||(this.e={}))[e]||[]).slice(),r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];for(var i=0;i<t.length;i+=1)t[i].fn.apply(t[i].ctx,n);return this}},{key:"off",value:function(e,t){var r=this.e||(this.e={}),n=r[e],o=[];if(n&&t)for(var i=0,a=n.length;i<a;i+=1)n[i].fn!==t&&n[i].fn._!==t&&o.push(n[i]);return o.length?r[e]=o:delete r[e],this}}]),t}(),p="undefined"!=typeof window?window.navigator.userAgent:"",f=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(p),h=/^((?!chrome|android).)*safari/i.test(p),m=/MicroMessenger/i.test(p);function g(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).querySelector(e)}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return Array.from(t.querySelectorAll(e))}function v(e,t){return e.classList.add(t)}function b(e,t){return e.classList.remove(t)}function _(e,t){return e.classList.contains(t)}function S(e,t){return t instanceof Element?e.appendChild(t):e.insertAdjacentHTML("beforeend",String(t)),e.lastElementChild||e.lastChild}function w(e){return e.parentNode.removeChild(e)}function x(e,t,r){return e.style[t]=r,e}function E(e,t){return Object.keys(t).forEach((function(r){x(e,r,t[r])})),e}function A(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=window.getComputedStyle(e,null).getPropertyValue(t);return r?parseFloat(n):n}function k(e){return Array.from(e.parentElement.children).filter((function(t){return t!==e}))}function P(e,t){k(e).forEach((function(e){return b(e,t)})),v(e,t)}function T(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"up";f||(e.setAttribute("aria-label",t),e.setAttribute("data-balloon-pos",r))}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=e.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight,o=window.innerWidth||document.documentElement.clientWidth,i=r.top-t<=n&&r.top+r.height+t>=0,a=r.left-t<=o+t&&r.left+r.width+t>=0;return i&&a}function R(e,t){return e.composedPath&&e.composedPath().indexOf(t)>-1}var O=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},I=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}},L=o((function(e){function t(r,n,o){return I()?e.exports=t=Reflect.construct:e.exports=t=function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&i(o,r.prototype),o},t.apply(null,arguments)}e.exports=t}));function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}var j=function(t){a(o,t);var r=D(o);function o(t,i){var a;return e(this,o),a=r.call(this,t),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(n(a),i||a.constructor),a.name="ArtPlayerError",a}return o}(o((function(e){function t(r){var n="function"==typeof Map?new Map:void 0;return e.exports=t=function(e){if(null===e||!O(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return L(e,arguments,c(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},t(r)}e.exports=t}))(Error));function M(e,t){if(!e)throw new j(t);return e}function N(e){return"WEBVTT \r\n\r\n".concat(e.replace(/{[\s\S]*?}/g,"").replace(/\{\\([ibu])\}/g,"</$1>").replace(/\{\\([ibu])1\}/g,"<$1>").replace(/\{([ibu])\}/g,"<$1>").replace(/\{\/([ibu])\}/g,"</$1>").replace(/(\d\d:\d\d:\d\d),(\d\d\d)/g,"$1.$2").concat("\r\n\r\n"))}function F(e){return URL.createObjectURL(new Blob([e],{type:"text/vtt"}))}function $(e){var t=new RegExp("Dialogue:\\s\\d,(\\d+:\\d\\d:\\d\\d.\\d\\d),(\\d+:\\d\\d:\\d\\d.\\d\\d),([^,]*),([^,]*),(?:[^,]*,){4}([\\s\\S]*)$","i");function r(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(/[:.]/).map((function(e,t,r){if(t===r.length-1){if(1===e.length)return".".concat(e,"00");if(2===e.length)return".".concat(e,"0")}else if(1===e.length)return(0===t?"0":":0")+e;return 0===t?e:t===r.length-1?".".concat(e):":".concat(e)})).join("")}return"WEBVTT\n\n".concat(e.split(/\r?\n/).map((function(e){var n=e.match(t);return n?{start:r(n[1].trim()),end:r(n[2].trim()),text:n[5].replace(/{[\s\S]*?}/g,"").replace(/(\\N)/g,"\n").trim().split(/\r?\n/).map((function(e){return e.trim()})).join("\n")}:null})).filter((function(e){return e})).map((function(e,t){return e?"".concat(t+1,"\n").concat(e.start," --\x3e ").concat(e.end,"\n").concat(e.text):""})).filter((function(e){return e.trim()})).join("\n\n"))}function B(e){return e.includes("?")?B(e.split("?")[0]):e.includes("#")?B(e.split("#")[0]):e.trim().toLowerCase().split(".").pop()}function U(e,t){var r=document.createElement("a");r.style.display="none",r.href=e,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r)}var z=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},q=function(e){if(Array.isArray(e))return z(e)},W=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)},V=function(e,t){if(e){if("string"==typeof e)return z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?z(e,t):void 0}},G=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},H=function(e){return q(e)||W(e)||V(e)||G()},K=Object.defineProperty,Y=Object.prototype.hasOwnProperty;function X(e,t){return Y.call(e,t)}function Q(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.reduce((function(e,t){return Object.getOwnPropertyNames(t).forEach((function(r){M(!X(e,r),"Target attribute name is duplicated: ".concat(r)),K(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}),e)}function J(){for(var e=function(e){return e&&"object"===s(e)&&!Array.isArray(e)},t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.reduce((function(t,r){return Object.keys(r).forEach((function(n){var o=t[n],i=r[n];Array.isArray(o)&&Array.isArray(i)?t[n]=o.concat.apply(o,H(i)):!e(o)||!e(i)||i instanceof Element?t[n]=i:t[n]=J(o,i)})),t}),{})}function Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){return setTimeout(t,e)}))}function ee(e,t){var r,n,o=!1;return function i(){for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];if(o)return r=s,void(n=this);o=!0,e.apply(this,s),setTimeout((function(){o=!1,r&&(i.apply(n,r),r=null,n=null)}),t)}}function te(e,t,r){return Math.max(Math.min(e,Math.max(t,r)),Math.min(t,r))}function re(e){var t=Math.floor(e/3600),r=Math.floor((e-3600*t)/60),n=Math.floor(e-3600*t-60*r);return(t>0?[t,r,n]:[r,n]).map((function(e){return e<10?"0".concat(e):String(e)})).join(":")}function ne(e){return e.replace(/[&<>'"]/g,(function(e){return{"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"}[e]||e}))}var oe=Object.freeze({__proto__:null,query:g,queryAll:y,addClass:v,removeClass:b,hasClass:_,append:S,remove:w,setStyle:x,setStyles:E,getStyle:A,sublings:k,inverseClass:P,tooltip:T,isInViewport:C,includeFromEvent:R,ArtPlayerError:j,errorHandle:M,srtToVtt:N,vttToBlob:F,assToVtt:$,getExt:B,download:U,def:K,has:X,proxyPropertys:Q,mergeDeep:J,sleep:Z,debounce:function(e,t,r){var n;function o(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];var s=function(){n=null,e.apply(r,i)};clearTimeout(n),n=setTimeout(s,t)}return o.clearTimeout=function(){clearTimeout(n)},o},throttle:ee,clamp:te,secondToTime:re,escape:ne,userAgent:p,isMobile:f,isSafari:h,isWechat:m}),ie=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e};function ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(r),!0).forEach((function(t){ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var le="boolean",ce="string",ue="number",de="object",pe="function";function fe(e,t,r){return M(t===ce||e instanceof Element,"".concat(r.join(".")," require '").concat(ce,"' or 'Element' type"))}var he={html:fe,disable:"?".concat(le),name:"?".concat(ce),index:"?".concat(ue),style:"?".concat(de),click:"?".concat(pe),mounted:"?".concat(pe),tooltip:"?".concat(ce),selector:"?".concat("array"),onSelect:"?".concat(pe)},me={container:fe,url:ce,poster:ce,title:ce,theme:ce,lang:ce,volume:ue,isLive:le,muted:le,autoplay:le,autoSize:le,autoMini:le,loop:le,flip:le,rotate:le,playbackRate:le,aspectRatio:le,screenshot:le,setting:le,hotkey:le,pip:le,mutex:le,light:le,backdrop:le,fullscreen:le,fullscreenWeb:le,subtitleOffset:le,miniProgressBar:le,localVideo:le,localSubtitle:le,networkMonitor:le,useSSR:le,plugins:[pe],whitelist:["".concat(ce,"|").concat(pe,"|").concat("regexp")],layers:[he],contextmenu:[he],controls:[se(se({},he),{},{position:function(e,t,r){var n=["top","left","right"];return M(n.includes(e),"".concat(r.join(".")," only accept ").concat(n.toString()," as parameters"))}})],quality:[{default:"?".concat(le),name:ce,url:ce}],highlight:[{time:ue,text:ce}],thumbnails:{url:ce,number:ue,width:ue,height:ue,column:ue},subtitle:{url:ce,style:de,encoding:ce,bilingual:le},moreVideoAttr:de,icons:de,customType:de},ge={propertys:["audioTracks","autoplay","buffered","controller","controls","crossOrigin","currentSrc","currentTime","defaultMuted","defaultPlaybackRate","duration","ended","error","loop","mediaGroup","muted","networkState","paused","playbackRate","played","preload","readyState","seekable","seeking","src","startDate","textTracks","videoTracks","volume"],methods:["addTextTrack","canPlayType","load","play","pause"],events:["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"]},ye=function t(r){e(this,t);var n=r.constructor.kindOf,o=r.option.whitelist;this.state=!r.isMobile||o.some((function(e){switch(n(e)){case"string":return"*"===e||r.userAgent.indexOf(e)>-1;case"function":return e(r.userAgent);case"regexp":return e.test(r.userAgent);default:return!1}}))},ve=function(){function t(r){var n=this;e(this,t),this.art=r,r.option.container instanceof Element?this.$container=r.option.container:(this.$container=g(r.option.container),M(this.$container,"No container element found by ".concat(r.option.container))),M(r.constructor.instances.every((function(e){return e.template.$container!==n.$container})),"Cannot mount multiple instances on the same dom element"),r.whitelist.state?this.desktop():this.mobile()}return r(t,[{key:"query",value:function(e){return g(e,this.$container)}},{key:"desktop",value:function(){var e=this.art.option,r=e.backdrop,n=e.theme;e.useSSR||(this.$container.innerHTML=t.html),this.$undercover=this.query(".art-undercover"),this.$player=this.query(".art-video-player"),this.$video=this.query(".art-video"),this.$poster=this.query(".art-poster"),this.$subtitle=this.query(".art-subtitle"),this.$danmuku=this.query(".art-danmuku"),this.$bottom=this.query(".art-bottom"),this.$progress=this.query(".art-progress"),this.$controls=this.query(".art-controls"),this.$controlsLeft=this.query(".art-controls-left"),this.$controlsRight=this.query(".art-controls-right"),this.$layer=this.query(".art-layers"),this.$loading=this.query(".art-loading"),this.$notice=this.query(".art-notice"),this.$noticeInner=this.query(".art-notice-inner"),this.$mask=this.query(".art-mask"),this.$state=this.query(".art-state"),this.$setting=this.query(".art-settings"),this.$settingInner=this.query(".art-setting-inner"),this.$settingBody=this.query(".art-setting-body"),this.$info=this.query(".art-info"),this.$infoPanel=this.query(".art-info-panel"),this.$infoClose=this.query(".art-info-close"),this.$miniHeader=this.query(".art-mini-header"),this.$miniTitle=this.query(".art-mini-title"),this.$miniClose=this.query(".art-mini-close"),this.$contextmenu=this.query(".art-contextmenus"),this.$player.style.setProperty("--theme",n),r&&(v(this.$settingInner,"art-backdrop-filter"),v(this.$contextmenu,"art-backdrop-filter"),this.$info&&v(this.$info,"art-backdrop-filter")),this.art.isMobile&&v(this.$container,"art-mobile")}},{key:"mobile",value:function(){this.$container.innerHTML='<div class="art-video-player"><video class="art-video"></video></div>',this.$player=this.query(".art-video-player"),this.$video=this.query(".art-video")}},{key:"destroy",value:function(e){e?this.$container.innerHTML="":v(this.$player,"art-destroy")}}],[{key:"html",get:function(){return'<div class="art-undercover"></div><div class="art-video-player art-subtitle-show art-layer-show"><video class="art-video"></video><div class="art-poster"></div><div class="art-subtitle"></div><div class="art-danmuku"></div><div class="art-layers"></div><div class="art-mask"><div class="art-state"></div></div><div class="art-bottom"><div class="art-progress"></div><div class="art-controls"><div class="art-controls-left"></div><div class="art-controls-right"></div></div></div><div class="art-loading"></div><div class="art-notice"><div class="art-notice-inner"></div></div><div class="art-settings"><div class="art-setting-inner"><div class="art-setting-body"></div></div></div><div class="art-info"><div class="art-info-panel"><div class="art-info-item"><div class="art-info-title">Player version:</div><div class="art-info-content">3.5.31</div></div><div class="art-info-item"><div class="art-info-title">Video url:</div><div class="art-info-content" data-video="src"></div></div><div class="art-info-item"><div class="art-info-title">Video volume:</div><div class="art-info-content" data-video="volume"></div></div><div class="art-info-item"><div class="art-info-title">Video time:</div><div class="art-info-content" data-video="currentTime"></div></div><div class="art-info-item"><div class="art-info-title">Video duration:</div><div class="art-info-content" data-video="duration"></div></div><div class="art-info-item"><div class="art-info-title">Video resolution:</div><div class="art-info-content"><span data-video="videoWidth"></span> x <span data-video="videoHeight"></span></div></div></div><div class="art-info-close">[x]</div></div><div class="art-mini-header"><div class="art-mini-title"></div><div class="art-mini-close">xD7</div></div><div class="art-contextmenus"></div></div>'}}]),t}(),be={"Video info":"统计信息",Close:"关闭","Light Off":"关灯","Light On":"开灯","Video load failed":"加载失败",Volume:"音量",Play:"播放",Pause:"暂停",Rate:"速度",Mute:"静音",Flip:"翻转",Rotate:"旋转",Horizontal:"水平",Vertical:"垂直",Reconnect:"重新连接","Hide subtitle":"隐藏字幕","Show subtitle":"显示字幕","Hide danmu":"隐藏弹幕","Show danmu":"显示弹幕","Show setting":"显示设置","Hide setting":"隐藏设置",Screenshot:"截图","Play speed":"播放速度","Aspect ratio":"画面比例",Default:"默认",Normal:"正常",Open:"打开","Switch video":"切换","Switch subtitle":"切换字幕",Fullscreen:"全屏","Exit fullscreen":"退出全屏","Web fullscreen":"网页全屏","Exit web fullscreen":"退出网页全屏","Mini player":"迷你播放器","PIP mode":"画中画模式","Exit PIP mode":"退出画中画模式","PIP not supported":"不支持画中画模式","Fullscreen not supported":"不支持全屏模式","Local Subtitle":"本地字幕","Local Video":"本地视频","Subtitle offset time":"字幕偏移时间","No subtitles found":"未发现字幕"},_e={"Video info":"統計訊息",Close:"關閉","Light Off":"關燈","Light On":"開燈","Video load failed":"載入失敗",Volume:"音量",Play:"播放",Pause:"暫停",Rate:"速度",Mute:"靜音",Flip:"翻轉",Rotate:"旋轉",Horizontal:"水平",Vertical:"垂直",Reconnect:"重新連接","Hide subtitle":"隱藏字幕","Show subtitle":"顯示字幕","Hide danmu":"隱藏彈幕","Show danmu":"顯示彈幕","Show setting":"顯示设置","Hide setting":"隱藏设置",Screenshot:"截圖","Play speed":"播放速度","Aspect ratio":"畫面比例",Default:"默認",Normal:"正常",Open:"打開","Switch video":"切換","Switch subtitle":"切換字幕",Fullscreen:"全屏","Exit fullscreen":"退出全屏","Web fullscreen":"網頁全屏","Exit web fullscreen":"退出網頁全屏","Mini player":"迷你播放器","PIP mode":"畫中畫模式","Exit PIP mode":"退出畫中畫模式","PIP not supported":"不支持畫中畫模式","Fullscreen not supported":"不支持全屏模式","Local Subtitle":"本地字幕","Local Video":"本地視頻","Subtitle offset time":"字幕偏移時間","No subtitles found":"未發現字幕"},Se=function(){function t(r){e(this,t),this.art=r,this.languages={"zh-cn":be,"zh-tw":_e},this.init()}return r(t,[{key:"init",value:function(){var e=this.art.option.lang.toLowerCase();this.language=this.languages[e]||{}}},{key:"get",value:function(e){return this.language[e]||e}},{key:"update",value:function(e){this.languages=J(this.languages,e),this.init()}}]),t}(),we=o((function(e){var t,r,n,o,i;t="undefined"!=typeof window&&void 0!==window.document?window.document:{},r=e.exports,n=function(){for(var e,r=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,o=r.length,i={};n<o;n++)if((e=r[n])&&e[1]in t){for(n=0;n<e.length;n++)i[r[0][n]]=e[n];return i}return!1}(),o={change:n.fullscreenchange,error:n.fullscreenerror},i={request:function(e){return new Promise(function(r,o){var i=function(){this.off("change",i),r()}.bind(this);this.on("change",i);var a=(e=e||t.documentElement)[n.requestFullscreen]();a instanceof Promise&&a.then(i).catch(o)}.bind(this))},exit:function(){return new Promise(function(e,r){if(this.isFullscreen){var o=function(){this.off("change",o),e()}.bind(this);this.on("change",o);var i=t[n.exitFullscreen]();i instanceof Promise&&i.then(o).catch(r)}else e()}.bind(this))},toggle:function(e){return this.isFullscreen?this.exit():this.request(e)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,r){var n=o[e];n&&t.addEventListener(n,r,!1)},off:function(e,r){var n=o[e];n&&t.removeEventListener(n,r,!1)},raw:n},n?(Object.defineProperties(i,{isFullscreen:{get:function(){return Boolean(t[n.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[n.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(t[n.fullscreenEnabled])}}}),r?e.exports=i:window.screenfull=i):r?e.exports={isEnabled:!1}:window.screenfull={isEnabled:!1}}));function xe(e,t){var r=e.i18n,n=e.notice,o=e.template.$video;e.once("ready",(function(){var i,a,s;we.isEnabled?(a=t,s=(i=e).template.$player,we.on("change",(function(){return i.emit("fullscreen",we.isFullscreen)})),K(a,"fullscreen",{get:function(){return we.isFullscreen},set:function(e){e?we.request(s).then((function(){v(s,"art-fullscreen"),a.aspectRatioReset=!0,i.emit("resize"),i.emit("fullscreen",!0)})):we.exit().then((function(){b(s,"art-fullscreen"),a.aspectRatioReset=!0,a.autoSize=i.option.autoSize,i.emit("resize"),i.emit("fullscreen")}))}})):document.fullscreenEnabled||o.webkitSupportsFullscreen?function(e,t){var r=e.template.$video;K(t,"fullscreen",{get:function(){return r.webkitDisplayingFullscreen},set:function(t){t?(r.webkitEnterFullscreen(),e.emit("fullscreen",!0)):(r.webkitExitFullscreen(),e.emit("fullscreen"))}})}(e,t):K(t,"fullscreen",{get:function(){return!1},set:function(){n.show=r.get("Fullscreen not supported")}})})),K(t,"fullscreenToggle",{set:function(e){e&&(t.fullscreen=!t.fullscreen)}})}function Ee(e,t){var r,n,o,i,a,s=e.i18n,l=e.notice,c=e.template.$video;document.pictureInPictureEnabled?(n=t,o=(r=e).template.$video,i=r.events.proxy,a=r.notice,o.disablePictureInPicture=!1,K(n,"pip",{get:function(){return document.pictureInPictureElement},set:function(e){e?o.requestPictureInPicture().catch((function(e){throw a.show=e,e})):document.exitPictureInPicture().catch((function(e){throw a.show=e,e}))}}),i(o,"enterpictureinpicture",(function(){r.emit("pip",!0)})),i(o,"leavepictureinpicture",(function(){r.emit("pip")}))):c.webkitSupportsPresentationMode?function(e,t){var r=e.template.$video;r.webkitSetPresentationMode("inline"),K(t,"pip",{get:function(){return"picture-in-picture"===r.webkitPresentationMode},set:function(t){t?(r.webkitSetPresentationMode("picture-in-picture"),e.emit("pip",!0)):(r.webkitSetPresentationMode("inline"),e.emit("pip"))}})}(e,t):K(t,"pip",{get:function(){return!1},set:function(){l.show=s.get("PIP not supported")}}),K(t,"pipToggle",{set:function(e){e&&(t.pip=!t.pip)}})}we.isEnabled;var Ae=function t(r){var n,o,i,a,s;e(this,t),i=this,a=(o=r).option,s=o.template.$video,K(i,"url",{get:function(){return s.src},set:function(e){var t=a.type||B(e),r=a.customType[t];t&&r?Z().then((function(){o.loading.show=!0;var n=r.call(o,s,e,o);K(o,t,{value:n})})):(s.src=e,o.option.url=e,o.emit("url",e))}}),function(e,t){var r=e.option,n=e.events.proxy,o=e.template,i=o.$player,a=o.$video,s=o.$poster,l=e.i18n,c=e.notice,u=0;n(a,"click",(function(){t.toggle=!0})),ge.events.forEach((function(t){n(a,t,(function(t){e.emit("video:".concat(t.type),t)}))})),e.on("video:canplay",(function(){u=0,e.loading.show=!1})),e.once("video:canplay",(function(){e.loading.show=!1,e.controls.show=!0,e.mask.show=!0,e.emit("ready")})),e.on("video:ended",(function(){r.loop?(t.seek=0,t.play=t.playing,e.controls.show=!1,e.mask.show=!1):(e.controls.show=!0,e.mask.show=!0)})),e.on("video:error",(function(){u<5?Z(1e3).then((function(){u+=1,t.url=r.url,c.show="".concat(l.get("Reconnect"),": ").concat(u)})):(e.loading.show=!1,e.controls.show=!1,v(i,"art-error"),Z(1e3).then((function(){c.show=l.get("Video load failed"),e.destroy(!1)})))})),e.once("video:loadedmetadata",(function(){t.autoSize=r.autoSize,e.isMobile&&(e.loading.show=!1,e.controls.show=!0,e.mask.show=!0)})),e.on("video:loadstart",(function(){e.loading.show=!0})),e.on("video:pause",(function(){e.controls.show=!0,e.mask.show=!0})),e.on("video:play",(function(){e.mask.show=!1,x(s,"display","none")})),e.on("video:playing",(function(){e.mask.show=!1})),e.on("video:seeked",(function(){e.loading.show=!1})),e.on("video:seeking",(function(){e.loading.show=!0})),e.on("video:timeupdate",(function(){e.mask.show=!1})),e.on("video:waiting",(function(){e.loading.show=!0}))}(r,this),function(e,t){var r=e.option,n=e.storage,o=e.template,i=o.$video,a=o.$poster;Object.keys(r.moreVideoAttr).forEach((function(e){i[e]=r.moreVideoAttr[e]})),r.muted&&(i.muted=r.muted),r.volume&&(i.volume=te(r.volume,0,1));var s=n.get("volume");s&&(i.volume=te(s,0,1)),r.poster&&x(a,"backgroundImage","url(".concat(r.poster,")")),r.autoplay&&(i.autoplay=r.autoplay),i.controls=!1,t.url=r.url}(r,this),function(e,t){var r,n=["mini","pip","fullscreen","fullscreenWeb","fullscreenRotate"];(r=n).forEach((function(n){e.on(n,(function(){t[n]&&r.filter((function(e){return e!==n})).forEach((function(e){t[e]&&(t[e]=!1)}))}))})),K(t,"normalSize",{get:function(){return n.every((function(e){return!t[e]}))}})}(r,this),function(e,t){var r=e.i18n,n=e.notice,o=e.constructor.instances,i=e.option.mutex,a=e.template.$video;K(t,"play",{set:function(s){if(s){var l=a.play();l.then&&l.then().catch((function(e){throw n.show=e,e})),i&&o.filter((function(t){return t!==e})).forEach((function(e){e.player.pause=!0})),n.show=r.get("Play"),e.emit("play")}else t.pause=!0}})}(r,this),function(e,t){var r=e.template.$video,n=e.i18n,o=e.notice;K(t,"pause",{get:function(){return r.paused},set:function(i){i?(r.pause(),o.show=n.get("Pause"),e.emit("pause")):t.play=!0}})}(r,this),K(n=this,"toggle",{set:function(e){e&&(n.playing?n.pause=!0:n.play=!0)}}),function(e,t){var r=e.notice;K(t,"seek",{set:function(n){t.currentTime=n,e.emit("seek",t.currentTime),t.duration&&(r.show="".concat(re(t.currentTime)," / ").concat(re(t.duration)))}}),K(t,"forward",{set:function(e){t.seek=t.currentTime+e}}),K(t,"backward",{set:function(e){t.seek=t.currentTime-e}})}(r,this),function(e,t){var r=e.template.$video,n=e.i18n,o=e.notice,i=e.storage;K(t,"volume",{get:function(){return r.volume||0},set:function(t){r.volume=te(t,0,1),o.show="".concat(n.get("Volume"),": ").concat(parseInt(100*r.volume,10)),0!==r.volume&&i.set("volume",r.volume),e.emit("volume",r.volume)}}),K(t,"muted",{get:function(){return r.muted},set:function(t){r.muted=t,e.emit("volume",r.volume)}})}(r,this),function(e,t){var r=e.template.$video;K(t,"currentTime",{get:function(){return r.currentTime||0},set:function(e){r.currentTime=te(parseFloat(e.toFixed(3)),0,t.duration)}})}(r,this),function(e,t){K(t,"duration",{get:function(){var t=e.template.$video.duration;return t===1/0?0:t||0}})}(r,this),function(e,t){var r=e.i18n,n=e.notice;function o(o,i,a){if(o!==t.url){URL.revokeObjectURL(t.url);var s=t.playing;t.url=o,e.once("video:canplay",(function(){t.playbackRate=!1,t.aspectRatio=!1,t.flip="normal",t.autoSize=!0,t.currentTime=a,s&&(t.play=!0)})),i&&(n.show="".concat(r.get("Switch video"),": ").concat(i)),e.emit("switch",o)}}K(t,"switchQuality",{value:function(e,r){return o(e,r,t.currentTime)}}),K(t,"switchUrl",{value:function(e,t){return o(e,t,0)}})}(r,this),function(e,t){var r=e.template,n=r.$video,o=r.$player,i=e.i18n,a=e.notice;K(t,"playbackRate",{get:function(){return o.dataset.playbackRate},set:function(r){if(r){if(r===o.dataset.playbackRate)return;var s=[.5,.75,1,1.25,1.5,1.75,2];M(s.includes(r),"'playbackRate' only accept ".concat(s.toString()," as parameters")),n.playbackRate=r,o.dataset.playbackRate=r,a.show="".concat(i.get("Rate"),": ").concat(1===r?i.get("Normal"):"".concat(r,"x")),e.emit("playbackRate",r)}else t.playbackRate&&(t.playbackRate=1,delete o.dataset.playbackRate,e.emit("playbackRate"))}}),K(t,"playbackRateReset",{set:function(e){if(e){var r=o.dataset.playbackRate;r&&(t.playbackRate=Number(r))}}})}(r,this),function(e,t){var r=e.template,n=r.$video,o=r.$player,i=e.i18n,a=e.notice;K(t,"aspectRatio",{get:function(){return o.dataset.aspectRatio||""},set:function(t){t||(t="default");var r=["default","4:3","16:9"];if(M(r.includes(t),"'aspectRatio' only accept ".concat(r.toString()," as parameters")),"default"===t)x(n,"width",null),x(n,"height",null),x(n,"padding",null),delete o.dataset.aspectRatio;else{var s=t.split(":"),l=n.videoWidth,c=n.videoHeight,u=o.clientWidth,d=o.clientHeight,p=l/c,f=s[0]/s[1];if(p>f){var h=f*c/l;x(n,"width","".concat(100*h,"%")),x(n,"height","100%"),x(n,"padding","0 ".concat((u-u*h)/2,"px"))}else{var m=l/f/c;x(n,"width","100%"),x(n,"height","".concat(100*m,"%")),x(n,"padding","".concat((d-d*m)/2,"px 0"))}o.dataset.aspectRatio=t}a.show="".concat(i.get("Aspect ratio"),": ").concat("default"===t?i.get("Default"):t),e.emit("aspectRatio",t)}}),K(t,"aspectRatioReset",{set:function(e){if(e&&t.aspectRatio){var r=t.aspectRatio;t.aspectRatio=r}}})}(r,this),function(e,t){var r=e.option,n=e.notice,o=e.template.$video,i=document.createElement("canvas");K(t,"getDataURL",{value:function(){return new Promise((function(e,t){try{i.width=o.videoWidth,i.height=o.videoHeight,i.getContext("2d").drawImage(o,0,0),e(i.toDataURL("image/png"))}catch(r){n.show=r,t(r)}}))}}),K(t,"getBlobUrl",{value:function(){return new Promise((function(e,t){try{i.width=o.videoWidth,i.height=o.videoHeight,i.getContext("2d").drawImage(o,0,0),i.toBlob((function(t){e(URL.createObjectURL(t))}))}catch(r){n.show=r,t(r)}}))}}),K(t,"screenshot",{value:function(){t.getDataURL().then((function(t){U(t,"".concat(r.title||"artplayer","_").concat(re(o.currentTime),".png")),e.emit("screenshot",t)}))}})}(r,this),xe(r,this),function(e,t){var r=e.template.$player;K(t,"fullscreenWeb",{get:function(){return _(r,"art-fullscreen-web")},set:function(n){n?(v(r,"art-fullscreen-web"),t.aspectRatioReset=!0,e.emit("resize"),e.emit("fullscreenWeb",!0)):(b(r,"art-fullscreen-web"),t.aspectRatioReset=!0,t.autoSize=e.option.autoSize,e.emit("resize"),e.emit("fullscreenWeb"))}}),K(t,"fullscreenWebToggle",{set:function(e){e&&(t.fullscreenWeb=!t.fullscreenWeb)}})}(r,this),function(e,t){var r=e.template,n=r.$container,o=r.$player;K(t,"fullscreenRotate",{get:function(){return _(n,"art-fullscreen-rotate")},set:function(r){if(r){v(n,"art-fullscreen-rotate"),t.autoSize=!0;var i=document.body,a=i.clientHeight,s=i.clientWidth,l=o.clientHeight,c=o.clientWidth;if(s/a<c/l){var u=Math.min(a/c,s/l).toFixed(2);x(o,"transform","rotate(90deg) scale(".concat(u,",").concat(u,")")),e.emit("resize"),e.emit("fullscreenRotate",!0)}}else b(n,"art-fullscreen-rotate"),t.autoSize=e.option.autoSize,x(o,"transform",null),e.emit("resize"),e.emit("fullscreenRotate")}}),K(t,"fullscreenRotateToggle",{set:function(e){e&&(t.fullscreenRotate=!t.fullscreenRotate)}})}(r,this),Ee(r,this),function(e,t){var r=e.template.$video;K(t,"loaded",{get:function(){return t.loadedTime/r.duration}}),K(t,"loadedTime",{get:function(){return r.buffered.length?r.buffered.end(r.buffered.length-1):0}})}(r,this),function(e,t){K(t,"played",{get:function(){return t.currentTime/t.duration}})}(0,this),function(e,t){var r=e.template.$video;K(t,"playing",{get:function(){return!!(r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2)}})}(r,this),function(e,t){var r=e.template,n=r.$container,o=r.$player,i=r.$video;K(t,"autoSize",{get:function(){return _(n,"art-auto-size")},set:function(r){if(r){var a=i.videoWidth,s=i.videoHeight,l=n.getBoundingClientRect(),c=l.width,u=l.height,d=a/s,p=c/u;if(v(n,"art-auto-size"),p>d)x(o,"width","".concat(u*d/c*100,"%")),x(o,"height","100%");else{var f=c/d/u*100;x(o,"width","100%"),x(o,"height","".concat(f,"%"))}e.emit("autoSize",{width:t.width,height:t.height})}else b(n,"art-auto-size"),x(o,"width",null),x(o,"height",null),e.emit("autoSize")}})}(r,this),function(e,t){K(t,"rect",{get:function(){return e.template.$player.getBoundingClientRect()}}),["bottom","height","left","right","top","width"].forEach((function(e){K(t,e,{get:function(){return t.rect[e]}})})),K(t,"x",{get:function(){return t.left+window.pageXOffset}}),K(t,"y",{get:function(){return t.top+window.pageYOffset}})}(r,this),function(e,t){var r=e.template.$player,n=e.i18n,o=e.notice;K(t,"flip",{get:function(){return r.dataset.flip},set:function(i){i||(i="normal");var a=["normal","horizontal","vertical"];M(a.includes(i),"'flip' only accept ".concat(a.toString()," as parameters")),"normal"===i?delete r.dataset.flip:(t.rotate=!1,r.dataset.flip=i);var s=i.replace(i[0],i[0].toUpperCase());o.show="".concat(n.get("Flip"),": ").concat(n.get(s)),e.emit("flip",i)}}),K(t,"flipReset",{set:function(e){if(e&&t.flip){var r=t.flip;t.flip=r}}})}(r,this),function(e,t){var r=e.template.$undercover;K(t,"light",{get:function(){return"none"!==A(r,"display",!1)},set:function(t){x(r,"display",t?"block":"none"),e.emit("light",t)}})}(r,this),function(e,t){var r=e.i18n,n=e.option,o=e.storage,i=e.events.proxy,a=e.template,s=a.$player,l=a.$miniClose,c=a.$miniTitle,u=a.$miniHeader,d="",p=!1,f=0,h=0,m=0,g=0;i(u,"mousedown",(function(e){p=!0,f=e.pageX,h=e.pageY,m=t.left,g=t.top})),i(document,"mousemove",(function(e){if(p){v(s,"art-is-dragging");var t=g+e.pageY-h,r=m+e.pageX-f;x(s,"top","".concat(t,"px")),x(s,"left","".concat(r,"px")),o.set("top",t),o.set("left",r)}})),i(document,"mouseup",(function(){p=!1,b(s,"art-is-dragging")})),i(l,"click",(function(){t.mini=!1,p=!1,b(s,"art-is-dragging")})),S(c,n.title||r.get("Mini player")),K(t,"mini",{get:function(){return _(s,"art-mini")},set:function(r){if(r){t.autoSize=!1,d=s.style.cssText,v(s,"art-mini");var i=o.get("top"),a=o.get("left");if(i&&a)x(s,"top","".concat(i,"px")),x(s,"left","".concat(a,"px")),C(u)||(o.del("top"),o.del("left"),t.mini=!0);else{var l=document.body,c=l.clientHeight-t.height-50,p=l.clientWidth-t.width-50;o.set("top",c),o.set("left",p),x(s,"top","".concat(c,"px")),x(s,"left","".concat(p,"px"))}t.aspectRatio=!1,t.playbackRate=!1,e.emit("mini",!0)}else s.style.cssText=d,b(s,"art-mini"),x(s,"top",null),x(s,"left",null),t.aspectRatio=!1,t.playbackRate=!1,t.autoSize=n.autoSize,e.emit("mini")}}),K(t,"miniToggle",{set:function(e){e&&(t.mini=!t.mini)}})}(r,this),function(e,t){var r=[];K(t,"loop",{get:function(){return r},set:function(n){if(Array.isArray(n)&&"number"==typeof n[0]&&"number"==typeof n[1]){var o=te(n[0],0,Math.min(n[1],t.duration)),i=te(n[1],o,t.duration);i-o>=1?(r=[o,i],e.emit("loop",r)):(r=[],e.emit("loop"))}else r=[],e.emit("loop")}}),e.on("video:timeupdate",(function(){r.length&&(t.currentTime<r[0]||t.currentTime>r[1])&&(t.seek=r[0])}))}(r,this),function(e,t){var r=e.template,n=r.$video,o=r.$player,i=e.i18n,a=e.notice;K(t,"rotate",{get:function(){return Number(o.dataset.rotate)||0},set:function(r){r||(r=0);var s=[-270,-180,-90,0,90,180,270];if(M(s.includes(r),"'rotate' only accept ".concat(s.toString()," as parameters")),0===r)delete o.dataset.rotate,x(n,"transform",null);else{t.flip=!1,o.dataset.rotate=r;var l=function(){var e=n.videoWidth,t=n.videoHeight;return e>t?t/e:e/t},c=0,u=1;switch(r){case-270:c=90,u=l();break;case-180:c=180;break;case-90:c=270,u=l();break;case 90:c=90,u=l();break;case 180:c=180;break;case 270:c=270,u=l()}x(n,"transform","rotate(".concat(c,"deg) scale(").concat(u,")"))}a.show="".concat(i.get("Rotate"),": ").concat(r,"°"),e.emit("rotate",r)}}),K(t,"rotateReset",{set:function(e){if(e&&t.rotate){var r=t.rotate;t.rotate=r}}})}(r,this),function(e,t){var r=e.option,n=e.template.$poster;K(t,"poster",{get:function(){return r.poster},set:function(e){r.poster=e,x(n,"backgroundImage","url(".concat(e,")"))}})}(r,this),Q(r,this)},ke=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e},Pe=o((function(e){function t(r,n,o){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=t=Reflect.get:e.exports=t=function(e,t,r){var n=ke(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}},t(r,n,o||r)}e.exports=t})),Te=function(){function t(r){e(this,t),this.id=0,this.art=r,this.add=this.add.bind(this)}return r(t,[{key:"add",value:function(e){var t=this,r="function"==typeof e?e(this.art):e;if(this.$parent&&this.name&&!r.disable){var n=r.name||"".concat(this.name).concat(this.id);M(!X(this,n),"Cannot add an existing name [".concat(n,"] to the [").concat(this.name,"]")),this.id+=1;var o=document.createElement("div");v(o,"art-".concat(this.name)),v(o,"art-".concat(this.name,"-").concat(n));var i=Array.from(this.$parent.children);o.dataset.index=r.index||this.id;var a=i.find((function(e){return Number(e.dataset.index)>=Number(o.dataset.index)}));a?a.insertAdjacentElement("beforebegin",o):S(this.$parent,o),r.html&&S(o,r.html),r.style&&E(o,r.style),r.tooltip&&T(o,r.tooltip),r.click&&this.art.events.proxy(o,"click",(function(e){e.preventDefault(),r.click.call(t.art,t,e)})),r.selector&&["left","right"].includes(r.position)&&this.selector(r,o),r.mounted&&r.mounted.call(this.art,o),1===o.childNodes.length&&3===o.childNodes[0].nodeType&&v(o,"art-control-onlyText")}}},{key:"selector",value:function(e,t){var r=this,n=this.art.events,o=n.hover,i=n.proxy;v(t,"art-control-selector");var a=document.createElement("div");v(a,"art-selector-value"),S(a,e.html),t.innerText="",S(t,a);var s=e.selector.map((function(e){return'<div class="art-selector-item">'.concat(e.name,"</div>")})).join(""),l=document.createElement("div");v(l,"art-selector-list"),S(l,s),S(t,l);var c=function(){l.style.left="-".concat(A(l,"width")/2-A(t,"width")/2,"px")};o(t,c),i(t,"click",(function(t){if(_(t.target,"art-selector-item")){var n=t.target.innerText;if(a.innerText===n)return;var o=e.selector.find((function(e){return e.name===n}));a.innerText=n,c(),o&&(e.onSelect&&e.onSelect.call(r.art,o),r.art.emit("selector",o))}}))}},{key:"show",get:function(){return _(this.art.template.$player,"art-".concat(this.name,"-show"))},set:function(e){var t=this.art.template.$player,r="art-".concat(this.name,"-show");e?v(t,r):b(t,r),this.art.emit(this.name,e)}},{key:"toggle",set:function(e){e&&(this.show=!this.show)}}]),t}();function Ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(r),!0).forEach((function(t){ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(r),!0).forEach((function(t){ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function De(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(r),!0).forEach((function(t){ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?je(Object(r),!0).forEach((function(t){ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):je(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(r),!0).forEach((function(t){ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $e(e,t){var r=e.template.$progress,n=e.player,o=r.getBoundingClientRect().left,i=te(t.pageX-o,0,r.clientWidth),a=i/r.clientWidth*n.duration;return{second:a,time:re(a),width:i,percentage:te(i/r.clientWidth,0,1)}}function Be(e){return function(t){var r=t.option,n=r.highlight,o=r.theme,i=t.events.proxy,a=t.player;return Fe(Fe({},e),{},{html:'<div class="art-control-progress-inner"><div class="art-progress-loaded"></div><div class="art-progress-played" style="background: '.concat(o,'"></div><div class="art-progress-highlight"></div><div class="art-progress-indicator" style="background: ').concat(o,'"></div><div class="art-progress-tip art-tip"></div></div>'),mounted:function(e){var r=!1,o=g(".art-progress-loaded",e),s=g(".art-progress-played",e),l=g(".art-progress-highlight",e),c=g(".art-progress-indicator",e),u=g(".art-progress-tip",e);function d(e,t){"loaded"===e&&x(o,"width","".concat(100*t,"%")),"played"===e&&(x(s,"width","".concat(100*t,"%")),x(c,"left","calc(".concat(100*t,"% - ").concat(A(c,"width")/2,"px)")))}n.forEach((function(e){var t=te(e.time,0,a.duration)/a.duration*100;S(l,'<span data-text="'.concat(e.text,'" data-time="').concat(e.time,'" style="left: ').concat(t,'%"></span>'))})),d("loaded",a.loaded),t.on("video:progress",(function(){d("loaded",a.loaded)})),t.on("video:timeupdate",(function(){d("played",a.played)})),t.on("video:ended",(function(){d("played",1)})),i(e,"mousemove",(function(r){x(u,"display","block"),R(r,l)?function(r){var n=$e(t,r).width,o=r.target.dataset.text;u.innerHTML=o;var i=u.clientWidth;n<=i/2?x(u,"left",0):n>e.clientWidth-i/2?x(u,"left","".concat(e.clientWidth-i,"px")):x(u,"left","".concat(n-i/2,"px"))}(r):function(r){var n=$e(t,r),o=n.width,i=n.time;u.innerHTML=i;var a=u.clientWidth;o<=a/2?x(u,"left",0):o>e.clientWidth-a/2?x(u,"left","".concat(e.clientWidth-a,"px")):x(u,"left","".concat(o-a/2,"px"))}(r)})),i(e,"mouseout",(function(){x(u,"display","none")})),i(e,"click",(function(e){if(e.target!==c){var r=$e(t,e),n=r.second;d("played",r.percentage),a.seek=n}})),i(c,"mousedown",(function(){r=!0})),i(document,"mousemove",(function(e){if(r){var n=$e(t,e),o=n.second,i=n.percentage;v(c,"art-show-indicator"),d("played",i),a.seek=o}})),i(document,"mouseup",(function(){r&&(r=!1,b(c,"art-show-indicator"))}))}})}}function Ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ze(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(r),!0).forEach((function(t){ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function We(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(r),!0).forEach((function(t){ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(r),!0).forEach((function(t){ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ve(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function He(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ke(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?He(Object(r),!0).forEach((function(t){ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):He(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(r),!0).forEach((function(t){ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Qe(e){return function(t){return Xe(Xe({},e),{},{mounted:function(e){var r=t.option.thumbnails,n=t.template.$progress,o=t.events,i=o.proxy,a=o.loadImg,s=!1,l=!1;i(n,"mousemove",(function(o){var i,c,u,d,p,f,h,m,g,y;s||(s=!0,a(r.url).then((function(){l=!0}))),l&&(x(e,"display","block"),i=$e(t,o).width,c=r.url,u=r.height,d=r.width,p=r.number,f=r.column,h=n.clientWidth/p,m=Math.floor(i/h),g=Math.ceil(m/f)-1,y=m%f||f-1,x(e,"backgroundImage","url(".concat(c,")")),x(e,"height","".concat(u,"px")),x(e,"width","".concat(d,"px")),x(e,"backgroundPosition","-".concat(y*d,"px -").concat(g*u,"px")),i<=d/2?x(e,"left",0):i>n.clientWidth-d/2?x(e,"left","".concat(n.clientWidth-d,"px")):x(e,"left","".concat(i-d/2,"px")))})),i(n,"mouseout",(function(){x(e,"display","none")}))}})}}function Je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ze(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(r),!0).forEach((function(t){ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Je(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function et(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?et(Object(r),!0).forEach((function(t){ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):et(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function rt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(r),!0).forEach((function(t){ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ot(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}var it=function(t){a(o,t);var n=ot(o);function o(t){var r;e(this,o),(r=n.call(this,t)).name="control";var i=t.option,a=t.player,s=t.template.$player;return r.mouseMoveTime=Date.now(),t.on("mousemove",(function(){r.show=!0,b(s,"art-hide-cursor"),v(s,"art-hover"),r.mouseMoveTime=Date.now()})),t.on("video:timeupdate",(function(){a.playing&&r.show&&Date.now()-r.mouseMoveTime>=3e3&&(r.show=!1,v(s,"art-hide-cursor"),b(s,"art-hover"))})),t.once("ready",(function(){var e;r.add(Be({name:"progress",disable:i.isLive,position:"top",index:10})),r.add(Qe({name:"thumbnails",disable:!i.thumbnails.url||i.isLive,position:"top",index:20})),r.add((e={name:"loop",disable:!1,position:"top",index:30},function(t){return nt(nt({},e),{},{mounted:function(e){var r=t.player,n=S(e,'<span class="art-loop-point"></span>'),o=S(e,'<span class="art-loop-point"></span>');t.on("loop",(function(t){t?(x(e,"display","block"),x(n,"left","calc(".concat(t[0]/r.duration*100,"% - ").concat(n.clientWidth,"px)")),x(o,"left","".concat(t[1]/r.duration*100,"%"))):x(e,"display","none")}))}})})),r.add(function(e){return function(t){return Me(Me({},e),{},{mounted:function(e){var r=t.events.proxy,n=t.icons,o=t.i18n,i=t.player,a=S(e,n.play),s=S(e,n.pause);function l(){x(a,"display","flex"),x(s,"display","none")}function c(){x(a,"display","none"),x(s,"display","flex")}T(a,o.get("Play")),T(s,o.get("Pause")),r(a,"click",(function(){i.play=!0})),r(s,"click",(function(){i.pause=!0})),i.playing?c():l(),t.on("video:playing",(function(){c()})),t.on("video:pause",(function(){l()}))}})}}({name:"playAndPause",disable:!1,position:"left",index:10})),r.add(function(e){return function(t){return Ge(Ge({},e),{},{mounted:function(e){var r=t.events.proxy,n=t.icons,o=t.player,i=t.i18n,a=!1,s=S(e,n.volume),l=S(e,n.volumeClose),c=S(e,'<div class="art-volume-panel"></div>'),u=S(c,'<div class="art-volume-slider-handle"></div>');function d(e){var t=c.getBoundingClientRect().left;return te(e.pageX-t-6,0,54)/48}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.7;if(o.muted||0===e)x(s,"display","none"),x(l,"display","flex"),x(u,"left","0");else{var t=48*e;x(s,"display","flex"),x(l,"display","none"),x(u,"left","".concat(t,"px"))}}T(s,i.get("Mute")),x(l,"display","none"),t.isMobile&&x(c,"display","none"),p(o.volume),t.on("video:volumechange",(function(){p(o.volume)})),r(s,"click",(function(){o.muted=!0})),r(l,"click",(function(){o.muted=!1})),r(c,"click",(function(e){o.muted=!1,o.volume=d(e)})),r(u,"mousedown",(function(){a=!0})),r(e,"mousemove",(function(e){a&&(o.muted=!1,o.volume=d(e))})),r(document,"mouseup",(function(){a&&(a=!1)}))}})}}({name:"volume",disable:!1,position:"left",index:20})),r.add(function(e){return function(t){return We(We({},e),{},{mounted:function(e){function r(){var r="".concat(re(t.player.currentTime)," / ").concat(re(t.player.duration));r!==e.innerText&&(e.innerText=r)}r(),["video:loadedmetadata","video:timeupdate","video:progress"].forEach((function(e){t.on(e,r)}))}})}}({name:"time",disable:i.isLive,position:"left",index:30})),r.add(function(e){return function(t){var r=t.option.quality,n=r.find((function(e){return e.default}))||r[0];return tt(tt({},e),{},{html:n?n.name:"",selector:r,onSelect:function(e){t.player.switchQuality(e.url,e.name)}})}}({name:"quality",disable:0===i.quality.length,position:"right",index:10})),r.add(function(e){return function(t){return Ze(Ze({},e),{},{tooltip:t.i18n.get("Screenshot"),mounted:function(e){var r=t.events.proxy,n=t.icons,o=t.player;S(e,n.screenshot),r(e,"click",(function(){o.screenshot()}))}})}}({name:"screenshot",disable:!i.screenshot,position:"right",index:20})),r.add(function(e){return function(t){return ze(ze({},e),{},{tooltip:t.i18n.get("Hide subtitle"),mounted:function(e){var r=t.events.proxy,n=t.icons,o=t.i18n,i=t.subtitle;S(e,n.subtitle),r(e,"click",(function(){i.toggle=!0})),t.on("subtitle",(function(t){T(e,o.get(t?"Hide subtitle":"Show subtitle"))}))}})}}({name:"subtitle",disable:!i.subtitle.url,position:"right",index:30})),r.add(function(e){return function(t){return Ke(Ke({},e),{},{tooltip:t.i18n.get("Show setting"),mounted:function(e){var r=t.events.proxy,n=t.icons,o=t.i18n,i=t.setting;S(e,n.setting),r(e,"click",(function(){i.toggle=!0})),t.on("setting",(function(t){T(e,o.get(t?"Hide setting":"Show setting"))}))}})}}({name:"setting",disable:!i.setting,position:"right",index:40})),r.add(function(e){return function(t){return De(De({},e),{},{tooltip:t.i18n.get("PIP mode"),mounted:function(e){var r=t.events.proxy,n=t.icons,o=t.i18n,i=t.player;S(e,n.pip),r(e,"click",(function(){i.pipToggle=!0})),t.on("pip",(function(t){T(e,o.get(t?"Exit PIP mode":"PIP mode"))}))}})}}({name:"pip",disable:!i.pip,position:"right",index:50})),r.add(function(e){return function(t){return Ie(Ie({},e),{},{tooltip:t.i18n.get("Web fullscreen"),mounted:function(e){var r=t.events.proxy,n=t.icons,o=t.i18n,i=t.player;S(e,n.fullscreenWeb),r(e,"click",(function(){i.fullscreenWebToggle=!0})),t.on("fullscreenWeb",(function(t){T(e,o.get(t?"Exit web fullscreen":"Web fullscreen"))}))}})}}({name:"fullscreenWeb",disable:!i.fullscreenWeb,position:"right",index:60})),r.add(function(e){return function(t){return Re(Re({},e),{},{tooltip:t.i18n.get("Fullscreen"),mounted:function(e){var r=t.events.proxy,n=t.icons,o=t.i18n,i=t.player;S(e,n.fullscreen),r(e,"click",(function(){i.fullscreenToggle=!0})),t.on("fullscreen",(function(t){T(e,o.get(t?"Exit fullscreen":"Fullscreen"))}))}})}}({name:"fullscreen",disable:!i.fullscreen,position:"right",index:70})),i.controls.forEach((function(e){r.add(e)}))})),r}return r(o,[{key:"add",value:function(e){var t="function"==typeof e?e(this.art):e,r=this.art.template,n=r.$progress,i=r.$controlsLeft,a=r.$controlsRight;switch(t.position){case"top":this.$parent=n;break;case"left":this.$parent=i;break;case"right":this.$parent=a;break;default:M(!1,"Control option.position must one of 'top', 'left', 'right'")}Pe(c(o.prototype),"add",this).call(this,t)}}]),o}(Te);function at(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function st(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?at(Object(r),!0).forEach((function(t){ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):at(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function lt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ct(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(r),!0).forEach((function(t){ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ut(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function dt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(r),!0).forEach((function(t){ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ut(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ft(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(r),!0).forEach((function(t){ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ht(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(r),!0).forEach((function(t){ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ht(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function gt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(r),!0).forEach((function(t){ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function vt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}var bt=function(t){a(n,t);var r=vt(n);function n(t){var o;e(this,n),(o=r.call(this,t)).name="contextmenu";var i=t.option,a=t.template,s=a.$player,l=a.$contextmenu,c=t.events.proxy;return o.$parent=l,t.once("ready",(function(){var e;o.add((e={disable:!i.playbackRate,name:"playbackRate",index:10},function(t){var r=t.i18n,n=t.player;return st(st({},e),{},{html:"".concat(r.get("Play speed"),':<span data-rate="0.5">0.5</span><span data-rate="0.75">0.75</span><span data-rate="1.0" class="art-current">').concat(r.get("Normal"),'</span><span data-rate="1.25">1.25</span><span data-rate="1.5">1.5</span><span data-rate="2.0">2.0</span>'),click:function(e,t){var r=t.target.dataset.rate;r&&(n.playbackRate=Number(r),e.show=!1)},mounted:function(e){t.on("playbackRate",(function(t){var r=y("span",e).find((function(e){return Number(e.dataset.rate)===t}));r&&P(r,"art-current")}))}})})),o.add(function(e){return function(t){var r=t.i18n,n=t.player;return ct(ct({},e),{},{html:"".concat(r.get("Aspect ratio"),':<span data-ratio="default" class="art-current">').concat(r.get("Default"),'</span><span data-ratio="4:3">4:3</span><span data-ratio="16:9">16:9</span>'),click:function(e,t){var r=t.target.dataset.ratio;r&&(n.aspectRatio=r,e.show=!1)},mounted:function(e){t.on("aspectRatio",(function(t){var r=y("span",e).find((function(e){return e.dataset.ratio===t}));r&&P(r,"art-current")}))}})}}({disable:!i.aspectRatio,name:"aspectRatio",index:20})),o.add(function(e){return function(t){return dt(dt({},e),{},{html:t.i18n.get("Video info"),click:function(e){t.info.show=!0,e.show=!1}})}}({disable:!1,name:"info",index:30})),o.add(ft(ft({},{disable:!1,name:"version",index:40}),{},{html:'<a href="https://artplayer.org" target="_blank">ArtPlayer 3.5.31</a>'})),o.add(function(e){return function(t){var r=t.i18n,n=t.player;return mt(mt({},e),{},{html:r.get("Light Off"),click:function(e){n.light=!n.light,e.show=!1},mounted:function(e){t.on("light",(function(t){e.innerText=r.get(t?"Light On":"Light Off")}))}})}}({disable:!i.light,name:"light",index:50})),o.add(function(e){return function(t){return yt(yt({},e),{},{html:t.i18n.get("Close"),click:function(e){e.show=!1}})}}({disable:!1,name:"close",index:60})),i.contextmenu.forEach((function(e){o.add(e)})),c(s,"contextmenu",(function(e){e.preventDefault(),o.show=!0;var t=e.clientX,r=e.clientY,n=s.getBoundingClientRect(),i=n.height,a=n.width,c=n.left,u=n.top,d=l.getBoundingClientRect(),p=d.height,f=d.width,h=t-c,m=r-u;t+f>c+a&&(h=a-f),r+p>u+i&&(m=i-p),E(l,{top:"".concat(m,"px"),left:"".concat(h,"px")})})),c(s,"click",(function(e){R(e,l)||(o.show=!1)})),t.on("blur",(function(){o.show=!1}))})),o}return n}(Te);function _t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}var St=function(t){a(o,t);var n=_t(o);function o(t){var r;return e(this,o),(r=n.call(this,t)).art=t,r.name="info",r.art.template.$info&&r.init(),r}return r(o,[{key:"init",value:function(){var e=this,t=this.art,r=t.template,n=r.$infoPanel,o=r.$infoClose,i=r.$video;(0,t.events.proxy)(o,"click",(function(){e.show=!1}));var a=null,s=y("[data-video]",n);function l(){s.forEach((function(e){var t=i[e.dataset.video];e.innerText="number"==typeof t?t.toFixed(2):t})),a=setTimeout((function(){l()}),1e3)}this.art.on("destroy",(function(){clearTimeout(a)})),this.art.on("info",(function(e){clearTimeout(a),e&&l()}))}}]),o}(Te);function wt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}var xt=function(t){a(o,t);var n=wt(o);function o(t){var r;e(this,o),(r=n.call(this,t)).name="subtitle";var i=t.option.subtitle,a=t.template.$subtitle;return E(a,i.style),i.url&&r.init(i.url),i.bilingual&&v(a,"art-bilingual"),r}return r(o,[{key:"style",value:function(e,t){var r=this.art.template.$subtitle;return"object"===s(e)?E(r,e):x(r,e,t)}},{key:"update",value:function(){var e=this.art.template.$subtitle;e.innerHTML="",this.activeCue&&(e.innerHTML=this.activeCue.text.split(/\r?\n/).map((function(e){return"<p>".concat(ne(e),"</p>")})).join(""),this.art.emit("subtitleUpdate",this.activeCue.text))}},{key:"switch",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.art,o=n.i18n,i=n.notice;return this.init(e,r).then((function(e){return r.name&&(i.show="".concat(o.get("Switch subtitle"),": ").concat(r.name)),t.art.emit("subtitleSwitch",e),e}))}},{key:"init",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.art,o=n.notice,i=n.events.proxy,a=n.option.subtitle,s=n.template,l=s.$subtitle,c=s.$video;if(!s.$track){var u=document.createElement("track");u.default=!0,u.kind="metadata",c.appendChild(u),this.art.template.$track=u,i(this.textTrack,"cuechange",this.update.bind(this))}return fetch(e).then((function(e){return e.arrayBuffer()})).then((function(n){var o=new TextDecoder(r.encoding||a.encoding).decode(n);switch(t.art.emit("subtitleLoad",e),r.ext||B(e)){case"srt":return F(N(o));case"ass":return F($(o));case"vtt":return F(o);default:return e}})).then((function(e){return l.innerHTML="",t.url===e||(URL.revokeObjectURL(t.url),t.art.template.$track.src=e),e})).catch((function(e){throw o.show=e,e}))}},{key:"url",get:function(){return this.art.template.$track.src}},{key:"textTrack",get:function(){return this.art.template.$video.textTracks[0]}},{key:"activeCue",get:function(){return this.textTrack.activeCues[0]}},{key:"bilingual",get:function(){return _(this.art.template.$subtitle,"art-bilingual")},set:function(e){var t=this.art.template.$subtitle;e?v(t,"art-bilingual"):b(t,"art-bilingual")}}]),o}(Te),Et=function(){function t(r){var n=this;e(this,t),this.destroyEvents=[],this.proxy=this.proxy.bind(this),this.hover=this.hover.bind(this),this.loadImg=this.loadImg.bind(this),r.whitelist.state&&r.once("ready",(function(){var e,t,o;t=n,o=(e=r).template.$player,t.proxy(document,["click","contextmenu"],(function(t){R(t,o)?(e.isFocus=!0,e.emit("focus")):(e.isFocus=!1,e.emit("blur"))})),function(e,t){var r=e.template.$player;t.hover(r,(function(){v(r,"art-hover"),e.emit("hover",!0)}),(function(){b(r,"art-hover"),e.emit("hover")}))}(r,n),function(e,t){var r=e.template.$player;t.proxy(r,"mousemove",(function(t){e.emit("mousemove",t)}))}(r,n),function(e,t){var r=e.option,n=e.player,o=ee((function(){n.normalSize&&(n.autoSize=r.autoSize),n.aspectRatioReset=!0,e.emit("resize")}),500);t.proxy(window,["orientationchange","resize"],(function(){o()}))}(r,n),function(e,t){if(e.isMobile&&!e.option.isLive){var r=e.player,n=e.notice,o=e.template.$video,i=!1,a=0,s=0;t.proxy(o,"touchstart",(function(e){1===e.touches.length&&(i=!0,a=e.touches[0].clientX)})),t.proxy(document,"touchmove",(function(e){if(1===e.touches.length&&i){var t=te((e.touches[0].clientX-a)/o.clientWidth,-1,1);s=te(r.currentTime+60*t,0,r.duration),n.show="".concat(re(s)," / ").concat(re(r.duration))}})),t.proxy(document,"touchend",(function(){i&&s&&(r.seek=s),i=!1,a=0,s=0}))}}(r,n),function(e,t){var r=e.player,n=e.option,o=e.template.$container,i=ee((function(){e.emit("view",C(o,50))}),200);t.proxy(window,"scroll",(function(){i()})),e.on("view",(function(e){n.autoMini&&(r.mini=!e)}))}(r,n)}))}return r(t,[{key:"proxy",value:function(e,t,r){var n=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(Array.isArray(t))return t.map((function(t){return n.proxy(e,t,r,o)}));e.addEventListener(t,r,o);var i=function(){return e.removeEventListener(t,r,o)};return this.destroyEvents.push(i),i}},{key:"hover",value:function(e,t,r){t&&this.proxy(e,"mouseenter",t),r&&this.proxy(e,"mouseleave",r)}},{key:"loadImg",value:function(e){var t=this;return new Promise((function(r,n){var o;if(e instanceof HTMLImageElement)o=e;else{if("string"!=typeof e)return n(new j("Unable to get Image"));(o=new Image).src=e}return o.complete||(t.proxy(o,"load",(function(){return r(o)})),t.proxy(o,"error",(function(){return n(new j("Failed to load Image: ".concat(o.src)))}))),r(o)}))}},{key:"destroy",value:function(){this.destroyEvents.forEach((function(e){return e()}))}}]),t}(),At=function(){function t(r){var n=this;e(this,t),this.keys={};var o=r.option,i=r.player,a=r.events.proxy;o.hotkey&&r.once("ready",(function(){n.add(27,(function(){i.fullscreenWeb&&(i.fullscreenWeb=!1)})),n.add(32,(function(){i.toggle=!0})),n.add(37,(function(){i.backward=5})),n.add(38,(function(){i.volume+=.1})),n.add(39,(function(){i.forward=5})),n.add(40,(function(){i.volume-=.1})),a(window,"keydown",(function(e){if(r.isFocus){var t=document.activeElement.tagName.toUpperCase(),o=document.activeElement.getAttribute("contenteditable");if("INPUT"!==t&&"TEXTAREA"!==t&&""!==o&&"true"!==o){var i=n.keys[e.keyCode];i&&(e.preventDefault(),i.forEach((function(e){return e.call(r)})),r.emit("hotkey",e))}}}))}))}return r(t,[{key:"add",value:function(e,t){this.keys[e]?this.keys[e].push(t):this.keys[e]=[t]}}]),t}();function kt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}var Pt=function(t){a(n,t);var r=kt(n);function n(t){var o;return e(this,n),(o=r.call(this,t)).name="layer",o.$parent=t.template.$layer,t.once("ready",(function(){t.option.layers.forEach((function(e){o.add(e)}))})),o}return n}(Te);function Tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}var Ct=function(t){a(n,t);var r=Tt(n);function n(t){var o;return e(this,n),(o=r.call(this,t)).name="loading",S(t.template.$loading,t.icons.loading),o}return n}(Te),Rt=function(){function t(r){e(this,t),this.art=r,this.time=2e3,this.timer=null}return r(t,[{key:"show",set:function(e){var t=this.art.template,r=t.$player,n=t.$noticeInner;n.innerText=e instanceof Error?e.message.trim():e,v(r,"art-notice-show"),clearTimeout(this.timer),this.timer=setTimeout((function(){n.innerText="",b(r,"art-notice-show")}),this.time)}}]),t}();function Ot(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}var It=function(t){a(n,t);var r=Ot(n);function n(t){var o;return e(this,n),(o=r.call(this,t)).name="mask",S(t.template.$state,t.icons.state),o}return n}(Te);function Lt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Dt=function t(r){var n=this;e(this,t);var o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Lt(Object(r),!0).forEach((function(t){ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({loading:'<svg xmlns="http://www.w3.org/2000/svg" width="50px" height="50px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" class="uil-default"><rect x="0" y="0" width="100" height="100" fill="none" class="bk"/><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(0 50 50) translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-1s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(30 50 50) translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.9166666666666666s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(60 50 50) translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.8333333333333334s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(90 50 50) translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.75s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(120 50 50) translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.6666666666666666s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(150 50 50) translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.5833333333333334s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(180 50 50) translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.5s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(210 50 50) translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.4166666666666667s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(240 50 50) translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.3333333333333333s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(270 50 50) translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.25s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(300 50 50) translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.16666666666666666s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(330 50 50) translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.08333333333333333s" repeatCount="indefinite"/></rect></svg>',state:'<svg xmlns="http://www.w3.org/2000/svg" height="60" width="60" style="filter: drop-shadow(0px 1px 1px black);" viewBox="0 0 24 24"><path d="M20,2H4C1.8,2,0,3.8,0,6v12c0,2.2,1.8,4,4,4h16c2.2,0,4-1.8,4-4V6C24,3.8,22.2,2,20,2z M15.6,12.8L10.5,16 C9.9,16.5,9,16,9,15.2V8.8C9,8,9.9,7.5,10.5,8l5.1,3.2C16.3,11.5,16.3,12.5,15.6,12.8z"/></svg>',play:'<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22"><path d="M17.982 9.275L8.06 3.27A2.013 2.013 0 0 0 5 4.994v12.011a2.017 2.017 0 0 0 3.06 1.725l9.922-6.005a2.017 2.017 0 0 0 0-3.45z"></path></svg>',pause:'<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22"><path d="M7 3a2 2 0 0 0-2 2v12a2 2 0 1 0 4 0V5a2 2 0 0 0-2-2zM15 3a2 2 0 0 0-2 2v12a2 2 0 1 0 4 0V5a2 2 0 0 0-2-2z"></path></svg>',volume:'<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22"><path d="M10.188 4.65L6 8H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h1l4.188 3.35a.5.5 0 0 0 .812-.39V5.04a.498.498 0 0 0-.812-.39zM14.446 3.778a1 1 0 0 0-.862 1.804 6.002 6.002 0 0 1-.007 10.838 1 1 0 0 0 .86 1.806A8.001 8.001 0 0 0 19 11a8.001 8.001 0 0 0-4.554-7.222z"></path><path d="M15 11a3.998 3.998 0 0 0-2-3.465v6.93A3.998 3.998 0 0 0 15 11z"></path></svg>',volumeClose:'<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22"><path d="M15 11a3.998 3.998 0 0 0-2-3.465v2.636l1.865 1.865A4.02 4.02 0 0 0 15 11z"></path><path d="M13.583 5.583A5.998 5.998 0 0 1 17 11a6 6 0 0 1-.585 2.587l1.477 1.477a8.001 8.001 0 0 0-3.446-11.286 1 1 0 0 0-.863 1.805zM18.778 18.778l-2.121-2.121-1.414-1.414-1.415-1.415L13 13l-2-2-3.889-3.889-3.889-3.889a.999.999 0 1 0-1.414 1.414L5.172 8H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h1l4.188 3.35a.5.5 0 0 0 .812-.39v-3.131l2.587 2.587-.01.005a1 1 0 0 0 .86 1.806c.215-.102.424-.214.627-.333l2.3 2.3a1.001 1.001 0 0 0 1.414-1.416zM11 5.04a.5.5 0 0 0-.813-.39L8.682 5.854 11 8.172V5.04z"></path></svg>',subtitle:'<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 48 48"><path d="M0 0h48v48H0z" fill="none"/><path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"/></svg>',screenshot:'<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 50 50">\t<path d="M 19.402344 6 C 17.019531 6 14.96875 7.679688 14.5 10.011719 L 14.097656 12 L 9 12 C 6.238281 12 4 14.238281 4 17 L 4 38 C 4 40.761719 6.238281 43 9 43 L 41 43 C 43.761719 43 46 40.761719 46 38 L 46 17 C 46 14.238281 43.761719 12 41 12 L 35.902344 12 L 35.5 10.011719 C 35.03125 7.679688 32.980469 6 30.597656 6 Z M 25 17 C 30.519531 17 35 21.480469 35 27 C 35 32.519531 30.519531 37 25 37 C 19.480469 37 15 32.519531 15 27 C 15 21.480469 19.480469 17 25 17 Z M 25 19 C 20.589844 19 17 22.589844 17 27 C 17 31.410156 20.589844 35 25 35 C 29.410156 35 33 31.410156 33 27 C 33 22.589844 29.410156 19 25 19 Z "/></svg>',setting:'<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22"><circle cx="11" cy="11" r="2"></circle><path d="M19.164 8.861L17.6 8.6a6.978 6.978 0 0 0-1.186-2.099l.574-1.533a1 1 0 0 0-.436-1.217l-1.997-1.153a1.001 1.001 0 0 0-1.272.23l-1.008 1.225a7.04 7.04 0 0 0-2.55.001L8.716 2.829a1 1 0 0 0-1.272-.23L5.447 3.751a1 1 0 0 0-.436 1.217l.574 1.533A6.997 6.997 0 0 0 4.4 8.6l-1.564.261A.999.999 0 0 0 2 9.847v2.306c0 .489.353.906.836.986l1.613.269a7 7 0 0 0 1.228 2.075l-.558 1.487a1 1 0 0 0 .436 1.217l1.997 1.153c.423.244.961.147 1.272-.23l1.04-1.263a7.089 7.089 0 0 0 2.272 0l1.04 1.263a1 1 0 0 0 1.272.23l1.997-1.153a1 1 0 0 0 .436-1.217l-.557-1.487c.521-.61.94-1.31 1.228-2.075l1.613-.269a.999.999 0 0 0 .835-.986V9.847a.999.999 0 0 0-.836-.986zM11 15a4 4 0 1 1 0-8 4 4 0 0 1 0 8z"></path></svg>',fullscreen:'<svg xmlns="http://www.w3.org/2000/svg" height="36" width="36" viewBox="0 0 36 36">\t<path d="m 10,16 2,0 0,-4 4,0 0,-2 L 10,10 l 0,6 0,0 z"></path>\t<path d="m 20,10 0,2 4,0 0,4 2,0 L 26,10 l -6,0 0,0 z"></path>\t<path d="m 24,24 -4,0 0,2 L 26,26 l 0,-6 -2,0 0,4 0,0 z"></path>\t<path d="M 12,20 10,20 10,26 l 6,0 0,-2 -4,0 0,-4 0,0 z"></path></svg>',fullscreenWeb:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36" height="36" width="36">\t<path d="m 28,11 0,14 -20,0 0,-14 z m -18,2 16,0 0,10 -16,0 0,-10 z" fill-rule="evenodd"></path></svg>',pip:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36" height="32" width="32"><path d="M25,17 L17,17 L17,23 L25,23 L25,17 L25,17 Z M29,25 L29,10.98 C29,9.88 28.1,9 27,9 L9,9 C7.9,9 7,9.88 7,10.98 L7,25 C7,26.1 7.9,27 9,27 L27,27 C28.1,27 29,26.1 29,25 L29,25 Z M27,25.02 L9,25.02 L9,10.97 L27,10.97 L27,25.02 L27,25.02 Z"></path></svg>'},r.option.icons);Object.keys(o).forEach((function(e){K(n,e,{get:function(){var t=document.createElement("i");return v(t,"art-icon"),v(t,"art-icon-".concat(e)),S(t,o[e]),t}})}))};function jt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Mt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(r),!0).forEach((function(t){ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ft(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(r),!0).forEach((function(t){ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Bt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$t(Object(r),!0).forEach((function(t){ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ut(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ut(Object(r),!0).forEach((function(t){ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ut(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}var Wt=function(t){a(n,t);var r=qt(n);function n(t){var o;e(this,n),(o=r.call(this,t)).name="setting";var i=t.option,a=t.template,s=a.$setting,l=a.$settingBody,c=t.events.proxy;return o.$parent=l,i.setting&&(t.once("ready",(function(){var e;c(s,"click",(function(e){e.target===s&&(o.show=!1)})),o.add((e={disable:!i.flip,name:"flip"},function(t){var r=t.i18n,n=t.player;return Mt(Mt({},e),{},{html:'<div class="art-setting-header">'.concat(r.get("Flip"),'</div><div class="art-setting-radio"><div class="art-radio-item current"><button type="button" data-value="normal">').concat(r.get("Normal"),'</button></div><div class="art-radio-item"><button type="button" data-value="horizontal">').concat(r.get("Horizontal"),'</button></div><div class="art-radio-item"><button type="button" data-value="vertical">').concat(r.get("Vertical"),"</button></div></div>"),click:function(e,t){var r=t.target.dataset.value;r&&(n.flip=r)},mounted:function(e){t.on("flip",(function(t){var r=y("button",e).find((function(e){return e.dataset.value===t}));r&&P(r.parentElement,"current")}))}})})),o.add(function(e){return function(t){var r=t.i18n,n=t.player;return Ft(Ft({},e),{},{html:'<div class="art-setting-header">'.concat(r.get("Rotate"),': <span class="art-rotate-value">0°</span></div><div class="art-setting-radio"><div class="art-radio-item"><button type="button" data-value="90">+90°</button></div><div class="art-radio-item"><button type="button" data-value="-90">-90°</button></div></div>'),click:function(e,t){var r=t.target.dataset.value;if(r){var o=n.rotate+Number(r);n.rotate=360===o||-360===o?0:o}else n.rotate=0},mounted:function(e){var r=g(".art-rotate-value",e);t.on("rotate",(function(e){r.innerText="".concat(e||0,"°")}))}})}}({disable:!i.rotate,name:"rotate"})),o.add(function(e){return function(t){var r=t.i18n,n=t.player;return Bt(Bt({},e),{},{html:'<div class="art-setting-header">'.concat(r.get("Aspect ratio"),'</div><div class="art-setting-radio"><div class="art-radio-item current"><button type="button" data-value="default">').concat(r.get("Default"),'</button></div><div class="art-radio-item"><button type="button" data-value="4:3">4:3</button></div><div class="art-radio-item"><button type="button" data-value="16:9">16:9</button></div></div>'),click:function(e,t){var r=t.target.dataset.value;r&&(n.aspectRatio=r)},mounted:function(e){t.on("aspectRatio",(function(t){var r=y("button",e).find((function(e){return e.dataset.value===t}));r&&P(r.parentElement,"current")}))}})}}({disable:!i.aspectRatio,name:"aspectRatio"})),o.add(function(e){return function(t){var r=t.i18n,n=t.player,o=t.events.proxy;return zt(zt({},e),{},{html:'<div class="art-setting-header">'.concat(r.get("Play speed"),': <span class="art-subtitle-value">1.0</span>x</div><div class="art-setting-range"><input class="art-subtitle-range" value="1" type="range" min="0.5" max="2" step="0.25"></div>'),mounted:function(e){var r=g(".art-setting-range input",e),i=g(".art-subtitle-value",e);o(r,"change",(function(){var e=r.value;i.innerText=e,n.playbackRate=Number(e)})),t.on("playbackRate",(function(e){e&&r.value!==e&&(r.value=e,i.innerText=e)}))}})}}({disable:!i.playbackRate,name:"playbackRate"}))})),t.on("blur",(function(){o.show=!1}))),o}return n}(Te),Vt=function(){function t(){e(this,t),this.name="artplayer_settings",this.settings={}}return r(t,[{key:"get",value:function(e){try{var t=JSON.parse(window.localStorage.getItem(this.name))||{};return e?t[e]:t}catch(r){return e?this.settings[e]:this.settings}}},{key:"set",value:function(e,t){try{var r=Object.assign({},this.get(),ie({},e,t));window.localStorage.setItem(this.name,JSON.stringify(r))}catch(n){this.settings[e]=t}}},{key:"del",value:function(e){try{var t=this.get();delete t[e],window.localStorage.setItem(this.name,JSON.stringify(t))}catch(r){delete this.settings[e]}}},{key:"clean",value:function(){try{window.localStorage.removeItem(this.name)}catch(e){this.settings={}}}}]),t}();function Gt(e){var t=e.i18n,r=e.subtitle,n=e.events.proxy;return{title:"Subtitle",name:"subtitleOffset",index:20,html:'<div class="art-setting-header">'.concat(t.get("Subtitle offset time"),': <span class="art-subtitle-value">0</span>s</div><div class="art-setting-range"><input class="art-subtitle-range" value="0" type="range" min="-5" max="5" step="0.5"></div>'),mounted:function(t){var o=g(".art-setting-range input",t),i=g(".art-subtitle-value",t);n(o,"change",(function(){var t=o.value;i.innerText=t,e.plugins.subtitleOffset.offset(Number(t))})),e.on("subtitle:switch",(function(){o.value=0,i.innerText=0})),e.on("subtitleOffset",(function(e){r.update(),o.value!==e&&(o.value=e,i.innerText=e)}))}}}function Ht(e){var t=e.constructor.utils.clamp,r=e.setting,n=e.notice,o=e.template,i=e.i18n,a=e.player;r.add(Gt);var s=[];return e.on("subtitle:switch",(function(){s=[]})),{name:"subtitleOffset",offset:function(r){if(o.$track&&o.$track.track){var l=Array.from(o.$track.track.cues),c=t(r,-5,5);l.forEach((function(e,r){s[r]||(s[r]={startTime:e.startTime,endTime:e.endTime}),e.startTime=t(s[r].startTime+c,0,a.duration),e.endTime=t(s[r].endTime+c,0,a.duration)})),n.show="".concat(i.get("Subtitle offset time"),": ").concat(r,"s"),e.emit("subtitleOffset",r)}else n.show="".concat(i.get("No subtitles found")),e.emit("subtitleOffset",0)}}}function Kt(e){var t=e.events.proxy,r=e.template,n=e.player,o=e.option,i=e.setting,a=e.i18n;function s(t){if(t){var i=r.$video.canPlayType(t.type);if("maybe"===i||"probably"===i){var a=URL.createObjectURL(t);o.title=t.name,n.switchUrl(a,t.name),e.emit("localVideo",t)}else M(!1,"Playback of this file format is not supported")}}function l(e){var r=S(e,'<input type="file">');x(e,"position","relative"),E(r,{position:"absolute",width:"100%",height:"100%",left:"0",top:"0",opacity:"0"}),t(r,"change",(function(){s(r.files[0])}))}return t(r.$player,"dragover",(function(e){e.preventDefault()})),t(r.$player,"drop",(function(e){e.preventDefault(),s(e.dataTransfer.files[0])})),e.once("ready",(function(){i.add({title:"Local Video",name:"localVideo",index:30,html:'<div class="art-setting-header">'.concat(a.get("Local Video"),'</div><div class="art-setting-upload"><div class="art-upload-btn">').concat(a.get("Open"),'</div><div class="art-upload-value"></div></div>'),mounted:function(t){var r=g(".art-upload-btn",t),n=g(".art-upload-value",t);e.on("localVideo",(function(e){n.textContent=e.name,n.title=e.name})),l(r)}})})),{name:"localVideo",attach:l}}function Yt(e){var t=e.events.proxy,r=e.subtitle,n=e.setting,o=e.i18n;function i(n){var o=S(n,'<input type="file">');x(n,"position","relative"),E(o,{position:"absolute",width:"100%",height:"100%",left:"0",top:"0",opacity:"0"}),t(o,"change",(function(){!function(t){if(t){var n=B(t.name);["ass","vtt","srt"].includes(n)?(r.switch(URL.createObjectURL(t),{name:t.name,ext:n}),e.emit("localSubtitle",t)):M(!1,"Only supports subtitle files in .ass, .vtt and .srt format")}}(o.files[0])}))}return e.once("ready",(function(){n.add({title:"Local Subtitle",name:"localSubtitle",index:40,html:'<div class="art-setting-header">'.concat(o.get("Local Subtitle"),'</div><div class="art-setting-upload"><div class="art-upload-btn">').concat(o.get("Open"),'</div><div class="art-upload-value"></div></div>'),mounted:function(t){var r=g(".art-upload-btn",t),n=g(".art-upload-value",t);e.on("localSubtitle",(function(e){n.textContent=e.name,n.title=e.name})),i(r)}})})),{name:"localSubtitle",attach:i}}function Xt(e){var t=e.layers,r=e.player,n=e.option.theme;return t.add({name:"miniProgressBar",style:{display:"none",position:"absolute",left:0,right:0,bottom:0,height:"2px",background:n},mounted:function(t){e.on("control",(function(e){t.style.display=e?"none":"block"})),e.on("destroy",(function(){t.style.display="none"})),e.on("video:timeupdate",(function(){t.style.width="".concat(100*r.played,"%")}))}}),{name:"miniProgressBar"}}function Qt(e){var t=1e4,r=0,n=0,o=0,i=null;function a(){r=0,n=0,o=0,cancelAnimationFrame(i),i=null}function s(){i||function a(){e.isDestroy||(i=requestAnimationFrame((function(){var i=Date.now();if(o){var s=i-o;n+=s,e.player.playing||(r+=s)}o=i,e.emit("networkMonitor",r/n),n>=t&&(r=0,n=0),a()})))}()}return e.on("play",s),e.on("pause",a),{name:"networkMonitor",reset:a,start:s,sample:function(e){t=e}}}function Jt(e){var t=e.layers,r=null;t.add({name:"log",style:{bottom:"50px"},mounted:function(e){r=e}});var n=null;function o(){var t=r.childElementCount;x(r,"bottom",e.controls.show?"50px":"10px"),t?t>5?(w(r.firstElementChild),n=setTimeout(o,3e3)):n=setTimeout((function(){w(r.firstElementChild),o()}),3e3):x(r,"display","none")}return e.on("destroy",(function(){return clearTimeout(n)})),{name:"log",emit:function(e){"string"==typeof e&&(S(r,"<p>".concat(ne(e),"</p>")),x(r,"display","block"),clearTimeout(n),o())}}}var Zt=function(){function t(r){var n=this;e(this,t),this.art=r,this.id=0;var o=r.option;o.subtitle.url&&o.subtitleOffset&&this.add(Ht),!o.isLive&&o.miniProgressBar&&this.add(Xt),o.localVideo&&this.add(Kt),o.localSubtitle&&this.add(Yt),o.networkMonitor&&this.add(Qt),o.log&&this.add(Jt),r.option.plugins.forEach((function(e){n.add(e)}))}return r(t,[{key:"add",value:function(e){this.id+=1;var t=e.call(this,this.art),r=t&&t.name||e.name||"plugin".concat(this.id);return M(!X(this,r),"Cannot add a plugin that already has the same name: ".concat(r)),K(this,r,{value:t}),this}}]),t}(),er=function t(r){e(this,t);var n=r.option,o=r.events.proxy,i=r.template.$video;ge.events.forEach((function(e){o(i,e,(function(e){r.emit("video:".concat(e.type),e)}))})),Object.keys(n.moreVideoAttr).forEach((function(e){i[e]=n.moreVideoAttr[e]})),n.muted&&(i.muted=n.muted),n.volume&&(i.volume=te(n.volume,0,1)),n.poster&&(i.poster=n.poster),n.autoplay&&(i.autoplay=n.autoplay),i.controls=!0;var a=n.type||B(n.url),s=n.customType[a];a&&s?(s(i,n.url,r),r.emit("customType",a)):(i.src=n.url,r.emit("url",i.src))};function tr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}var rr=0,nr=[],or=function(t){a(i,t);var o=tr(i);function i(t){var r;return e(this,i),(r=o.call(this)).option=u(J(i.option,t),me),r.isFocus=!1,r.isDestroy=!1,r.userAgent=p,r.isMobile=f,r.isWechat=m,r.whitelist=new ye(n(r)),r.template=new ve(n(r)),r.events=new Et(n(r)),r.whitelist.state?(r.storage=new Vt(n(r)),r.icons=new Dt(n(r)),r.i18n=new Se(n(r)),r.notice=new Rt(n(r)),r.player=new Ae(n(r)),r.layers=new Pt(n(r)),r.controls=new it(n(r)),r.contextmenu=new bt(n(r)),r.subtitle=new xt(n(r)),r.info=new St(n(r)),r.loading=new Ct(n(r)),r.hotkey=new At(n(r)),r.mask=new It(n(r)),r.setting=new Wt(n(r)),r.plugins=new Zt(n(r))):r.mobile=new er(n(r)),rr+=1,r.id=rr,nr.push(n(r)),r}return r(i,[{key:"destroy",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.events.destroy(),this.template.destroy(e),nr.splice(nr.indexOf(this),1),this.isDestroy=!0,this.emit("destroy")}}],[{key:"instances",get:function(){return nr}},{key:"version",get:function(){return"3.5.31"}},{key:"env",get:function(){return'"production"'}},{key:"config",get:function(){return ge}},{key:"utils",get:function(){return oe}},{key:"scheme",get:function(){return me}},{key:"Emitter",get:function(){return d}},{key:"validator",get:function(){return u}},{key:"kindOf",get:function(){return u.kindOf}},{key:"html",get:function(){return ve.html}},{key:"option",get:function(){return{container:"#artplayer",url:"",poster:"",title:"",theme:"#f00",volume:.7,isLive:!1,muted:!1,autoplay:!1,autoSize:!1,autoMini:!1,loop:!1,flip:!1,rotate:!1,playbackRate:!1,aspectRatio:!1,screenshot:!1,setting:!1,hotkey:!0,pip:!1,mutex:!0,light:!1,backdrop:!0,fullscreen:!1,fullscreenWeb:!1,subtitleOffset:!1,miniProgressBar:!1,localVideo:!1,localSubtitle:!1,networkMonitor:!1,useSSR:!1,layers:[],contextmenu:[],controls:[],quality:[],highlight:[],plugins:[],whitelist:[],switcher:[],thumbnails:{url:"",number:60,width:160,height:90,column:10},subtitle:{url:"",style:{},encoding:"utf-8",bilingual:!1},moreVideoAttr:{controls:!1,preload:h?"auto":"metadata"},icons:{},customType:{},lang:navigator.language.toLowerCase()}}}]),i}(d);return console.log("%c ArtPlayer %c 3.5.31 %c https://artplayer.org","color: #fff; background: #5f5f5f","color: #fff; background: #4bc729",""),or}();var Artplayer=artplayer.exports,flv={exports:{}},factory;self,factory=function(){return function(){var e={"./node_modules/es6-promise/dist/es6-promise.js":function(e,t,r){
/*!
           * @overview es6-promise - a tiny implementation of Promises/A+.
           * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
           * @license   Licensed under MIT license
           *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
           * @version   v4.2.8+1e68dce6
           */
e.exports=function(){function e(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function t(e){return"function"==typeof e}var n=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=0,i=void 0,a=void 0,s=function(e,t){_[o]=e,_[o+1]=t,2===(o+=2)&&(a?a(S):x())};function l(e){a=e}function c(e){s=e}var u="undefined"!=typeof window?window:void 0,d=u||{},p=d.MutationObserver||d.WebKitMutationObserver,f="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function m(){return function(){return process.nextTick(S)}}function g(){return void 0!==i?function(){i(S)}:b()}function y(){var e=0,t=new p(S),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}function v(){var e=new MessageChannel;return e.port1.onmessage=S,function(){return e.port2.postMessage(0)}}function b(){var e=setTimeout;return function(){return e(S,1)}}var _=new Array(1e3);function S(){for(var e=0;e<o;e+=2)(0,_[e])(_[e+1]),_[e]=void 0,_[e+1]=void 0;o=0}function w(){try{var e=Function("return this")().require("vertx");return i=e.runOnLoop||e.runOnContext,g()}catch(t){return b()}}var x=void 0;function E(e,t){var r=this,n=new this.constructor(P);void 0===n[k]&&H(n);var o=r._state;if(o){var i=arguments[o-1];s((function(){return q(o,n,i,r._result)}))}else U(r,n,e,t);return n}function A(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var r=new t(P);return N(r,e),r}x=f?m():p?y():h?v():void 0===u?w():b();var k=Math.random().toString(36).substring(2);function P(){}var T=void 0,C=1,R=2;function O(){return new TypeError("You cannot resolve a promise with itself")}function I(){return new TypeError("A promises callback cannot return that same promise.")}function L(e,t,r,n){try{e.call(t,r,n)}catch(o){return o}}function D(e,t,r){s((function(e){var n=!1,o=L(r,t,(function(r){n||(n=!0,t!==r?N(e,r):$(e,r))}),(function(t){n||(n=!0,B(e,t))}),"Settle: "+(e._label||" unknown promise"));!n&&o&&(n=!0,B(e,o))}),e)}function j(e,t){t._state===C?$(e,t._result):t._state===R?B(e,t._result):U(t,void 0,(function(t){return N(e,t)}),(function(t){return B(e,t)}))}function M(e,r,n){r.constructor===e.constructor&&n===E&&r.constructor.resolve===A?j(e,r):void 0===n?$(e,r):t(n)?D(e,r,n):$(e,r)}function N(t,r){if(t===r)B(t,O());else if(e(r)){var n=void 0;try{n=r.then}catch(o){return void B(t,o)}M(t,r,n)}else $(t,r)}function F(e){e._onerror&&e._onerror(e._result),z(e)}function $(e,t){e._state===T&&(e._result=t,e._state=C,0!==e._subscribers.length&&s(z,e))}function B(e,t){e._state===T&&(e._state=R,e._result=t,s(F,e))}function U(e,t,r,n){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+C]=r,o[i+R]=n,0===i&&e._state&&s(z,e)}function z(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n=void 0,o=void 0,i=e._result,a=0;a<t.length;a+=3)n=t[a],o=t[a+r],n?q(r,n,o,i):o(i);e._subscribers.length=0}}function q(e,r,n,o){var i=t(n),a=void 0,s=void 0,l=!0;if(i){try{a=n(o)}catch(c){l=!1,s=c}if(r===a)return void B(r,I())}else a=o;r._state!==T||(i&&l?N(r,a):!1===l?B(r,s):e===C?$(r,a):e===R&&B(r,a))}function W(e,t){try{t((function(t){N(e,t)}),(function(t){B(e,t)}))}catch(r){B(e,r)}}var V=0;function G(){return V++}function H(e){e[k]=V++,e._state=void 0,e._result=void 0,e._subscribers=[]}function K(){return new Error("Array Methods must be provided an Array")}var Y=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(P),this.promise[k]||H(this.promise),n(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?$(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&$(this.promise,this._result))):B(this.promise,K())}return e.prototype._enumerate=function(e){for(var t=0;this._state===T&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,n=r.resolve;if(n===A){var o=void 0,i=void 0,a=!1;try{o=e.then}catch(l){a=!0,i=l}if(o===E&&e._state!==T)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(r===te){var s=new r(P);a?B(s,i):M(s,e,o),this._willSettleAt(s,t)}else this._willSettleAt(new r((function(t){return t(e)})),t)}else this._willSettleAt(n(e),t)},e.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===T&&(this._remaining--,e===R?B(n,r):this._result[t]=r),0===this._remaining&&$(n,this._result)},e.prototype._willSettleAt=function(e,t){var r=this;U(e,void 0,(function(e){return r._settledAt(C,t,e)}),(function(e){return r._settledAt(R,t,e)}))},e}();function X(e){return new Y(this,e).promise}function Q(e){var t=this;return n(e)?new t((function(r,n){for(var o=e.length,i=0;i<o;i++)t.resolve(e[i]).then(r,n)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))}function J(e){var t=new this(P);return B(t,e),t}function Z(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function ee(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var te=function(){function e(t){this[k]=G(),this._result=this._state=void 0,this._subscribers=[],P!==t&&("function"!=typeof t&&Z(),this instanceof e?W(this,t):ee())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var r=this,n=r.constructor;return t(e)?r.then((function(t){return n.resolve(e()).then((function(){return t}))}),(function(t){return n.resolve(e()).then((function(){throw t}))})):r.then(e,e)},e}();function re(){var e=void 0;if(void 0!==r.g)e=r.g;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(o){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(o){}if("[object Promise]"===n&&!t.cast)return}e.Promise=te}return te.prototype.then=E,te.all=X,te.race=Q,te.resolve=A,te.reject=J,te._setScheduler=l,te._setAsap=c,te._asap=s,te.polyfill=re,te.Promise=te,te}()},"./node_modules/events/events.js":function(e){var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,t){return new Promise((function(r,n){function o(r){e.removeListener(t,i),n(r)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",o),r([].slice.call(arguments))}m(e,t,i,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&m(e,"error",t,r)}(e,o,{once:!0})}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var a=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function c(e,t,r,n){var o,i,a,c;if(s(r),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),a=i[t]),void 0===a)a=i[t]=r,++e._eventsCount;else if("function"==typeof a?a=i[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(o=l(e))>0&&a.length>o&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=a.length,c=u,console&&console.warn&&console.warn(c)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=u.bind(n);return o.listener=r,n.wrapFn=o,o}function p(e,t,r){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(o):h(o,o.length)}function f(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function h(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function m(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(i){n.once&&e.removeEventListener(t,o),r(i)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return l(this)},i.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var o="error"===e,i=this._events;if(void 0!==i)o=o&&void 0===i.error;else if(!o)return!1;if(o){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var l=i[e];if(void 0===l)return!1;if("function"==typeof l)n(l,this,t);else{var c=l.length,u=h(l,c);for(r=0;r<c;++r)n(u[r],this,t)}return!0},i.prototype.addListener=function(e,t){return c(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return c(this,e,t,!0)},i.prototype.once=function(e,t){return s(t),this.on(e,d(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,d(this,e,t)),this},i.prototype.removeListener=function(e,t){var r,n,o,i,a;if(s(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){a=r[i].listener,o=i;break}if(o<0)return this;0===o?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,o),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var o,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(o=i[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},i.prototype.listeners=function(e){return p(this,e,!0)},i.prototype.rawListeners=function(e){return p(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},i.prototype.listenerCount=f,i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},"./node_modules/webworkify-webpack/index.js":function(e,t,r){function n(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var n=r(r.s=ENTRY_MODULE);return n.default||n}var o="[\\.|\\-|\\+|\\w|/|@]+",i="\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)";function a(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function s(e,t,n){var s={};s[n]=[];var l=t.toString(),c=l.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!c)return s;for(var u,d=c[1],p=new RegExp("(\\\\n|\\W)"+a(d)+i,"g");u=p.exec(l);)"dll-reference"!==u[3]&&s[n].push(u[3]);for(p=new RegExp("\\("+a(d)+'\\("(dll-reference\\s('+o+'))"\\)\\)'+i,"g");u=p.exec(l);)e[u[2]]||(s[n].push(u[1]),e[u[2]]=r(u[1]).m),s[u[2]]=s[u[2]]||[],s[u[2]].push(u[4]);for(var f,h=Object.keys(s),m=0;m<h.length;m++)for(var g=0;g<s[h[m]].length;g++)f=s[h[m]][g],isNaN(1*f)||(s[h[m]][g]=1*s[h[m]][g]);return s}function l(e){return Object.keys(e).reduce((function(t,r){return t||e[r].length>0}),!1)}e.exports=function(e,t){t=t||{};var o={main:r.m},i=t.all?{main:Object.keys(o.main)}:function(e,t){for(var r={main:[t]},n={main:[]},o={main:{}};l(r);)for(var i=Object.keys(r),a=0;a<i.length;a++){var c=i[a],u=r[c].pop();if(o[c]=o[c]||{},!o[c][u]&&e[c][u]){o[c][u]=!0,n[c]=n[c]||[],n[c].push(u);for(var d=s(e,e[c][u],c),p=Object.keys(d),f=0;f<p.length;f++)r[p[f]]=r[p[f]]||[],r[p[f]]=r[p[f]].concat(d[p[f]])}}return n}(o,e),a="";Object.keys(i).filter((function(e){return"main"!==e})).forEach((function(e){for(var t=0;i[e][t];)t++;i[e].push(t),o[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",a=a+"var "+e+" = ("+n.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+i[e].map((function(t){return JSON.stringify(t)+": "+o[e][t].toString()})).join(",")+"});\n"})),a=a+"new (("+n.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+i.main.map((function(e){return JSON.stringify(e)+": "+o.main[e].toString()})).join(",")+"}))(self);";var c=new window.Blob([a],{type:"text/javascript"});if(t.bare)return c;var u=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(c),d=new window.Worker(u);return d.objectURL=u,d}},"./src/config.js":function(e,t,r){r.r(t),r.d(t,{defaultConfig:function(){return n},createDefaultConfig:function(){return o}});var n={enableWorker:!1,enableStashBuffer:!0,stashInitialSize:void 0,isLive:!1,lazyLoad:!0,lazyLoadMaxDuration:180,lazyLoadRecoverDuration:30,deferLoadAfterSourceOpen:!0,autoCleanupMaxBackwardDuration:180,autoCleanupMinBackwardDuration:120,statisticsInfoReportInterval:600,fixAudioTimestampGap:!0,accurateSeek:!1,seekType:"range",seekParamStart:"bstart",seekParamEnd:"bend",rangeLoadZeroStart:!1,customSeekHandler:void 0,reuseRedirectedURL:!1,headers:void 0,customLoader:void 0};function o(){return Object.assign({},n)}},"./src/core/features.js":function(e,t,r){r.r(t);var n=r("./src/io/io-controller.js"),o=r("./src/config.js"),i=function(){function e(){}return e.supportMSEH264Playback=function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')},e.supportNetworkStreamIO=function(){var e=new n.default({},(0,o.createDefaultConfig)()),t=e.loaderType;return e.destroy(),"fetch-stream-loader"==t||"xhr-moz-chunked-loader"==t},e.getNetworkLoaderTypeName=function(){var e=new n.default({},(0,o.createDefaultConfig)()),t=e.loaderType;return e.destroy(),t},e.supportNativeMediaPlayback=function(t){null==e.videoElement&&(e.videoElement=window.document.createElement("video"));var r=e.videoElement.canPlayType(t);return"probably"===r||"maybe"==r},e.getFeatureList=function(){var t={mseFlvPlayback:!1,mseLiveFlvPlayback:!1,networkStreamIO:!1,networkLoaderName:"",nativeMP4H264Playback:!1,nativeWebmVP8Playback:!1,nativeWebmVP9Playback:!1};return t.mseFlvPlayback=e.supportMSEH264Playback(),t.networkStreamIO=e.supportNetworkStreamIO(),t.networkLoaderName=e.getNetworkLoaderTypeName(),t.mseLiveFlvPlayback=t.mseFlvPlayback&&t.networkStreamIO,t.nativeMP4H264Playback=e.supportNativeMediaPlayback('video/mp4; codecs="avc1.42001E, mp4a.40.2"'),t.nativeWebmVP8Playback=e.supportNativeMediaPlayback('video/webm; codecs="vp8.0, vorbis"'),t.nativeWebmVP9Playback=e.supportNativeMediaPlayback('video/webm; codecs="vp9"'),t},e}();t.default=i},"./src/core/media-info.js":function(e,t,r){r.r(t);var n=function(){function e(){this.mimeType=null,this.duration=null,this.hasAudio=null,this.hasVideo=null,this.audioCodec=null,this.videoCodec=null,this.audioDataRate=null,this.videoDataRate=null,this.audioSampleRate=null,this.audioChannelCount=null,this.width=null,this.height=null,this.fps=null,this.profile=null,this.level=null,this.refFrames=null,this.chromaFormat=null,this.sarNum=null,this.sarDen=null,this.metadata=null,this.segments=null,this.segmentCount=null,this.hasKeyframesIndex=null,this.keyframesIndex=null}return e.prototype.isComplete=function(){var e=!1===this.hasAudio||!0===this.hasAudio&&null!=this.audioCodec&&null!=this.audioSampleRate&&null!=this.audioChannelCount,t=!1===this.hasVideo||!0===this.hasVideo&&null!=this.videoCodec&&null!=this.width&&null!=this.height&&null!=this.fps&&null!=this.profile&&null!=this.level&&null!=this.refFrames&&null!=this.chromaFormat&&null!=this.sarNum&&null!=this.sarDen;return null!=this.mimeType&&null!=this.duration&&null!=this.metadata&&null!=this.hasKeyframesIndex&&e&&t},e.prototype.isSeekable=function(){return!0===this.hasKeyframesIndex},e.prototype.getNearestKeyframe=function(e){if(null==this.keyframesIndex)return null;var t=this.keyframesIndex,r=this._search(t.times,e);return{index:r,milliseconds:t.times[r],fileposition:t.filepositions[r]}},e.prototype._search=function(e,t){var r=0,n=e.length-1,o=0,i=0,a=n;for(t<e[0]&&(r=0,i=a+1);i<=a;){if((o=i+Math.floor((a-i)/2))===n||t>=e[o]&&t<e[o+1]){r=o;break}e[o]<t?i=o+1:a=o-1}return r},e}();t.default=n},"./src/core/media-segment-info.js":function(e,t,r){r.r(t),r.d(t,{SampleInfo:function(){return n},MediaSegmentInfo:function(){return o},IDRSampleList:function(){return i},MediaSegmentInfoList:function(){return a}});var n=function(e,t,r,n,o){this.dts=e,this.pts=t,this.duration=r,this.originalDts=n,this.isSyncPoint=o,this.fileposition=null},o=function(){function e(){this.beginDts=0,this.endDts=0,this.beginPts=0,this.endPts=0,this.originalBeginDts=0,this.originalEndDts=0,this.syncPoints=[],this.firstSample=null,this.lastSample=null}return e.prototype.appendSyncPoint=function(e){e.isSyncPoint=!0,this.syncPoints.push(e)},e}(),i=function(){function e(){this._list=[]}return e.prototype.clear=function(){this._list=[]},e.prototype.appendArray=function(e){var t=this._list;0!==e.length&&(t.length>0&&e[0].originalDts<t[t.length-1].originalDts&&this.clear(),Array.prototype.push.apply(t,e))},e.prototype.getLastSyncPointBeforeDts=function(e){if(0==this._list.length)return null;var t=this._list,r=0,n=t.length-1,o=0,i=0,a=n;for(e<t[0].dts&&(r=0,i=a+1);i<=a;){if((o=i+Math.floor((a-i)/2))===n||e>=t[o].dts&&e<t[o+1].dts){r=o;break}t[o].dts<e?i=o+1:a=o-1}return this._list[r]},e}(),a=function(){function e(e){this._type=e,this._list=[],this._lastAppendLocation=-1}return Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._list.length},enumerable:!1,configurable:!0}),e.prototype.isEmpty=function(){return 0===this._list.length},e.prototype.clear=function(){this._list=[],this._lastAppendLocation=-1},e.prototype._searchNearestSegmentBefore=function(e){var t=this._list;if(0===t.length)return-2;var r=t.length-1,n=0,o=0,i=r,a=0;if(e<t[0].originalBeginDts)return a=-1;for(;o<=i;){if((n=o+Math.floor((i-o)/2))===r||e>t[n].lastSample.originalDts&&e<t[n+1].originalBeginDts){a=n;break}t[n].originalBeginDts<e?o=n+1:i=n-1}return a},e.prototype._searchNearestSegmentAfter=function(e){return this._searchNearestSegmentBefore(e)+1},e.prototype.append=function(e){var t=this._list,r=e,n=this._lastAppendLocation,o=0;-1!==n&&n<t.length&&r.originalBeginDts>=t[n].lastSample.originalDts&&(n===t.length-1||n<t.length-1&&r.originalBeginDts<t[n+1].originalBeginDts)?o=n+1:t.length>0&&(o=this._searchNearestSegmentBefore(r.originalBeginDts)+1),this._lastAppendLocation=o,this._list.splice(o,0,r)},e.prototype.getLastSegmentBefore=function(e){var t=this._searchNearestSegmentBefore(e);return t>=0?this._list[t]:null},e.prototype.getLastSampleBefore=function(e){var t=this.getLastSegmentBefore(e);return null!=t?t.lastSample:null},e.prototype.getLastSyncPointBefore=function(e){for(var t=this._searchNearestSegmentBefore(e),r=this._list[t].syncPoints;0===r.length&&t>0;)t--,r=this._list[t].syncPoints;return r.length>0?r[r.length-1]:null},e}()},"./src/core/mse-controller.js":function(e,t,r){r.r(t);var n=r("./node_modules/events/events.js"),o=r.n(n),i=r("./src/utils/logger.js"),a=r("./src/utils/browser.js"),s=r("./src/core/mse-events.js"),l=r("./src/core/media-segment-info.js"),c=r("./src/utils/exception.js"),u=function(){function e(e){this.TAG="MSEController",this._config=e,this._emitter=new(o()),this._config.isLive&&null==this._config.autoCleanupSourceBuffer&&(this._config.autoCleanupSourceBuffer=!0),this.e={onSourceOpen:this._onSourceOpen.bind(this),onSourceEnded:this._onSourceEnded.bind(this),onSourceClose:this._onSourceClose.bind(this),onSourceBufferError:this._onSourceBufferError.bind(this),onSourceBufferUpdateEnd:this._onSourceBufferUpdateEnd.bind(this)},this._mediaSource=null,this._mediaSourceObjectURL=null,this._mediaElement=null,this._isBufferFull=!1,this._hasPendingEos=!1,this._requireSetMediaDuration=!1,this._pendingMediaDuration=0,this._pendingSourceBufferInit=[],this._mimeTypes={video:null,audio:null},this._sourceBuffers={video:null,audio:null},this._lastInitSegments={video:null,audio:null},this._pendingSegments={video:[],audio:[]},this._pendingRemoveRanges={video:[],audio:[]},this._idrList=new l.IDRSampleList}return e.prototype.destroy=function(){(this._mediaElement||this._mediaSource)&&this.detachMediaElement(),this.e=null,this._emitter.removeAllListeners(),this._emitter=null},e.prototype.on=function(e,t){this._emitter.addListener(e,t)},e.prototype.off=function(e,t){this._emitter.removeListener(e,t)},e.prototype.attachMediaElement=function(e){if(this._mediaSource)throw new c.IllegalStateException("MediaSource has been attached to an HTMLMediaElement!");var t=this._mediaSource=new window.MediaSource;t.addEventListener("sourceopen",this.e.onSourceOpen),t.addEventListener("sourceended",this.e.onSourceEnded),t.addEventListener("sourceclose",this.e.onSourceClose),this._mediaElement=e,this._mediaSourceObjectURL=window.URL.createObjectURL(this._mediaSource),e.src=this._mediaSourceObjectURL},e.prototype.detachMediaElement=function(){if(this._mediaSource){var e=this._mediaSource;for(var t in this._sourceBuffers){var r=this._pendingSegments[t];r.splice(0,r.length),this._pendingSegments[t]=null,this._pendingRemoveRanges[t]=null,this._lastInitSegments[t]=null;var n=this._sourceBuffers[t];if(n){if("closed"!==e.readyState){try{e.removeSourceBuffer(n)}catch(o){i.default.e(this.TAG,o.message)}n.removeEventListener("error",this.e.onSourceBufferError),n.removeEventListener("updateend",this.e.onSourceBufferUpdateEnd)}this._mimeTypes[t]=null,this._sourceBuffers[t]=null}}if("open"===e.readyState)try{e.endOfStream()}catch(o){i.default.e(this.TAG,o.message)}e.removeEventListener("sourceopen",this.e.onSourceOpen),e.removeEventListener("sourceended",this.e.onSourceEnded),e.removeEventListener("sourceclose",this.e.onSourceClose),this._pendingSourceBufferInit=[],this._isBufferFull=!1,this._idrList.clear(),this._mediaSource=null}this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement=null),this._mediaSourceObjectURL&&(window.URL.revokeObjectURL(this._mediaSourceObjectURL),this._mediaSourceObjectURL=null)},e.prototype.appendInitSegment=function(e,t){if(!this._mediaSource||"open"!==this._mediaSource.readyState)return this._pendingSourceBufferInit.push(e),void this._pendingSegments[e.type].push(e);var r=e,n=""+r.container;r.codec&&r.codec.length>0&&(n+=";codecs="+r.codec);var o=!1;if(i.default.v(this.TAG,"Received Initialization Segment, mimeType: "+n),this._lastInitSegments[r.type]=r,n!==this._mimeTypes[r.type]){if(this._mimeTypes[r.type])i.default.v(this.TAG,"Notice: "+r.type+" mimeType changed, origin: "+this._mimeTypes[r.type]+", target: "+n);else{o=!0;try{var l=this._sourceBuffers[r.type]=this._mediaSource.addSourceBuffer(n);l.addEventListener("error",this.e.onSourceBufferError),l.addEventListener("updateend",this.e.onSourceBufferUpdateEnd)}catch(c){return i.default.e(this.TAG,c.message),void this._emitter.emit(s.default.ERROR,{code:c.code,msg:c.message})}}this._mimeTypes[r.type]=n}t||this._pendingSegments[r.type].push(r),o||this._sourceBuffers[r.type]&&!this._sourceBuffers[r.type].updating&&this._doAppendSegments(),a.default.safari&&"audio/mpeg"===r.container&&r.mediaDuration>0&&(this._requireSetMediaDuration=!0,this._pendingMediaDuration=r.mediaDuration/1e3,this._updateMediaSourceDuration())},e.prototype.appendMediaSegment=function(e){var t=e;this._pendingSegments[t.type].push(t),this._config.autoCleanupSourceBuffer&&this._needCleanupSourceBuffer()&&this._doCleanupSourceBuffer();var r=this._sourceBuffers[t.type];!r||r.updating||this._hasPendingRemoveRanges()||this._doAppendSegments()},e.prototype.seek=function(e){for(var t in this._sourceBuffers)if(this._sourceBuffers[t]){var r=this._sourceBuffers[t];if("open"===this._mediaSource.readyState)try{r.abort()}catch(u){i.default.e(this.TAG,u.message)}this._idrList.clear();var n=this._pendingSegments[t];if(n.splice(0,n.length),"closed"!==this._mediaSource.readyState){for(var o=0;o<r.buffered.length;o++){var s=r.buffered.start(o),l=r.buffered.end(o);this._pendingRemoveRanges[t].push({start:s,end:l})}if(r.updating||this._doRemoveRanges(),a.default.safari){var c=this._lastInitSegments[t];c&&(this._pendingSegments[t].push(c),r.updating||this._doAppendSegments())}}}},e.prototype.endOfStream=function(){var e=this._mediaSource,t=this._sourceBuffers;e&&"open"===e.readyState?t.video&&t.video.updating||t.audio&&t.audio.updating?this._hasPendingEos=!0:(this._hasPendingEos=!1,e.endOfStream()):e&&"closed"===e.readyState&&this._hasPendingSegments()&&(this._hasPendingEos=!0)},e.prototype.getNearestKeyframe=function(e){return this._idrList.getLastSyncPointBeforeDts(e)},e.prototype._needCleanupSourceBuffer=function(){if(!this._config.autoCleanupSourceBuffer)return!1;var e=this._mediaElement.currentTime;for(var t in this._sourceBuffers){var r=this._sourceBuffers[t];if(r){var n=r.buffered;if(n.length>=1&&e-n.start(0)>=this._config.autoCleanupMaxBackwardDuration)return!0}}return!1},e.prototype._doCleanupSourceBuffer=function(){var e=this._mediaElement.currentTime;for(var t in this._sourceBuffers){var r=this._sourceBuffers[t];if(r){for(var n=r.buffered,o=!1,i=0;i<n.length;i++){var a=n.start(i),s=n.end(i);if(a<=e&&e<s+3){if(e-a>=this._config.autoCleanupMaxBackwardDuration){o=!0;var l=e-this._config.autoCleanupMinBackwardDuration;this._pendingRemoveRanges[t].push({start:a,end:l})}}else s<e&&(o=!0,this._pendingRemoveRanges[t].push({start:a,end:s}))}o&&!r.updating&&this._doRemoveRanges()}}},e.prototype._updateMediaSourceDuration=function(){var e=this._sourceBuffers;if(0!==this._mediaElement.readyState&&"open"===this._mediaSource.readyState&&!(e.video&&e.video.updating||e.audio&&e.audio.updating)){var t=this._mediaSource.duration,r=this._pendingMediaDuration;r>0&&(isNaN(t)||r>t)&&(i.default.v(this.TAG,"Update MediaSource duration from "+t+" to "+r),this._mediaSource.duration=r),this._requireSetMediaDuration=!1,this._pendingMediaDuration=0}},e.prototype._doRemoveRanges=function(){for(var e in this._pendingRemoveRanges)if(this._sourceBuffers[e]&&!this._sourceBuffers[e].updating)for(var t=this._sourceBuffers[e],r=this._pendingRemoveRanges[e];r.length&&!t.updating;){var n=r.shift();t.remove(n.start,n.end)}},e.prototype._doAppendSegments=function(){var e=this._pendingSegments;for(var t in e)if(this._sourceBuffers[t]&&!this._sourceBuffers[t].updating&&e[t].length>0){var r=e[t].shift();if(r.timestampOffset){var n=this._sourceBuffers[t].timestampOffset,o=r.timestampOffset/1e3;Math.abs(n-o)>.1&&(i.default.v(this.TAG,"Update MPEG audio timestampOffset from "+n+" to "+o),this._sourceBuffers[t].timestampOffset=o),delete r.timestampOffset}if(!r.data||0===r.data.byteLength)continue;try{this._sourceBuffers[t].appendBuffer(r.data),this._isBufferFull=!1,"video"===t&&r.hasOwnProperty("info")&&this._idrList.appendArray(r.info.syncPoints)}catch(a){this._pendingSegments[t].unshift(r),22===a.code?(this._isBufferFull||this._emitter.emit(s.default.BUFFER_FULL),this._isBufferFull=!0):(i.default.e(this.TAG,a.message),this._emitter.emit(s.default.ERROR,{code:a.code,msg:a.message}))}}},e.prototype._onSourceOpen=function(){if(i.default.v(this.TAG,"MediaSource onSourceOpen"),this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._pendingSourceBufferInit.length>0)for(var e=this._pendingSourceBufferInit;e.length;){var t=e.shift();this.appendInitSegment(t,!0)}this._hasPendingSegments()&&this._doAppendSegments(),this._emitter.emit(s.default.SOURCE_OPEN)},e.prototype._onSourceEnded=function(){i.default.v(this.TAG,"MediaSource onSourceEnded")},e.prototype._onSourceClose=function(){i.default.v(this.TAG,"MediaSource onSourceClose"),this._mediaSource&&null!=this.e&&(this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._mediaSource.removeEventListener("sourceended",this.e.onSourceEnded),this._mediaSource.removeEventListener("sourceclose",this.e.onSourceClose))},e.prototype._hasPendingSegments=function(){var e=this._pendingSegments;return e.video.length>0||e.audio.length>0},e.prototype._hasPendingRemoveRanges=function(){var e=this._pendingRemoveRanges;return e.video.length>0||e.audio.length>0},e.prototype._onSourceBufferUpdateEnd=function(){this._requireSetMediaDuration?this._updateMediaSourceDuration():this._hasPendingRemoveRanges()?this._doRemoveRanges():this._hasPendingSegments()?this._doAppendSegments():this._hasPendingEos&&this.endOfStream(),this._emitter.emit(s.default.UPDATE_END)},e.prototype._onSourceBufferError=function(e){i.default.e(this.TAG,"SourceBuffer Error: "+e)},e}();t.default=u},"./src/core/mse-events.js":function(e,t,r){r.r(t),t.default={ERROR:"error",SOURCE_OPEN:"source_open",UPDATE_END:"update_end",BUFFER_FULL:"buffer_full"}},"./src/core/transmuxer.js":function(e,t,r){r.r(t);var n=r("./node_modules/events/events.js"),o=r.n(n),i=r("./node_modules/webworkify-webpack/index.js"),a=r.n(i),s=r("./src/utils/logger.js"),l=r("./src/utils/logging-control.js"),c=r("./src/core/transmuxing-controller.js"),u=r("./src/core/transmuxing-events.js"),d=r("./src/core/media-info.js"),p=function(){function e(e,t){if(this.TAG="Transmuxer",this._emitter=new(o()),t.enableWorker&&"undefined"!=typeof Worker)try{this._worker=a()("./src/core/transmuxing-worker.js"),this._workerDestroying=!1,this._worker.addEventListener("message",this._onWorkerMessage.bind(this)),this._worker.postMessage({cmd:"init",param:[e,t]}),this.e={onLoggingConfigChanged:this._onLoggingConfigChanged.bind(this)},l.default.registerListener(this.e.onLoggingConfigChanged),this._worker.postMessage({cmd:"logging_config",param:l.default.getConfig()})}catch(n){s.default.e(this.TAG,"Error while initialize transmuxing worker, fallback to inline transmuxing"),this._worker=null,this._controller=new c.default(e,t)}else this._controller=new c.default(e,t);if(this._controller){var r=this._controller;r.on(u.default.IO_ERROR,this._onIOError.bind(this)),r.on(u.default.DEMUX_ERROR,this._onDemuxError.bind(this)),r.on(u.default.INIT_SEGMENT,this._onInitSegment.bind(this)),r.on(u.default.MEDIA_SEGMENT,this._onMediaSegment.bind(this)),r.on(u.default.LOADING_COMPLETE,this._onLoadingComplete.bind(this)),r.on(u.default.RECOVERED_EARLY_EOF,this._onRecoveredEarlyEof.bind(this)),r.on(u.default.MEDIA_INFO,this._onMediaInfo.bind(this)),r.on(u.default.METADATA_ARRIVED,this._onMetaDataArrived.bind(this)),r.on(u.default.SCRIPTDATA_ARRIVED,this._onScriptDataArrived.bind(this)),r.on(u.default.STATISTICS_INFO,this._onStatisticsInfo.bind(this)),r.on(u.default.RECOMMEND_SEEKPOINT,this._onRecommendSeekpoint.bind(this))}}return e.prototype.destroy=function(){this._worker?this._workerDestroying||(this._workerDestroying=!0,this._worker.postMessage({cmd:"destroy"}),l.default.removeListener(this.e.onLoggingConfigChanged),this.e=null):(this._controller.destroy(),this._controller=null),this._emitter.removeAllListeners(),this._emitter=null},e.prototype.on=function(e,t){this._emitter.addListener(e,t)},e.prototype.off=function(e,t){this._emitter.removeListener(e,t)},e.prototype.hasWorker=function(){return null!=this._worker},e.prototype.open=function(){this._worker?this._worker.postMessage({cmd:"start"}):this._controller.start()},e.prototype.close=function(){this._worker?this._worker.postMessage({cmd:"stop"}):this._controller.stop()},e.prototype.seek=function(e){this._worker?this._worker.postMessage({cmd:"seek",param:e}):this._controller.seek(e)},e.prototype.pause=function(){this._worker?this._worker.postMessage({cmd:"pause"}):this._controller.pause()},e.prototype.resume=function(){this._worker?this._worker.postMessage({cmd:"resume"}):this._controller.resume()},e.prototype._onInitSegment=function(e,t){var r=this;Promise.resolve().then((function(){r._emitter.emit(u.default.INIT_SEGMENT,e,t)}))},e.prototype._onMediaSegment=function(e,t){var r=this;Promise.resolve().then((function(){r._emitter.emit(u.default.MEDIA_SEGMENT,e,t)}))},e.prototype._onLoadingComplete=function(){var e=this;Promise.resolve().then((function(){e._emitter.emit(u.default.LOADING_COMPLETE)}))},e.prototype._onRecoveredEarlyEof=function(){var e=this;Promise.resolve().then((function(){e._emitter.emit(u.default.RECOVERED_EARLY_EOF)}))},e.prototype._onMediaInfo=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(u.default.MEDIA_INFO,e)}))},e.prototype._onMetaDataArrived=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(u.default.METADATA_ARRIVED,e)}))},e.prototype._onScriptDataArrived=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(u.default.SCRIPTDATA_ARRIVED,e)}))},e.prototype._onStatisticsInfo=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(u.default.STATISTICS_INFO,e)}))},e.prototype._onIOError=function(e,t){var r=this;Promise.resolve().then((function(){r._emitter.emit(u.default.IO_ERROR,e,t)}))},e.prototype._onDemuxError=function(e,t){var r=this;Promise.resolve().then((function(){r._emitter.emit(u.default.DEMUX_ERROR,e,t)}))},e.prototype._onRecommendSeekpoint=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(u.default.RECOMMEND_SEEKPOINT,e)}))},e.prototype._onLoggingConfigChanged=function(e){this._worker&&this._worker.postMessage({cmd:"logging_config",param:e})},e.prototype._onWorkerMessage=function(e){var t=e.data,r=t.data;if("destroyed"===t.msg||this._workerDestroying)return this._workerDestroying=!1,this._worker.terminate(),void(this._worker=null);switch(t.msg){case u.default.INIT_SEGMENT:case u.default.MEDIA_SEGMENT:this._emitter.emit(t.msg,r.type,r.data);break;case u.default.LOADING_COMPLETE:case u.default.RECOVERED_EARLY_EOF:this._emitter.emit(t.msg);break;case u.default.MEDIA_INFO:Object.setPrototypeOf(r,d.default.prototype),this._emitter.emit(t.msg,r);break;case u.default.METADATA_ARRIVED:case u.default.SCRIPTDATA_ARRIVED:case u.default.STATISTICS_INFO:this._emitter.emit(t.msg,r);break;case u.default.IO_ERROR:case u.default.DEMUX_ERROR:this._emitter.emit(t.msg,r.type,r.info);break;case u.default.RECOMMEND_SEEKPOINT:this._emitter.emit(t.msg,r);break;case"logcat_callback":s.default.emitter.emit("log",r.type,r.logcat)}},e}();t.default=p},"./src/core/transmuxing-controller.js":function(e,t,r){r.r(t);var n=r("./node_modules/events/events.js"),o=r.n(n),i=r("./src/utils/logger.js"),a=r("./src/utils/browser.js"),s=r("./src/core/media-info.js"),l=r("./src/demux/flv-demuxer.js"),c=r("./src/remux/mp4-remuxer.js"),u=r("./src/demux/demux-errors.js"),d=r("./src/io/io-controller.js"),p=r("./src/core/transmuxing-events.js"),f=function(){function e(e,t){this.TAG="TransmuxingController",this._emitter=new(o()),this._config=t,e.segments||(e.segments=[{duration:e.duration,filesize:e.filesize,url:e.url}]),"boolean"!=typeof e.cors&&(e.cors=!0),"boolean"!=typeof e.withCredentials&&(e.withCredentials=!1),this._mediaDataSource=e,this._currentSegmentIndex=0;var r=0;this._mediaDataSource.segments.forEach((function(n){n.timestampBase=r,r+=n.duration,n.cors=e.cors,n.withCredentials=e.withCredentials,t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy)})),isNaN(r)||this._mediaDataSource.duration===r||(this._mediaDataSource.duration=r),this._mediaInfo=null,this._demuxer=null,this._remuxer=null,this._ioctl=null,this._pendingSeekTime=null,this._pendingResolveSeekPoint=null,this._statisticsReporter=null}return e.prototype.destroy=function(){this._mediaInfo=null,this._mediaDataSource=null,this._statisticsReporter&&this._disableStatisticsReporter(),this._ioctl&&(this._ioctl.destroy(),this._ioctl=null),this._demuxer&&(this._demuxer.destroy(),this._demuxer=null),this._remuxer&&(this._remuxer.destroy(),this._remuxer=null),this._emitter.removeAllListeners(),this._emitter=null},e.prototype.on=function(e,t){this._emitter.addListener(e,t)},e.prototype.off=function(e,t){this._emitter.removeListener(e,t)},e.prototype.start=function(){this._loadSegment(0),this._enableStatisticsReporter()},e.prototype._loadSegment=function(e,t){this._currentSegmentIndex=e;var r=this._mediaDataSource.segments[e],n=this._ioctl=new d.default(r,this._config,e);n.onError=this._onIOException.bind(this),n.onSeeked=this._onIOSeeked.bind(this),n.onComplete=this._onIOComplete.bind(this),n.onRedirect=this._onIORedirect.bind(this),n.onRecoveredEarlyEof=this._onIORecoveredEarlyEof.bind(this),t?this._demuxer.bindDataSource(this._ioctl):n.onDataArrival=this._onInitChunkArrival.bind(this),n.open(t)},e.prototype.stop=function(){this._internalAbort(),this._disableStatisticsReporter()},e.prototype._internalAbort=function(){this._ioctl&&(this._ioctl.destroy(),this._ioctl=null)},e.prototype.pause=function(){this._ioctl&&this._ioctl.isWorking()&&(this._ioctl.pause(),this._disableStatisticsReporter())},e.prototype.resume=function(){this._ioctl&&this._ioctl.isPaused()&&(this._ioctl.resume(),this._enableStatisticsReporter())},e.prototype.seek=function(e){if(null!=this._mediaInfo&&this._mediaInfo.isSeekable()){var t=this._searchSegmentIndexContains(e);if(t===this._currentSegmentIndex){var r=this._mediaInfo.segments[t];if(null==r)this._pendingSeekTime=e;else{var n=r.getNearestKeyframe(e);this._remuxer.seek(n.milliseconds),this._ioctl.seek(n.fileposition),this._pendingResolveSeekPoint=n.milliseconds}}else{var o=this._mediaInfo.segments[t];null==o?(this._pendingSeekTime=e,this._internalAbort(),this._remuxer.seek(),this._remuxer.insertDiscontinuity(),this._loadSegment(t)):(n=o.getNearestKeyframe(e),this._internalAbort(),this._remuxer.seek(e),this._remuxer.insertDiscontinuity(),this._demuxer.resetMediaInfo(),this._demuxer.timestampBase=this._mediaDataSource.segments[t].timestampBase,this._loadSegment(t,n.fileposition),this._pendingResolveSeekPoint=n.milliseconds,this._reportSegmentMediaInfo(t))}this._enableStatisticsReporter()}},e.prototype._searchSegmentIndexContains=function(e){for(var t=this._mediaDataSource.segments,r=t.length-1,n=0;n<t.length;n++)if(e<t[n].timestampBase){r=n-1;break}return r},e.prototype._onInitChunkArrival=function(e,t){var r=this,n=null,o=0;if(t>0)this._demuxer.bindDataSource(this._ioctl),this._demuxer.timestampBase=this._mediaDataSource.segments[this._currentSegmentIndex].timestampBase,o=this._demuxer.parseChunks(e,t);else if((n=l.default.probe(e)).match){this._demuxer=new l.default(n,this._config),this._remuxer||(this._remuxer=new c.default(this._config));var a=this._mediaDataSource;null==a.duration||isNaN(a.duration)||(this._demuxer.overridedDuration=a.duration),"boolean"==typeof a.hasAudio&&(this._demuxer.overridedHasAudio=a.hasAudio),"boolean"==typeof a.hasVideo&&(this._demuxer.overridedHasVideo=a.hasVideo),this._demuxer.timestampBase=a.segments[this._currentSegmentIndex].timestampBase,this._demuxer.onError=this._onDemuxException.bind(this),this._demuxer.onMediaInfo=this._onMediaInfo.bind(this),this._demuxer.onMetaDataArrived=this._onMetaDataArrived.bind(this),this._demuxer.onScriptDataArrived=this._onScriptDataArrived.bind(this),this._remuxer.bindDataSource(this._demuxer.bindDataSource(this._ioctl)),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this),o=this._demuxer.parseChunks(e,t)}else n=null,i.default.e(this.TAG,"Non-FLV, Unsupported media type!"),Promise.resolve().then((function(){r._internalAbort()})),this._emitter.emit(p.default.DEMUX_ERROR,u.default.FORMAT_UNSUPPORTED,"Non-FLV, Unsupported media type"),o=0;return o},e.prototype._onMediaInfo=function(e){var t=this;null==this._mediaInfo&&(this._mediaInfo=Object.assign({},e),this._mediaInfo.keyframesIndex=null,this._mediaInfo.segments=[],this._mediaInfo.segmentCount=this._mediaDataSource.segments.length,Object.setPrototypeOf(this._mediaInfo,s.default.prototype));var r=Object.assign({},e);Object.setPrototypeOf(r,s.default.prototype),this._mediaInfo.segments[this._currentSegmentIndex]=r,this._reportSegmentMediaInfo(this._currentSegmentIndex),null!=this._pendingSeekTime&&Promise.resolve().then((function(){var e=t._pendingSeekTime;t._pendingSeekTime=null,t.seek(e)}))},e.prototype._onMetaDataArrived=function(e){this._emitter.emit(p.default.METADATA_ARRIVED,e)},e.prototype._onScriptDataArrived=function(e){this._emitter.emit(p.default.SCRIPTDATA_ARRIVED,e)},e.prototype._onIOSeeked=function(){this._remuxer.insertDiscontinuity()},e.prototype._onIOComplete=function(e){var t=e+1;t<this._mediaDataSource.segments.length?(this._internalAbort(),this._remuxer.flushStashedSamples(),this._loadSegment(t)):(this._remuxer.flushStashedSamples(),this._emitter.emit(p.default.LOADING_COMPLETE),this._disableStatisticsReporter())},e.prototype._onIORedirect=function(e){var t=this._ioctl.extraData;this._mediaDataSource.segments[t].redirectedURL=e},e.prototype._onIORecoveredEarlyEof=function(){this._emitter.emit(p.default.RECOVERED_EARLY_EOF)},e.prototype._onIOException=function(e,t){i.default.e(this.TAG,"IOException: type = "+e+", code = "+t.code+", msg = "+t.msg),this._emitter.emit(p.default.IO_ERROR,e,t),this._disableStatisticsReporter()},e.prototype._onDemuxException=function(e,t){i.default.e(this.TAG,"DemuxException: type = "+e+", info = "+t),this._emitter.emit(p.default.DEMUX_ERROR,e,t)},e.prototype._onRemuxerInitSegmentArrival=function(e,t){this._emitter.emit(p.default.INIT_SEGMENT,e,t)},e.prototype._onRemuxerMediaSegmentArrival=function(e,t){if(null==this._pendingSeekTime&&(this._emitter.emit(p.default.MEDIA_SEGMENT,e,t),null!=this._pendingResolveSeekPoint&&"video"===e)){var r=t.info.syncPoints,n=this._pendingResolveSeekPoint;this._pendingResolveSeekPoint=null,a.default.safari&&r.length>0&&r[0].originalDts===n&&(n=r[0].pts),this._emitter.emit(p.default.RECOMMEND_SEEKPOINT,n)}},e.prototype._enableStatisticsReporter=function(){null==this._statisticsReporter&&(this._statisticsReporter=self.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval))},e.prototype._disableStatisticsReporter=function(){this._statisticsReporter&&(self.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},e.prototype._reportSegmentMediaInfo=function(e){var t=this._mediaInfo.segments[e],r=Object.assign({},t);r.duration=this._mediaInfo.duration,r.segmentCount=this._mediaInfo.segmentCount,delete r.segments,delete r.keyframesIndex,this._emitter.emit(p.default.MEDIA_INFO,r)},e.prototype._reportStatisticsInfo=function(){var e={};e.url=this._ioctl.currentURL,e.hasRedirect=this._ioctl.hasRedirect,e.hasRedirect&&(e.redirectedURL=this._ioctl.currentRedirectedURL),e.speed=this._ioctl.currentSpeed,e.loaderType=this._ioctl.loaderType,e.currentSegmentIndex=this._currentSegmentIndex,e.totalSegmentCount=this._mediaDataSource.segments.length,this._emitter.emit(p.default.STATISTICS_INFO,e)},e}();t.default=f},"./src/core/transmuxing-events.js":function(e,t,r){r.r(t),t.default={IO_ERROR:"io_error",DEMUX_ERROR:"demux_error",INIT_SEGMENT:"init_segment",MEDIA_SEGMENT:"media_segment",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",STATISTICS_INFO:"statistics_info",RECOMMEND_SEEKPOINT:"recommend_seekpoint"}},"./src/core/transmuxing-worker.js":function(e,t,r){r.r(t);var n=r("./src/utils/logging-control.js"),o=r("./src/utils/polyfill.js"),i=r("./src/core/transmuxing-controller.js"),a=r("./src/core/transmuxing-events.js");t.default=function(e){var t=null,r=function(t,r){e.postMessage({msg:"logcat_callback",data:{type:t,logcat:r}})}.bind(this);function s(t,r){var n={msg:a.default.INIT_SEGMENT,data:{type:t,data:r}};e.postMessage(n,[r.data])}function l(t,r){var n={msg:a.default.MEDIA_SEGMENT,data:{type:t,data:r}};e.postMessage(n,[r.data])}function c(){var t={msg:a.default.LOADING_COMPLETE};e.postMessage(t)}function u(){var t={msg:a.default.RECOVERED_EARLY_EOF};e.postMessage(t)}function d(t){var r={msg:a.default.MEDIA_INFO,data:t};e.postMessage(r)}function p(t){var r={msg:a.default.METADATA_ARRIVED,data:t};e.postMessage(r)}function f(t){var r={msg:a.default.SCRIPTDATA_ARRIVED,data:t};e.postMessage(r)}function h(t){var r={msg:a.default.STATISTICS_INFO,data:t};e.postMessage(r)}function m(t,r){e.postMessage({msg:a.default.IO_ERROR,data:{type:t,info:r}})}function g(t,r){e.postMessage({msg:a.default.DEMUX_ERROR,data:{type:t,info:r}})}function y(t){e.postMessage({msg:a.default.RECOMMEND_SEEKPOINT,data:t})}o.default.install(),e.addEventListener("message",(function(o){switch(o.data.cmd){case"init":(t=new i.default(o.data.param[0],o.data.param[1])).on(a.default.IO_ERROR,m.bind(this)),t.on(a.default.DEMUX_ERROR,g.bind(this)),t.on(a.default.INIT_SEGMENT,s.bind(this)),t.on(a.default.MEDIA_SEGMENT,l.bind(this)),t.on(a.default.LOADING_COMPLETE,c.bind(this)),t.on(a.default.RECOVERED_EARLY_EOF,u.bind(this)),t.on(a.default.MEDIA_INFO,d.bind(this)),t.on(a.default.METADATA_ARRIVED,p.bind(this)),t.on(a.default.SCRIPTDATA_ARRIVED,f.bind(this)),t.on(a.default.STATISTICS_INFO,h.bind(this)),t.on(a.default.RECOMMEND_SEEKPOINT,y.bind(this));break;case"destroy":t&&(t.destroy(),t=null),e.postMessage({msg:"destroyed"});break;case"start":t.start();break;case"stop":t.stop();break;case"seek":t.seek(o.data.param);break;case"pause":t.pause();break;case"resume":t.resume();break;case"logging_config":var v=o.data.param;n.default.applyConfig(v),!0===v.enableCallback?n.default.addLogListener(r):n.default.removeLogListener(r)}}))}},"./src/demux/amf-parser.js":function(e,t,r){r.r(t);var n,o=r("./src/utils/logger.js"),i=r("./src/utils/utf8-conv.js"),a=r("./src/utils/exception.js"),s=(n=new ArrayBuffer(2),new DataView(n).setInt16(0,256,!0),256===new Int16Array(n)[0]),l=function(){function e(){}return e.parseScriptData=function(t,r,n){var i={};try{var a=e.parseValue(t,r,n),s=e.parseValue(t,r+a.size,n-a.size);i[a.data]=s.data}catch(l){o.default.e("AMF",l.toString())}return i},e.parseObject=function(t,r,n){if(n<3)throw new a.IllegalStateException("Data not enough when parse ScriptDataObject");var o=e.parseString(t,r,n),i=e.parseValue(t,r+o.size,n-o.size),s=i.objectEnd;return{data:{name:o.data,value:i.data},size:o.size+i.size,objectEnd:s}},e.parseVariable=function(t,r,n){return e.parseObject(t,r,n)},e.parseString=function(e,t,r){if(r<2)throw new a.IllegalStateException("Data not enough when parse String");var n=new DataView(e,t,r).getUint16(0,!s);return{data:n>0?(0,i.default)(new Uint8Array(e,t+2,n)):"",size:2+n}},e.parseLongString=function(e,t,r){if(r<4)throw new a.IllegalStateException("Data not enough when parse LongString");var n=new DataView(e,t,r).getUint32(0,!s);return{data:n>0?(0,i.default)(new Uint8Array(e,t+4,n)):"",size:4+n}},e.parseDate=function(e,t,r){if(r<10)throw new a.IllegalStateException("Data size invalid when parse Date");var n=new DataView(e,t,r),o=n.getFloat64(0,!s),i=n.getInt16(8,!s);return{data:new Date(o+=60*i*1e3),size:10}},e.parseValue=function(t,r,n){if(n<1)throw new a.IllegalStateException("Data not enough when parse Value");var i,l=new DataView(t,r,n),c=1,u=l.getUint8(0),d=!1;try{switch(u){case 0:i=l.getFloat64(1,!s),c+=8;break;case 1:i=!!l.getUint8(1),c+=1;break;case 2:var p=e.parseString(t,r+1,n-1);i=p.data,c+=p.size;break;case 3:i={};var f=0;for(9==(16777215&l.getUint32(n-4,!s))&&(f=3);c<n-4;){var h=e.parseObject(t,r+c,n-c-f);if(h.objectEnd)break;i[h.data.name]=h.data.value,c+=h.size}c<=n-3&&9==(16777215&l.getUint32(c-1,!s))&&(c+=3);break;case 8:for(i={},c+=4,f=0,9==(16777215&l.getUint32(n-4,!s))&&(f=3);c<n-8;){var m=e.parseVariable(t,r+c,n-c-f);if(m.objectEnd)break;i[m.data.name]=m.data.value,c+=m.size}c<=n-3&&9==(16777215&l.getUint32(c-1,!s))&&(c+=3);break;case 9:i=void 0,c=1,d=!0;break;case 10:i=[];var g=l.getUint32(1,!s);c+=4;for(var y=0;y<g;y++){var v=e.parseValue(t,r+c,n-c);i.push(v.data),c+=v.size}break;case 11:var b=e.parseDate(t,r+1,n-1);i=b.data,c+=b.size;break;case 12:var _=e.parseString(t,r+1,n-1);i=_.data,c+=_.size;break;default:c=n,o.default.w("AMF","Unsupported AMF value type "+u)}}catch(S){o.default.e("AMF",S.toString())}return{data:i,size:c,objectEnd:d}},e}();t.default=l},"./src/demux/demux-errors.js":function(e,t,r){r.r(t),t.default={OK:"OK",FORMAT_ERROR:"FormatError",FORMAT_UNSUPPORTED:"FormatUnsupported",CODEC_UNSUPPORTED:"CodecUnsupported"}},"./src/demux/exp-golomb.js":function(e,t,r){r.r(t);var n=r("./src/utils/exception.js"),o=function(){function e(e){this.TAG="ExpGolomb",this._buffer=e,this._buffer_index=0,this._total_bytes=e.byteLength,this._total_bits=8*e.byteLength,this._current_word=0,this._current_word_bits_left=0}return e.prototype.destroy=function(){this._buffer=null},e.prototype._fillCurrentWord=function(){var e=this._total_bytes-this._buffer_index;if(e<=0)throw new n.IllegalStateException("ExpGolomb: _fillCurrentWord() but no bytes available");var t=Math.min(4,e),r=new Uint8Array(4);r.set(this._buffer.subarray(this._buffer_index,this._buffer_index+t)),this._current_word=new DataView(r.buffer).getUint32(0,!1),this._buffer_index+=t,this._current_word_bits_left=8*t},e.prototype.readBits=function(e){if(e>32)throw new n.InvalidArgumentException("ExpGolomb: readBits() bits exceeded max 32bits!");if(e<=this._current_word_bits_left){var t=this._current_word>>>32-e;return this._current_word<<=e,this._current_word_bits_left-=e,t}var r=this._current_word_bits_left?this._current_word:0;r>>>=32-this._current_word_bits_left;var o=e-this._current_word_bits_left;this._fillCurrentWord();var i=Math.min(o,this._current_word_bits_left),a=this._current_word>>>32-i;return this._current_word<<=i,this._current_word_bits_left-=i,r=r<<i|a},e.prototype.readBool=function(){return 1===this.readBits(1)},e.prototype.readByte=function(){return this.readBits(8)},e.prototype._skipLeadingZero=function(){var e;for(e=0;e<this._current_word_bits_left;e++)if(0!=(this._current_word&2147483648>>>e))return this._current_word<<=e,this._current_word_bits_left-=e,e;return this._fillCurrentWord(),e+this._skipLeadingZero()},e.prototype.readUEG=function(){var e=this._skipLeadingZero();return this.readBits(e+1)-1},e.prototype.readSEG=function(){var e=this.readUEG();return 1&e?e+1>>>1:-1*(e>>>1)},e}();t.default=o},"./src/demux/flv-demuxer.js":function(e,t,r){r.r(t);var n=r("./src/utils/logger.js"),o=r("./src/demux/amf-parser.js"),i=r("./src/demux/sps-parser.js"),a=r("./src/demux/demux-errors.js"),s=r("./src/core/media-info.js"),l=r("./src/utils/exception.js"),c=function(){function e(e,t){var r;this.TAG="FLVDemuxer",this._config=t,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null,this._dataOffset=e.dataOffset,this._firstParse=!0,this._dispatch=!1,this._hasAudio=e.hasAudioTrack,this._hasVideo=e.hasVideoTrack,this._hasAudioFlagOverrided=!1,this._hasVideoFlagOverrided=!1,this._audioInitialMetadataDispatched=!1,this._videoInitialMetadataDispatched=!1,this._mediaInfo=new s.default,this._mediaInfo.hasAudio=this._hasAudio,this._mediaInfo.hasVideo=this._hasVideo,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._naluLengthSize=4,this._timestampBase=0,this._timescale=1e3,this._duration=0,this._durationOverrided=!1,this._referenceFrameRate={fixed:!0,fps:23.976,fps_num:23976,fps_den:1e3},this._flvSoundRateTable=[5500,11025,22050,44100,48e3],this._mpegSamplingRates=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],this._mpegAudioV10SampleRateTable=[44100,48e3,32e3,0],this._mpegAudioV20SampleRateTable=[22050,24e3,16e3,0],this._mpegAudioV25SampleRateTable=[11025,12e3,8e3,0],this._mpegAudioL1BitRateTable=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],this._mpegAudioL2BitRateTable=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],this._mpegAudioL3BitRateTable=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],this._videoTrack={type:"video",id:1,sequenceNumber:0,samples:[],length:0},this._audioTrack={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},this._littleEndian=(r=new ArrayBuffer(2),new DataView(r).setInt16(0,256,!0),256===new Int16Array(r)[0])}return e.prototype.destroy=function(){this._mediaInfo=null,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._videoTrack=null,this._audioTrack=null,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null},e.probe=function(e){var t=new Uint8Array(e),r={match:!1};if(70!==t[0]||76!==t[1]||86!==t[2]||1!==t[3])return r;var n,o,i=(4&t[4])>>>2!=0,a=0!=(1&t[4]),s=(n=t)[o=5]<<24|n[o+1]<<16|n[o+2]<<8|n[o+3];return s<9?r:{match:!0,consumed:s,dataOffset:s,hasAudioTrack:i,hasVideoTrack:a}},e.prototype.bindDataSource=function(e){return e.onDataArrival=this.parseChunks.bind(this),this},Object.defineProperty(e.prototype,"onTrackMetadata",{get:function(){return this._onTrackMetadata},set:function(e){this._onTrackMetadata=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onMediaInfo",{get:function(){return this._onMediaInfo},set:function(e){this._onMediaInfo=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onMetaDataArrived",{get:function(){return this._onMetaDataArrived},set:function(e){this._onMetaDataArrived=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onScriptDataArrived",{get:function(){return this._onScriptDataArrived},set:function(e){this._onScriptDataArrived=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onError",{get:function(){return this._onError},set:function(e){this._onError=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onDataAvailable",{get:function(){return this._onDataAvailable},set:function(e){this._onDataAvailable=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timestampBase",{get:function(){return this._timestampBase},set:function(e){this._timestampBase=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overridedDuration",{get:function(){return this._duration},set:function(e){this._durationOverrided=!0,this._duration=e,this._mediaInfo.duration=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overridedHasAudio",{set:function(e){this._hasAudioFlagOverrided=!0,this._hasAudio=e,this._mediaInfo.hasAudio=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overridedHasVideo",{set:function(e){this._hasVideoFlagOverrided=!0,this._hasVideo=e,this._mediaInfo.hasVideo=e},enumerable:!1,configurable:!0}),e.prototype.resetMediaInfo=function(){this._mediaInfo=new s.default},e.prototype._isInitialMetadataDispatched=function(){return this._hasAudio&&this._hasVideo?this._audioInitialMetadataDispatched&&this._videoInitialMetadataDispatched:this._hasAudio&&!this._hasVideo?this._audioInitialMetadataDispatched:!(this._hasAudio||!this._hasVideo)&&this._videoInitialMetadataDispatched},e.prototype.parseChunks=function(t,r){if(!(this._onError&&this._onMediaInfo&&this._onTrackMetadata&&this._onDataAvailable))throw new l.IllegalStateException("Flv: onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");var o=0,i=this._littleEndian;if(0===r){if(!(t.byteLength>13))return 0;o=e.probe(t).dataOffset}for(this._firstParse&&(this._firstParse=!1,r+o!==this._dataOffset&&n.default.w(this.TAG,"First time parsing but chunk byteStart invalid!"),0!==(a=new DataView(t,o)).getUint32(0,!i)&&n.default.w(this.TAG,"PrevTagSize0 !== 0 !!!"),o+=4);o<t.byteLength;){this._dispatch=!0;var a=new DataView(t,o);if(o+11+4>t.byteLength)break;var s=a.getUint8(0),c=16777215&a.getUint32(0,!i);if(o+11+c+4>t.byteLength)break;if(8===s||9===s||18===s){var u=a.getUint8(4),d=a.getUint8(5),p=a.getUint8(6)|d<<8|u<<16|a.getUint8(7)<<24;0!=(16777215&a.getUint32(7,!i))&&n.default.w(this.TAG,"Meet tag which has StreamID != 0!");var f=o+11;switch(s){case 8:this._parseAudioData(t,f,c,p);break;case 9:this._parseVideoData(t,f,c,p,r+o);break;case 18:this._parseScriptData(t,f,c)}var h=a.getUint32(11+c,!i);h!==11+c&&n.default.w(this.TAG,"Invalid PrevTagSize "+h),o+=11+c+4}else n.default.w(this.TAG,"Unsupported tag type "+s+", skipped"),o+=11+c+4}return this._isInitialMetadataDispatched()&&this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack),o},e.prototype._parseScriptData=function(e,t,r){var i=o.default.parseScriptData(e,t,r);if(i.hasOwnProperty("onMetaData")){if(null==i.onMetaData||"object"!=typeof i.onMetaData)return void n.default.w(this.TAG,"Invalid onMetaData structure!");this._metadata&&n.default.w(this.TAG,"Found another onMetaData tag!"),this._metadata=i;var a=this._metadata.onMetaData;if(this._onMetaDataArrived&&this._onMetaDataArrived(Object.assign({},a)),"boolean"==typeof a.hasAudio&&!1===this._hasAudioFlagOverrided&&(this._hasAudio=a.hasAudio,this._mediaInfo.hasAudio=this._hasAudio),"boolean"==typeof a.hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=a.hasVideo,this._mediaInfo.hasVideo=this._hasVideo),"number"==typeof a.audiodatarate&&(this._mediaInfo.audioDataRate=a.audiodatarate),"number"==typeof a.videodatarate&&(this._mediaInfo.videoDataRate=a.videodatarate),"number"==typeof a.width&&(this._mediaInfo.width=a.width),"number"==typeof a.height&&(this._mediaInfo.height=a.height),"number"==typeof a.duration){if(!this._durationOverrided){var s=Math.floor(a.duration*this._timescale);this._duration=s,this._mediaInfo.duration=s}}else this._mediaInfo.duration=0;if("number"==typeof a.framerate){var l=Math.floor(1e3*a.framerate);if(l>0){var c=l/1e3;this._referenceFrameRate.fixed=!0,this._referenceFrameRate.fps=c,this._referenceFrameRate.fps_num=l,this._referenceFrameRate.fps_den=1e3,this._mediaInfo.fps=c}}if("object"==typeof a.keyframes){this._mediaInfo.hasKeyframesIndex=!0;var u=a.keyframes;this._mediaInfo.keyframesIndex=this._parseKeyframesIndex(u),a.keyframes=null}else this._mediaInfo.hasKeyframesIndex=!1;this._dispatch=!1,this._mediaInfo.metadata=a,n.default.v(this.TAG,"Parsed onMetaData"),this._mediaInfo.isComplete()&&this._onMediaInfo(this._mediaInfo)}Object.keys(i).length>0&&this._onScriptDataArrived&&this._onScriptDataArrived(Object.assign({},i))},e.prototype._parseKeyframesIndex=function(e){for(var t=[],r=[],n=1;n<e.times.length;n++){var o=this._timestampBase+Math.floor(1e3*e.times[n]);t.push(o),r.push(e.filepositions[n])}return{times:t,filepositions:r}},e.prototype._parseAudioData=function(e,t,r,o){if(r<=1)n.default.w(this.TAG,"Flv: Invalid audio packet, missing SoundData payload!");else if(!0!==this._hasAudioFlagOverrided||!1!==this._hasAudio){this._littleEndian;var i=new DataView(e,t,r).getUint8(0),s=i>>>4;if(2===s||10===s){var l=0,c=(12&i)>>>2;if(c>=0&&c<=4){l=this._flvSoundRateTable[c];var u=1&i,d=this._audioMetadata,p=this._audioTrack;if(d||(!1===this._hasAudio&&!1===this._hasAudioFlagOverrided&&(this._hasAudio=!0,this._mediaInfo.hasAudio=!0),(d=this._audioMetadata={}).type="audio",d.id=p.id,d.timescale=this._timescale,d.duration=this._duration,d.audioSampleRate=l,d.channelCount=0===u?1:2),10===s){var f=this._parseAACAudioData(e,t+1,r-1);if(null==f)return;if(0===f.packetType){d.config&&n.default.w(this.TAG,"Found another AudioSpecificConfig!");var h=f.data;d.audioSampleRate=h.samplingRate,d.channelCount=h.channelCount,d.codec=h.codec,d.originalCodec=h.originalCodec,d.config=h.config,d.refSampleDuration=1024/d.audioSampleRate*d.timescale,n.default.v(this.TAG,"Parsed AudioSpecificConfig"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("audio",d),(y=this._mediaInfo).audioCodec=d.originalCodec,y.audioSampleRate=d.audioSampleRate,y.audioChannelCount=d.channelCount,y.hasVideo?null!=y.videoCodec&&(y.mimeType='video/x-flv; codecs="'+y.videoCodec+","+y.audioCodec+'"'):y.mimeType='video/x-flv; codecs="'+y.audioCodec+'"',y.isComplete()&&this._onMediaInfo(y)}else if(1===f.packetType){var m=this._timestampBase+o,g={unit:f.data,length:f.data.byteLength,dts:m,pts:m};p.samples.push(g),p.length+=f.data.length}else n.default.e(this.TAG,"Flv: Unsupported AAC data type "+f.packetType)}else if(2===s){if(!d.codec){var y;if(null==(h=this._parseMP3AudioData(e,t+1,r-1,!0)))return;d.audioSampleRate=h.samplingRate,d.channelCount=h.channelCount,d.codec=h.codec,d.originalCodec=h.originalCodec,d.refSampleDuration=1152/d.audioSampleRate*d.timescale,n.default.v(this.TAG,"Parsed MPEG Audio Frame Header"),this._audioInitialMetadataDispatched=!0,this._onTrackMetadata("audio",d),(y=this._mediaInfo).audioCodec=d.codec,y.audioSampleRate=d.audioSampleRate,y.audioChannelCount=d.channelCount,y.audioDataRate=h.bitRate,y.hasVideo?null!=y.videoCodec&&(y.mimeType='video/x-flv; codecs="'+y.videoCodec+","+y.audioCodec+'"'):y.mimeType='video/x-flv; codecs="'+y.audioCodec+'"',y.isComplete()&&this._onMediaInfo(y)}var v=this._parseMP3AudioData(e,t+1,r-1,!1);if(null==v)return;m=this._timestampBase+o;var b={unit:v,length:v.byteLength,dts:m,pts:m};p.samples.push(b),p.length+=v.length}}else this._onError(a.default.FORMAT_ERROR,"Flv: Invalid audio sample rate idx: "+c)}else this._onError(a.default.CODEC_UNSUPPORTED,"Flv: Unsupported audio codec idx: "+s)}},e.prototype._parseAACAudioData=function(e,t,r){if(!(r<=1)){var o={},i=new Uint8Array(e,t,r);return o.packetType=i[0],0===i[0]?o.data=this._parseAACAudioSpecificConfig(e,t+1,r-1):o.data=i.subarray(1),o}n.default.w(this.TAG,"Flv: Invalid AAC packet, missing AACPacketType or/and Data!")},e.prototype._parseAACAudioSpecificConfig=function(e,t,r){var n,o,i=new Uint8Array(e,t,r),s=null,l=0,c=null;if(l=n=i[0]>>>3,(o=(7&i[0])<<1|i[1]>>>7)<0||o>=this._mpegSamplingRates.length)this._onError(a.default.FORMAT_ERROR,"Flv: AAC invalid sampling frequency index!");else{var u=this._mpegSamplingRates[o],d=(120&i[1])>>>3;if(!(d<0||d>=8)){5===l&&(c=(7&i[1])<<1|i[2]>>>7,i[2]);var p=self.navigator.userAgent.toLowerCase();return-1!==p.indexOf("firefox")?o>=6?(l=5,s=new Array(4),c=o-3):(l=2,s=new Array(2),c=o):-1!==p.indexOf("android")?(l=2,s=new Array(2),c=o):(l=5,c=o,s=new Array(4),o>=6?c=o-3:1===d&&(l=2,s=new Array(2),c=o)),s[0]=l<<3,s[0]|=(15&o)>>>1,s[1]=(15&o)<<7,s[1]|=(15&d)<<3,5===l&&(s[1]|=(15&c)>>>1,s[2]=(1&c)<<7,s[2]|=8,s[3]=0),{config:s,samplingRate:u,channelCount:d,codec:"mp4a.40."+l,originalCodec:"mp4a.40."+n}}this._onError(a.default.FORMAT_ERROR,"Flv: AAC invalid channel configuration")}},e.prototype._parseMP3AudioData=function(e,t,r,o){if(!(r<4)){this._littleEndian;var i=new Uint8Array(e,t,r),a=null;if(o){if(255!==i[0])return;var s=i[1]>>>3&3,l=(6&i[1])>>1,c=(240&i[2])>>>4,u=(12&i[2])>>>2,d=3!=(i[3]>>>6&3)?2:1,p=0,f=0;switch(s){case 0:p=this._mpegAudioV25SampleRateTable[u];break;case 2:p=this._mpegAudioV20SampleRateTable[u];break;case 3:p=this._mpegAudioV10SampleRateTable[u]}switch(l){case 1:c<this._mpegAudioL3BitRateTable.length&&(f=this._mpegAudioL3BitRateTable[c]);break;case 2:c<this._mpegAudioL2BitRateTable.length&&(f=this._mpegAudioL2BitRateTable[c]);break;case 3:c<this._mpegAudioL1BitRateTable.length&&(f=this._mpegAudioL1BitRateTable[c])}a={bitRate:f,samplingRate:p,channelCount:d,codec:"mp3",originalCodec:"mp3"}}else a=i;return a}n.default.w(this.TAG,"Flv: Invalid MP3 packet, header missing!")},e.prototype._parseVideoData=function(e,t,r,o,i){if(r<=1)n.default.w(this.TAG,"Flv: Invalid video packet, missing VideoData payload!");else if(!0!==this._hasVideoFlagOverrided||!1!==this._hasVideo){var s=new Uint8Array(e,t,r)[0],l=(240&s)>>>4,c=15&s;7===c?this._parseAVCVideoPacket(e,t+1,r-1,o,i,l):this._onError(a.default.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: "+c)}},e.prototype._parseAVCVideoPacket=function(e,t,r,o,i,s){if(r<4)n.default.w(this.TAG,"Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime");else{var l=this._littleEndian,c=new DataView(e,t,r),u=c.getUint8(0),d=(16777215&c.getUint32(0,!l))<<8>>8;if(0===u)this._parseAVCDecoderConfigurationRecord(e,t+4,r-4);else if(1===u)this._parseAVCVideoData(e,t+4,r-4,o,i,s,d);else if(2!==u)return void this._onError(a.default.FORMAT_ERROR,"Flv: Invalid video packet type "+u)}},e.prototype._parseAVCDecoderConfigurationRecord=function(e,t,r){if(r<7)n.default.w(this.TAG,"Flv: Invalid AVCDecoderConfigurationRecord, lack of data!");else{var o=this._videoMetadata,s=this._videoTrack,l=this._littleEndian,c=new DataView(e,t,r);o?void 0!==o.avcc&&n.default.w(this.TAG,"Found another AVCDecoderConfigurationRecord!"):(!1===this._hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),(o=this._videoMetadata={}).type="video",o.id=s.id,o.timescale=this._timescale,o.duration=this._duration);var u=c.getUint8(0),d=c.getUint8(1);if(c.getUint8(2),c.getUint8(3),1===u&&0!==d)if(this._naluLengthSize=1+(3&c.getUint8(4)),3===this._naluLengthSize||4===this._naluLengthSize){var p=31&c.getUint8(5);if(0!==p){p>1&&n.default.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: SPS Count = "+p);for(var f=6,h=0;h<p;h++){var m=c.getUint16(f,!l);if(f+=2,0!==m){var g=new Uint8Array(e,t+f,m);f+=m;var y=i.default.parseSPS(g);if(0===h){o.codecWidth=y.codec_size.width,o.codecHeight=y.codec_size.height,o.presentWidth=y.present_size.width,o.presentHeight=y.present_size.height,o.profile=y.profile_string,o.level=y.level_string,o.bitDepth=y.bit_depth,o.chromaFormat=y.chroma_format,o.sarRatio=y.sar_ratio,o.frameRate=y.frame_rate,!1!==y.frame_rate.fixed&&0!==y.frame_rate.fps_num&&0!==y.frame_rate.fps_den||(o.frameRate=this._referenceFrameRate);var v=o.frameRate.fps_den,b=o.frameRate.fps_num;o.refSampleDuration=o.timescale*(v/b);for(var _=g.subarray(1,4),S="avc1.",w=0;w<3;w++){var x=_[w].toString(16);x.length<2&&(x="0"+x),S+=x}o.codec=S;var E=this._mediaInfo;E.width=o.codecWidth,E.height=o.codecHeight,E.fps=o.frameRate.fps,E.profile=o.profile,E.level=o.level,E.refFrames=y.ref_frames,E.chromaFormat=y.chroma_format_string,E.sarNum=o.sarRatio.width,E.sarDen=o.sarRatio.height,E.videoCodec=S,E.hasAudio?null!=E.audioCodec&&(E.mimeType='video/x-flv; codecs="'+E.videoCodec+","+E.audioCodec+'"'):E.mimeType='video/x-flv; codecs="'+E.videoCodec+'"',E.isComplete()&&this._onMediaInfo(E)}}}var A=c.getUint8(f);if(0!==A){for(A>1&&n.default.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: PPS Count = "+A),f++,h=0;h<A;h++)m=c.getUint16(f,!l),f+=2,0!==m&&(f+=m);o.avcc=new Uint8Array(r),o.avcc.set(new Uint8Array(e,t,r),0),n.default.v(this.TAG,"Parsed AVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",o)}else this._onError(a.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No PPS")}else this._onError(a.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No SPS")}else this._onError(a.default.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: "+(this._naluLengthSize-1));else this._onError(a.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord")}},e.prototype._parseAVCVideoData=function(e,t,r,o,i,a,s){for(var l=this._littleEndian,c=new DataView(e,t,r),u=[],d=0,p=0,f=this._naluLengthSize,h=this._timestampBase+o,m=1===a;p<r;){if(p+4>=r){n.default.w(this.TAG,"Malformed Nalu near timestamp "+h+", offset = "+p+", dataSize = "+r);break}var g=c.getUint32(p,!l);if(3===f&&(g>>>=8),g>r-f)return void n.default.w(this.TAG,"Malformed Nalus near timestamp "+h+", NaluSize > DataSize!");var y=31&c.getUint8(p+f);5===y&&(m=!0);var v=new Uint8Array(e,t+p,f+g),b={type:y,data:v};u.push(b),d+=v.byteLength,p+=f+g}if(u.length){var _=this._videoTrack,S={units:u,length:d,isKeyframe:m,dts:h,cts:s,pts:h+s};m&&(S.fileposition=i),_.samples.push(S),_.length+=d}},e}();t.default=c},"./src/demux/sps-parser.js":function(e,t,r){r.r(t);var n=r("./src/demux/exp-golomb.js"),o=function(){function e(){}return e._ebsp2rbsp=function(e){for(var t=e,r=t.byteLength,n=new Uint8Array(r),o=0,i=0;i<r;i++)i>=2&&3===t[i]&&0===t[i-1]&&0===t[i-2]||(n[o]=t[i],o++);return new Uint8Array(n.buffer,0,o)},e.parseSPS=function(t){var r=e._ebsp2rbsp(t),o=new n.default(r);o.readByte();var i=o.readByte();o.readByte();var a=o.readByte();o.readUEG();var s=e.getProfileString(i),l=e.getLevelString(a),c=1,u=420,d=8;if((100===i||110===i||122===i||244===i||44===i||83===i||86===i||118===i||128===i||138===i||144===i)&&(3===(c=o.readUEG())&&o.readBits(1),c<=3&&(u=[0,420,422,444][c]),d=o.readUEG()+8,o.readUEG(),o.readBits(1),o.readBool()))for(var p=3!==c?8:12,f=0;f<p;f++)o.readBool()&&(f<6?e._skipScalingList(o,16):e._skipScalingList(o,64));o.readUEG();var h=o.readUEG();if(0===h)o.readUEG();else if(1===h){o.readBits(1),o.readSEG(),o.readSEG();var m=o.readUEG();for(f=0;f<m;f++)o.readSEG()}var g=o.readUEG();o.readBits(1);var y=o.readUEG(),v=o.readUEG(),b=o.readBits(1);0===b&&o.readBits(1),o.readBits(1);var _=0,S=0,w=0,x=0;o.readBool()&&(_=o.readUEG(),S=o.readUEG(),w=o.readUEG(),x=o.readUEG());var E=1,A=1,k=0,P=!0,T=0,C=0;if(o.readBool()){if(o.readBool()){var R=o.readByte();R>0&&R<16?(E=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][R-1],A=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][R-1]):255===R&&(E=o.readByte()<<8|o.readByte(),A=o.readByte()<<8|o.readByte())}if(o.readBool()&&o.readBool(),o.readBool()&&(o.readBits(4),o.readBool()&&o.readBits(24)),o.readBool()&&(o.readUEG(),o.readUEG()),o.readBool()){var O=o.readBits(32),I=o.readBits(32);P=o.readBool(),k=(T=I)/(C=2*O)}}var L=1;1===E&&1===A||(L=E/A);var D=0,j=0;0===c?(D=1,j=2-b):(D=3===c?1:2,j=(1===c?2:1)*(2-b));var M=16*(y+1),N=16*(v+1)*(2-b);M-=(_+S)*D,N-=(w+x)*j;var F=Math.ceil(M*L);return o.destroy(),o=null,{profile_string:s,level_string:l,bit_depth:d,ref_frames:g,chroma_format:u,chroma_format_string:e.getChromaFormatString(u),frame_rate:{fixed:P,fps:k,fps_den:C,fps_num:T},sar_ratio:{width:E,height:A},codec_size:{width:M,height:N},present_size:{width:F,height:N}}},e._skipScalingList=function(e,t){for(var r=8,n=8,o=0;o<t;o++)0!==n&&(n=(r+e.readSEG()+256)%256),r=0===n?r:n},e.getProfileString=function(e){switch(e){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}},e.getLevelString=function(e){return(e/10).toFixed(1)},e.getChromaFormatString=function(e){switch(e){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}},e}();t.default=o},"./src/flv.js":function(e,t,r){r.r(t);var n=r("./src/utils/polyfill.js"),o=r("./src/core/features.js"),i=r("./src/io/loader.js"),a=r("./src/player/flv-player.js"),s=r("./src/player/native-player.js"),l=r("./src/player/player-events.js"),c=r("./src/player/player-errors.js"),u=r("./src/utils/logging-control.js"),d=r("./src/utils/exception.js");n.default.install();var p={createPlayer:function(e,t){var r=e;if(null==r||"object"!=typeof r)throw new d.InvalidArgumentException("MediaDataSource must be an javascript object!");if(!r.hasOwnProperty("type"))throw new d.InvalidArgumentException("MediaDataSource must has type field to indicate video file type!");switch(r.type){case"flv":return new a.default(r,t);default:return new s.default(r,t)}},isSupported:function(){return o.default.supportMSEH264Playback()},getFeatureList:function(){return o.default.getFeatureList()}};p.BaseLoader=i.BaseLoader,p.LoaderStatus=i.LoaderStatus,p.LoaderErrors=i.LoaderErrors,p.Events=l.default,p.ErrorTypes=c.ErrorTypes,p.ErrorDetails=c.ErrorDetails,p.FlvPlayer=a.default,p.NativePlayer=s.default,p.LoggingControl=u.default,Object.defineProperty(p,"version",{enumerable:!0,get:function(){return"1.6.2"}}),t.default=p},"./src/index.js":function(e,t,r){e.exports=r("./src/flv.js").default},"./src/io/fetch-stream-loader.js":function(e,t,r){r.r(t);var n,o=r("./src/utils/browser.js"),i=r("./src/io/loader.js"),a=r("./src/utils/exception.js"),s=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),l=function(e){function t(t,r){var n=e.call(this,"fetch-stream-loader")||this;return n.TAG="FetchStreamLoader",n._seekHandler=t,n._config=r,n._needStash=!0,n._requestAbort=!1,n._contentLength=null,n._receivedLength=0,n}return s(t,e),t.isSupported=function(){try{var e=o.default.msedge&&o.default.version.minor>=15048,t=!o.default.msedge||e;return self.fetch&&self.ReadableStream&&t}catch(r){return!1}},t.prototype.destroy=function(){this.isWorking()&&this.abort(),e.prototype.destroy.call(this)},t.prototype.open=function(e,t){var r=this;this._dataSource=e,this._range=t;var n=e.url;this._config.reuseRedirectedURL&&null!=e.redirectedURL&&(n=e.redirectedURL);var o=this._seekHandler.getConfig(n,t),s=new self.Headers;if("object"==typeof o.headers){var l=o.headers;for(var c in l)l.hasOwnProperty(c)&&s.append(c,l[c])}var u={method:"GET",headers:s,mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};if("object"==typeof this._config.headers)for(var c in this._config.headers)s.append(c,this._config.headers[c]);!1===e.cors&&(u.mode="same-origin"),e.withCredentials&&(u.credentials="include"),e.referrerPolicy&&(u.referrerPolicy=e.referrerPolicy),self.AbortController&&(this._abortController=new self.AbortController,u.signal=this._abortController.signal),this._status=i.LoaderStatus.kConnecting,self.fetch(o.url,u).then((function(e){if(r._requestAbort)return r._status=i.LoaderStatus.kIdle,void e.body.cancel();if(e.ok&&e.status>=200&&e.status<=299){if(e.url!==o.url&&r._onURLRedirect){var t=r._seekHandler.removeURLParameters(e.url);r._onURLRedirect(t)}var n=e.headers.get("Content-Length");return null!=n&&(r._contentLength=parseInt(n),0!==r._contentLength&&r._onContentLengthKnown&&r._onContentLengthKnown(r._contentLength)),r._pump.call(r,e.body.getReader())}if(r._status=i.LoaderStatus.kError,!r._onError)throw new a.RuntimeException("FetchStreamLoader: Http code invalid, "+e.status+" "+e.statusText);r._onError(i.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:e.status,msg:e.statusText})})).catch((function(e){if(!r._abortController||!r._abortController.signal.aborted){if(r._status=i.LoaderStatus.kError,!r._onError)throw e;r._onError(i.LoaderErrors.EXCEPTION,{code:-1,msg:e.message})}}))},t.prototype.abort=function(){if(this._requestAbort=!0,(this._status!==i.LoaderStatus.kBuffering||!o.default.chrome)&&this._abortController)try{this._abortController.abort()}catch(e){}},t.prototype._pump=function(e){var t=this;return e.read().then((function(r){if(r.done)if(null!==t._contentLength&&t._receivedLength<t._contentLength){t._status=i.LoaderStatus.kError;var n=i.LoaderErrors.EARLY_EOF,o={code:-1,msg:"Fetch stream meet Early-EOF"};if(!t._onError)throw new a.RuntimeException(o.msg);t._onError(n,o)}else t._status=i.LoaderStatus.kComplete,t._onComplete&&t._onComplete(t._range.from,t._range.from+t._receivedLength-1);else{if(t._abortController&&t._abortController.signal.aborted)return void(t._status=i.LoaderStatus.kComplete);if(!0===t._requestAbort)return t._status=i.LoaderStatus.kComplete,e.cancel();t._status=i.LoaderStatus.kBuffering;var s=r.value.buffer,l=t._range.from+t._receivedLength;t._receivedLength+=s.byteLength,t._onDataArrival&&t._onDataArrival(s,l,t._receivedLength),t._pump(e)}})).catch((function(e){if(t._abortController&&t._abortController.signal.aborted)t._status=i.LoaderStatus.kComplete;else if(11!==e.code||!o.default.msedge){t._status=i.LoaderStatus.kError;var r=0,n=null;if(19!==e.code&&"network error"!==e.message||!(null===t._contentLength||null!==t._contentLength&&t._receivedLength<t._contentLength)?(r=i.LoaderErrors.EXCEPTION,n={code:e.code,msg:e.message}):(r=i.LoaderErrors.EARLY_EOF,n={code:e.code,msg:"Fetch stream meet Early-EOF"}),!t._onError)throw new a.RuntimeException(n.msg);t._onError(r,n)}}))},t}(i.BaseLoader);t.default=l},"./src/io/io-controller.js":function(e,t,r){r.r(t);var n=r("./src/utils/logger.js"),o=r("./src/io/speed-sampler.js"),i=r("./src/io/loader.js"),a=r("./src/io/fetch-stream-loader.js"),s=r("./src/io/xhr-moz-chunked-loader.js"),l=r("./src/io/xhr-range-loader.js"),c=r("./src/io/websocket-loader.js"),u=r("./src/io/range-seek-handler.js"),d=r("./src/io/param-seek-handler.js"),p=r("./src/utils/exception.js"),f=function(){function e(e,t,r){this.TAG="IOController",this._config=t,this._extraData=r,this._stashInitialSize=393216,null!=t.stashInitialSize&&t.stashInitialSize>0&&(this._stashInitialSize=t.stashInitialSize),this._stashUsed=0,this._stashSize=this._stashInitialSize,this._bufferSize=3145728,this._stashBuffer=new ArrayBuffer(this._bufferSize),this._stashByteStart=0,this._enableStash=!0,!1===t.enableStashBuffer&&(this._enableStash=!1),this._loader=null,this._loaderClass=null,this._seekHandler=null,this._dataSource=e,this._isWebSocketURL=/wss?:\/\/(.+?)/.test(e.url),this._refTotalLength=e.filesize?e.filesize:null,this._totalLength=this._refTotalLength,this._fullRequestFlag=!1,this._currentRange=null,this._redirectedURL=null,this._speedNormalized=0,this._speedSampler=new o.default,this._speedNormalizeList=[64,128,256,384,512,768,1024,1536,2048,3072,4096],this._isEarlyEofReconnecting=!1,this._paused=!1,this._resumeFrom=0,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._selectSeekHandler(),this._selectLoader(),this._createLoader()}return e.prototype.destroy=function(){this._loader.isWorking()&&this._loader.abort(),this._loader.destroy(),this._loader=null,this._loaderClass=null,this._dataSource=null,this._stashBuffer=null,this._stashUsed=this._stashSize=this._bufferSize=this._stashByteStart=0,this._currentRange=null,this._speedSampler=null,this._isEarlyEofReconnecting=!1,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._extraData=null},e.prototype.isWorking=function(){return this._loader&&this._loader.isWorking()&&!this._paused},e.prototype.isPaused=function(){return this._paused},Object.defineProperty(e.prototype,"status",{get:function(){return this._loader.status},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"extraData",{get:function(){return this._extraData},set:function(e){this._extraData=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(e){this._onDataArrival=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onSeeked",{get:function(){return this._onSeeked},set:function(e){this._onSeeked=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onError",{get:function(){return this._onError},set:function(e){this._onError=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onComplete",{get:function(){return this._onComplete},set:function(e){this._onComplete=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onRedirect",{get:function(){return this._onRedirect},set:function(e){this._onRedirect=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onRecoveredEarlyEof",{get:function(){return this._onRecoveredEarlyEof},set:function(e){this._onRecoveredEarlyEof=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentURL",{get:function(){return this._dataSource.url},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasRedirect",{get:function(){return null!=this._redirectedURL||null!=this._dataSource.redirectedURL},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentRedirectedURL",{get:function(){return this._redirectedURL||this._dataSource.redirectedURL},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentSpeed",{get:function(){return this._loaderClass===l.default?this._loader.currentSpeed:this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loaderType",{get:function(){return this._loader.type},enumerable:!1,configurable:!0}),e.prototype._selectSeekHandler=function(){var e=this._config;if("range"===e.seekType)this._seekHandler=new u.default(this._config.rangeLoadZeroStart);else if("param"===e.seekType){var t=e.seekParamStart||"bstart",r=e.seekParamEnd||"bend";this._seekHandler=new d.default(t,r)}else{if("custom"!==e.seekType)throw new p.InvalidArgumentException("Invalid seekType in config: "+e.seekType);if("function"!=typeof e.customSeekHandler)throw new p.InvalidArgumentException("Custom seekType specified in config but invalid customSeekHandler!");this._seekHandler=new e.customSeekHandler}},e.prototype._selectLoader=function(){if(null!=this._config.customLoader)this._loaderClass=this._config.customLoader;else if(this._isWebSocketURL)this._loaderClass=c.default;else if(a.default.isSupported())this._loaderClass=a.default;else if(s.default.isSupported())this._loaderClass=s.default;else{if(!l.default.isSupported())throw new p.RuntimeException("Your browser doesn't support xhr with arraybuffer responseType!");this._loaderClass=l.default}},e.prototype._createLoader=function(){this._loader=new this._loaderClass(this._seekHandler,this._config),!1===this._loader.needStashBuffer&&(this._enableStash=!1),this._loader.onContentLengthKnown=this._onContentLengthKnown.bind(this),this._loader.onURLRedirect=this._onURLRedirect.bind(this),this._loader.onDataArrival=this._onLoaderChunkArrival.bind(this),this._loader.onComplete=this._onLoaderComplete.bind(this),this._loader.onError=this._onLoaderError.bind(this)},e.prototype.open=function(e){this._currentRange={from:0,to:-1},e&&(this._currentRange.from=e),this._speedSampler.reset(),e||(this._fullRequestFlag=!0),this._loader.open(this._dataSource,Object.assign({},this._currentRange))},e.prototype.abort=function(){this._loader.abort(),this._paused&&(this._paused=!1,this._resumeFrom=0)},e.prototype.pause=function(){this.isWorking()&&(this._loader.abort(),0!==this._stashUsed?(this._resumeFrom=this._stashByteStart,this._currentRange.to=this._stashByteStart-1):this._resumeFrom=this._currentRange.to+1,this._stashUsed=0,this._stashByteStart=0,this._paused=!0)},e.prototype.resume=function(){if(this._paused){this._paused=!1;var e=this._resumeFrom;this._resumeFrom=0,this._internalSeek(e,!0)}},e.prototype.seek=function(e){this._paused=!1,this._stashUsed=0,this._stashByteStart=0,this._internalSeek(e,!0)},e.prototype._internalSeek=function(e,t){this._loader.isWorking()&&this._loader.abort(),this._flushStashBuffer(t),this._loader.destroy(),this._loader=null;var r={from:e,to:-1};this._currentRange={from:r.from,to:-1},this._speedSampler.reset(),this._stashSize=this._stashInitialSize,this._createLoader(),this._loader.open(this._dataSource,r),this._onSeeked&&this._onSeeked()},e.prototype.updateUrl=function(e){if(!e||"string"!=typeof e||0===e.length)throw new p.InvalidArgumentException("Url must be a non-empty string!");this._dataSource.url=e},e.prototype._expandBuffer=function(e){for(var t=this._stashSize;t+1048576<e;)t*=2;if((t+=1048576)!==this._bufferSize){var r=new ArrayBuffer(t);if(this._stashUsed>0){var n=new Uint8Array(this._stashBuffer,0,this._stashUsed);new Uint8Array(r,0,t).set(n,0)}this._stashBuffer=r,this._bufferSize=t}},e.prototype._normalizeSpeed=function(e){var t=this._speedNormalizeList,r=t.length-1,n=0,o=0,i=r;if(e<t[0])return t[0];for(;o<=i;){if((n=o+Math.floor((i-o)/2))===r||e>=t[n]&&e<t[n+1])return t[n];t[n]<e?o=n+1:i=n-1}},e.prototype._adjustStashSize=function(e){var t=0;(t=this._config.isLive||e<512?e:e>=512&&e<=1024?Math.floor(1.5*e):2*e)>8192&&(t=8192);var r=1024*t+1048576;this._bufferSize<r&&this._expandBuffer(r),this._stashSize=1024*t},e.prototype._dispatchChunks=function(e,t){return this._currentRange.to=t+e.byteLength-1,this._onDataArrival(e,t)},e.prototype._onURLRedirect=function(e){this._redirectedURL=e,this._onRedirect&&this._onRedirect(e)},e.prototype._onContentLengthKnown=function(e){e&&this._fullRequestFlag&&(this._totalLength=e,this._fullRequestFlag=!1)},e.prototype._onLoaderChunkArrival=function(e,t,r){if(!this._onDataArrival)throw new p.IllegalStateException("IOController: No existing consumer (onDataArrival) callback!");if(!this._paused){this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,this._onRecoveredEarlyEof&&this._onRecoveredEarlyEof()),this._speedSampler.addBytes(e.byteLength);var n=this._speedSampler.lastSecondKBps;if(0!==n){var o=this._normalizeSpeed(n);this._speedNormalized!==o&&(this._speedNormalized=o,this._adjustStashSize(o))}if(this._enableStash)if(0===this._stashUsed&&0===this._stashByteStart&&(this._stashByteStart=t),this._stashUsed+e.byteLength<=this._stashSize)(s=new Uint8Array(this._stashBuffer,0,this._stashSize)).set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength;else if(s=new Uint8Array(this._stashBuffer,0,this._bufferSize),this._stashUsed>0){var i=this._stashBuffer.slice(0,this._stashUsed);(l=this._dispatchChunks(i,this._stashByteStart))<i.byteLength?l>0&&(c=new Uint8Array(i,l),s.set(c,0),this._stashUsed=c.byteLength,this._stashByteStart+=l):(this._stashUsed=0,this._stashByteStart+=l),this._stashUsed+e.byteLength>this._bufferSize&&(this._expandBuffer(this._stashUsed+e.byteLength),s=new Uint8Array(this._stashBuffer,0,this._bufferSize)),s.set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength}else(l=this._dispatchChunks(e,t))<e.byteLength&&((a=e.byteLength-l)>this._bufferSize&&(this._expandBuffer(a),s=new Uint8Array(this._stashBuffer,0,this._bufferSize)),s.set(new Uint8Array(e,l),0),this._stashUsed+=a,this._stashByteStart=t+l);else if(0===this._stashUsed){var a;(l=this._dispatchChunks(e,t))<e.byteLength&&((a=e.byteLength-l)>this._bufferSize&&this._expandBuffer(a),(s=new Uint8Array(this._stashBuffer,0,this._bufferSize)).set(new Uint8Array(e,l),0),this._stashUsed+=a,this._stashByteStart=t+l)}else{var s,l;if(this._stashUsed+e.byteLength>this._bufferSize&&this._expandBuffer(this._stashUsed+e.byteLength),(s=new Uint8Array(this._stashBuffer,0,this._bufferSize)).set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength,(l=this._dispatchChunks(this._stashBuffer.slice(0,this._stashUsed),this._stashByteStart))<this._stashUsed&&l>0){var c=new Uint8Array(this._stashBuffer,l);s.set(c,0)}this._stashUsed-=l,this._stashByteStart+=l}}},e.prototype._flushStashBuffer=function(e){if(this._stashUsed>0){var t=this._stashBuffer.slice(0,this._stashUsed),r=this._dispatchChunks(t,this._stashByteStart),o=t.byteLength-r;if(r<t.byteLength){if(!e){if(r>0){var i=new Uint8Array(this._stashBuffer,0,this._bufferSize),a=new Uint8Array(t,r);i.set(a,0),this._stashUsed=a.byteLength,this._stashByteStart+=r}return 0}n.default.w(this.TAG,o+" bytes unconsumed data remain when flush buffer, dropped")}return this._stashUsed=0,this._stashByteStart=0,o}return 0},e.prototype._onLoaderComplete=function(e,t){this._flushStashBuffer(!0),this._onComplete&&this._onComplete(this._extraData)},e.prototype._onLoaderError=function(e,t){switch(n.default.e(this.TAG,"Loader error, code = "+t.code+", msg = "+t.msg),this._flushStashBuffer(!1),this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,e=i.LoaderErrors.UNRECOVERABLE_EARLY_EOF),e){case i.LoaderErrors.EARLY_EOF:if(!this._config.isLive&&this._totalLength){var r=this._currentRange.to+1;return void(r<this._totalLength&&(n.default.w(this.TAG,"Connection lost, trying reconnect..."),this._isEarlyEofReconnecting=!0,this._internalSeek(r,!1)))}e=i.LoaderErrors.UNRECOVERABLE_EARLY_EOF;break;case i.LoaderErrors.UNRECOVERABLE_EARLY_EOF:case i.LoaderErrors.CONNECTING_TIMEOUT:case i.LoaderErrors.HTTP_STATUS_CODE_INVALID:case i.LoaderErrors.EXCEPTION:}if(!this._onError)throw new p.RuntimeException("IOException: "+t.msg);this._onError(e,t)},e}();t.default=f},"./src/io/loader.js":function(e,t,r){r.r(t),r.d(t,{LoaderStatus:function(){return o},LoaderErrors:function(){return i},BaseLoader:function(){return a}});var n=r("./src/utils/exception.js"),o={kIdle:0,kConnecting:1,kBuffering:2,kError:3,kComplete:4},i={OK:"OK",EXCEPTION:"Exception",HTTP_STATUS_CODE_INVALID:"HttpStatusCodeInvalid",CONNECTING_TIMEOUT:"ConnectingTimeout",EARLY_EOF:"EarlyEof",UNRECOVERABLE_EARLY_EOF:"UnrecoverableEarlyEof"},a=function(){function e(e){this._type=e||"undefined",this._status=o.kIdle,this._needStash=!1,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}return e.prototype.destroy=function(){this._status=o.kIdle,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null},e.prototype.isWorking=function(){return this._status===o.kConnecting||this._status===o.kBuffering},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"needStashBuffer",{get:function(){return this._needStash},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onContentLengthKnown",{get:function(){return this._onContentLengthKnown},set:function(e){this._onContentLengthKnown=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onURLRedirect",{get:function(){return this._onURLRedirect},set:function(e){this._onURLRedirect=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(e){this._onDataArrival=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onError",{get:function(){return this._onError},set:function(e){this._onError=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onComplete",{get:function(){return this._onComplete},set:function(e){this._onComplete=e},enumerable:!1,configurable:!0}),e.prototype.open=function(e,t){throw new n.NotImplementedException("Unimplemented abstract function!")},e.prototype.abort=function(){throw new n.NotImplementedException("Unimplemented abstract function!")},e}()},"./src/io/param-seek-handler.js":function(e,t,r){r.r(t);var n=function(){function e(e,t){this._startName=e,this._endName=t}return e.prototype.getConfig=function(e,t){var r=e;if(0!==t.from||-1!==t.to){var n=!0;-1===r.indexOf("?")&&(r+="?",n=!1),n&&(r+="&"),r+=this._startName+"="+t.from.toString(),-1!==t.to&&(r+="&"+this._endName+"="+t.to.toString())}return{url:r,headers:{}}},e.prototype.removeURLParameters=function(e){var t=e.split("?")[0],r=void 0,n=e.indexOf("?");-1!==n&&(r=e.substring(n+1));var o="";if(null!=r&&r.length>0)for(var i=r.split("&"),a=0;a<i.length;a++){var s=i[a].split("="),l=a>0;s[0]!==this._startName&&s[0]!==this._endName&&(l&&(o+="&"),o+=i[a])}return 0===o.length?t:t+"?"+o},e}();t.default=n},"./src/io/range-seek-handler.js":function(e,t,r){r.r(t);var n=function(){function e(e){this._zeroStart=e||!1}return e.prototype.getConfig=function(e,t){var r={};if(0!==t.from||-1!==t.to){var n=void 0;n=-1!==t.to?"bytes="+t.from.toString()+"-"+t.to.toString():"bytes="+t.from.toString()+"-",r.Range=n}else this._zeroStart&&(r.Range="bytes=0-");return{url:e,headers:r}},e.prototype.removeURLParameters=function(e){return e},e}();t.default=n},"./src/io/speed-sampler.js":function(e,t,r){r.r(t);var n=function(){function e(){this._firstCheckpoint=0,this._lastCheckpoint=0,this._intervalBytes=0,this._totalBytes=0,this._lastSecondBytes=0,self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now}return e.prototype.reset=function(){this._firstCheckpoint=this._lastCheckpoint=0,this._totalBytes=this._intervalBytes=0,this._lastSecondBytes=0},e.prototype.addBytes=function(e){0===this._firstCheckpoint?(this._firstCheckpoint=this._now(),this._lastCheckpoint=this._firstCheckpoint,this._intervalBytes+=e,this._totalBytes+=e):this._now()-this._lastCheckpoint<1e3?(this._intervalBytes+=e,this._totalBytes+=e):(this._lastSecondBytes=this._intervalBytes,this._intervalBytes=e,this._totalBytes+=e,this._lastCheckpoint=this._now())},Object.defineProperty(e.prototype,"currentKBps",{get:function(){this.addBytes(0);var e=(this._now()-this._lastCheckpoint)/1e3;return 0==e&&(e=1),this._intervalBytes/e/1024},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastSecondKBps",{get:function(){return this.addBytes(0),0!==this._lastSecondBytes?this._lastSecondBytes/1024:this._now()-this._lastCheckpoint>=500?this.currentKBps:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"averageKBps",{get:function(){var e=(this._now()-this._firstCheckpoint)/1e3;return this._totalBytes/e/1024},enumerable:!1,configurable:!0}),e}();t.default=n},"./src/io/websocket-loader.js":function(e,t,r){r.r(t);var n,o=r("./src/io/loader.js"),i=r("./src/utils/exception.js"),a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e){function t(){var t=e.call(this,"websocket-loader")||this;return t.TAG="WebSocketLoader",t._needStash=!0,t._ws=null,t._requestAbort=!1,t._receivedLength=0,t}return a(t,e),t.isSupported=function(){try{return void 0!==self.WebSocket}catch(e){return!1}},t.prototype.destroy=function(){this._ws&&this.abort(),e.prototype.destroy.call(this)},t.prototype.open=function(e){try{var t=this._ws=new self.WebSocket(e.url);t.binaryType="arraybuffer",t.onopen=this._onWebSocketOpen.bind(this),t.onclose=this._onWebSocketClose.bind(this),t.onmessage=this._onWebSocketMessage.bind(this),t.onerror=this._onWebSocketError.bind(this),this._status=o.LoaderStatus.kConnecting}catch(n){this._status=o.LoaderStatus.kError;var r={code:n.code,msg:n.message};if(!this._onError)throw new i.RuntimeException(r.msg);this._onError(o.LoaderErrors.EXCEPTION,r)}},t.prototype.abort=function(){var e=this._ws;!e||0!==e.readyState&&1!==e.readyState||(this._requestAbort=!0,e.close()),this._ws=null,this._status=o.LoaderStatus.kComplete},t.prototype._onWebSocketOpen=function(e){this._status=o.LoaderStatus.kBuffering},t.prototype._onWebSocketClose=function(e){!0!==this._requestAbort?(this._status=o.LoaderStatus.kComplete,this._onComplete&&this._onComplete(0,this._receivedLength-1)):this._requestAbort=!1},t.prototype._onWebSocketMessage=function(e){var t=this;if(e.data instanceof ArrayBuffer)this._dispatchArrayBuffer(e.data);else if(e.data instanceof Blob){var r=new FileReader;r.onload=function(){t._dispatchArrayBuffer(r.result)},r.readAsArrayBuffer(e.data)}else{this._status=o.LoaderStatus.kError;var n={code:-1,msg:"Unsupported WebSocket message type: "+e.data.constructor.name};if(!this._onError)throw new i.RuntimeException(n.msg);this._onError(o.LoaderErrors.EXCEPTION,n)}},t.prototype._dispatchArrayBuffer=function(e){var t=e,r=this._receivedLength;this._receivedLength+=t.byteLength,this._onDataArrival&&this._onDataArrival(t,r,this._receivedLength)},t.prototype._onWebSocketError=function(e){this._status=o.LoaderStatus.kError;var t={code:e.code,msg:e.message};if(!this._onError)throw new i.RuntimeException(t.msg);this._onError(o.LoaderErrors.EXCEPTION,t)},t}(o.BaseLoader);t.default=s},"./src/io/xhr-moz-chunked-loader.js":function(e,t,r){r.r(t);var n,o=r("./src/utils/logger.js"),i=r("./src/io/loader.js"),a=r("./src/utils/exception.js"),s=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),l=function(e){function t(t,r){var n=e.call(this,"xhr-moz-chunked-loader")||this;return n.TAG="MozChunkedLoader",n._seekHandler=t,n._config=r,n._needStash=!0,n._xhr=null,n._requestAbort=!1,n._contentLength=null,n._receivedLength=0,n}return s(t,e),t.isSupported=function(){try{var e=new XMLHttpRequest;return e.open("GET","https://example.com",!0),e.responseType="moz-chunked-arraybuffer","moz-chunked-arraybuffer"===e.responseType}catch(t){return o.default.w("MozChunkedLoader",t.message),!1}},t.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onloadend=null,this._xhr.onerror=null,this._xhr=null),e.prototype.destroy.call(this)},t.prototype.open=function(e,t){this._dataSource=e,this._range=t;var r=e.url;this._config.reuseRedirectedURL&&null!=e.redirectedURL&&(r=e.redirectedURL);var n=this._seekHandler.getConfig(r,t);this._requestURL=n.url;var o=this._xhr=new XMLHttpRequest;if(o.open("GET",n.url,!0),o.responseType="moz-chunked-arraybuffer",o.onreadystatechange=this._onReadyStateChange.bind(this),o.onprogress=this._onProgress.bind(this),o.onloadend=this._onLoadEnd.bind(this),o.onerror=this._onXhrError.bind(this),e.withCredentials&&(o.withCredentials=!0),"object"==typeof n.headers){var a=n.headers;for(var s in a)a.hasOwnProperty(s)&&o.setRequestHeader(s,a[s])}if("object"==typeof this._config.headers)for(var s in a=this._config.headers)a.hasOwnProperty(s)&&o.setRequestHeader(s,a[s]);this._status=i.LoaderStatus.kConnecting,o.send()},t.prototype.abort=function(){this._requestAbort=!0,this._xhr&&this._xhr.abort(),this._status=i.LoaderStatus.kComplete},t.prototype._onReadyStateChange=function(e){var t=e.target;if(2===t.readyState){if(null!=t.responseURL&&t.responseURL!==this._requestURL&&this._onURLRedirect){var r=this._seekHandler.removeURLParameters(t.responseURL);this._onURLRedirect(r)}if(0!==t.status&&(t.status<200||t.status>299)){if(this._status=i.LoaderStatus.kError,!this._onError)throw new a.RuntimeException("MozChunkedLoader: Http code invalid, "+t.status+" "+t.statusText);this._onError(i.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:t.status,msg:t.statusText})}else this._status=i.LoaderStatus.kBuffering}},t.prototype._onProgress=function(e){if(this._status!==i.LoaderStatus.kError){null===this._contentLength&&null!==e.total&&0!==e.total&&(this._contentLength=e.total,this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength));var t=e.target.response,r=this._range.from+this._receivedLength;this._receivedLength+=t.byteLength,this._onDataArrival&&this._onDataArrival(t,r,this._receivedLength)}},t.prototype._onLoadEnd=function(e){!0!==this._requestAbort?this._status!==i.LoaderStatus.kError&&(this._status=i.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1)):this._requestAbort=!1},t.prototype._onXhrError=function(e){this._status=i.LoaderStatus.kError;var t=0,r=null;if(this._contentLength&&e.loaded<this._contentLength?(t=i.LoaderErrors.EARLY_EOF,r={code:-1,msg:"Moz-Chunked stream meet Early-Eof"}):(t=i.LoaderErrors.EXCEPTION,r={code:-1,msg:e.constructor.name+" "+e.type}),!this._onError)throw new a.RuntimeException(r.msg);this._onError(t,r)},t}(i.BaseLoader);t.default=l},"./src/io/xhr-range-loader.js":function(e,t,r){r.r(t);var n,o=r("./src/utils/logger.js"),i=r("./src/io/speed-sampler.js"),a=r("./src/io/loader.js"),s=r("./src/utils/exception.js"),l=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),c=function(e){function t(t,r){var n=e.call(this,"xhr-range-loader")||this;return n.TAG="RangeLoader",n._seekHandler=t,n._config=r,n._needStash=!1,n._chunkSizeKBList=[128,256,384,512,768,1024,1536,2048,3072,4096,5120,6144,7168,8192],n._currentChunkSizeKB=384,n._currentSpeedNormalized=0,n._zeroSpeedChunkCount=0,n._xhr=null,n._speedSampler=new i.default,n._requestAbort=!1,n._waitForTotalLength=!1,n._totalLengthReceived=!1,n._currentRequestURL=null,n._currentRedirectedURL=null,n._currentRequestRange=null,n._totalLength=null,n._contentLength=null,n._receivedLength=0,n._lastTimeLoaded=0,n}return l(t,e),t.isSupported=function(){try{var e=new XMLHttpRequest;return e.open("GET","https://example.com",!0),e.responseType="arraybuffer","arraybuffer"===e.responseType}catch(t){return o.default.w("RangeLoader",t.message),!1}},t.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr=null),e.prototype.destroy.call(this)},Object.defineProperty(t.prototype,"currentSpeed",{get:function(){return this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),t.prototype.open=function(e,t){this._dataSource=e,this._range=t,this._status=a.LoaderStatus.kConnecting;var r=!1;null!=this._dataSource.filesize&&0!==this._dataSource.filesize&&(r=!0,this._totalLength=this._dataSource.filesize),this._totalLengthReceived||r?this._openSubRange():(this._waitForTotalLength=!0,this._internalOpen(this._dataSource,{from:0,to:-1}))},t.prototype._openSubRange=function(){var e=1024*this._currentChunkSizeKB,t=this._range.from+this._receivedLength,r=t+e;null!=this._contentLength&&r-this._range.from>=this._contentLength&&(r=this._range.from+this._contentLength-1),this._currentRequestRange={from:t,to:r},this._internalOpen(this._dataSource,this._currentRequestRange)},t.prototype._internalOpen=function(e,t){this._lastTimeLoaded=0;var r=e.url;this._config.reuseRedirectedURL&&(null!=this._currentRedirectedURL?r=this._currentRedirectedURL:null!=e.redirectedURL&&(r=e.redirectedURL));var n=this._seekHandler.getConfig(r,t);this._currentRequestURL=n.url;var o=this._xhr=new XMLHttpRequest;if(o.open("GET",n.url,!0),o.responseType="arraybuffer",o.onreadystatechange=this._onReadyStateChange.bind(this),o.onprogress=this._onProgress.bind(this),o.onload=this._onLoad.bind(this),o.onerror=this._onXhrError.bind(this),e.withCredentials&&(o.withCredentials=!0),"object"==typeof n.headers){var i=n.headers;for(var a in i)i.hasOwnProperty(a)&&o.setRequestHeader(a,i[a])}if("object"==typeof this._config.headers)for(var a in i=this._config.headers)i.hasOwnProperty(a)&&o.setRequestHeader(a,i[a]);o.send()},t.prototype.abort=function(){this._requestAbort=!0,this._internalAbort(),this._status=a.LoaderStatus.kComplete},t.prototype._internalAbort=function(){this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr.abort(),this._xhr=null)},t.prototype._onReadyStateChange=function(e){var t=e.target;if(2===t.readyState){if(null!=t.responseURL){var r=this._seekHandler.removeURLParameters(t.responseURL);t.responseURL!==this._currentRequestURL&&r!==this._currentRedirectedURL&&(this._currentRedirectedURL=r,this._onURLRedirect&&this._onURLRedirect(r))}if(t.status>=200&&t.status<=299){if(this._waitForTotalLength)return;this._status=a.LoaderStatus.kBuffering}else{if(this._status=a.LoaderStatus.kError,!this._onError)throw new s.RuntimeException("RangeLoader: Http code invalid, "+t.status+" "+t.statusText);this._onError(a.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:t.status,msg:t.statusText})}}},t.prototype._onProgress=function(e){if(this._status!==a.LoaderStatus.kError){if(null===this._contentLength){var t=!1;if(this._waitForTotalLength){this._waitForTotalLength=!1,this._totalLengthReceived=!0,t=!0;var r=e.total;this._internalAbort(),null!=r&0!==r&&(this._totalLength=r)}if(-1===this._range.to?this._contentLength=this._totalLength-this._range.from:this._contentLength=this._range.to-this._range.from+1,t)return void this._openSubRange();this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength)}var n=e.loaded-this._lastTimeLoaded;this._lastTimeLoaded=e.loaded,this._speedSampler.addBytes(n)}},t.prototype._normalizeSpeed=function(e){var t=this._chunkSizeKBList,r=t.length-1,n=0,o=0,i=r;if(e<t[0])return t[0];for(;o<=i;){if((n=o+Math.floor((i-o)/2))===r||e>=t[n]&&e<t[n+1])return t[n];t[n]<e?o=n+1:i=n-1}},t.prototype._onLoad=function(e){if(this._status!==a.LoaderStatus.kError)if(this._waitForTotalLength)this._waitForTotalLength=!1;else{this._lastTimeLoaded=0;var t=this._speedSampler.lastSecondKBps;if(0===t&&(this._zeroSpeedChunkCount++,this._zeroSpeedChunkCount>=3&&(t=this._speedSampler.currentKBps)),0!==t){var r=this._normalizeSpeed(t);this._currentSpeedNormalized!==r&&(this._currentSpeedNormalized=r,this._currentChunkSizeKB=r)}var n=e.target.response,o=this._range.from+this._receivedLength;this._receivedLength+=n.byteLength;var i=!1;null!=this._contentLength&&this._receivedLength<this._contentLength?this._openSubRange():i=!0,this._onDataArrival&&this._onDataArrival(n,o,this._receivedLength),i&&(this._status=a.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1))}},t.prototype._onXhrError=function(e){this._status=a.LoaderStatus.kError;var t=0,r=null;if(this._contentLength&&this._receivedLength>0&&this._receivedLength<this._contentLength?(t=a.LoaderErrors.EARLY_EOF,r={code:-1,msg:"RangeLoader meet Early-Eof"}):(t=a.LoaderErrors.EXCEPTION,r={code:-1,msg:e.constructor.name+" "+e.type}),!this._onError)throw new s.RuntimeException(r.msg);this._onError(t,r)},t}(a.BaseLoader);t.default=c},"./src/player/flv-player.js":function(e,t,r){r.r(t);var n=r("./node_modules/events/events.js"),o=r.n(n),i=r("./src/utils/logger.js"),a=r("./src/utils/browser.js"),s=r("./src/player/player-events.js"),l=r("./src/core/transmuxer.js"),c=r("./src/core/transmuxing-events.js"),u=r("./src/core/mse-controller.js"),d=r("./src/core/mse-events.js"),p=r("./src/player/player-errors.js"),f=r("./src/config.js"),h=r("./src/utils/exception.js"),m=function(){function e(e,t){if(this.TAG="FlvPlayer",this._type="FlvPlayer",this._emitter=new(o()),this._config=(0,f.createDefaultConfig)(),"object"==typeof t&&Object.assign(this._config,t),"flv"!==e.type.toLowerCase())throw new h.InvalidArgumentException("FlvPlayer requires an flv MediaDataSource input!");!0===e.isLive&&(this._config.isLive=!0),this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this),onvSeeking:this._onvSeeking.bind(this),onvCanPlay:this._onvCanPlay.bind(this),onvStalled:this._onvStalled.bind(this),onvProgress:this._onvProgress.bind(this)},self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now,this._pendingSeekTime=null,this._requestSetTime=!1,this._seekpointRecord=null,this._progressChecker=null,this._mediaDataSource=e,this._mediaElement=null,this._msectl=null,this._transmuxer=null,this._mseSourceOpened=!1,this._hasPendingLoad=!1,this._receivedCanPlay=!1,this._mediaInfo=null,this._statisticsInfo=null;var r=a.default.chrome&&(a.default.version.major<50||50===a.default.version.major&&a.default.version.build<2661);this._alwaysSeekKeyframe=!!(r||a.default.msedge||a.default.msie),this._alwaysSeekKeyframe&&(this._config.accurateSeek=!1)}return e.prototype.destroy=function(){null!=this._progressChecker&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._transmuxer&&this.unload(),this._mediaElement&&this.detachMediaElement(),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},e.prototype.on=function(e,t){var r=this;e===s.default.MEDIA_INFO?null!=this._mediaInfo&&Promise.resolve().then((function(){r._emitter.emit(s.default.MEDIA_INFO,r.mediaInfo)})):e===s.default.STATISTICS_INFO&&null!=this._statisticsInfo&&Promise.resolve().then((function(){r._emitter.emit(s.default.STATISTICS_INFO,r.statisticsInfo)})),this._emitter.addListener(e,t)},e.prototype.off=function(e,t){this._emitter.removeListener(e,t)},e.prototype.attachMediaElement=function(e){var t=this;if(this._mediaElement=e,e.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),e.addEventListener("seeking",this.e.onvSeeking),e.addEventListener("canplay",this.e.onvCanPlay),e.addEventListener("stalled",this.e.onvStalled),e.addEventListener("progress",this.e.onvProgress),this._msectl=new u.default(this._config),this._msectl.on(d.default.UPDATE_END,this._onmseUpdateEnd.bind(this)),this._msectl.on(d.default.BUFFER_FULL,this._onmseBufferFull.bind(this)),this._msectl.on(d.default.SOURCE_OPEN,(function(){t._mseSourceOpened=!0,t._hasPendingLoad&&(t._hasPendingLoad=!1,t.load())})),this._msectl.on(d.default.ERROR,(function(e){t._emitter.emit(s.default.ERROR,p.ErrorTypes.MEDIA_ERROR,p.ErrorDetails.MEDIA_MSE_ERROR,e)})),this._msectl.attachMediaElement(e),null!=this._pendingSeekTime)try{e.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(r){}},e.prototype.detachMediaElement=function(){this._mediaElement&&(this._msectl.detachMediaElement(),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement.removeEventListener("seeking",this.e.onvSeeking),this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay),this._mediaElement.removeEventListener("stalled",this.e.onvStalled),this._mediaElement.removeEventListener("progress",this.e.onvProgress),this._mediaElement=null),this._msectl&&(this._msectl.destroy(),this._msectl=null)},e.prototype.load=function(){var e=this;if(!this._mediaElement)throw new h.IllegalStateException("HTMLMediaElement must be attached before load()!");if(this._transmuxer)throw new h.IllegalStateException("FlvPlayer.load() has been called, please call unload() first!");this._hasPendingLoad||(this._config.deferLoadAfterSourceOpen&&!1===this._mseSourceOpened?this._hasPendingLoad=!0:(this._mediaElement.readyState>0&&(this._requestSetTime=!0,this._mediaElement.currentTime=0),this._transmuxer=new l.default(this._mediaDataSource,this._config),this._transmuxer.on(c.default.INIT_SEGMENT,(function(t,r){e._msectl.appendInitSegment(r)})),this._transmuxer.on(c.default.MEDIA_SEGMENT,(function(t,r){if(e._msectl.appendMediaSegment(r),e._config.lazyLoad&&!e._config.isLive){var n=e._mediaElement.currentTime;r.info.endDts>=1e3*(n+e._config.lazyLoadMaxDuration)&&null==e._progressChecker&&(i.default.v(e.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),e._suspendTransmuxer())}})),this._transmuxer.on(c.default.LOADING_COMPLETE,(function(){e._msectl.endOfStream(),e._emitter.emit(s.default.LOADING_COMPLETE)})),this._transmuxer.on(c.default.RECOVERED_EARLY_EOF,(function(){e._emitter.emit(s.default.RECOVERED_EARLY_EOF)})),this._transmuxer.on(c.default.IO_ERROR,(function(t,r){e._emitter.emit(s.default.ERROR,p.ErrorTypes.NETWORK_ERROR,t,r)})),this._transmuxer.on(c.default.DEMUX_ERROR,(function(t,r){e._emitter.emit(s.default.ERROR,p.ErrorTypes.MEDIA_ERROR,t,{code:-1,msg:r})})),this._transmuxer.on(c.default.MEDIA_INFO,(function(t){e._mediaInfo=t,e._emitter.emit(s.default.MEDIA_INFO,Object.assign({},t))})),this._transmuxer.on(c.default.METADATA_ARRIVED,(function(t){e._emitter.emit(s.default.METADATA_ARRIVED,t)})),this._transmuxer.on(c.default.SCRIPTDATA_ARRIVED,(function(t){e._emitter.emit(s.default.SCRIPTDATA_ARRIVED,t)})),this._transmuxer.on(c.default.STATISTICS_INFO,(function(t){e._statisticsInfo=e._fillStatisticsInfo(t),e._emitter.emit(s.default.STATISTICS_INFO,Object.assign({},e._statisticsInfo))})),this._transmuxer.on(c.default.RECOMMEND_SEEKPOINT,(function(t){e._mediaElement&&!e._config.accurateSeek&&(e._requestSetTime=!0,e._mediaElement.currentTime=t/1e3)})),this._transmuxer.open()))},e.prototype.unload=function(){this._mediaElement&&this._mediaElement.pause(),this._msectl&&this._msectl.seek(0),this._transmuxer&&(this._transmuxer.close(),this._transmuxer.destroy(),this._transmuxer=null)},e.prototype.play=function(){return this._mediaElement.play()},e.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(e){this._mediaElement.volume=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(e){this._mediaElement.muted=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(e){this._mediaElement?this._internalSeek(e):this._pendingSeekTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mediaInfo",{get:function(){return Object.assign({},this._mediaInfo)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"statisticsInfo",{get:function(){return null==this._statisticsInfo&&(this._statisticsInfo={}),this._statisticsInfo=this._fillStatisticsInfo(this._statisticsInfo),Object.assign({},this._statisticsInfo)},enumerable:!1,configurable:!0}),e.prototype._fillStatisticsInfo=function(e){if(e.playerType=this._type,!(this._mediaElement instanceof HTMLVideoElement))return e;var t=!0,r=0,n=0;if(this._mediaElement.getVideoPlaybackQuality){var o=this._mediaElement.getVideoPlaybackQuality();r=o.totalVideoFrames,n=o.droppedVideoFrames}else null!=this._mediaElement.webkitDecodedFrameCount?(r=this._mediaElement.webkitDecodedFrameCount,n=this._mediaElement.webkitDroppedFrameCount):t=!1;return t&&(e.decodedFrames=r,e.droppedFrames=n),e},e.prototype._onmseUpdateEnd=function(){if(this._config.lazyLoad&&!this._config.isLive){for(var e=this._mediaElement.buffered,t=this._mediaElement.currentTime,r=0,n=0;n<e.length;n++){var o=e.start(n),a=e.end(n);if(o<=t&&t<a){r=a;break}}r>=t+this._config.lazyLoadMaxDuration&&null==this._progressChecker&&(i.default.v(this.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),this._suspendTransmuxer())}},e.prototype._onmseBufferFull=function(){i.default.v(this.TAG,"MSE SourceBuffer is full, suspend transmuxing task"),null==this._progressChecker&&this._suspendTransmuxer()},e.prototype._suspendTransmuxer=function(){this._transmuxer&&(this._transmuxer.pause(),null==this._progressChecker&&(this._progressChecker=window.setInterval(this._checkProgressAndResume.bind(this),1e3)))},e.prototype._checkProgressAndResume=function(){for(var e=this._mediaElement.currentTime,t=this._mediaElement.buffered,r=!1,n=0;n<t.length;n++){var o=t.start(n),a=t.end(n);if(e>=o&&e<a){e>=a-this._config.lazyLoadRecoverDuration&&(r=!0);break}}r&&(window.clearInterval(this._progressChecker),this._progressChecker=null,r&&(i.default.v(this.TAG,"Continue loading from paused position"),this._transmuxer.resume()))},e.prototype._isTimepointBuffered=function(e){for(var t=this._mediaElement.buffered,r=0;r<t.length;r++){var n=t.start(r),o=t.end(r);if(e>=n&&e<o)return!0}return!1},e.prototype._internalSeek=function(e){var t=this._isTimepointBuffered(e),r=!1,n=0;if(e<1&&this._mediaElement.buffered.length>0){var o=this._mediaElement.buffered.start(0);(o<1&&e<o||a.default.safari)&&(r=!0,n=a.default.safari?.1:o)}if(r)this._requestSetTime=!0,this._mediaElement.currentTime=n;else if(t){if(this._alwaysSeekKeyframe){var i=this._msectl.getNearestKeyframe(Math.floor(1e3*e));this._requestSetTime=!0,this._mediaElement.currentTime=null!=i?i.dts/1e3:e}else this._requestSetTime=!0,this._mediaElement.currentTime=e;null!=this._progressChecker&&this._checkProgressAndResume()}else null!=this._progressChecker&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._msectl.seek(e),this._transmuxer.seek(Math.floor(1e3*e)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=e)},e.prototype._checkAndApplyUnbufferedSeekpoint=function(){if(this._seekpointRecord)if(this._seekpointRecord.recordTime<=this._now()-100){var e=this._mediaElement.currentTime;this._seekpointRecord=null,this._isTimepointBuffered(e)||(null!=this._progressChecker&&(window.clearTimeout(this._progressChecker),this._progressChecker=null),this._msectl.seek(e),this._transmuxer.seek(Math.floor(1e3*e)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=e))}else window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)},e.prototype._checkAndResumeStuckPlayback=function(e){var t=this._mediaElement;if(e||!this._receivedCanPlay||t.readyState<2){var r=t.buffered;r.length>0&&t.currentTime<r.start(0)&&(i.default.w(this.TAG,"Playback seems stuck at "+t.currentTime+", seek to "+r.start(0)),this._requestSetTime=!0,this._mediaElement.currentTime=r.start(0),this._mediaElement.removeEventListener("progress",this.e.onvProgress))}else this._mediaElement.removeEventListener("progress",this.e.onvProgress)},e.prototype._onvLoadedMetadata=function(e){null!=this._pendingSeekTime&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null)},e.prototype._onvSeeking=function(e){var t=this._mediaElement.currentTime,r=this._mediaElement.buffered;if(this._requestSetTime)this._requestSetTime=!1;else{if(t<1&&r.length>0){var n=r.start(0);if(n<1&&t<n||a.default.safari)return this._requestSetTime=!0,void(this._mediaElement.currentTime=a.default.safari?.1:n)}if(this._isTimepointBuffered(t)){if(this._alwaysSeekKeyframe){var o=this._msectl.getNearestKeyframe(Math.floor(1e3*t));null!=o&&(this._requestSetTime=!0,this._mediaElement.currentTime=o.dts/1e3)}null!=this._progressChecker&&this._checkProgressAndResume()}else this._seekpointRecord={seekPoint:t,recordTime:this._now()},window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)}},e.prototype._onvCanPlay=function(e){this._receivedCanPlay=!0,this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay)},e.prototype._onvStalled=function(e){this._checkAndResumeStuckPlayback(!0)},e.prototype._onvProgress=function(e){this._checkAndResumeStuckPlayback()},e}();t.default=m},"./src/player/native-player.js":function(e,t,r){r.r(t);var n=r("./node_modules/events/events.js"),o=r.n(n),i=r("./src/player/player-events.js"),a=r("./src/config.js"),s=r("./src/utils/exception.js"),l=function(){function e(e,t){if(this.TAG="NativePlayer",this._type="NativePlayer",this._emitter=new(o()),this._config=(0,a.createDefaultConfig)(),"object"==typeof t&&Object.assign(this._config,t),"flv"===e.type.toLowerCase())throw new s.InvalidArgumentException("NativePlayer does't support flv MediaDataSource input!");if(e.hasOwnProperty("segments"))throw new s.InvalidArgumentException("NativePlayer("+e.type+") doesn't support multipart playback!");this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this)},this._pendingSeekTime=null,this._statisticsReporter=null,this._mediaDataSource=e,this._mediaElement=null}return e.prototype.destroy=function(){this._mediaElement&&(this.unload(),this.detachMediaElement()),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},e.prototype.on=function(e,t){var r=this;e===i.default.MEDIA_INFO?null!=this._mediaElement&&0!==this._mediaElement.readyState&&Promise.resolve().then((function(){r._emitter.emit(i.default.MEDIA_INFO,r.mediaInfo)})):e===i.default.STATISTICS_INFO&&null!=this._mediaElement&&0!==this._mediaElement.readyState&&Promise.resolve().then((function(){r._emitter.emit(i.default.STATISTICS_INFO,r.statisticsInfo)})),this._emitter.addListener(e,t)},e.prototype.off=function(e,t){this._emitter.removeListener(e,t)},e.prototype.attachMediaElement=function(e){if(this._mediaElement=e,e.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),null!=this._pendingSeekTime)try{e.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(t){}},e.prototype.detachMediaElement=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement=null),null!=this._statisticsReporter&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},e.prototype.load=function(){if(!this._mediaElement)throw new s.IllegalStateException("HTMLMediaElement must be attached before load()!");this._mediaElement.src=this._mediaDataSource.url,this._mediaElement.readyState>0&&(this._mediaElement.currentTime=0),this._mediaElement.preload="auto",this._mediaElement.load(),this._statisticsReporter=window.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval)},e.prototype.unload=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src")),null!=this._statisticsReporter&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},e.prototype.play=function(){return this._mediaElement.play()},e.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(e){this._mediaElement.volume=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(e){this._mediaElement.muted=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(e){this._mediaElement?this._mediaElement.currentTime=e:this._pendingSeekTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mediaInfo",{get:function(){var e={mimeType:(this._mediaElement instanceof HTMLAudioElement?"audio/":"video/")+this._mediaDataSource.type};return this._mediaElement&&(e.duration=Math.floor(1e3*this._mediaElement.duration),this._mediaElement instanceof HTMLVideoElement&&(e.width=this._mediaElement.videoWidth,e.height=this._mediaElement.videoHeight)),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"statisticsInfo",{get:function(){var e={playerType:this._type,url:this._mediaDataSource.url};if(!(this._mediaElement instanceof HTMLVideoElement))return e;var t=!0,r=0,n=0;if(this._mediaElement.getVideoPlaybackQuality){var o=this._mediaElement.getVideoPlaybackQuality();r=o.totalVideoFrames,n=o.droppedVideoFrames}else null!=this._mediaElement.webkitDecodedFrameCount?(r=this._mediaElement.webkitDecodedFrameCount,n=this._mediaElement.webkitDroppedFrameCount):t=!1;return t&&(e.decodedFrames=r,e.droppedFrames=n),e},enumerable:!1,configurable:!0}),e.prototype._onvLoadedMetadata=function(e){null!=this._pendingSeekTime&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null),this._emitter.emit(i.default.MEDIA_INFO,this.mediaInfo)},e.prototype._reportStatisticsInfo=function(){this._emitter.emit(i.default.STATISTICS_INFO,this.statisticsInfo)},e}();t.default=l},"./src/player/player-errors.js":function(e,t,r){r.r(t),r.d(t,{ErrorTypes:function(){return i},ErrorDetails:function(){return a}});var n=r("./src/io/loader.js"),o=r("./src/demux/demux-errors.js"),i={NETWORK_ERROR:"NetworkError",MEDIA_ERROR:"MediaError",OTHER_ERROR:"OtherError"},a={NETWORK_EXCEPTION:n.LoaderErrors.EXCEPTION,NETWORK_STATUS_CODE_INVALID:n.LoaderErrors.HTTP_STATUS_CODE_INVALID,NETWORK_TIMEOUT:n.LoaderErrors.CONNECTING_TIMEOUT,NETWORK_UNRECOVERABLE_EARLY_EOF:n.LoaderErrors.UNRECOVERABLE_EARLY_EOF,MEDIA_MSE_ERROR:"MediaMSEError",MEDIA_FORMAT_ERROR:o.default.FORMAT_ERROR,MEDIA_FORMAT_UNSUPPORTED:o.default.FORMAT_UNSUPPORTED,MEDIA_CODEC_UNSUPPORTED:o.default.CODEC_UNSUPPORTED}},"./src/player/player-events.js":function(e,t,r){r.r(t),t.default={ERROR:"error",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",STATISTICS_INFO:"statistics_info"}},"./src/remux/aac-silent.js":function(e,t,r){r.r(t);var n=function(){function e(){}return e.getSilentFrame=function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}();t.default=n},"./src/remux/mp4-generator.js":function(e,t,r){r.r(t);var n=function(){function e(){}return e.init=function(){for(var t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],".mp3":[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var r=e.constants={};r.FTYP=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),r.STSD_PREFIX=new Uint8Array([0,0,0,0,0,0,0,1]),r.STTS=new Uint8Array([0,0,0,0,0,0,0,0]),r.STSC=r.STCO=r.STTS,r.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),r.HDLR_VIDEO=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r.HDLR_AUDIO=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),r.DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),r.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),r.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])},e.box=function(e){for(var t=8,r=null,n=Array.prototype.slice.call(arguments,1),o=n.length,i=0;i<o;i++)t+=n[i].byteLength;(r=new Uint8Array(t))[0]=t>>>24&255,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r.set(e,4);var a=8;for(i=0;i<o;i++)r.set(n[i],a),a+=n[i].byteLength;return r},e.generateInitSegment=function(t){var r=e.box(e.types.ftyp,e.constants.FTYP),n=e.moov(t),o=new Uint8Array(r.byteLength+n.byteLength);return o.set(r,0),o.set(n,r.byteLength),o},e.moov=function(t){var r=e.mvhd(t.timescale,t.duration),n=e.trak(t),o=e.mvex(t);return e.box(e.types.moov,r,n,o)},e.mvhd=function(t,r){return e.box(e.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,r>>>24&255,r>>>16&255,r>>>8&255,255&r,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))},e.trak=function(t){return e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.tkhd=function(t){var r=t.id,n=t.duration,o=t.presentWidth,i=t.presentHeight;return e.box(e.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,r>>>24&255,r>>>16&255,r>>>8&255,255&r,0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,o>>>8&255,255&o,0,0,i>>>8&255,255&i,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t),e.hdlr(t),e.minf(t))},e.mdhd=function(t){var r=t.timescale,n=t.duration;return e.box(e.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,r>>>24&255,r>>>16&255,r>>>8&255,255&r,n>>>24&255,n>>>16&255,n>>>8&255,255&n,85,196,0,0]))},e.hdlr=function(t){var r=null;return r="audio"===t.type?e.constants.HDLR_AUDIO:e.constants.HDLR_VIDEO,e.box(e.types.hdlr,r)},e.minf=function(t){var r=null;return r="audio"===t.type?e.box(e.types.smhd,e.constants.SMHD):e.box(e.types.vmhd,e.constants.VMHD),e.box(e.types.minf,r,e.dinf(),e.stbl(t))},e.dinf=function(){return e.box(e.types.dinf,e.box(e.types.dref,e.constants.DREF))},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.constants.STTS),e.box(e.types.stsc,e.constants.STSC),e.box(e.types.stsz,e.constants.STSZ),e.box(e.types.stco,e.constants.STCO))},e.stsd=function(t){return"audio"===t.type?"mp3"===t.codec?e.box(e.types.stsd,e.constants.STSD_PREFIX,e.mp3(t)):e.box(e.types.stsd,e.constants.STSD_PREFIX,e.mp4a(t)):e.box(e.types.stsd,e.constants.STSD_PREFIX,e.avc1(t))},e.mp3=function(t){var r=t.channelCount,n=t.audioSampleRate,o=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,r,0,16,0,0,0,0,n>>>8&255,255&n,0,0]);return e.box(e.types[".mp3"],o)},e.mp4a=function(t){var r=t.channelCount,n=t.audioSampleRate,o=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,r,0,16,0,0,0,0,n>>>8&255,255&n,0,0]);return e.box(e.types.mp4a,o,e.esds(t))},e.esds=function(t){var r=t.config||[],n=r.length,o=new Uint8Array([0,0,0,0,3,23+n,0,1,0,4,15+n,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([n]).concat(r).concat([6,1,2]));return e.box(e.types.esds,o)},e.avc1=function(t){var r=t.avcc,n=t.codecWidth,o=t.codecHeight,i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,n>>>8&255,255&n,o>>>8&255,255&o,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return e.box(e.types.avc1,i,e.box(e.types.avcC,r))},e.mvex=function(t){return e.box(e.types.mvex,e.trex(t))},e.trex=function(t){var r=t.id,n=new Uint8Array([0,0,0,0,r>>>24&255,r>>>16&255,r>>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return e.box(e.types.trex,n)},e.moof=function(t,r){return e.box(e.types.moof,e.mfhd(t.sequenceNumber),e.traf(t,r))},e.mfhd=function(t){var r=new Uint8Array([0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t]);return e.box(e.types.mfhd,r)},e.traf=function(t,r){var n=t.id,o=e.box(e.types.tfhd,new Uint8Array([0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n])),i=e.box(e.types.tfdt,new Uint8Array([0,0,0,0,r>>>24&255,r>>>16&255,r>>>8&255,255&r])),a=e.sdtp(t),s=e.trun(t,a.byteLength+16+16+8+16+8+8);return e.box(e.types.traf,o,i,s,a)},e.sdtp=function(t){for(var r=t.samples||[],n=r.length,o=new Uint8Array(4+n),i=0;i<n;i++){var a=r[i].flags;o[i+4]=a.isLeading<<6|a.dependsOn<<4|a.isDependedOn<<2|a.hasRedundancy}return e.box(e.types.sdtp,o)},e.trun=function(t,r){var n=t.samples||[],o=n.length,i=12+16*o,a=new Uint8Array(i);r+=8+i,a.set([0,0,15,1,o>>>24&255,o>>>16&255,o>>>8&255,255&o,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0);for(var s=0;s<o;s++){var l=n[s].duration,c=n[s].size,u=n[s].flags,d=n[s].cts;a.set([l>>>24&255,l>>>16&255,l>>>8&255,255&l,c>>>24&255,c>>>16&255,c>>>8&255,255&c,u.isLeading<<2|u.dependsOn,u.isDependedOn<<6|u.hasRedundancy<<4|u.isNonSync,0,0,d>>>24&255,d>>>16&255,d>>>8&255,255&d],12+16*s)}return e.box(e.types.trun,a)},e.mdat=function(t){return e.box(e.types.mdat,t)},e}();n.init(),t.default=n},"./src/remux/mp4-remuxer.js":function(e,t,r){r.r(t);var n=r("./src/utils/logger.js"),o=r("./src/remux/mp4-generator.js"),i=r("./src/remux/aac-silent.js"),a=r("./src/utils/browser.js"),s=r("./src/core/media-segment-info.js"),l=r("./src/utils/exception.js"),c=function(){function e(e){this.TAG="MP4Remuxer",this._config=e,this._isLive=!0===e.isLive,this._dtsBase=-1,this._dtsBaseInited=!1,this._audioDtsBase=1/0,this._videoDtsBase=1/0,this._audioNextDts=void 0,this._videoNextDts=void 0,this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList=new s.MediaSegmentInfoList("audio"),this._videoSegmentInfoList=new s.MediaSegmentInfoList("video"),this._onInitSegment=null,this._onMediaSegment=null,this._forceFirstIDR=!(!a.default.chrome||!(a.default.version.major<50||50===a.default.version.major&&a.default.version.build<2661)),this._fillSilentAfterSeek=a.default.msedge||a.default.msie,this._mp3UseMpegAudio=!a.default.firefox,this._fillAudioTimestampGap=this._config.fixAudioTimestampGap}return e.prototype.destroy=function(){this._dtsBase=-1,this._dtsBaseInited=!1,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList.clear(),this._audioSegmentInfoList=null,this._videoSegmentInfoList.clear(),this._videoSegmentInfoList=null,this._onInitSegment=null,this._onMediaSegment=null},e.prototype.bindDataSource=function(e){return e.onDataAvailable=this.remux.bind(this),e.onTrackMetadata=this._onTrackMetadataReceived.bind(this),this},Object.defineProperty(e.prototype,"onInitSegment",{get:function(){return this._onInitSegment},set:function(e){this._onInitSegment=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onMediaSegment",{get:function(){return this._onMediaSegment},set:function(e){this._onMediaSegment=e},enumerable:!1,configurable:!0}),e.prototype.insertDiscontinuity=function(){this._audioNextDts=this._videoNextDts=void 0},e.prototype.seek=function(e){this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._videoSegmentInfoList.clear(),this._audioSegmentInfoList.clear()},e.prototype.remux=function(e,t){if(!this._onMediaSegment)throw new l.IllegalStateException("MP4Remuxer: onMediaSegment callback must be specificed!");this._dtsBaseInited||this._calculateDtsBase(e,t),this._remuxVideo(t),this._remuxAudio(e)},e.prototype._onTrackMetadataReceived=function(e,t){var r=null,n="mp4",i=t.codec;if("audio"===e)this._audioMeta=t,"mp3"===t.codec&&this._mp3UseMpegAudio?(n="mpeg",i="",r=new Uint8Array):r=o.default.generateInitSegment(t);else{if("video"!==e)return;this._videoMeta=t,r=o.default.generateInitSegment(t)}if(!this._onInitSegment)throw new l.IllegalStateException("MP4Remuxer: onInitSegment callback must be specified!");this._onInitSegment(e,{type:e,data:r.buffer,codec:i,container:e+"/"+n,mediaDuration:t.duration})},e.prototype._calculateDtsBase=function(e,t){this._dtsBaseInited||(e.samples&&e.samples.length&&(this._audioDtsBase=e.samples[0].dts),t.samples&&t.samples.length&&(this._videoDtsBase=t.samples[0].dts),this._dtsBase=Math.min(this._audioDtsBase,this._videoDtsBase),this._dtsBaseInited=!0)},e.prototype.flushStashedSamples=function(){var e=this._videoStashedLastSample,t=this._audioStashedLastSample,r={type:"video",id:1,sequenceNumber:0,samples:[],length:0};null!=e&&(r.samples.push(e),r.length=e.length);var n={type:"audio",id:2,sequenceNumber:0,samples:[],length:0};null!=t&&(n.samples.push(t),n.length=t.length),this._videoStashedLastSample=null,this._audioStashedLastSample=null,this._remuxVideo(r,!0),this._remuxAudio(n,!0)},e.prototype._remuxAudio=function(e,t){if(null!=this._audioMeta){var r,l=e,c=l.samples,u=void 0,d=-1,p=this._audioMeta.refSampleDuration,f="mp3"===this._audioMeta.codec&&this._mp3UseMpegAudio,h=this._dtsBaseInited&&void 0===this._audioNextDts,m=!1;if(c&&0!==c.length&&(1!==c.length||t)){var g=0,y=null,v=0;f?(g=0,v=l.length):(g=8,v=8+l.length);var b=null;if(c.length>1&&(v-=(b=c.pop()).length),null!=this._audioStashedLastSample){var _=this._audioStashedLastSample;this._audioStashedLastSample=null,c.unshift(_),v+=_.length}null!=b&&(this._audioStashedLastSample=b);var S=c[0].dts-this._dtsBase;if(this._audioNextDts)u=S-this._audioNextDts;else if(this._audioSegmentInfoList.isEmpty())u=0,this._fillSilentAfterSeek&&!this._videoSegmentInfoList.isEmpty()&&"mp3"!==this._audioMeta.originalCodec&&(m=!0);else{var w=this._audioSegmentInfoList.getLastSampleBefore(S);if(null!=w){var x=S-(w.originalDts+w.duration);x<=3&&(x=0),u=S-(w.dts+w.duration+x)}else u=0}if(m){var E=S-u,A=this._videoSegmentInfoList.getLastSegmentBefore(S);if(null!=A&&A.beginDts<E){if(M=i.default.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount)){var k=A.beginDts,P=E-A.beginDts;n.default.v(this.TAG,"InsertPrefixSilentAudio: dts: "+k+", duration: "+P),c.unshift({unit:M,dts:k,pts:k}),v+=M.byteLength}}else m=!1}for(var T=[],C=0;C<c.length;C++){var R=(_=c[C]).unit,O=_.dts-this._dtsBase,I=(k=O,!1),L=null,D=0;if(!(O<-.001)){if("mp3"!==this._audioMeta.codec){var j=O;if(this._audioNextDts&&(j=this._audioNextDts),(u=O-j)<=-3*p){n.default.w(this.TAG,"Dropping 1 audio frame (originalDts: "+O+" ms ,curRefDts: "+j+" ms)  due to dtsCorrection: "+u+" ms overlap.");continue}if(u>=3*p&&this._fillAudioTimestampGap&&!a.default.safari){I=!0;var M,N=Math.floor(u/p);n.default.w(this.TAG,"Large audio timestamp gap detected, may cause AV sync to drift. Silent frames will be generated to avoid unsync.\noriginalDts: "+O+" ms, curRefDts: "+j+" ms, dtsCorrection: "+Math.round(u)+" ms, generate: "+N+" frames"),k=Math.floor(j),D=Math.floor(j+p)-k,null==(M=i.default.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount))&&(n.default.w(this.TAG,"Unable to generate silent frame for "+this._audioMeta.originalCodec+" with "+this._audioMeta.channelCount+" channels, repeat last frame"),M=R),L=[];for(var F=0;F<N;F++){j+=p;var $=Math.floor(j),B=Math.floor(j+p)-$,U={dts:$,pts:$,cts:0,unit:M,size:M.byteLength,duration:B,originalDts:O,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}};L.push(U),v+=U.size}this._audioNextDts=j+p}else k=Math.floor(j),D=Math.floor(j+p)-k,this._audioNextDts=j+p}else k=O-u,D=C!==c.length-1?c[C+1].dts-this._dtsBase-u-k:null!=b?b.dts-this._dtsBase-u-k:T.length>=1?T[T.length-1].duration:Math.floor(p),this._audioNextDts=k+D;-1===d&&(d=k),T.push({dts:k,pts:k,cts:0,unit:_.unit,size:_.unit.byteLength,duration:D,originalDts:O,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}}),I&&T.push.apply(T,L)}}if(0===T.length)return l.samples=[],void(l.length=0);for(f?y=new Uint8Array(v):((y=new Uint8Array(v))[0]=v>>>24&255,y[1]=v>>>16&255,y[2]=v>>>8&255,y[3]=255&v,y.set(o.default.types.mdat,4)),C=0;C<T.length;C++)R=T[C].unit,y.set(R,g),g+=R.byteLength;var z=T[T.length-1];r=z.dts+z.duration;var q=new s.MediaSegmentInfo;q.beginDts=d,q.endDts=r,q.beginPts=d,q.endPts=r,q.originalBeginDts=T[0].originalDts,q.originalEndDts=z.originalDts+z.duration,q.firstSample=new s.SampleInfo(T[0].dts,T[0].pts,T[0].duration,T[0].originalDts,!1),q.lastSample=new s.SampleInfo(z.dts,z.pts,z.duration,z.originalDts,!1),this._isLive||this._audioSegmentInfoList.append(q),l.samples=T,l.sequenceNumber++;var W=null;W=f?new Uint8Array:o.default.moof(l,d),l.samples=[],l.length=0;var V={type:"audio",data:this._mergeBoxes(W,y).buffer,sampleCount:T.length,info:q};f&&h&&(V.timestampOffset=d),this._onMediaSegment("audio",V)}}},e.prototype._remuxVideo=function(e,t){if(null!=this._videoMeta){var r,n,i=e,a=i.samples,l=void 0,c=-1,u=-1;if(a&&0!==a.length&&(1!==a.length||t)){var d=8,p=null,f=8+e.length,h=null;if(a.length>1&&(f-=(h=a.pop()).length),null!=this._videoStashedLastSample){var m=this._videoStashedLastSample;this._videoStashedLastSample=null,a.unshift(m),f+=m.length}null!=h&&(this._videoStashedLastSample=h);var g=a[0].dts-this._dtsBase;if(this._videoNextDts)l=g-this._videoNextDts;else if(this._videoSegmentInfoList.isEmpty())l=0;else{var y=this._videoSegmentInfoList.getLastSampleBefore(g);if(null!=y){var v=g-(y.originalDts+y.duration);v<=3&&(v=0),l=g-(y.dts+y.duration+v)}else l=0}for(var b=new s.MediaSegmentInfo,_=[],S=0;S<a.length;S++){var w=(m=a[S]).dts-this._dtsBase,x=m.isKeyframe,E=w-l,A=m.cts,k=E+A;-1===c&&(c=E,u=k);var P=0;if(P=S!==a.length-1?a[S+1].dts-this._dtsBase-l-E:null!=h?h.dts-this._dtsBase-l-E:_.length>=1?_[_.length-1].duration:Math.floor(this._videoMeta.refSampleDuration),x){var T=new s.SampleInfo(E,k,P,m.dts,!0);T.fileposition=m.fileposition,b.appendSyncPoint(T)}_.push({dts:E,pts:k,cts:A,units:m.units,size:m.length,isKeyframe:x,duration:P,originalDts:w,flags:{isLeading:0,dependsOn:x?2:1,isDependedOn:x?1:0,hasRedundancy:0,isNonSync:x?0:1}})}for((p=new Uint8Array(f))[0]=f>>>24&255,p[1]=f>>>16&255,p[2]=f>>>8&255,p[3]=255&f,p.set(o.default.types.mdat,4),S=0;S<_.length;S++)for(var C=_[S].units;C.length;){var R=C.shift().data;p.set(R,d),d+=R.byteLength}var O=_[_.length-1];if(r=O.dts+O.duration,n=O.pts+O.duration,this._videoNextDts=r,b.beginDts=c,b.endDts=r,b.beginPts=u,b.endPts=n,b.originalBeginDts=_[0].originalDts,b.originalEndDts=O.originalDts+O.duration,b.firstSample=new s.SampleInfo(_[0].dts,_[0].pts,_[0].duration,_[0].originalDts,_[0].isKeyframe),b.lastSample=new s.SampleInfo(O.dts,O.pts,O.duration,O.originalDts,O.isKeyframe),this._isLive||this._videoSegmentInfoList.append(b),i.samples=_,i.sequenceNumber++,this._forceFirstIDR){var I=_[0].flags;I.dependsOn=2,I.isNonSync=0}var L=o.default.moof(i,c);i.samples=[],i.length=0,this._onMediaSegment("video",{type:"video",data:this._mergeBoxes(L,p).buffer,sampleCount:_.length,info:b})}}},e.prototype._mergeBoxes=function(e,t){var r=new Uint8Array(e.byteLength+t.byteLength);return r.set(e,0),r.set(t,e.byteLength),r},e}();t.default=c},"./src/utils/browser.js":function(e,t,r){r.r(t);var n={};!function(){var e=self.navigator.userAgent.toLowerCase(),t=/(edge)\/([\w.]+)/.exec(e)||/(opr)[\/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(iemobile)[\/]([\w.]+)/.exec(e)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(firefox)[ \/]([\w.]+)/.exec(e)||[],r=/(ipad)/.exec(e)||/(ipod)/.exec(e)||/(windows phone)/.exec(e)||/(iphone)/.exec(e)||/(kindle)/.exec(e)||/(android)/.exec(e)||/(windows)/.exec(e)||/(mac)/.exec(e)||/(linux)/.exec(e)||/(cros)/.exec(e)||[],o={browser:t[5]||t[3]||t[1]||"",version:t[2]||t[4]||"0",majorVersion:t[4]||t[2]||"0",platform:r[0]||""},i={};if(o.browser){i[o.browser]=!0;var a=o.majorVersion.split(".");i.version={major:parseInt(o.majorVersion,10),string:o.version},a.length>1&&(i.version.minor=parseInt(a[1],10)),a.length>2&&(i.version.build=parseInt(a[2],10))}if(o.platform&&(i[o.platform]=!0),(i.chrome||i.opr||i.safari)&&(i.webkit=!0),i.rv||i.iemobile){i.rv&&delete i.rv;var s="msie";o.browser=s,i.msie=!0}if(i.edge){delete i.edge;var l="msedge";o.browser=l,i.msedge=!0}if(i.opr){var c="opera";o.browser=c,i.opera=!0}if(i.safari&&i.android){var u="android";o.browser=u,i.android=!0}for(var d in i.name=o.browser,i.platform=o.platform,n)n.hasOwnProperty(d)&&delete n[d];Object.assign(n,i)}(),t.default=n},"./src/utils/exception.js":function(e,t,r){r.r(t),r.d(t,{RuntimeException:function(){return i},IllegalStateException:function(){return a},InvalidArgumentException:function(){return s},NotImplementedException:function(){return l}});var n,o=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=function(){function e(e){this._message=e}return Object.defineProperty(e.prototype,"name",{get:function(){return"RuntimeException"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this._message},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this.name+": "+this.message},e}(),a=function(e){function t(t){return e.call(this,t)||this}return o(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"IllegalStateException"},enumerable:!1,configurable:!0}),t}(i),s=function(e){function t(t){return e.call(this,t)||this}return o(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"InvalidArgumentException"},enumerable:!1,configurable:!0}),t}(i),l=function(e){function t(t){return e.call(this,t)||this}return o(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"NotImplementedException"},enumerable:!1,configurable:!0}),t}(i)},"./src/utils/logger.js":function(e,t,r){r.r(t);var n=r("./node_modules/events/events.js"),o=r.n(n),i=function(){function e(){}return e.e=function(t,r){t&&!e.FORCE_GLOBAL_TAG||(t=e.GLOBAL_TAG);var n="["+t+"] > "+r;e.ENABLE_CALLBACK&&e.emitter.emit("log","error",n),e.ENABLE_ERROR&&(console.error?console.error(n):console.warn?console.warn(n):console.log(n))},e.i=function(t,r){t&&!e.FORCE_GLOBAL_TAG||(t=e.GLOBAL_TAG);var n="["+t+"] > "+r;e.ENABLE_CALLBACK&&e.emitter.emit("log","info",n),e.ENABLE_INFO&&(console.info?console.info(n):console.log(n))},e.w=function(t,r){t&&!e.FORCE_GLOBAL_TAG||(t=e.GLOBAL_TAG);var n="["+t+"] > "+r;e.ENABLE_CALLBACK&&e.emitter.emit("log","warn",n),e.ENABLE_WARN&&(console.warn?console.warn(n):console.log(n))},e.d=function(t,r){t&&!e.FORCE_GLOBAL_TAG||(t=e.GLOBAL_TAG);var n="["+t+"] > "+r;e.ENABLE_CALLBACK&&e.emitter.emit("log","debug",n),e.ENABLE_DEBUG&&(console.debug?console.debug(n):console.log(n))},e.v=function(t,r){t&&!e.FORCE_GLOBAL_TAG||(t=e.GLOBAL_TAG);var n="["+t+"] > "+r;e.ENABLE_CALLBACK&&e.emitter.emit("log","verbose",n),e.ENABLE_VERBOSE&&console.log(n)},e}();i.GLOBAL_TAG="flv.js",i.FORCE_GLOBAL_TAG=!1,i.ENABLE_ERROR=!0,i.ENABLE_INFO=!0,i.ENABLE_WARN=!0,i.ENABLE_DEBUG=!0,i.ENABLE_VERBOSE=!0,i.ENABLE_CALLBACK=!1,i.emitter=new(o()),t.default=i},"./src/utils/logging-control.js":function(e,t,r){r.r(t);var n=r("./node_modules/events/events.js"),o=r.n(n),i=r("./src/utils/logger.js"),a=function(){function e(){}return Object.defineProperty(e,"forceGlobalTag",{get:function(){return i.default.FORCE_GLOBAL_TAG},set:function(t){i.default.FORCE_GLOBAL_TAG=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"globalTag",{get:function(){return i.default.GLOBAL_TAG},set:function(t){i.default.GLOBAL_TAG=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"enableAll",{get:function(){return i.default.ENABLE_VERBOSE&&i.default.ENABLE_DEBUG&&i.default.ENABLE_INFO&&i.default.ENABLE_WARN&&i.default.ENABLE_ERROR},set:function(t){i.default.ENABLE_VERBOSE=t,i.default.ENABLE_DEBUG=t,i.default.ENABLE_INFO=t,i.default.ENABLE_WARN=t,i.default.ENABLE_ERROR=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"enableDebug",{get:function(){return i.default.ENABLE_DEBUG},set:function(t){i.default.ENABLE_DEBUG=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"enableVerbose",{get:function(){return i.default.ENABLE_VERBOSE},set:function(t){i.default.ENABLE_VERBOSE=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"enableInfo",{get:function(){return i.default.ENABLE_INFO},set:function(t){i.default.ENABLE_INFO=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"enableWarn",{get:function(){return i.default.ENABLE_WARN},set:function(t){i.default.ENABLE_WARN=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"enableError",{get:function(){return i.default.ENABLE_ERROR},set:function(t){i.default.ENABLE_ERROR=t,e._notifyChange()},enumerable:!1,configurable:!0}),e.getConfig=function(){return{globalTag:i.default.GLOBAL_TAG,forceGlobalTag:i.default.FORCE_GLOBAL_TAG,enableVerbose:i.default.ENABLE_VERBOSE,enableDebug:i.default.ENABLE_DEBUG,enableInfo:i.default.ENABLE_INFO,enableWarn:i.default.ENABLE_WARN,enableError:i.default.ENABLE_ERROR,enableCallback:i.default.ENABLE_CALLBACK}},e.applyConfig=function(e){i.default.GLOBAL_TAG=e.globalTag,i.default.FORCE_GLOBAL_TAG=e.forceGlobalTag,i.default.ENABLE_VERBOSE=e.enableVerbose,i.default.ENABLE_DEBUG=e.enableDebug,i.default.ENABLE_INFO=e.enableInfo,i.default.ENABLE_WARN=e.enableWarn,i.default.ENABLE_ERROR=e.enableError,i.default.ENABLE_CALLBACK=e.enableCallback},e._notifyChange=function(){var t=e.emitter;if(t.listenerCount("change")>0){var r=e.getConfig();t.emit("change",r)}},e.registerListener=function(t){e.emitter.addListener("change",t)},e.removeListener=function(t){e.emitter.removeListener("change",t)},e.addLogListener=function(t){i.default.emitter.addListener("log",t),i.default.emitter.listenerCount("log")>0&&(i.default.ENABLE_CALLBACK=!0,e._notifyChange())},e.removeLogListener=function(t){i.default.emitter.removeListener("log",t),0===i.default.emitter.listenerCount("log")&&(i.default.ENABLE_CALLBACK=!1,e._notifyChange())},e}();a.emitter=new(o()),t.default=a},"./src/utils/polyfill.js":function(e,t,r){r.r(t);var n=function(){function e(){}return e.install=function(){Object.setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Object.assign=Object.assign||function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(null!=n)for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])}return t},"function"!=typeof self.Promise&&r("./node_modules/es6-promise/dist/es6-promise.js").polyfill()},e}();n.install(),t.default=n},"./src/utils/utf8-conv.js":function(e,t,r){function n(e,t,r){var n=e;if(t+r<n.length){for(;r--;)if(128!=(192&n[++t]))return!1;return!0}return!1}r.r(t),t.default=function(e){for(var t=[],r=e,o=0,i=e.length;o<i;)if(r[o]<128)t.push(String.fromCharCode(r[o])),++o;else{if(r[o]<192);else if(r[o]<224){if(n(r,o,1)&&(a=(31&r[o])<<6|63&r[o+1])>=128){t.push(String.fromCharCode(65535&a)),o+=2;continue}}else if(r[o]<240){if(n(r,o,2)&&(a=(15&r[o])<<12|(63&r[o+1])<<6|63&r[o+2])>=2048&&55296!=(63488&a)){t.push(String.fromCharCode(65535&a)),o+=3;continue}}else if(r[o]<248){var a;if(n(r,o,3)&&(a=(7&r[o])<<18|(63&r[o+1])<<12|(63&r[o+2])<<6|63&r[o+3])>65536&&a<1114112){a-=65536,t.push(String.fromCharCode(a>>>10|55296)),t.push(String.fromCharCode(1023&a|56320)),o+=4;continue}}t.push(String.fromCharCode(65533)),++o}return t.join("")}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}return r.m=e,r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r("./src/index.js")}()},flv.exports=factory();var flvjs=getDefaultExportFromCjs(flv.exports);const type=3,exts=[],DirectDrivers=["Native","GoogleDrive"],Video=({file:e})=>{const{getSetting:t,password:r}=react.exports.useContext(IContext),{i18n:n}=useTranslation();let o=useDownLink();o=useEncrypt()(o);const i=DirectDrivers.includes(e.driver)?o:e.url;let a;return react.exports.useEffect((()=>{let r={container:"#video-player",title:e.name,url:i,autoplay:"true"===t("autoplay video"),autoMini:!0,autoSize:!0,playbackRate:!0,flip:!0,rotate:!0,aspectRatio:!0,fullscreen:!0,fullscreenWeb:!0,mutex:!0,light:!0,backdrop:!0,subtitleOffset:!0,miniProgressBar:!0,localVideo:!0,localSubtitle:!0,lang:"zh"===n.language?"zh-cn":"en",setting:!0,pip:!0,customType:{flv:function(e,t,r){const n=flvjs.createPlayer({type:"flv",url:t},{referrerPolicy:"no-referrer"});n.attachMediaElement(e),n.load()}}};return e.name.toLowerCase().endsWith(".flv")&&(r.type="flv"),a=new Artplayer(r),()=>{a&&a.destroy&&a.destroy()}}),[]),React$1.createElement(Box,{w:"full",className:"video-preview-box"},React$1.createElement(Box,{w:"full",h:"70vh",id:"video-player"}),React$1.createElement(Center,{mt:"2",w:"full"},React$1.createElement(HStack,{spacing:"2"},React$1.createElement(Button,{colorScheme:"telegram",as:chakra.a,href:`iina://weblink?url=${o}`},"IINA"),React$1.createElement(Button,{colorScheme:"yellow",as:chakra.a,href:`potplayer://${o}`},"PotPlayer"),React$1.createElement(Button,{colorScheme:"orange",as:chakra.a,href:`vlc://${o}`},"VLC"))))};var __glob_8_5=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",type:type,exts:exts,default:Video});const previews={"./preview/audio.tsx":__glob_8_0,"./preview/image.tsx":__glob_8_1,"./preview/markdown.tsx":__glob_8_2,"./preview/office.tsx":__glob_8_3,"./preview/pdf.tsx":__glob_8_4,"./preview/video.tsx":__glob_8_5},NoPreview=({file:e})=>{const{getSetting:t}=react.exports.useContext(IContext),r=e.name.split(".").pop()||"",n=useDownLink(),{t:o}=useTranslation(),i=useEncrypt();return React$1.createElement(Center,{className:"no-preview",p:"4"},React$1.createElement(VStack,{spacing:"8"},React$1.createElement(Icon,{color:t("icon color")||"teal.300",boxSize:20,as:getIcon(e.type,r)}),React$1.createElement(Heading,{size:"md"},e.name),React$1.createElement(Button,{onClick:()=>{window.open(i(n),"_blank")}},o("Download"))))},FilePreview=()=>{const{files:e}=react.exports.useContext(IContext);useTitle(e[0].name);for(const t in previews){const r=previews[t],n=r.default;if(r.type===e[0].type||r.exts.includes(e[0].name.split(".").pop()))return React$1.createElement(n,{file:e[0]})}return React$1.createElement(NoPreview,{file:e[0]})};export{FilePreview as default};
